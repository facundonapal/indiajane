function dispose(e) {
    for (var t in e)
        isNaN(parseInt(t)) && dispose(e[t]);
    delete e
}
function assert(e, t) {
    return e === !1 ? (window.dev.error(t),
    !1) : !0
}
function staticBlockComponentFactory(e, t) {
    function n(e, t) {
        var n = this;
        n.website = e,
        n.customer = t
    }
    angular.module("tcoStore").component(e, _.extend({
        controller: n,
        controllerAs: "vm",
        bindings: {
            custom: "<"
        }
    }, t)),
    n.$inject = ["website", "customer"]
}
function wideImageSortFilter(e) {
    function t(t, o, s, a) {
        if (!t || !t.length || !o)
            return t;
        var r = s ? _.pluck(t, s) : t
          , c = o + "/" + r.join(",");
        if (void 0 === i[c]) {
            var l = n
              , d = []
              , u = function(t, i) {
                var r = s ? t[s] : t
                  , c = e.get(r);
                if (c && c.data) {
                    var u = function(e) {
                        try {
                            var t = e.data[a] || e.data.colspan || 1;
                            return o * t
                        } catch (n) {
                            return o || 1
                        }
                    }
                      , p = function(e) {
                        return i || u(e) <= l
                    }
                      , m = function(e) {
                        var i = u(e);
                        l -= i;
                        var o = 1 > l;
                        return o && (l = n),
                        {
                            id: e.id,
                            item: t,
                            colSpan: i,
                            lastInRow: o
                        }
                    };
                    if (!i) {
                        var f = _.find(d, p);
                        if (f)
                            return d = _.without(d, f),
                            d.push(c),
                            m(f)
                    }
                    return p(c) ? m(c) : void d.push(c)
                }
            }
              , p = _.map(t, function(e) {
                return u(e, !1)
            });
            _.each(d, function(e) {
                p.push(u(e, !0))
            }),
            i[c] = _.compact(p)
        }
        return i[c]
    }
    var n = 12
      , i = {};
    return t
}
function clickEventDirectiveFactory(e, t) {
    angular.module("tcoStore").directive(e, function() {
        function n(n, i, o) {
            i.bind("click", function() {
                n.$root.$broadcast(t, o[e])
            })
        }
        return {
            restrict: "A",
            link: n,
            scope: !1
        }
    })
}
function hoverEventDirectiveFactory(e, t, n, i) {
    angular.module("tcoStore").directive(e, function() {
        function o(o, s, a) {
            function r() {
                s.bind("mouseenter", c),
                s.bind("mouseleave", l),
                i && _.each(_.compact(_.union([t, n], i)), function() {
                    o.$on(i, p)
                })
            }
            function c() {
                p(),
                g() && (v = window.setTimeout(d, m()))
            }
            function l() {
                p(),
                g() && (v = window.setTimeout(u, f()))
            }
            function d() {
                o.$root.$broadcast(t, a[e])
            }
            function u() {
                o.$root.$broadcast(n, a[e])
            }
            function p() {
                window.clearTimeout(v)
            }
            function m() {
                return a.inDelay ? parseInt(a.inDelay, 10) : 300
            }
            function f() {
                return a.outDelay ? parseInt(a.outDelay, 10) : 300
            }
            function g() {
                return void 0 === a[e + "Active"] || 1 === a[e + "Active"] || "1" === a[e + "Active"] || "true" === a[e + "Active"]
            }
            var v;
            r()
        }
        return {
            restrict: "A",
            link: o,
            scope: !1
        }
    })
}
function zippyFactory(e, t) {
    function n() {
        function n(n, o, c) {
            function l(t, i, o) {
                if (a(i, c)) {
                    var s = void 0 === o ? g() : !o;
                    s || n.$root.$broadcast(e + ".hide-group", r(c), i),
                    h(!s)
                }
            }
            function u(e, t) {
                return l(e, t, !0)
            }
            function p(t, n, i) {
                !y && d(c, n) && (i.isAnyOpen || g() && (i.isAnyOpen = !0),
                c[e + "Auto"] && i.items.push(n))
            }
            function m(t, i) {
                var o = {
                    isAnyOpen: !1,
                    items: []
                };
                n.$root.$broadcast(e + ".group.isOpenCheck", i, o),
                o.isAnyOpen || n.$root.$broadcast(e + ".open", _.first(o.items))
            }
            function f(e, t) {
                return l(e, t, !1)
            }
            function g() {
                return !o.hasClass(i)
            }
            function v(e, t, n) {
                n != s(c) && t == r(c) && h(!1)
            }
            function h(t) {
                o.toggleClass(i, !t),
                n.$root.$broadcast(e + ".change", s(c), t)
            }
            function b() {
                h(!1)
            }
            function w() {
                y = !0,
                c[e + "Auto"] && n.$broadcast(e + ".openAny", s(c))
            }
            var y = !1;
            n.$on(e + ".toggle", l),
            n.$on(e + ".open", u),
            n.$on(e + ".close", f),
            n.$on(e + ".openAny", m),
            n.$on(e + ".group.isOpenCheck", p),
            n.$on("$destroy", w),
            t && t.allowMany || n.$on(e + ".hide-group", v),
            t && t.hideOn && _.each(t.hideOn, function(e) {
                n.$on(e, b)
            });
            var k = c[e + "Default"];
            h(k && "0" != k && "false" != k);
            var S = c[e + "Auto"];
            S && !g() && n.$broadcast(e + ".openAny", s(c))
        }
        var i = "ng-hide";
        return {
            restrict: "A",
            link: n
        }
    }
    function i() {
        function t(t, n, i) {
            function o(t, o, a) {
                o === s(i) && u(e, n, a, i)
            }
            t.$on(e + ".change", o)
        }
        return {
            restrict: "A",
            link: t
        }
    }
    function o() {
        function t(t, n, i) {
            function o(t, o, s) {
                d(i, o) && u(e + "Group", n, s, i)
            }
            t.$on(e + ".change", o)
        }
        return {
            restrict: "A",
            link: t
        }
    }
    function s(t) {
        var n = t[e + "Name"] || t[e] || t[e + "Open"] || t[e + "Toggle"] || t[e + "Hover"];
        return window.assert(n, "Could not identify " + e + " name"),
        n
    }
    function a(e, t) {
        if (!e)
            return !1;
        var n = s(t);
        return e === n ? !0 : "*" === l(e) && c(e) === c(n) ? !0 : !1
    }
    function r(t) {
        var n = t[e + "GroupName"] || c(s(t));
        return window.assert(n, "Could not identify " + e + " name"),
        n
    }
    function c(e) {
        return window.assert(e, "Calling extract without group name") ? t && t.singleton ? e : e.split(".")[0] : void 0
    }
    function l(e) {
        return window.assert(e, "Calling extract without group name") ? t && t.singleton ? e : e.split(".")[1] : void 0
    }
    function d(e, t) {
        return r(e) == c(t)
    }
    function u(e, t, n, i) {
        _.chain(i[e + "Class"].split(" ")).compact().each(function(e) {
            "!" == e[0] ? t.toggleClass(e.substr(1), !n) : t.toggleClass(e, !!n)
        })
    }
    clickEventDirectiveFactory(e + "Toggle", e + ".toggle"),
    clickEventDirectiveFactory(e + "Open", e + ".open"),
    clickEventDirectiveFactory(e + "Close", e + ".close"),
    hoverEventDirectiveFactory(e + "Hover", e + ".open", e + ".close", [e + ".toggle"]),
    angular.module("tcoStore").directive(e, n),
    angular.module("tcoStore").directive(e + "Class", i),
    angular.module("tcoStore").directive(e + "GroupClass", o)
}
function LocalCheckoutButtonController(e, t, n, i, o, s) {
    function a() {
        if (s.isTradeStore()) {
            var e = n.basket
              , o = !1;
            e && e.data && e.data.items && (o = !!_.find(e.data.items, function(e) {
                if (e.product) {
                    var t = i.get(e.product);
                    if (t && t.data && e.request.qty)
                        return c(t.data, e.request.qty)
                }
            })),
            d.minOrderValue = !(t && t.min_order_value && e && e.data && e.data.totals && e.data.totals.subtotal && t.min_order_value / 1.2 > e.data.totals.subtotal + (e.data.totals.discount || 0)),
            d.isDisabled = d.hasOutOfStockItems || !d.minOrderValue || o
        }
    }
    function r(e) {
        return _.some(e || n.basket.getItemsForStockCheck(), function(e) {
            return !o.isSelable(e.id, e.qty)
        })
    }
    function c(e, t) {
        return e && e.min_trade_qty && t ? e.min_trade_qty && t && e.min_trade_qty > t : !1
    }
    function l() {
        var e = n.basket.getItemsForStockCheck();
        return u > p || !o.hasModelsData(_.pluck(e, "id")) ? void u++ : (u = 0,
        d.hasOutOfStockItems = r(e),
        void a())
    }
    var d = this
      , u = 0
      , p = 5;
    d.minOrderValue = !0,
    d.isDisabled = !1,
    d.website = t,
    d.customer = n;
    var m = window.setInterval(l, 500);
    e.$watch("vm.customer.basket.data.qty", a),
    e.$on("customerDataUpdate", a),
    e.$on("basketDataUpdate", a),
    e.$on("$destroy", function() {
        window.clearInterval(m)
    })
}
function LocalOffCanvasController(e, t, n, i) {
    function o(e, t) {
        t.columns ? (e.preventDefault(),
        l.isNextLevel = !0,
        l.menu = t) : c()
    }
    function s() {
        l.isNextLevel = !1,
        setTimeout(c, 500)
    }
    function a() {
        l.isSearch = !l.isSearch
    }
    function r() {
        return n.logout()
    }
    function c() {
        delete l.menu,
        l.isSearch = !1,
        l.isNextLevel = !1
    }
    var l = this;
    l.website = t,
    l.isSearch = !1,
    l.isNextLevel = !1,
    l.nextLevel = o,
    l.goBack = s,
    l.searchToggle = a,
    l.logout = r,
    l.isWholesalePageNotLogged = i.isWholesalePageNotLogged,
    e.$watch(function() {
        l.customer_logged = n.data.logged
    }),
    e.$on("$locationChangeStart", function() {
        c()
    }),
    e.$on("closeOffCanvasRequest", function() {
        c()
    }),
    e.$on("hide-minisearch-hint", function() {
        e.close(),
        c()
    })
}
function LocalPageHeaderController(e, t) {
    function n() {
        o.visibleMinisearch = !o.visibleMinisearch,
        o.visibleMinisearch && e.$root.focusOn("minisearch-input")
    }
    function i() {
        o.visibleMinisearch = !1
    }
    var o = this;
    o.visibleMinisearch = !1,
    o.closeMinisearch = i,
    o.toggleMinisearch = n,
    o.isWholesalePageNotLogged = t.isWholesalePageNotLogged,
    e.$on("$locationChangeStart", i),
    e.$on("hide-minisearch-hint", i),
    e.$on("minisearch-hint.hide", i)
}
function LocalCategoryController(e, t, n) {
    function i() {
        if (n.general.catalog_open_filters)
            switch (n.general.catalog_open_filters) {
            case 1:
                o(!0);
                break;
            case 3:
                o(_.isUndefined(t.catalog_filters_open) ? !0 : t.catalog_filters_open);
                break;
            case 4:
                o(_.isUndefined(t.catalog_filters_open) ? !1 : t.catalog_filters_open);
                break;
            default:
                o(!1)
            }
    }
    function o(n) {
        s.isOpen = _.isUndefined(n) ? !s.isOpen : !!n,
        t.catalog_filters_open = s.isOpen,
        setTimeout(function() {
            e.$broadcast("stickyCheckRequest")
        }, 1e3)
    }
    var s = this;
    s.isOpen = !1,
    s.toggle = o,
    i()
}
function LocalListingController(e, t, n) {
    function i() {
        var e = !0
          , t = _.reduce(a.selection, function(e, t, n) {
            return _.isArray(t) ? e + _.size(t) : "price" === n ? e + 1 : e
        }, 0);
        try {
            "position" === r.code[0] && r.reverse === !1 && (e = !1)
        } catch (n) {}
        o.hideBanner = e || !!t
    }
    var o = this;
    o.hideBanner = !1;
    var s = n.nearest(e, "modelsNamePrependix") || "product-list"
      , a = t.getModel(s + "-filters")
      , r = t.getModel(s + "-sort");
    e.$on(s + "-listing-updated", i)
}
function carouselComponentFactory(e, t) {
    function n(e, t, n, i, o) {
        function s() {
            e.$on("carousel.prev", l),
            e.$on("carousel.next", c),
            e.$on("carousel.pause", d),
            e.$on("carousel.unpause", u),
            $.pauseOnHover && (o.on("mouseenter", d),
            o.on("mouseleave", u))
        }
        function a(e) {
            e.frames && w(),
            e.framesInSlide && b(),
            e.framesInStep && y(),
            e.transitionInterval && k()
        }
        function r() {
            clearInterval(x)
        }
        function c() {
            return g(M)
        }
        function l() {
            return g(-1 * M)
        }
        function d() {
            I = !0,
            k()
        }
        function u() {
            k(),
            I = !1
        }
        function p(e) {
            return k(),
            v(e * C, !0)
        }
        function m() {
            return Math.floor(1e4 / C) / 100
        }
        function f() {
            $.fade || ($.frameStyle = {
                width: m() + "%",
                display: "inline-block"
            })
        }
        function g(e) {
            v($.currentShift + e)
        }
        function v(t) {
            var n = D - C;
            t > n ? t = $.loop ? 0 : n : 0 > t && (t = $.loop ? n : 0),
            $.currentShift = t,
            $.fade || ($.innerStyle.left = "-" + $.currentShift * m() + "%"),
            $.ready = !0,
            $.activeStepIndex = Math.ceil($.currentShift / C),
            i(function() {
                e.$root.$broadcast("imagesRecheckRequest")
            }, 150),
            i(function() {
                e.$root.$broadcast("imagesRecheckRequest")
            }, 1e3),
            e.$root.$broadcast("carousel.shift", $.activeStepIndex, $.custom, $.carouselId, $.currentShift)
        }
        function h() {
            I || c()
        }
        function b() {
            C = parseInt($.framesInSlide, 10) || 1,
            S(),
            U(),
            O(0)
        }
        function w() {
            $.framesList = $.frames ? _.unique($.frames) : [],
            D = $.framesList ? $.framesList.length : 0,
            S(),
            p(0)
        }
        function y() {
            M = parseInt($.framesInStep, 10) || 1,
            S(),
            O(0)
        }
        function k() {
            clearInterval(x),
            $.interval && (x = window.setInterval(h, $.interval))
        }
        function S() {
            $.steps && delete $.steps;
            var e = M && D ? Math.ceil(D / M) : 0;
            e && ($.steps = _.range(e)),
            $.manySteps = e > 1
        }
        var $ = this;
        $.website = t,
        $.customer = n,
        $.currentShift = 0;
        var x, C = 1, D = 0, M = 1, I = !1, U = _.debounce(f, 20);
        $.innerStyle = {
            left: 0
        },
        $.ready = !1;
        var O = _.debounce(g, 20);
        $.next = c,
        $.prev = l,
        $.pause = d,
        $.unpause = u,
        $.goToStep = p,
        $.$onInit = s,
        $.$onChanges = a,
        $.$onDestroy = r
    }
    angular.module("tcoStore").component(e, _.extend({
        controller: n,
        controllerAs: "vm",
        bindings: {
            frames: "<",
            framesInSlide: "<",
            framesInStep: "<",
            interval: "<",
            pauseOnHover: "@",
            loop: "<",
            fade: "<",
            carouselId: "@",
            custom: "<"
        }
    }, t)),
    n.$inject = ["$scope", "website", "customer", "$timeout", "$element"]
}
function InstagramFeedController(e) {
    var t = this;
    e.find({
        verbosity: 1
    }, {
        limit: 4,
        sort: {
            created_at: -1
        }
    }).success(function(e) {
        t.posts = _.pluck(e, "data")
    })
}
function PostsBlockController(e, t, n) {
    var i = this;
    i.website = e,
    i.customer = t,
    i.ready = !1,
    n.loadCollection(i.component.posts, {
        verbosity: 2
    }).then(function() {
        i.ready = !0
    })
}
function selectedProductsController(e, t, n, i) {
    function o() {
        s.component && (s.productsId = _.pluck(s.component.product, "id"),
        n.loadCollection(s.productsId, {
            verbosity: 2
        }).success(function() {
            s.allProducts = n.getModelsData(s.productsId)
        }).error(function() {
            s.allProducts = []
        }))
    }
    var s = this;
    s.website = e,
    s.customer = t,
    s.$onChanges = o
}
window.tco = {
    time: window.tcoZeroTime,
    logTime: function(e, t, n, i) {
        if (window.logverbosity && (_.isUndefined(n) && (n = 1),
        _.isUndefined(i) && (i = 0),
        !(n > window.logverbosity))) {
            var o = ["", "color: #469946;"]
              , s = "undefined" == typeof performance.now ? Date.now() : performance.now();
            !_.isUndefined(t) && t && (window.tco.time = window.tcoZeroTime = s),
            console.log("%c" + Math.round(s - window.tcoZeroTime) + "ms	+" + Math.round(s - window.tco.time) + "ms	" + e, o[i]),
            window.tco.time = s
        }
    },
    empty: function(e) {
        return "undefined" == typeof e ? !0 : "object" == typeof e ? null === e ? !0 : "undefined" != typeof e.length ? e.length ? !1 : !0 : Object.keys(e).length ? !1 : !0 : e ? !1 : !0
    },
    pathVal: function(e, t) {
        try {
            var n, i = t.split("."), o = i.length;
            for (n = 0; o > n; n++)
                e = e[i[n]];
            return e
        } catch (s) {
            return null
        }
    },
    loadedPaths: [],
    loadCss: function(e) {
        tco.loadedPaths.indexOf(e) > -1 || (tco.loadedPaths.push(e),
        setTimeout(function() {
            var t = document.createElement("link");
            t.setAttribute("rel", "stylesheet"),
            t.setAttribute("href", e),
            t.setAttribute("type", "text/css"),
            document.getElementsByTagName("head")[0].appendChild(t)
        }, 10))
    },
    benchmark: {
        points: {},
        meta: {},
        point: function(e, t) {
            window.logverbosity && e && (_.isUndefined(tco.benchmark.points[e]) && (tco.benchmark.points[e] = []),
            tco.benchmark.points[e].push({
                time: performance.now(),
                label: t
            }))
        },
        start: function(e) {
            _.isUndefined(tco.benchmark.meta[e]) && (tco.benchmark.meta[e] = {
                calls: 0
            }),
            tco.benchmark.meta[e].calls++,
            tcologTime(e + " [start benchmark]", !1, 1, 1),
            tco.benchmark.point(e, "start")
        },
        stop: function(e, t) {
            if (window.logverbosity && e) {
                tco.benchmark.point(e, "stop" + (t ? " (" + t + ")" : ""));
                var n, i, o = [], s = tco.benchmark.meta[e];
                o.push(e + " [call: " + s.calls + "]"),
                _.map(tco.benchmark.points[e], function(e) {
                    _.isUndefined(n) && (i = n = e.time),
                    o.push(Math.round(e.time - n) + "ms	" + e.label),
                    n = e.time
                }),
                o.push("TOTAL:	" + Math.round(n - i) + "ms"),
                dispose(tco.benchmark.points[e]),
                delete tco.benchmark.points[e],
                tco.logTime(o.join("\n		"), !1, 1)
            }
        }
    },
    get: function(e) {
        return angular.element(document.querySelectorAll("html")).injector().get(e)
    }
},
window.tcologTime = tco.logTime,
window.dev = {
    isDev: function() {
        return void 0 === window.dev.isDeveloper && (window.dev.isDeveloper = tco.get("config").isDeveloper),
        window.dev.isDeveloper
    },
    log: function() {
        window.dev.isDev() && console.log.apply(this, arguments)
    },
    error: function() {
        window.dev.isDev() ? console.error.apply(this, arguments) : window.tco.logger.handleMessage("error", Array.prototype.slice.call(arguments))
    }
},
function() {
    function e(e) {
        r.push(e)
    }
    function t() {
        var e = "live";
        switch (e) {
        case "dev":
            e = "development";
            break;
        case "live":
            e = "production"
        }
        return e
    }
    function n() {
        return _.pick(navigator, ["appCodeName", "appName", "appVersion", "NetworkInformation", "cookieEnabled", "geolocation", "language", "maxTouchPoints", "mediaDevices", "userAgent", "vendor"])
    }
    function i() {
        return {
            width: window.innerWidth,
            height: window.innerHeight
        }
    }
    function o(e, t) {
        var n = t[0];
        "object" == typeof n && n.message && (n = n.message);
        var i = "string" == typeof n ? n : JSON.stringify(n, function a(a) {
            var e = 0;
            return function(t, n) {
                return 0 !== e && "object" == typeof a && "object" == typeof n && a == n ? "[Circular]" : e >= 29 ? "[Unknown]" : (++e,
                n)
            }
        })
          , o = Date.now()
          , s = l[i];
        (!s || o - s > d) && r.forEach(function(i) {
            try {
                i.apply(this, [e, n, t, (new Error).stack])
            } catch (o) {
                c.error(o)
            }
        }),
        l[i] = o
    }
    function s(e) {
        return u[e] || 7
    }
    function a() {
        var e = window.onerror;
        window.onerror = function(t, n, i, s, a) {
            "function" == typeof e && e.apply(this, arguments),
            o("exception", arguments)
        }
        ,
        "debug,info,warn,warning,error,critical,debug".split(",").forEach(function(e) {
            var t = window.console[e];
            c[e] = t,
            window.console[e] = function() {
                t.apply(this, arguments),
                o(e, Array.prototype.slice.call(arguments))
            }
        })
    }
    var r = []
      , c = {}
      , l = {}
      , d = 2e4
      , u = {
        exception: 1,
        critical: 2,
        error: 3,
        warn: 4,
        log: 5,
        debug: 6
    };
    window.tco.logger = {
        info: {
            version: "17afb9b1c55b35447e028ff32ec73f98cefa028a@1.5.347",
            environment: t(),
            browser: n(),
            appInfo: i
        },
        "native": c,
        subscribe: e,
        toLevel: s,
        handleMessage: o,
        dev: window.dev
    },
    a()
}(),
"scrollRestoration"in history && (history.scrollRestoration = "manual"),
document.scrollingElement || (document.scrollingElement = document.documentElement.scrollHeight > document.body.scrollHeight && 0 == document.compatMode.indexOf("CSS1") ? document.documentElement : document.body);
var tcoStore = angular.module("tcoStore", ["ngRoute", "checklist-model", "ngDialog"]).run(["$rootScope", "$animate", "transport", "core", "browser", "category", "product", "page", "post", "postCategory", "stock", "search", "ngDialog", "customer", "localConfig", "router", "$location", "smoothScroll", function(e, t, n, i, o, s, a, r, c, l, d, u, p, m, f, g, v, h) {
    if (!_.isUndefined(f.useCoreBreakpoints) && f.useCoreBreakpoints) {
        e.isTouchy = o.touchy;
        var b = function() {
            var t = window.innerWidth;
            (e.isS = 520 > t) && (e.size = "S") && (e.sizeId = 0),
            (e.isM = t >= 520 && 850 > t) && (e.size = "M") && (e.sizeId = 1),
            (e.isL = t >= 850 && 1400 > t) && (e.size = "L") && (e.sizeId = 2),
            (e.isX = t >= 1400) && (e.size = "X") && (e.sizeId = 3),
            e.$broadcast("resize", e.size)
        };
        window.addEventListener("resize", b, !0),
        b();
        for (var w = 1; 5 >= w; w++)
            setTimeout(b, 200 * w)
    }
    _.isUndefined(window.autoInitData) || (i.processSuccessResult(window.autoInitData.data),
    delete window.autoInitData),
    e.tcologTime = function(e) {
        return window.tcologTime(e)
    }
    ,
    o.prerender && t.enabled(!1);
    var y = null
      , k = 0
      , S = function() {
        return y && window.clearTimeout.cancel(y),
        k > 50 ? (tcologTime("50 iterations waiting for ready"),
        window.prerenderReady = !0,
        void e.$broadcast("_prerenderReady")) : void (document.querySelector("[ng-view] img.busy") ? (k++,
        y = window.setTimeout(S, 1e3)) : (tcologTime("prerenderReady"),
        window.prerenderReady = !0,
        e.$broadcast("_prerenderReady")))
    };
    e.$on("$locationChangeStart", function(e, t) {
        tco.empty(window._tcoPageReloadNeeded) || (window.location.href = t)
    }),
    e.$on("$routeChangeStart", function() {
        window.prerenderReady = !1,
        k = 0,
        p.close()
    }),
    o.prerender && (e.$on("$viewContentLoaded", S),
    e.$on("$routeChangeError", S)),
    window.onbeforeunload = function(t) {
        e.$broadcast("beforeUnload", t)
    }
    ;
    var $;
    e.toggleMinibasket = function(t) {
        window.clearTimeout($),
        e.$broadcast("toggleMinibasket", {
            to: t
        })
    }
    ,
    e.toggleMinibasketDelay = function(t, n) {
        window.clearTimeout($),
        n || (n = 1e3),
        $ = window.setTimeout(function() {
            e.$broadcast("toggleMinibasket", {
                to: t
            })
        }, n)
    }
    ,
    e["goto"] = function(e) {
        v.path(e)
    }
    ,
    e.scrollTo = function(t, n) {
        try {
            _.isNumber(t) ? element = t : _.isString(t) ? element = document.querySelectorAll(t)[0] : element = t,
            h(element, n),
            e.$broadcast("preventAutoScroll.request")
        } catch (i) {}
    }
    ,
    e.focusOn = function(e) {
        var t = document.getElementById(e);
        t && t.focus()
    }
    ,
    setInterval(function() {
        e.isLoggedIn = m.data.logged
    }, 100),
    e.interval = function(e, t, n) {
        n || (n = this);
        var i = window.setInterval(e, t);
        n.$on("$destroy", function() {
            window.clearInterval(i)
        })
    }
    ,
    e.applyDebouced = _.debounce(function() {
        return console.log("debioynd"),
        e.$$phase ? void 0 : e.$applyAsync()
    }, 50),
    g.preLoad(v.path())
}
]);
angular.module("tcoStore").controller("MainController", ["$scope", "router", "website", "transport", "localConfig", "browser", "structuralData", "gtm", "$location", "$injector", "$q", "config", "$filter", "$interval", "tools", function(e, t, n, i, o, s, a, r, c, l, d, u, p, m, f) {
    function g() {
        var e = t.currentPath || c.path();
        return "/home" == e && (e = "/"),
        e
    }
    function v() {
        if (!t.metaData || !t.metaData.ogimageFinal) {
            var e = t.metaData && t.metaData.ogimage ? t.metaData.ogimage : t.modelData && t.modelData.image ? t.modelData.image : null;
            if (e) {
                var n = 500
                  , i = 500
                  , o = f.imagePathToUrl(e);
                t.metaData.ogimageHeight = i,
                t.metaData.ogimageWidth = n,
                t.metaData.ogimageFinal = f.imagePathToUrl(u.api.thumbor) + "/unsafe/" + t.metaData.ogimageWidth + "x" + t.metaData.ogimageHeight + "/" + o
            }
        }
    }
    function h() {
        $ = g(),
        window.setTimeout(b, o.contentViewDelay > 0 ? o.contentViewDelay : 300)
    }
    function b() {
        var n = g();
        t.busy || n != $ || r.contentView(t.model, n, e.metaData)
    }
    function w() {
        function i() {
            var t = _.findWhere(e.alternates, {
                id: _.findWhere(n.stores, {
                    "default": 1
                }).id
            });
            t && o(_.defaults({
                lang: "x-default"
            }, _.clone(t)))
        }
        function o(t) {
            var i = _.findWhere(e.alternates, {
                lang: t.lang
            });
            i && _.findWhere(n.stores, {
                "default": 1,
                id: t.id
            }) && (e.alternates.splice(e.alternates.indexOf(i), 1),
            i = void 0),
            i || e.alternates.push(t)
        }
        function a() {
            var e = {}
              , t = {};
            return _.each(n.stores, function(n) {
                var i = n.lang.toLowerCase().split("_");
                t[i[0]] || (t[i[0]] = 0),
                t[i[0]]++,
                e[n.lang] = {
                    one: i[0],
                    many: i[0] + "-" + i[1]
                }
            }),
            _.each(e, function(n, i) {
                e[i] = t[n.one] > 1 ? n.many : n.one
            }),
            e
        }
        if (u.isDeveloper || s.prerender) {
            var r, c = a(), m = t.model;
            if (m && n.stores && n.stores.length) {
                switch (m.className) {
                case "product":
                case "category":
                    r = _.compact(_.map(n.stores, function(e) {
                        return e.id != n.store ? {
                            store: e,
                            filter: {
                                _store: e.id,
                                id: m.id
                            }
                        } : void 0
                    }));
                    break;
                case "post":
                case "page":
                    m.data.meta.alternates || (r = _.compact(_.map(n.stores, function(e) {
                        try {
                            if (e.id != n.store) {
                                var t = m.data.meta.alternate[e.id];
                                if (t)
                                    return {
                                        store: e,
                                        filter: {
                                            _store: e.id,
                                            id: t
                                        }
                                    }
                            }
                        } catch (i) {}
                        return void 0
                    })))
                }
                if (e.alternates = [],
                r) {
                    var f = l.get(m.className);
                    d.all(_.map(r, function(e) {
                        return d(function(n, i) {
                            var s = f.find(e.filter, {
                                verbosity: 3
                            }, !0);
                            s.then(function(i) {
                                try {
                                    if (m === t.model) {
                                        var s = _.first(i.data[m.className]);
                                        o({
                                            id: e.store.id,
                                            lang: c[e.store.lang],
                                            href: e.store.url.replace(/\/$/, "") + (s.meta.canonical || s.url)
                                        })
                                    }
                                } catch (a) {}
                                n()
                            })["catch"](n)
                        })
                    })).then(function() {
                        m === t.model && i()
                    })
                } else
                    m.data.meta.alternates && _.each(m.data.meta.alternates, o);
                o({
                    id: n.store,
                    lang: c[n.locale.code] || n.locale.code.toLowerCase().split("_")[0],
                    href: p("pathToUrl")(m.data.meta.canonical || m.data.url)
                }),
                i()
            }
        }
    }
    if (u.isDeveloper) {
        var y = 0;
        e.$watch(function() {
            y++,
            y % 300 || console.log("%c Warning! High scope apply count: " + y, "color: #cf3212")
        })
    }
    o.noAutoApply || m(function() {}, 500);
    var k = "MainController";
    tco.benchmark.start(k),
    e.isPrerender = s.prerender,
    e.$on("resize", function() {
        e.$$phase || e.$root.$$phase || e.$apply()
    }),
    e.$on("privacy.update", r.pushPrivacySettings),
    r.pushPrivacySettings(),
    e.baseUrl = n.baseUrl,
    e.router = t,
    e.$root.$on("router.next", function() {
        var n = t.metaData;
        n && ["canonical", "url"].forEach(function(e) {
            "/home" == n[e] && (n[e] = "/")
        }),
        e.metaData = n,
        v(),
        h(),
        "product" == tco.pathVal(t, "model.className") && (n.fbavailability = a.getProductAvailability(t.model.data.id, !0),
        n.availability = a.getProductAvailability(t.model.data.id, !1)),
        (u.isDeveloper || s.prerender) && (a.updateStructuralData(),
        w())
    }),
    e.meganavStatus = i.getModel("meganavActive", void 0, {
        storage: "static"
    }),
    e.$watch("meganavStatus", function(t) {
        e.$root.isMeganavOpen = e.isMeganavOpen = _.max(_.values(t)) > 0
    }, !0),
    e.minibasketStatus = i.getModel("minibasketStatus", void 0, {
        storage: "static"
    }),
    e.$watch("minibasketStatus.visible", function(t) {
        e.isMinibasketOpen = t
    }, !0);
    try {
        e.lang = n.locale.code.toLowerCase().replace("_", "-") || "en-gb",
        e.locale = n.locale.code || "en_GB"
    } catch (S) {
        e.lang = "en-gb",
        e.lang = "en_GB"
    }
    tco.benchmark.stop(k);
    var $
}
]),
window.tcoStore.directive("tcoAddress", function() {
    return {
        restrict: "A",
        scope: {
            address: "="
        },
        templateUrl: "/views/widget/address.html"
    }
}),
window.tcoStore.directive("tcoAddressForm", ["website", "formHelper", "customer", "postcodeanywhere", function(e, t, n, i) {
    var o = 0;
    return {
        restrict: "A",
        scope: {
            address: "=",
            sourceForm: "=?",
            useBodyTemplate: "=",
            withemail: "@",
            status: "=",
            custom: "=?",
            successCallback: "="
        },
        template: '<div ng-include="contentUrl"></div>',
        controller: ["$scope", function(s) {
            function a() {
                s.sourceForm || s.useBodyTemplate ? (s.form = s.sourceForm,
                s.data = s.address,
                s.$watch("address", function() {
                    s.data = s.address
                })) : (s.address && (s.data = _.clone(s.address)),
                s.form = {
                    submitted: !1
                }),
                _.isUndefined(s.data) && (s.data = {}),
                _.isUndefined(s.data.country_id) && _.isUndefined(s.data.id) && (s.data.country_id = e.defaultCountry),
                s.data.is_billing && (s.data.is_billing = 1),
                s.data.is_shipping && (s.data.is_shipping = 1)
            }
            s.countries = e.countries,
            s.innerStatus = {},
            s.$watch("address", a),
            a(),
            s.lookedup = !_.isUndefined(s.data.id) && s.data.id && s.data.city,
            s.prefix = "af_" + o++ + "__",
            s.contentUrl = "/blocks/" + (s.parentForm || s.useBodyTemplate ? "addressForm/body.html" : "addressForm.html"),
            s.postcodeanywhere = i,
            s.manual = !1,
            s.setForm = function(e) {
                s.form = e
            }
            ,
            s.required = function(e) {
                return s.form.submitted && !s.data[e]
            }
            ,
            s.getList = _.debounce(function() {
                if (s.busy = 1,
                s.data.postcode) {
                    var e = s.postcodeanywhere.getList(s.data.postcode);
                    e && (e.success(function(e) {
                        e.error ? (s.manual = 1,
                        s.state = "view") : (s.list = e,
                        s.state = "list"),
                        s.busy = !1
                    }),
                    e.error(function() {
                        s.manual = 1,
                        s.state = "view",
                        s.busy = !1
                    }))
                }
            }, 200),
            s.getView = function(e) {
                var t = s.postcodeanywhere.getView(e);
                if (t)
                    return t.then(function(e) {
                        _.extend(s.data, e.data),
                        s.state = "view",
                        s.lookedup = 1
                    }, function() {
                        s.manual = 1,
                        s.state = "view",
                        s.busy = !1
                    }),
                    t
            }
            ,
            s.closeList = function() {
                s.state = ""
            }
            ,
            s.reset = function() {
                s.isenabled = s.data.country_id == e.pca_country,
                s.country = _.findWhere(e.countries, {
                    code: s.data.country_id
                })
            }
            ,
            s.reset(),
            s.$watch("data.country_id", function(e, t) {
                _.isUndefined(e) || _.isUndefined(t) || !e || e == t || (s.data.region_id = null)
            }),
            s.toggleManual = function(e) {
                s.manual = _.isUndefined(e) ? !s.manual : e,
                s.lookedup = 1
            }
            ,
            s.shouldShowFields = function() {
                return !s.isenabled || s.manual || s.lookedup || s.form && s.form.submitted ? !0 : !1
            }
            ,
            s.shouldShowLookup = function() {
                return s.isenabled ? !0 : !1
            }
            ,
            s.shouldShowWarning = function() {
                try {
                    return !s.shouldShowFields() && s.form.submitted && s.isenabled && !s.lookedup
                } catch (e) {
                    return !1
                }
            }
            ,
            s.submit = function(e) {
                return t.init(s, "data", "code"),
                t.submit(s, e, n.saveAddress, {
                    success: s.successCallback
                })
            }
            ,
            s.$watch("data.country_id", s.reset)
        }
        ]
    }
}
]),
tcoStore.directive("autofocus", function() {
    var e;
    return function(t, n) {
        tco.pathVal(t, "$root.media.isTouchy") || (e && clearTimeout(e),
        e = setTimeout(function() {
            n[0].focus(),
            n[0].value = n[0].value
        }, 0))
    }
}),
window.tcoStore.directive("developerOnly", ["config", function(e) {
    var t = ["$scope", function(t) {
        t.canShow = e.isDeveloper
    }
    ];
    return {
        restrict: "AE",
        transclude: !0,
        template: '<div ng-if="canShow"><ng-transclude/></ng-transclude></div>',
        controller: t
    }
}
]),
window.tcoStore.directive("hoverIntent", ["transport", "router", function(e, t) {
    return {
        restrict: "A",
        link: function(e, n, i) {
            function o() {
                window.clearTimeout(a),
                a = null
            }
            function s() {
                a || (a = window.setTimeout(function() {
                    r || "link" != i.hoverIntent ? e.$eval(i.hoverIntent) : t.preLoad(i.href),
                    r = !0,
                    a = null
                }, c))
            }
            var a = null
              , r = !1
              , c = _.isUndefined(i.delay) ? 700 : parseInt(i.delay, 10);
            n.on("mousemove", s).on("mouseenter", s).on("mouseleave", o)
        }
    }
}
]),
window.tcoStore.directive("tcoImage", ["$window", "config", "$document", "browser", "tools", "website", "localConfig", "$rootScope", function(e, t, n, i, o, s, a, r) {
    function c(e) {
        e.removeClass("busy error")
    }
    function l(e, t, n) {
        if (t)
            return n + Math.ceil(Math.max(0, e - n) / t) * t;
        for (var i = 30; e > i; )
            i *= 1.5;
        return Math.round(i)
    }
    var d = t.api.media.replace("http:", location.protocol);
    d.replace(/^https?:\/\//, "");
    "undefined" == typeof a.imageViewportTollerance && (a.imageViewportTollerance = 500);
    var u = function(e) {
        return o.getSize(e, "Width")
    }
      , p = function(e) {
        return o.getSize(e, "Height")
    }
      , m = function(e) {
        e.hidden && (e.img.removeClass("hide"),
        e.scope.zoomIsActive = !0,
        e.hidden = !1)
    }
      , f = function(e) {
        e.hidden || (e.img.addClass("hide"),
        e.scope.zoomIsActive = !1,
        e.hidden = !0)
    }
      , g = function(e, t, n) {
        if (t.enabled && t.loaded && !t.hidden) {
            window.clearTimeout(t.hideTimeout);
            var i = o.getRelativeCoordinates(e, n)
              , s = u(n)
              , a = p(n)
              , r = Math.round(100 * i.x / s)
              , c = Math.round(100 * i.y / a);
            if (0 > r || 0 > c || r > 100 || c > 100)
                return void (t.hideTimeout = window.setTimeout(function() {
                    f(t)
                }, 300));
            var l = r + "% " + c + "%";
            t.img.css({
                backgroundPosition: l
            })
        }
    }
      , v = function(e, t, n) {
        if (!t.img) {
            t.img = angular.element('<div class="image-zoom hide"></div>'),
            e.after(t.img),
            n.zoomLoader && (t.loader = h(void 0, e),
            b(t.loader));
            var i = !1
              , o = new Image;
            e.on(t.triggerIn, function(s) {
                t.hidden && t.enabled && (!t.src || i && i == t.src ? (m(t),
                g(s, t, e[0])) : (n.zoomLoader && h(t.loader, e),
                $(t.currentSrc = t.src, function(i) {
                    t.loaded = !0,
                    t.width = i.width,
                    t.height = i.height,
                    t.img.css({
                        background: "url('" + t.currentSrc + "') no-repeat",
                        "background-size": t.height + " " + t.width
                    }),
                    delete t.data,
                    m(t),
                    g(s, t, e[0]),
                    n.zoomLoader && b(t.loader)
                }, o, n.zoomLoader ? function() {
                    b(t.loader)
                }
                : void 0)))
            }),
            e.on(t.triggerOut, function(e) {
                !t.hidden && t.enabled && f(t)
            });
            var s = function(n) {
                return g(n, t, e[0])
            };
            window.addEventListener("mousemove", s, !1),
            n.$on("destroy", function() {
                window.removeEventListener("mousemove", s)
            })
        }
    }
      , h = function(e, t) {
        return e ? e.removeClass("ng-hide") : (e = angular.element('<span class="image-loader"></span>'),
        t.after(e)),
        e
    }
      , b = function(e) {
        e && e.addClass("ng-hide")
    }
      , w = function(e) {
        e.addClass("empty"),
        e.on("load", y),
        e.on("error", k)
    }
      , y = function() {
        var e = angular.element(this);
        e.removeClass("busy"),
        e.removeClass("error")
    }
      , k = function() {
        var e = angular.element(this);
        e.removeClass("busy"),
        e.addClass("error")
    }
      , S = function(e, t) {
        e.removeClass("empty long error")
    }
      , $ = function(e, t, n, o) {
        !i.prerender && n ? (n.onload = function() {
            t(n),
            delete n
        }
        ,
        n.src = e,
        o && (n.onerror = o)) : t({
            src: e,
            width: 0,
            height: 0
        })
    }
      , x = function() {
        c(angular.element(this))
    }
      , C = function(e, t, n, o) {
        o.cleanupResizeListeners(),
        tco.empty(o.background) ? (t.attr("src", e),
        t.onload = x) : t.css("background-image", 'url("' + e + '")').removeClass("busy error"),
        i.prerender ? c(t) : window.setTimeout(function() {
            t.hasClass("busy") && t.addClass("long")
        }, 300),
        b(n)
    }
      , D = function(e, t, n, s) {
        t.attr("src") != e && (t.removeClass("empty").addClass("busy"),
        i.prerender || s.always || o.isElementInViewport(t[0], a.imageViewportTollerance) ? C(e, t, n, s) : (s.loader && h(n, t),
        s.resiseListenersCleanupRequired = !0,
        s.srcToSet = e,
        window.addEventListener("resize", s.checkInViewport),
        window.addEventListener("scroll", s.checkInViewport),
        window.addEventListener("touchmove", s.checkInViewport)))
    }
      , M = function(e, n, i) {
        if (i = tco.empty(i) ? 1 : parseFloat(i),
        tco.empty(a.useTimthumb)) {
            var s = o.imagePathToUrl(n.image, d)
              , r = [];
            r.push(t.api.thumbor),
            r.push("unsafe");
            var c = i > 1
              , l = c && !_.isUndefined(e.zoomTrim) ? e.zoomTrim : e.trim;
            l && "0" != l && "false" != l && (("1" == l || "true" == l) && (l = a.imagesDefaultTrimValue),
            l ? r.push("trim:" + l) : r.push("trim")),
            parseInt(c && !_.isUndefined(e.zoomFitIn) ? e.zoomFitIn : e.fitIn) && r.push("fit-in"),
            r.push(Math.round(i * n.width) + "x" + (c && e.zoomAutoHeight ? 0 : Math.round(i * n.height))),
            r.push(c ? e.zoomHorizontalCrop || e.horizontalCrop : e.horizontalCrop),
            r.push(c ? e.zoomVerticalCrop || e.verticalCrop : e.verticalCrop),
            r.push(c ? e.zoomCropType || e.cropType : e.cropType);
            var u = [];
            parseInt(c && !_.isUndefined(e.zoomFitIn) ? e.zoomFitIn : e.fitIn) && -1 === ["false", !1, 0].indexOf(e.fillColor) && (u.push("fill(" + e.fillColor + ")"),
            "transparent" == e.fillColor && u.push("format(png)"));
            var p = void 0 === e.sharpen ? "0.5,0.5,true" : e.sharpen;
            return p && u.push("sharpen(" + p + ")"),
            u.length && r.push("filters:" + u.join(":")),
            r.push(s),
            r.join("/")
        }
        return d + "/t/" + Math.round(i * n.width) + "/" + Math.round(i * n.height) + "/" + n.crop + "/" + n.align + n.image
    }
      , I = function(e, n, s, e, a, r) {
        var c, m;
        if (e.image)
            c = "" + e.image;
        else {
            if ("dev" != t.enviroment && "staging" != t.enviroment)
                return;
            var f = e.scale * parseInt(e.width || u(n[0]) || 0, 10)
              , g = e.scale * parseInt(e.height || p(n[0]) || 0, 10);
            c = location.protocol + "//placehold.it/" + f + "x" + g + "/eeeeee/888888?text=No+image"
        }
        if (c.match(/^http/))
            return D(c, n, s, e);
        if (c.match(/.(gif|svg)$/i) || !_.isUndefined(e.exclude) && c.match(e.exclude))
            return D(o.imagePathToUrl(c, d), n, s, e);
        var h, b, f = e.scale * parseInt(e.width || u(n[0]) || 0, 10), g = e.scale * parseInt(e.height || p(n[0]) || 0, 10);
        if (("auto" === f || 5 > f) && (f = 0),
        ("auto" === g || 16 > g) && (g = 0),
        !f && !g)
            return -1;
        if (i.isRetina && (f && (f *= 2),
        g && (g *= 2)),
        h = e.step ? parseInt(e.step, 10) : void 0,
        f ? (b = f,
        f = h && !e.base_width ? e.base_width = Math.ceil(f / h) * h : l(f, h, e.base_width),
        g = g ? Math.round(g * f / b) : 0) : g && (b = g,
        g = h && !e.base_height ? e.base_height = 10 * Math.ceil(g / 10) : l(g, h, e.base_height),
        f = f ? Math.round(f * g / b) : 0),
        n.attr("req-width", f),
        n.attr("req-height", g),
        S(n, e),
        a.ratio = m = 0,
        c == a.image && !(a.align && a.align != e.align || e.crop && a.crop != e.crop)) {
            if (a.width && a.height && (a.ratio = Math.round(100 * a.width / a.height)),
            f && g && (m = Math.round(100 * f / g)),
            m == a.ratio && f <= a.width)
                return;
            if (f && !g && a.width >= f && !a.height)
                return;
            if (g && !f && a.height >= g && a.width)
                return
        }
        a.width = f,
        a.height = g,
        a.crop = e.crop,
        a.align = e.align,
        a.image = c,
        D(M(e, a), n, s, e),
        tco.empty(e.zoom) || i.touchy || (r.src = M(e, a, e.zoom),
        v(n, r, e))
    }
      , U = function(e, t) {
        function n() {
            try {
                var n = I(e, t, m, e, d, v);
                -1 === n && s()
            } catch (i) {
                console.error(i)
            }
        }
        function i() {
            e.checkInViewport();
            var n, i;
            return (e.width || (n = u(t[0]),
            n == b)) && (e.height || (i = p(t[0]),
            i == y)) ? void 0 : h()
        }
        function s() {
            c > r && (r++,
            window.setTimeout(i, 100))
        }
        var r = 0
          , c = 10;
        w(t);
        var l = {
            image: "",
            width: 0,
            height: 0,
            scale: 1,
            crop: 1,
            align: "c",
            fitIn: !1,
            fillColor: "white",
            verticalCrop: "middle",
            horizontalCrop: "center",
            cropType: "smart",
            base_width: null,
            base_height: null
        }
          , d = {
            image: "",
            width: 0,
            height: 0,
            crop: 0,
            align: 0,
            ratio: null
        }
          , m = null;
        if (!tco.empty(e.zoom)) {
            var v = {
                enabled: e.zoomEnabled,
                hidden: !0,
                loaded: !1,
                img: null,
                data: null,
                width: null,
                height: null,
                currentSrc: null,
                src: null,
                triggerIn: "click" == e.zoomTrigger ? "click" : "mouseenter",
                triggerOut: "click" == e.zoomTrigger ? "click" : "mouseleave",
                scope: e
            };
            e.$watch("zoomEnabled", function(e) {
                (v.enabled = e) ? g(void 0, v) : f(v)
            })
        }
        var h = _.debounce(n, 20);
        _.defaults(e, l);
        var b, y, k = _.throttle(i, 100);
        window.addEventListener("resize", k);
        var S = e.$on("imagesRecheckRequest", i);
        e.cleanupResizeListeners = function() {
            e.resiseListenersCleanupRequired && (e.resiseListenersCleanupRequired = !1,
            window.removeEventListener("resize", e.checkInViewport),
            window.removeEventListener("scroll", e.checkInViewport),
            window.removeEventListener("touchmove", e.checkInViewport),
            S())
        }
        ,
        e.checkInViewport = _.debounce(function() {
            o.isElementInViewport(t[0], a.imageViewportTollerance) && C(e.srcToSet, t, m, e)
        }, 20),
        tco.empty(e.width) || (e.width = parseInt(e.width, 10)),
        tco.empty(e.height) || (e.height = parseInt(e.height, 10)),
        e.$watch("tcoImage", function(n) {
            _.isObject(n) ? (e.image = n.url,
            t.attr("alt", n.alt)) : e.image = n,
            h()
        }),
        e.$on("$destroy", function() {
            t.src = null,
            window.removeEventListener("resize", k),
            e.cleanupResizeListeners()
        })
    };
    return {
        restrict: "A",
        scope: {
            tcoImage: "=?",
            always: "=",
            zoom: "@",
            zoomEnabled: "=?",
            zoomIsActive: "=?",
            zoomTrigger: "@",
            crop: "@",
            verticalCrop: "@",
            horizontalCrop: "@",
            zoomVerticalCrop: "@",
            zoomHorizontalCrop: "@",
            zoomAutoHeight: "@",
            fillColor: "@",
            fitIn: "@",
            sharpen: "@",
            zoomFitIn: "@",
            cropType: "@",
            zoomCropType: "@",
            trim: "@",
            zoomTrim: "@",
            align: "@",
            exclude: "@",
            alignment: "@",
            scale: "@",
            width: "@tcoWidth",
            height: "@tcoHeight",
            step: "@",
            scale: "@",
            loader: "@",
            zoomLoader: "@",
            container: "@",
            background: "@"
        },
        link: U
    }
}
]),
window.tcoStore.directive("minibasket", ["tcoStoreRoutes", function(e) {
    var t = [e.getStandardRoutePath("/basket"), e.getStandardRoutePath("/checkout"), e.getStandardRoutePath("/success"), e.getStandardRoutePath("/checkout/success")];
    return {
        restrict: "EA",
        template: '<ng-include src="template || defaultTemplate"></ng-include>',
        scope: {
            template: "@",
            showOnAdd: "<",
            showOnRemove: "<",
            scrollToTop: "@",
            doNotScroll: "@"
        },
        controller: ["$scope", "customer", "$localStorage", "$location", "ngDialog", "$element", "transport", function(e, n, i, o, s, a, r) {
            function c() {
                e.$on("basketDataUpdate", l),
                l(),
                e.$on("$routeChangeSuccess", d),
                d(),
                e.showOnAdd && e.$on("basket.add", u),
                e.showOnRemove && e.$on("basket.remove", u),
                e.$on("$routeChangeStart", function() {
                    p(!1)
                }),
                e.$on("toggleMinibasket", function(t, n) {
                    e.toggle(n.to)
                })
            }
            function l() {
                e.basketData = n.basket.data
            }
            function d() {
                e.lastCategoryPath = _.isUndefined(i.lastCategoryPath) ? "/" : i.lastCategoryPath
            }
            function u() {
                m.lockedAutoShow || p(!0),
                !e.doNotScroll && e.$root.scrollTo && (e.scrollToTop ? e.$root.scrollTo(0) : e.$root.scrollTo(a[0]))
            }
            function p(n) {
                void 0 === n && (n = !e.visible),
                n && -1 !== t.indexOf(o.path()) || (m.visible = e.visible = n) && (s.close(),
                e.$root.$broadcast("imagesRecheckRequest"),
                window.setTimeout(function() {
                    e.$root.$broadcast("imagesRecheckRequest")
                }, 500))
            }
            var m = r.getModel("minibasketStatus", {
                visible: !1
            }, {
                storage: "static"
            });
            e.visible = !1,
            e.defaultTemplate = "/page/header/minibasket.html",
            e.customer = n,
            e.toggle = _.throttle(p, 1e3),
            c()
        }
        ]
    }
}
]),
window.tcoStore.directive("miniwishlist", ["$document", "customer", "product", "$location", "ngDialog", function(e, t, n, i, o) {
    return {
        restrict: "EA",
        templateUrl: "/blocks/page/miniwishlist.html",
        scope: {
            showOnAdd: "=",
            showOnRemove: "=",
            scrollToTop: "@",
            doNotScroll: "@"
        },
        link: function(e, s) {
            var a = angular.element(document).injector().get("$rootScope")
              , r = []
              , c = 1
              , l = !_.isUndefined(e.showOnAdd) && e.showOnAdd
              , d = !_.isUndefined(e.showOnRemove) && e.showOnRemove
              , u = s[0];
            e.$on("$destroy", function() {
                var e;
                for (e = 0; e < r.length; e++)
                    r[e]()
            }),
            e.product = n,
            e.customer = t,
            e.data = {
                visible: !1
            },
            e.open = function() {
                a.$broadcast("miniwishlist.open"),
                e.data.visible = !0
            }
            ,
            e.close = function() {
                e.data.visible = !1
            }
            ,
            e.toggle = function() {
                e.data.visible = !e.data.visible
            }
            ,
            (l || d) && e.$watch(function() {
                return t.wishlist.data.items.length
            }, function(n, s) {
                return _.isUndefined(s) || n === s || c ? void (tco.empty(t.wishlist.loaded) || (c = !1)) : void ((s > n ? d : l) && "/account/my-list" !== i.path() && (e.toggle(!0),
                o.close(),
                (_.isUndefined(e.doNotScroll) || !e.doNotScroll) && (!_.isUndefined(e.scrollToTop) && e.scrollToTop ? document.querySelectorAll("body")[0].scrollIntoView({
                    behavior: "smooth"
                }) : u.scrollIntoView({
                    behavior: "smooth"
                }))))
            }),
            r.push(a.$on("requestMiniwishlistOpen", e.open)),
            r.push(a.$on("wishlist.add.after", e.open)),
            e.$on("$routeChangeStart", e.close),
            e.$on("minibasket.open", e.close)
        }
    }
}
]),
window.tcoStore.directive("ngEnter", function() {
    var e = function(e, t, n) {
        var i = function(t) {
            try {
                13 === t.which && (window.setTimeout(function() {
                    "blur" == n.ngEnter ? t.target.blur() : e.$apply(function() {
                        e.$eval(n.ngEnter, {
                            event: t
                        })
                    })
                }, 10),
                n.ngEnterStop && t.preventDefault())
            } catch (i) {
                $exceptionHandler(i)
            }
        };
        t.bind("keydown keypress", i)
    };
    return e
}),
tcoStore.directive("ngTouchstart", function() {
    return {
        controller: function(e, t, n) {
            function i(n) {
                var i = t.attr("ng-touchstart");
                e.$event = n,
                e.$apply(i)
            }
            t.bind("touchstart", i)
        }
    }
}),
window.tcoStore.directive("repeatDone", function() {
    return function(e, t, n) {
        e.$last && e.$eval(n.repeatDone)
    }
}),
window.tcoStore.directive("scrollTo", function() {
    return {
        restrict: "A",
        compile: function() {
            return function(e, t, n) {
                t.bind("click", function(e) {
                    document.querySelectorAll(n.scrollTo)[0].scrollIntoView({
                        behavior: "smooth"
                    })
                })
            }
        }
    }
}),
window.tcoStore.directive("promotion", ["gtm", "$window", function(e, t) {
    return {
        restrict: "A",
        transclude: !0,
        scope: {
            promoId: "@",
            promoName: "@",
            promoCreative: "@",
            promoPosition: "@",
            promoMode: "@",
            promoOnViewRule: "@",
            promoTrigger: "="
        },
        template: "<div ng-transclude></div>",
        link: function(t, n, i) {
            (_.isUndefined(t.promoOnViewRule) || t.promoOnViewRule < 0) && (t.promoOnViewRule = 50);
            var o = null;
            t.sent = !1;
            var s = function() {
                e.ee.promotionImpressions({
                    id: t.promoId,
                    name: t.promoName.replace(/<\/?[^>]+>/gi, "").replace(/(\r\n|\n|\r)/gm, ""),
                    creative: t.promoCreative,
                    position: t.promoPosition
                }),
                t.sent = !0
            }
              , a = function() {
                var e = n[0].offsetHeight
                  , i = angular.element(n)[0].getBoundingClientRect()
                  , o = i.bottom - document.documentElement.clientHeight;
                0 > o && (o = 0);
                var a = e - o
                  , r = a / e * 100;
                r >= parseInt(t.promoOnViewRule) && !t.sent && s()
            };
            switch (t.promoMode) {
            case "onview":
                angular.element(window).bind("scroll", function(e) {
                    a()
                }),
                a();
                break;
            case "ontrigger":
                o = t.$watch("promoTrigger", function() {
                    t.promoTrigger === !0 && (!t.sent && s(),
                    delete o)
                });
                break;
            case "onload":
            default:
                !t.sent && s()
            }
            n.bind("click tap", function(n) {
                e.ee.promotionClick({
                    id: t.promoId,
                    name: t.promoName.replace(/<\/?[^>]+>/gi, "").replace(/(\r\n|\n|\r)/gm, ""),
                    creative: t.promoCreative,
                    position: t.promoPosition
                })
            })
        }
    }
}
]),
window.tcoStore.factory("core", ["http", "tools", "extended$q", function(e, t, n) {
    function i(e, t, n) {
        var i = {};
        return _.each(e, function(e) {
            var o = e(t, n);
            for (var s in o) {
                var a = o[s]
                  , r = a.ids
                  , c = _.isUndefined(a.verbosity) ? 1 : a.verbosity;
                _.isUndefined(i[s]) && (i[s] = {}),
                _.isUndefined(i[s][c]) && (i[s][c] = []),
                i[s][c] = _.union(i[s][c], r)
            }
        }),
        i
    }
    function o(e, t, n) {
        _.each(e, function(e) {
            e(t, n)
        })
    }
    function s(e, t, s, a, r, l) {
        var d = []
          , u = t.getModels(a)
          , p = i(t.afterLoadIjectionFunctions, u, r);
        for (var m in p)
            for (var f in p[m]) {
                var g = p[m][f];
                g.length && (m == e && (g = _.difference(g, a)),
                d.push(c[m].loadCollection(g, {
                    verbosity: f
                })))
            }
        return d.length ? n.all(d).then(function() {
            o(t.afterLoadFunctions, u, r),
            s.resolve(l)
        }, function() {
            s.resolve(l)
        }) : (o(t.afterLoadFunctions, u, r),
        s.resolve(l)),
        d
    }
    var a = {}
      , r = {
        id: {},
        url: {}
    }
      , c = {}
      , l = n.defer();
    return l.resolve(),
    l.cancel = function() {}
    ,
    a.dummyFinishedDefer = l,
    a.postLoad = s,
    a.model = {},
    a.model.Abstract = function() {
        var e = this;
        return e.id = null,
        e.url = null,
        e.busy = !1,
        e.reset = function() {
            e.data = {},
            e.loaded = null,
            e.verbosity = 0
        }
        ,
        e.reset(),
        e.setData = function(t) {
            return e.loaded = new Date,
            e.id = t.id,
            e.url = t.url,
            e.verbosity = _.isUndefined(t.verbosity) ? 1 : t.verbosity,
            _.isEqual(e.data, t) || (e.data = t),
            e
        }
        ,
        e.isLoaded = function(t, n) {
            if (e.loaded) {
                var i = new Date;
                if (i - e.loaded <= 6e4 * t) {
                    if (e.verbosity >= n)
                        return !0
                } else
                    e.reset();
                delete i
            }
            return !1
        }
        ,
        e.getGtmData = function() {
            return {}
        }
        ,
        e.className = "",
        e
    }
    ,
    a.getModel = function(e, t) {
        return _.isUndefined(a.model[e]) && (a.model[e] = function() {
            var n = new a.model.Abstract;
            return n.className = e,
            _.isUndefined(t) || _.extend(n, t),
            n
        }
        ,
        a.model[e].className = e),
        a.model[e]
    }
    ,
    a.createFactory = function(t, i) {
        i = _.defaults(_.isUndefined(i) ? {} : i, {
            isPrivate: !1,
            apiPath: "",
            previewable: !1,
            node: !1
        });
        var o = {};
        _.isUndefined(r.id[t]) && (r.id[t] = {}),
        _.isUndefined(r.url[t]) && (r.url[t] = {}),
        c[t] = o,
        o.valid = _.isUndefined(i.valid) ? 10 : parseFloat(i.valid, 10),
        o.isPrivate = i.isPrivate,
        o.apiPath = i.apiPath,
        o.previewable = i.previewable,
        o.node = i.node,
        o.getModel = function() {
            return a.getModel(t)
        }
        ,
        o.getModel(),
        o.get = function(e, n) {
            var i = a.getFromResource;
            return i(t, e, n)
        }
        ,
        o.set = function(e) {
            var n = a.setInResource;
            return n(t, e)
        }
        ,
        o.getResource = function() {
            var e = a.getResource;
            return e(t)
        }
        ,
        o.getModels = function(e, n) {
            _.isUndefined(n) && (n = !1);
            var i = a.getCollectionFromResource
              , o = i(t, e);
            return n ? _.filter(o, function(e) {
                return e.verbosity > 0
            }) : o
        }
        ,
        o.getModelsData = function(e) {
            return _.compact(_.pluck(o.getModels(e, !0), "data"))
        }
        ,
        o.afterLoadIjectionFunctions = [],
        o.afterLoadInjection = function(e) {
            return o.afterLoadIjectionFunctions.push(e),
            o
        }
        ,
        o.afterLoadFunctions = [],
        o.afterLoad = function(e) {
            return o.afterLoadFunctions.push(e),
            o
        }
        ,
        o.load = function(r, c) {
            function d(e, i) {
                m.postProcessVerbosity && m.postProcessVerbosity >= c.verbosity ? e.resolve() : (g = s(t, o, e, [m.id], c, i),
                m.postProcessVerbosity = c.verbosity,
                g && g.length ? n.all(g).then(function() {
                    e.resolve()
                }, function() {
                    e.reject()
                }) : e.resolve())
            }
            c = _.defaults(_.isUndefined(c) ? {} : c, {
                verbosity: 1,
                preview: null,
                node: i.node,
                isPrivate: i.isPrivate
            });
            var u, p, m = o.set(r);
            if (m.isLoaded(o.valid, c.verbosity))
                return !m.postProcessVerbosity || m.postProcessVerbosity < c.verbosity ? (p = n.defer(),
                m.promise = p.promise,
                d(p)) : _.isUndefined(m.promise) && (m.promise = l.promise),
                m.promise;
            if (m.busy && m.busy >= c.verbosity)
                return m.promise;
            p = n.defer(),
            m.promise = p.promise,
            m.defer = p,
            m.busy = c.verbosity;
            var f = [];
            f.push(o.apiPath),
            o.previewable && c.preview && (f.push("preview/"),
            f.push(parseInt(c.preview, 10) + "/")),
            f.push(t),
            f.push(_.isNumber(r) ? "/" + r : r),
            f.push("/verbosity/"),
            f.push(c.verbosity),
            u = e.get(f.join(""), c, m);
            var g = [];
            return u.success(function(e) {
                _.isObject(e) && !e.error ? (a.processSuccessResult(e),
                d(p, e)) : p.reject(),
                m.busy = !1
            }),
            u.error(function() {
                m.busy = !1,
                p.reject()
            }),
            m.promise.cancel = function() {
                m.busy = !1,
                p.reject(),
                _.each(g, function(e) {
                    e.cancel()
                }),
                u.cancel()
            }
            ,
            m.promise
        }
        ;
        var d = []
          , u = _.debounce(function() {
            function e(e) {
                _.each(t, function(t) {
                    t.request[e ? "resolve" : "reject"]()
                })
            }
            var t = d;
            d = [];
            var n = o.loadCollection(_.pluck(t, "id"));
            n.then(function() {
                e(!0)
            }, function() {
                e(!1)
            })
        }, 50);
        return o.safeLoad = function(e, t) {
            var i = _.findWhere(d, {
                id: e
            }) || {};
            return t = t || 1,
            (!i.verbosity || i.verbosity < t) && (i.request = n.defer(),
            i.verbosity = t,
            i.id = e,
            d.push(i)),
            u(),
            i.request.promise
        }
        ,
        o.hasModelData = function(e) {
            try {
                var t = o.get(e);
                return t.busy || !t.data.id ? !1 : !0
            } catch (n) {
                return !1
            }
        }
        ,
        o.hasModelsData = function(e) {
            _.isArray(e) || (e = [e]);
            for (var t = 0; t < e.length; t++)
                if (!o.hasModelData(e[t]))
                    return !1;
            return !0
        }
        ,
        o.remove = function(e) {
            _.isArray(e) || (e = [e]),
            _.map(e, function(e) {
                model = o.getFromResource(e);
                var e = model.id
                  , n = model.url;
                _.isUndefined(e) || a.removeFromIndex(t, "id", e),
                _.isUndefined(n) || a.removeFromIndex(t, "url", n)
            })
        }
        ,
        o.find = function(i, s, r) {
            function c(e) {
                u.reject(e)
            }
            s = _.defaults(s || {}, {
                verbosity: 1,
                limit: 0,
                skip: 0,
                sort: 0,
                apiPath: o.apiPath,
                node: o.node
            });
            var l = e.post("find/", {
                entity: t,
                verbosity: s.verbosity,
                limit: s.limit,
                skip: s.skip,
                sort: s.sort,
                filter: i
            }, s);
            if (r)
                return l;
            var d, u = n.defer();
            return l.success(function(e) {
                if (void 0 !== i._store)
                    return void u.resolve({
                        data: e[o.className]
                    });
                a.processSuccessResult(e);
                var n = _.pluck(e[t], "id");
                d = o.loadCollection(n, s),
                d.success(function(e) {
                    u.resolve({
                        data: o.getModels(n)
                    })
                }),
                d.error(c)
            }),
            l.error(c),
            u.promise.cancel = function() {
                u.reject(),
                l && l.cancel(),
                d && d.cancel()
            }
            ,
            u.promise
        }
        ,
        o.loadCollection = function(i, r) {
            function c() {
                v = s(t, o, g, m, r),
                v && v.length ? n.all(v).then(function() {
                    g.resolve()
                }, function() {
                    g.reject()
                }) : g.resolve()
            }
            i = _.isUndefined(i) ? [] : _.compact(i);
            var l, d, u = [], p = [], m = [];
            r = _.defaults(_.isUndefined(r) ? {} : r, {
                verbosity: 1,
                apiPath: o.apiPath,
                node: o.node
            }),
            l = n.defer(),
            _.each(i, function(e) {
                d = o.set(e),
                (_.isUndefined(d) || !d.isLoaded(o.valid, r.verbosity)) && (!d.busy || d.busy < r.verbosity ? (d.busy = r.verbosity,
                d.promise = l.promise,
                p.push(e)) : u.push(d.promise)),
                d && (!d.postProcessVerbosity || d.postProcessVerbosity < r.verbosity) && (m.push(d.id),
                d.postProcessVerbosity = r.verbosity)
            }),
            p = _.compact(p);
            var f;
            0 != p.length && (u.push(l.promise),
            f = e.post(r.apiPath + t + "/", {
                ids: p,
                verbosity: r.verbosity
            }, r),
            f.success(function(e) {
                a.processSuccessResult(e),
                l.resolve(),
                _.each(p, function(e) {
                    d = o.set(e),
                    d.busy = !1
                })
            }),
            f.error(function() {
                l.reject(),
                _.each(p, function(e) {
                    d = o.set(e),
                    d.busy = !1
                })
            }));
            var g = n.defer()
              , v = [];
            return u.length > 0 ? n.all(u).then(function() {
                c()
            }, function() {
                g.reject()
            }) : c(),
            g.promise.cancel = function() {
                g.reject(),
                _.each(v, function(e) {
                    e.cancel()
                }),
                f && f.cancel()
            }
            ,
            g.promise
        }
        ,
        o.loadStaticCollection = function() {
            var n, i;
            return i = a.getResource(t),
            i.length > 0 && i[0].isLoaded(o.valid, 1) ? l.promise : (n = e.get(t),
            n.success(a.processSuccessResult),
            n)
        }
        ,
        c[t] = o,
        o
    }
    ,
    a.processSuccessResult = function(e) {
        if (tco.benchmark.start("core::processSuccessResult"),
        _.isUndefined(e.error) || !e.error) {
            var t = a.setInResource
              , n = function(e, n) {
                _.each(e, function(e) {
                    _.isUndefined(c[n]) || t(n, e)
                })
            };
            _.each(e, n)
        }
        tco.benchmark.stop("core::processSuccessResult")
    }
    ,
    a.getFactoryObject = function(e) {
        return c[e]
    }
    ,
    a.getResource = function(e) {
        return _.values(r.id[e])
    }
    ,
    a.getFromIndex = function(e, t, n) {
        var i = r[t][e];
        return i[n]
    }
    ,
    a.removeFromIndex = function(e, t, n) {
        var i = r[t][e];
        dispose(i[n])
    }
    ,
    a.setInIndex = function(e, t, n, i) {
        var o = r[t][e];
        o[n] = i
    }
    ,
    a.getFromResource = function(e, t) {
        var n, i = a.getFromIndex;
        return _.isNumber(t) ? i(e, "id", t) : _.isString(t) ? i(e, "url", t) : _.isObject(t) ? _.isUndefined(t.id) || !t.id || (n = i(e, "id", t.id),
        _.isUndefined(n)) ? !_.isUndefined(t.url) && t.url ? i(e, "url", t.url) : void 0 : n : void 0
    }
    ,
    a.getCollectionFromResource = function(e, t) {
        var n = a.getFromResource;
        return _.compact(_.map(t, function(t) {
            return n(e, t)
        }))
    }
    ,
    a.setInResource = function(e, t, n) {
        var i, o, s = c[e], r = a.getFromResource;
        return o = r(e, t),
        _.isObject(t) ? i = t.id : (i = t,
        t = void 0),
        _.isUndefined(o) && (o = new a.model[e],
        _.isNumber(i) ? o.id = i : o.url = i),
        _.isUndefined(t) || (n || _.isUndefined(o.verbosity) || _.isUndefined(t.verbosity) || o.verbosity < t.verbosity) && (_.isUndefined(s) || _.isUndefined(s.defaults) || _.defaults(t, s.defaults),
        o.setData(t)),
        _.isUndefined(o.id) || a.setInIndex(e, "id", o.id, o),
        _.isUndefined(o.url) || a.setInIndex(e, "url", o.url, o),
        o
    }
    ,
    a
}
]),
window.tcoStore.factory("customer", ["$rootScope", "$localStorage", "$location", "extended$q", "http", "website", "browser", "core", "product", "localConfig", "stock", "$exceptionHandler", "gtm", "$sessionStorage", "bundleProduct", function(e, t, n, i, o, s, a, r, c, l, d, u, p, m, f) {
    function g(t) {
        tcologTime("customer::processSuccess"),
        tco.benchmark.start("customer::processSuccess");
        try {
            var n, o = !1, a = !1, l = !1, m = !1, f = h.wishlist, g = h.basket, v = null, b = Date.now(), w = [], S = [], x = [];
            if (_.isUndefined(t.customer))
                h.loaded || (h.loaded = b);
            else {
                if (n = t.customer,
                m = n.general.logged && (!h.data || !h.data.logged),
                h.data = n.general,
                h.loaded = b,
                l = 1,
                _.isUndefined(h.data.email) || C(h.data.email),
                _.isUndefined(n.addresses) || (h.address.list = n.addresses,
                h.address.billing = _.findWhere(n.addresses, {
                    is_billing: 1
                }),
                h.address.shipping = _.findWhere(n.addresses, {
                    is_shipping: 1
                }),
                e.$broadcast("addressDataUpdate")),
                !_.isUndefined(n.wishlist)) {
                    var D = angular.toJson(f.data.items);
                    v = {
                        items: n.wishlist.items
                    },
                    _.isUndefined(n.wishlist.url) || (v.url = n.wishlist.url);
                    var M = angular.toJson(n.wishlist.items);
                    D != M && (a = !0),
                    S = _.pluck(v.items, "product"),
                    w = _.union(w, S),
                    x.push("wishlistDataUpdate")
                }
                if (!_.isUndefined(n.cart)) {
                    var D = angular.toJson(g.data.items);
                    g.data = n.cart;
                    var M = angular.toJson(n.cart.items);
                    D != M && (o = !0),
                    g.data.qty = _.reduce(h.basket.data.items, function(e, t) {
                        return e + t.request.qty
                    }, 0),
                    g.loaded = b,
                    w = _.union(w, _.pluck(h.basket.data.items, "product")),
                    x.push("basketDataUpdate")
                }
                _.isUndefined(n.notice) || _.isUndefined(n.notice.error) || alert(n.notice.error)
            }
            var U, O, T = ["checkout", "success", "tokens", "orders"];
            for (U = T.length - 1; U >= 0; U--)
                O = T[U],
                _.isUndefined(t[O]) || (h[O].data = t[O],
                h[O].loaded = b,
                _.isUndefined(t.gtm) || (h[O].data.gtm = t.gtm),
                e.$broadcast(O + "DataUpdate"));
            _.isUndefined(h.orders.data) || (w = _.union(w, _.unique(_.pluck(_.flatten(_.pluck(h.orders.data, "items")), "product_id"))));
            var P = [];
            P.push(c.loadCollection(w, {
                verbosity: 3,
                cancelOnPathChange: !1
            })),
            s.manageStock && P.push(d.loadCollection(w)),
            i.all(P).then(function() {
                var t, n, i, s = r.getResource("product");
                if (_.each(s, function(e) {
                    e.inWishlist = S.indexOf(e.id) > -1
                }),
                v) {
                    for (v.qty = 0,
                    v.totalPrice = 0,
                    t = v.items.length - 1; t >= 0; t--)
                        i = v.items[t],
                        n = c.get(i.product),
                        _.isUndefined(n) || _.isUndefined(n.data) || _.isUndefined(n.data.id) ? (v.items.splice(t, 1),
                        delete i) : (v.qty++,
                        v.totalPrice += n.data.price);
                    delete h.wishlist.data,
                    h.wishlist.data = v,
                    h.wishlist.loaded = b
                }
                a && p.push({
                    event: "wishlist-change",
                    "wishlist-items": $(h.wishlist.data.items, !1)
                }),
                o && p.push({
                    event: "basket-change",
                    "basket-items": $(h.basket.data.items, !0),
                    "basket-general": {
                        id: h.basket.data.quote_id,
                        totals: h.basket.data.totals
                    }
                }),
                _.each(x, function(t) {
                    e.$broadcast(t)
                }),
                l && (y && y.resolve({
                    customer: h
                }),
                e.$broadcast("customerDataUpdate")),
                m && e.$broadcast("customerLoggedIn"),
                h.data.logged && I && (I(),
                I = null)
            }, function(t) {
                _.each(x, function(t) {
                    e.$broadcast(t)
                }),
                k(t)
            })
        } catch (A) {
            u(A),
            k(A)
        }
        tco.benchmark.stop("customer::processSuccess")
    }
    function v(t, n, s, a, r, c) {
        function l(i) {
            var o = !1;
            tco.benchmark.point("customer::post: " + t, "response obtained"),
            a.result || (a.result = "SUCCESS"),
            r && !tco.empty(r.onSuccessBefore) && r.onSuccessBefore(i),
            u ? (o = !0,
            h.checkout.load().then(function() {
                h.processSuccess(i),
                p.resolve({
                    data: i
                })
            }, function() {
                h.processSuccess(i),
                p.resolve({
                    data: i
                })
            })) : h.processSuccess(i),
            !_.isUndefined(n) && n && (_.isUndefined(n.email) || "customer/email" == t || C(n.email),
            _.isUndefined(n.postcode) || "customer/postcode" == t || D(n.postcode)),
            s.busy = !1,
            tco.benchmark.stop("customer::post: " + t),
            o || p.resolve({
                data: i
            }),
            c && e.$broadcast(c, n)
        }
        function d(e) {
            try {
                if (!_.isString(e.error))
                    throw 1;
                a.result = e.error
            } catch (n) {
                a.result = "ERROR"
            }
            s.busy = !1,
            tco.benchmark.stop("customer::post: " + t),
            p.reject({
                data: e
            })
        }
        tco.benchmark.start("customer::post: " + t),
        (_.isUndefined(s) || _.isNull(s)) && (s = {}),
        s.busy = !0,
        _.isUndefined(a) && (a = s),
        _.isUndefined(r) && (r = {}),
        a.result = null;
        var u = r && !_.isUndefined(r.includeCheckout) && r.includeCheckout
          , p = i.defer()
          , m = o.post(t, n, r, a);
        return m.success(function(e) {
            return _.isObject(e) ? !_.isUndefined(e.error) && e.error ? d(e) : l(e) : d(e)
        }),
        m.error(d),
        p.promise.cancel = function() {
            return m.cancel()
        }
        ,
        s.promise = p.promise,
        p.promise
    }
    var h = {}
      , b = null
      , w = null
      , y = null
      , k = function(e) {
        y && y.reject(e)
    }
      , S = function() {
        h.loaded = !1,
        h.currency = t.currency || s.currency["default"] || s.currency.base;
        var n = function(t, n) {
            _.isUndefined(h[t]) ? h[t] = {} : dispose(h[t].data),
            h[t].data = n,
            h[t].loaded = !1,
            e.$broadcast(t + "DataUpdate")
        };
        dispose(h.data),
        h.data = {
            ip: null,
            logged: !1
        },
        dispose(h.address),
        h.address = {},
        e.$broadcast("addressDataUpdate"),
        n("wishlist", {
            items: [],
            totalPrice: 0,
            qty: 0
        }),
        n("basket", {
            items: [],
            meta: {},
            qty: 0
        }),
        n("checkout", {}),
        n("success", {}),
        n("tokens", {}),
        n("orders", {}),
        _.isUndefined(h.recent) ? h.recent = {} : dispose(h.recent.items),
        h.recent.items = t.recent || []
    };
    S();
    var $ = function(t, n) {
        try {
            return _.compact(_.map(t, function(t) {
                if (productModel = c.get(t.product),
                !_.isUndefined(productModel) && !_.isUndefined(productModel.data)) {
                    var i = {
                        id: t.product,
                        sku: productModel.data.sku,
                        name: productModel.data.name,
                        qty: n ? t.request.qty : 1,
                        price: _.isUndefined(t.price) ? productModel.data.price : t.price ? t.price.toFixed(2) : null
                    };
                    return e.$broadcast("alter_product_impression", {
                        productData: productModel.data,
                        impressionData: i
                    }),
                    i
                }
            }))
        } catch (i) {
            return []
        }
        return products
    }
      , x = function() {
        p.push({
            event: "customerEmailRemoved",
            customerEmail: void 0
        }),
        t.customerEmail = void 0
    }
      , C = function(e) {
        e && b != e && (b = e,
        p.push({
            event: "customerEmailProvided",
            customerEmail: b
        }),
        h.emailProvided(b),
        t.customerEmail = e)
    }
      , D = function(e) {
        e && w != e && (w = e,
        p.push({
            event: "customerPostcodeProvided",
            customerPostcode: w
        }),
        h.postcodeProvided(w),
        t.customerPostcode = e)
    };
    h.processSuccess = g;
    var M = function(e, t) {
        if (!_.isUndefined(e.busy) && e.busy)
            return !1;
        if (_.isUndefined(e.loaded) || !e.loaded)
            return !0;
        var n = Date.now();
        return n - e.loaded < 1e3 * t ? !1 : !0
    };
    h.customerPost = v;
    var I = null
      , U = function(e) {
        I = e,
        n.path("account/login")
    };
    return h.doAfterLogin = U,
    h.load = function() {
        if (y)
            return y.promise;
        if (y = i.defer(),
        y.cancel = function() {}
        ,
        tcologTime("customer::load"),
        a.prerender)
            return r.dummyFinishedDefer;
        var e = o.get("customer/data", {
            isPrivate: !0,
            cancelOnPathChange: 0
        }, h);
        return e.success(h.processSuccess),
        e.error(k),
        y.promise
    }
    ,
    h.get = function(e) {
        return {
            id: h.data.id || -1,
            data: {
                meta: {},
                breadcrumbs: {}
            },
            gtm: function() {}
        }
    }
    ,
    h.getEmail = function() {
        return h.data.email
    }
    ,
    h.seenEmail = function() {
        return h.getEmail() || b
    }
    ,
    h.exists = function(e, t) {
        return h.customerPost("customer/exists", e, t)
    }
    ,
    h.login = function(e, t) {
        return h.customerPost("customer/login", e, t)
    }
    ,
    h.loginWithCheckout = function(e, t) {
        return h.customerPost("customer/login", e, t, void 0, {
            includeCheckout: !0
        })
    }
    ,
    h.logout = function(i, o) {
        var s = h.customerPost("customer/logout", i, o, void 0, {
            onSuccessBefore: S
        });
        return _.isUndefined(l.account.afterLogoutPath) || s.success(function(i) {
            (_.isUndefined(i.error) || !i.error) && (b = null,
            t.customerEmail = null,
            h.emailProvided(null),
            x(),
            n.path(l.account.afterLogoutPath),
            e.$broadcast("customerLoggedOut"))
        }),
        s
    }
    ,
    h.logoutWithCheckout = function(e, t) {
        return h.customerPost("customer/logout", e, t, void 0, {
            includeCheckout: !0,
            onSuccessBefore: S
        })
    }
    ,
    h.register = function(e, t) {
        return h.customerPost("customer/register", e, t)
    }
    ,
    h.registerFromOrder = function(e, t) {
        return h.customerPost("customer/registerFromLastOrder", e, t)
    }
    ,
    h.save = function(e, t) {
        return h.customerPost("customer/save", e, t)
    }
    ,
    h.savePassword = function(e, t) {
        return h.customerPost("customer/savePassword", e, t)
    }
    ,
    h.password = function(e, i, o) {
        var s = h.customerPost("customer/password", e, i, o);
        if (!tco.empty(s)) {
            var a = n.path();
            s.success(function() {
                t.lastResetRequestPath = a
            })
        }
        return s
    }
    ,
    h.resetpassword = function(e, t) {
        return h.customerPost("customer/resetpassword", e, t)
    }
    ,
    h.saveAddress = function(e, t) {
        return h.customerPost("customer/saveAddress", e, t)
    }
    ,
    h.setAsDefaultBilling = function(e, t) {
        return h.saveAddress(_.extend({
            is_billing: !0
        }, e), t)
    }
    ,
    h.setAsDefaultShipping = function(e, t) {
        return h.saveAddress(_.extend({
            is_shipping: !0
        }, e), t)
    }
    ,
    h.removeAddress = function(e, t) {
        return h.customerPost("customer/removeAddress", e, t)
    }
    ,
    h.contact = function(e, t, n) {
        return h.customerPost("customer/contact", e, t, n)
    }
    ,
    h.removeCC = function(e, t) {
        return h.customerPost("customer/token/remove", {
            id: e
        }, t)
    }
    ,
    h.subscribe = function(e, t) {
        return h.customerPost("customer/subscribe", e, t)
    }
    ,
    h.isSubscriber = function(e, t) {
        return h.customerPost("customer/issubscriber", e, t)
    }
    ,
    h.unsubscribe = function(e, t) {
        return h.customerPost("customer/unsubscribe", e, t)
    }
    ,
    h.setCurrency = function(n) {
        h.currency != n && (h.currency = t.currency = n,
        e.$broadcast("customerCurrencyChange"))
    }
    ,
    h.getCurrency = function() {
        return h.currency
    }
    ,
    h.emailProvided = function(t) {
        return t && e.$broadcast("customer.email.provided", t),
        v("customer/email", {
            email: t
        })
    }
    ,
    h.postcodeProvided = function(e) {
        return h.customerPost("customer/postcode", {
            postcodel: e
        })
    }
    ,
    h.wishlist.add = function(t, i, o) {
        try {
            var a = c.get(t.product)
              , r = p.ee.getProductImpression(a);
            p.push({
                event: "AddToWishlist",
                wishlistItem: r
            })
        } catch (l) {}
        if (s.guestwishlist || h.data.logged) {
            var d = h.customerPost("wishlist/add", t, i, o, void 0, "wishlist.add");
            return d.success(function() {
                e.$broadcast("wishlist.add.after")
            }),
            d
        }
        var u = n.path();
        U(function() {
            h.wishlist.add(t),
            n.path(u)
        })
    }
    ,
    h.wishlist.remove = function(t, n, i) {
        var o = h.customerPost("wishlist/remove", t, n, i);
        return o.success(function() {
            e.$broadcast("wishlist.remove.after")
        }),
        o
    }
    ,
    h.wishlist.getItem = function(e) {
        return _.findWhere(h.wishlist.data.items, {
            product: e
        })
    }
    ,
    h.basket.add = function(e, t, n, i) {
        return void 0 === i && (i = "basket.add"),
        h.customerPost("basket/add", e, t, n, void 0, i)
    }
    ,
    h.basket.remove = function(e, t, n) {
        return h.customerPost("basket/remove", e, t, n, void 0, "basket.remove")
    }
    ,
    h.basket.flush = function(e, t) {
        return h.customerPost("basket/flush", void 0, e, t)
    }
    ,
    h.basket.setQty = function(e, t, n, i) {
        return h.customerPost("basket/qty", e, t, n, i)
    }
    ,
    h.basket.addCoupon = function(e, t, n) {
        return h.customerPost("basket/coupon/add", e, t, n)
    }
    ,
    h.basket.removeCoupon = function(e, t, n) {
        return h.customerPost("basket/coupon/remove", e, t, n)
    }
    ,
    h.basket.getItemById = function(e) {
        return _.findWhere(h.basket.data.items, {
            id: parseInt(e, 10)
        })
    }
    ,
    h.basket.getItemsForStockCheck = function() {
        return _.flatten(_.map(h.basket.data.items, function(e) {
            var t = c.get(e.product);
            if (f.isBundle(t)) {
                var n = f.getSelectedProducts(t, e.request.bundle_option);
                return _.each(n, function(t) {
                    t.qty *= e.request.qty
                }),
                n
            }
            return {
                id: t.id,
                qty: e.request.qty
            }
        }))
    }
    ,
    h.checkout.order = function(t, n, i) {
        return e.$broadcast("customer.checkout.order.before", t),
        h.customerPost("checkout/submit", t, n, i)
    }
    ,
    h.checkout.save = function(t, n, i) {
        return e.$broadcast("customer.checkout.save.before", t),
        h.customerPost("checkout/save", t, n, i, {
            cancelMatchingImmediately: !0
        })
    }
    ,
    h.checkout.load = function(e, t, n) {
        return h.customerPost("checkout/load", tco.empty(e) ? {
            t: 1,
            multishipping: h.checkout.isMultishipping()
        } : e, t, n, {
            returnMatching: !0
        })
    }
    ,
    h.checkout.saveMultishippingAddress = function(e, t, n) {
        return e.multishipping = !0,
        h.customerPost("checkout/multishipping/saveAddress", e, t, n, {
            cancelMatchingImmediately: !0
        })
    }
    ,
    h.checkout.isMultishipping = function() {
        return "multishipping" == m.checkoutType
    }
    ,
    h.success.load = function(e, t, n) {
        return h.customerPost("checkout/success", e, t, n, {
            returnMatching: !0
        })
    }
    ,
    h.tokens.load = function() {
        return h.customerPost("customer/tokens/load", null, h.tokens)
    }
    ,
    h.tokens.remove = function(e, t, n) {
        return h.customerPost("customer/tokens/remove", e, t, n)
    }
    ,
    h.tokens.setDefault = function(e, t, n) {
        return v("customer/tokens/default", e, t, n)
    }
    ,
    h.orders.load = function() {
        return M(h.orders, 30) ? h.customerPost("customer/orders/load", null, h.orders) : h.orders.promise
    }
    ,
    h.orders.getOrderByNumber = function(e) {
        return _.findWhere(h.orders.data, {
            number: parseInt(e, 10)
        })
    }
    ,
    h.recent.save = function() {
        h.recent.items.splice(20, h.recent.items.length),
        t.recent = h.recent.items
    }
    ,
    h.recent.add = function(e, t) {
        var n = {
            id: e
        };
        _.isUndefined(t) || _.extend(n, t),
        h.recent.items = h.recent.reduce(e, t),
        h.recent.items.unshift(n),
        h.recent.save()
    }
    ,
    h.recent.reduce = function(e, t) {
        var n = {
            id: e
        };
        return _.isUndefined(t) || _.extend(n, t),
        _.reject(h.recent.items, _.matches(n))
    }
    ,
    h.recent.remove = function(e, t) {
        h.recent.items = h.recent.reduce(e, t),
        h.recent.save()
    }
    ,
    h.recent.clear = function() {
        t.recent = h.recent.items = []
    }
    ,
    window.setTimeout(h.load, 100),
    C(t.customerEmail),
    D(t.customerPostcode),
    h
}
]),
angular.module("tcoStore").factory("rewrite", ["http", "extended$q", "$location", "browser", function(e, t, n, i) {
    var o = {}
      , s = {}
      , a = [];
    return s.redirect = function(e) {
        if (!_.isUndefined(o[e]) && o[e].rewrite) {
            var t = o[e].rewrite.replace(/\/+$/, "") || "/";
            if (t != n.path()) {
                if (!i.prerender) {
                    var e = n.path();
                    if (-1 != a.indexOf(e))
                        return console.error("Infinite redirect loop detected! Stopping redirect to from " + e + " to " + t),
                        a = [],
                        !1;
                    a.push(e),
                    n.path(t).replace()
                }
                return t
            }
        }
        if (e.length > 1 && "/" == _.last(e)) {
            var t = e.slice(0, -1);
            return i.prerender || (a.push(e),
            n.path(t).replace()),
            t
        }
        return a = [],
        !1
    }
    ,
    s.load = function(t) {
        if (!_.isUndefined(o[t]))
            return o[t].promise;
        var n = e.get("rewrite/" + t);
        return o[t] = {
            promise: n
        },
        n.success(function(e) {
            _.isObject(e) && !_.isUndefined(e.rewrite) && (t != e.rewrite ? o[t].rewrite = e.rewrite : o[t].rewrite = null)
        }),
        n
    }
    ,
    s
}
]),
angular.module("tcoStore").factory("router", ["http", "$location", "$rootScope", "storeMetaData", "localMetaData", "$route", "customer", "rewrite", "extended$q", "$sessionStorage", "$exceptionHandler", "$injector", "product", "browser", function(e, t, n, i, o, s, a, r, c, l, d, u, p, m) {
    function f(e) {
        var t, n;
        for (t in s.routes)
            if (n = s.routes[t],
            g(e, n))
                return n;
        return null
    }
    function g(e, t) {
        var n = t.keys
          , i = {};
        if (!t.regexp)
            return null;
        var o = t.regexp.exec(e);
        if (!o)
            return null;
        for (var s = 1, a = o.length; a > s; ++s) {
            var r = n[s - 1]
              , c = o[s];
            r && c && (i[r.name] = c)
        }
        return i
    }
    function v(e, t, i) {
        h.model = e,
        h.modelData = e ? e.data : void 0,
        h.metaData = t || (h.modelData ? h.modelData.meta : void 0),
        h.breadcrumbs = i || (h.modelData ? h.modelData.breadcrumbs : void 0),
        n.$broadcast("router.next")
    }
    var h = {
        busy: !1
    }
      , b = null;
    h.currentPath = null,
    h.initiated = !1,
    h.metaData = {},
    h.changeModel = v,
    h.breadcrumbs = {};
    var w, y = function(e) {
        var n = t.path();
        return _.isString(e.path) ? e.path === n : (n + "").match(e.path)
    };
    h.parseRequest = function(e, n) {
        if (_.isUndefined(n)) {
            if (!_.isUndefined(s.current.params.id))
                return parseInt(s.current.params.id, 10);
            n = t.path(),
            _.isUndefined(n) && (n = "/")
        }
        if (tcologTime("parse request, path:" + n),
        "function" == typeof e.getModel)
            switch (e.getModel().className) {
            case "page":
                "/" != n && n || (n = "/home");
                break;
            case "category":
                var i = n.split("/");
                return 3 == i.length && "all" == i[2] && (n = "/" + i[1] + "?all=1"),
                n
            }
        return n
    }
    ,
    h.load = function(e) {
        try {
            b = null;
            var n = "router::load";
            tco.benchmark.start(n),
            h.mainBusy = !0,
            w = h.parseRequest(e);
            var s = t.search() || {}
              , a = _.isUndefined(s.preview_id) ? null : s.preview_id
              , d = c.defer()
              , u = e.load(w, {
                verbosity: 3,
                preview: a
            })
              , f = t.path();
            tco.benchmark.point(n, "current path: " + w);
            var g = function() {
                a && e.previewable && (w = "/preview/" + a),
                u.success(function() {
                    function s(e) {
                        if (!e || !r.redirect(e)) {
                            h.status = 404,
                            h.busy = !1,
                            h.model = void 0,
                            h.modelData = void 0,
                            h.breadcrumbs = void 0;
                            var t = _.findWhere(o, {
                                path: "404"
                            });
                            h.metaData = _.isUndefined(t) ? void 0 : t.meta
                        }
                        d.reject()
                    }
                    tco.benchmark.point(n, "model xhr success");
                    var a = e.get(w);
                    if (h.currentPath = w,
                    _.isUndefined(a) || !a.id) {
                        tco.benchmark.point(n, "404");
                        var c = w.replace(/\/+$/, "").split("/");
                        if (c.length > 0) {
                            var u = c[c.length - 1]
                              , f = function() {
                                var e = "/" + u;
                                r.load(e).then(function() {
                                    s(e)
                                }, function() {
                                    s(e)
                                })
                            };
                            p.find({
                                url: "^.*/" + u.replace(/\-\d+$/, "") + "(-d+)?"
                            }, {
                                limit: 1
                            }).then(function(e) {
                                try {
                                    var n = e.data[0].url;
                                    n != t.path() && (h.status = 301,
                                    h.redirectPath = n,
                                    h.mainBusy = !1,
                                    m.prerender || t.path(n)),
                                    d.reject()
                                } catch (i) {
                                    f()
                                }
                            }, f)
                        } else
                            s(!1)
                    } else {
                        tco.benchmark.point(n, "200"),
                        h.status = 200;
                        var g = _.find(o, y) || _.find(i, y);
                        if (_.isUndefined(g)) {
                            if (h.metaData = a.data.meta,
                            h.breadcrumbs = a.data.breadcrumbs,
                            !_.isUndefined(h.metaData)) {
                                var v, b, k = ["image", "price", "org_price", "url"];
                                for (v = 0,
                                b = k.length; b > v; v++)
                                    _.isUndefined(h.metaData[k[v]]) && !_.isUndefined(a.data[k[v]]) && (h.metaData[k[v]] = a.data[k[v]])
                            }
                        } else
                            h.metaData = g.meta,
                            h.breadcrumbs = g.breadcrumbs;
                        h.modelData = a.data,
                        h.model = a,
                        h.mainBusy = !1,
                        d.resolve()
                    }
                    l._routerReloadAttempts && (l._routerReloadAttempts = 0),
                    tco.benchmark.stop(n)
                }),
                u.error(function() {
                    return l._routerReloadAttempts ? l._routerReloadAttempts++ : l._routerReloadAttempts = 1,
                    l._routerReloadAttempts && l._routerReloadAttempts < 4 ? void setTimeout(function() {
                        window.location.reload()
                    }, 1e3) : (h.status = 500,
                    h.mainBusy = !1,
                    d.reject(),
                    void tco.benchmark.stop(n, "model xhr error"))
                })
            }
              , v = r.load(f);
            return v.success(function() {
                var e = r.redirect(f);
                e !== !1 ? (_.isUndefined(u.cancel) || u.cancel(),
                h.status = 301,
                h.redirectPath = e,
                h.mainBusy = !1,
                d.reject()) : g()
            }),
            v.error(g),
            d.promise
        } catch (k) {
            console.error(k)
        }
    }
    ,
    h.preLoad = function(e) {
        var n = t.search() || {};
        if (_.isUndefined(n.preview_id)) {
            var i = "router::preload: " + e
              , o = !1;
            tco.benchmark.start(i);
            try {
                r.load(e);
                var s = f(e);
                if (s && !_.isUndefined(s.resolve) && !_.isUndefined(s.resolve.request)) {
                    var a = s.resolve.request;
                    if (_.isArray(a) && "router" == a[0]) {
                        var c = a[1]
                          , l = u.get(c)
                          , p = h.parseRequest(c, e);
                        p && l && (tcologTime("router::preLoad " + c + " " + p),
                        l.load(p, {
                            verbosity: 3
                        }),
                        o = !0)
                    }
                }
                tco.benchmark.stop(i, o ? "matched" : "not matched")
            } catch (m) {
                tco.benchmark.stop(i, "error"),
                d(m)
            }
        }
    }
    ;
    var k = 0;
    return n.$on("$routeChangeStart", function() {
        h.status = 200,
        h.redirectPath = void 0,
        window.lastPath = window.location.href.replace(/\?.*/, ""),
        !k && h.initiated && (k = 1,
        Object.defineProperty(document, "referrer", {
            get: function() {
                return window.lastPath
            }
        })),
        h.currentPath = null,
        h.busy = !0
    }),
    n.$on("$routeChangeSuccess", function() {
        h.initiated = 1,
        h.busy = !1,
        n.$broadcast("router.next");
        try {
            hj("vpv", t.path())
        } catch (e) {}
    }),
    n.$on("$routeChangeError", function() {
        200 == h.status && (h.status = 500),
        h.busy = !1,
        n.$broadcast("router.next")
    }),
    h
}
]),
window.models = {},
window.tcoStore.factory("transport", ["$rootScope", "$window", "tools", "attribute", "$log", function(e, t, n, i, o) {
    var s = {}
      , a = window.models
      , r = {
        storage: !1
    }
      , c = function(e, t, i) {
        try {
            var s, a = null;
            if (e)
                switch (t.parser) {
                case "json":
                    a = JSON.parse(e);
                    break;
                case "simple":
                    a = n.unserialize(e, t.hashEncode, ";", ":");
                    for (s in a)
                        a[s] && _.isString(a[s]) && a[s].indexOf(",") > -1 && (a[s] = a[s].split(","));
                    break;
                case "value":
                    a = {},
                    a[t.valueName] = t.filter ? t.filter(e) : e;
                    break;
                default:
                    if (a = n.getServiceByName(t.parser).unserialize(e, t, i),
                    !_.isUndefined(t.format) && "flat" == t.format)
                        for (s in a)
                            a[s] = _.first(a[s])
                }
        } catch (r) {
            o.error("error unserializing string (from hash/search)", r)
        }
        return a
    }
      , l = function(e) {
        return c(n.hash(e.hashName, void 0), e, 2)
    }
      , d = function(e) {
        var t = tco.get("$location").search();
        return c(t[e.hashName], e, 1)
    }
      , u = function(e, t) {
        var i;
        switch (_.isUndefined(t) && (t = e.data),
        e.parser) {
        case "json":
            var o, s = {}, a = !1;
            for (o in t)
                Object.keys(t[o]).length && (s[o] = t[o],
                a = !0);
            i = a ? angular.toJson(s) : 0,
            delete s;
            break;
        case "simple":
            i = n.serialize(t, e.hashEncode, ";", ":");
            break;
        case "value":
            i = _.isUndefined(t[e.valueName]) ? "" : t[e.valueName];
            break;
        default:
            i = n.getServiceByName(e.parser).serialize(t, 2)
        }
        return i
    }
      , p = function(e, t) {
        try {
            return n.getServiceByName(e.parser).serialize(t || e.data, 1)
        } catch (i) {}
        return null
    };
    s.getModelInstance = function(e) {
        return a[e]
    }
    ,
    s.getModel = function(t, i, o) {
        var c;
        return _.isUndefined(a[t]) && (a[t] = {
            data: {}
        }),
        c = a[t],
        c.name = t,
        !_.isUndefined(o) && o && _.defaults(c, o),
        !_.isUndefined(i) && i && _.defaults(c.data, i),
        _.defaults(c, r),
        "url" == c.storage && (_.isUndefined(c.parser) && (c.parser = "json"),
        _.isUndefined(c.hashName) && (c.hashName = t),
        _.isUndefined(c.removeDefaultHash) && (c.removeDefaultHash = !0),
        c.hashEncode = "attribute" != c.parser,
        c.getDataHash = function(e) {
            return u(c, e)
        }
        ,
        c.getDataSearch = function(e) {
            return p(c, e)
        }
        ,
        c.save = function() {
            if (!_.isUndefined(c.watcher) && c.watcher) {
                c.busy = !0;
                var e = c.getDataHash()
                  , t = c.getDataSearch();
                n.hash(c.hashName, c.removeDefaultHash && c.defaultHash == e ? "" : e),
                tco.get("$location").search(c.hashName, t || null).replace(),
                c.busy = !1
            }
        }
        ,
        c.load = function() {
            var e = l(c)
              , t = d(c);
            s.setModelData(c.name, e || t ? _.extend(t || {}, e || {}) : c.defaultData)
        }
        ,
        (_.isUndefined(c.watcher) || !c.watcher) && (c.watcher = 1,
        c.defaultHash = c.getDataHash(),
        c.defaultData = angular.copy(c.data),
        c.load(),
        c.watcher = e.$watch(function() {
            return c.data
        }, c.save, !0))),
        c.data
    }
    ,
    s.setModelData = function(e, t) {
        var n, i = s.getModel(e);
        for (n in i)
            delete i[n];
        for (n in t)
            i[n] = t[n];
        return i
    }
    ,
    s.getAll = function() {
        return {
            models: a,
            history: m
        }
    }
    ;
    var m = []
      , f = null
      , g = null
      , v = null
      , h = []
      , b = 3;
    return e.$on("$routeChangeSuccess", function() {
        if (f = window.location.pathname,
        g) {
            var t, n, i, o;
            if (t = h.length,
            o = -1,
            t > 0 && (n = h[t - 1],
            v >= 0))
                if (0 > o && (i = v - t,
                _.isUndefined(m[i]) || m[i].uri != n || (o = i)),
                0 > o && (i = v + t,
                _.isUndefined(m[i]) || m[i].uri != n || (o = i)),
                o > -1) {
                    var r = m[o].models;
                    for (i in a)
                        "history" == a[i].storage && s.setModelData(i, _.isUndefined(r[i]) ? {} : r[i])
                } else
                    for (i in a)
                        a[i].storage || delete a[i];
            if (o > -1)
                m[v] = g,
                v = o;
            else {
                m = m.slice(0, v || 0);
                for (i in a)
                    "history" == a[i].storage && s.setModelData(i, {});
                m.push(g),
                m.length > b && (m = m.slice(m.length - b, m.length)),
                v = m.length
            }
            h = [],
            e.$broadcast("tcoStore_afterHistoryModelsUpdate")
        }
    }),
    e.$watch(function() {
        return window.location.hash
    }, function(e) {
        if (_.isUndefined(_.findWhere(a, {
            busy: !0
        }))) {
            var t, n;
            for (t in a)
                n = a[t],
                "url" == n.storage && !_.isUndefined(n.watcher) && n.watcher && n.load()
        }
    }),
    e.$on("$routeChangeStart", function(t, n) {
        if (e.$broadcast("tcoStore_beforeHistoryModelsUpdate"),
        !_.isNull(f)) {
            g = {
                uri: f,
                models: {}
            };
            var i, o;
            for (i in a)
                o = a[i],
                "history" === o.storage && (g.models[i] = angular.copy(o.data)),
                _.isFunction(o.watcher) && (o.watcher(),
                delete a[i]),
                o.storage || delete a[i]
        }
    }),
    t.addEventListener("popstate", function(e) {
        n.replacingStateFlag ? n.replacingStateFlag = 0 : h.push(window.location.pathname)
    }),
    s
}
]),
tcoStore.config(["$compileProvider", "config", function(e, t) {
    e.debugInfoEnabled(t.isDeveloper)
}
]),
window.tcoStore.run(["$rootScope", "transport", "tools", function(e, t, n) {
    function i() {
        return t.getModel("_scrollTop", {
            scrollTop: 0
        }, {
            storage: "history"
        })
    }
    function o() {
        return Math.floor(h.scrollTop)
    }
    function s(e) {
        (!v || e) && (h.scrollTop = e)
    }
    function a() {
        var e;
        return Math.floor(null != (e = h.scrollTopMax) ? e : h.scrollHeight - document.documentElement.clientHeight)
    }
    function r() {
        p && console.log("Scrolltop APPLY");
        try {
            var e = i();
            if (!e)
                throw "Scroll top history model not yet set";
            var t = e.scrollTop;
            p && console.log("Scrolltop apply to: ", t),
            s(t);
            var n = a();
            if (t > n + 20)
                throw "Can't set scroll top to desired position (yet?, max is:" + n + ")";
            p && console.log("Scrolltop apply scuceeded: ", o())
        } catch (c) {
            p && console.log(c),
            f > m ? (p && console.error("Set re-check timout. Try delay: ", g, ", tryNumber ", m, ", max tries ", f),
            d = window.setTimeout(r, g)) : p && console.error("Max scrollTop history tries reached")
        }
    }
    function c() {
        var e = i();
        e && (e.scrollTop = o()),
        p && console.log("Scrolltop SAVE: ", e.scrollTop)
    }
    function l() {
        window.clearTimeout(d),
        tries = 0
    }
    var d, u, p = !1, m = 0, f = 20, g = 150, v = !1, h = document.scrollingElement;
    return h ? (e.$on("$routeChangeStart", function() {
        v = !1
    }),
    e.$on("preventAutoScroll.request", function() {
        v = !0
    }),
    e.$on("tcoStore_beforeHistoryModelsUpdate", function() {
        l(),
        c()
    }),
    void e.$on("tcoStore_afterHistoryModelsUpdate", function() {
        l(),
        r(),
        u = window.setTimeout(function() {
            l(),
            r()
        }, 1e3)
    })) : void console.error("ScrollTopHistory Error, scrollingElement is:", h)
}
]),
function() {
    function e(e) {
        var t = 20
          , n = 36e5
          , i = 0
          , o = Date.now();
        e.$on("$routeChangeStart", function() {
            (i > t || Date.now() - o > n) && window.location.reload()
        }),
        e.$on("$routeChangeSuccess", function() {
            i++
        })
    }
    angular.module("tcoStore").run(e),
    e.$inject = ["$rootScope"]
}(),
window.tcoStore.filter("attributeLabel", ["attribute", function(e) {
    return function(t) {
        var n = e.getByCode(t);
        return _.isUndefined(n) ? null : n.label
    }
}
]),
window.tcoStore.filter("autoDecimal", function() {
    return function(e, t) {
        if (_.isUndefined(t) && (t = 2),
        _.isUndefined(e))
            return null;
        var n = Math.pow(10, t);
        e = Math.round(e * n) / n;
        var i = e.toFixed(t);
        return t ? i.replace(/\.?0+$/, "") : i
    }
}),
window.tcoStore.filter("countryName", ["website", function(e) {
    return function(t) {
        return tco.empty(t) ? null : tco.pathVal(_.findWhere(e.countries, {
            code: t
        }), "name")
    }
}
]),
window.tcoStore.filter("errorNotice", ["errorNoticeText", function(e) {
    return function(t) {
        return _.isUndefined(t) ? null : _.isUndefined(t.$invalid) || !t.$invalid ? null : !_.isUndefined(t.$error.email) && t.$error.$email ? e.EMAIL : !_.isUndefined(t.$error.required) && t.$error.required ? e.REQUIRED : e.INVALID
    }
}
]),
window.tcoStore.filter("formatdate", ["$filter", "website", function(e, t) {
    function n(e, t) {
        var n = parseInt(t, 10)
          , o = 30 > n ? n % 20 : n % 30
          , s = 3 >= o ? i[o] : i[0];
        return t + "<sup>" + s + "</sup>"
    }
    var i = ["th", "st", "nd", "rd"];
    return function(i) {
        return i ? e("date")(i, t.locale.dateFormat).replace(/(\d+)\+/, n) : i
    }
}
]),
window.tcoStore.filter("html2text", [function() {
    return function(e) {
        return e ? String(e).replace(/<[^>]+>/gm, "") : null
    }
}
]),
window.tcoStore.filter("mediaLabelFilter", function() {
    function e(e, n, i) {
        if (!e)
            return null;
        _.isArray(n) || (n = [n]),
        n = t(n);
        var o = n.indexOf("none") > -1
          , s = _.filter(e, function(e) {
            if (!e || !_.isObject(e))
                return !1;
            if (!_.isArray(e.labels) || !e.labels.length)
                return o;
            var i = t(e.labels);
            return _.intersection(i, n).length > 0
        });
        if (i) {
            var a = _.first(s);
            return a ? a.image : null
        }
        return s
    }
    function t(e) {
        return _.map(e, function(e) {
            return "string" == typeof e ? e.toLowerCase() : e
        })
    }
    return e
}),
window.tcoStore.filter("nl2br", ["$sce", function(e) {
    return function(t, n) {
        if (tco.empty(t))
            return "";
        var n = n || !0
          , i = n ? "<br />" : "<br>"
          , t = (t + "").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, "$1" + i + "$2")
          , o = e.trustAsHtml(t);
        return tco.empty(o) ? "" : o
    }
}
]),
window.tcoStore.filter("notice", ["noticeText", function(e) {
    return function(t, n) {
        return _.isUndefined(t) || !t ? null : !_.isUndefined(n) && t.match(/SUCCESS/) ? n : _.isUndefined(e[t]) ? t : e[t]
    }
}
]),
window.tcoStore.filter("offset", function() {
    return function(e, t) {
        return _.isUndefined(e) ? null : (t = parseInt(t, 10),
        e.slice(t))
    }
}),
window.tcoStore.filter("optionLabel", ["attribute", function(e) {
    return function(t, n) {
        return e.getOptionLabel(t, n)
    }
}
]),
window.tcoStore.filter("ordinal", function() {
    return function(e, t) {
        var n = parseInt(e.replace(/\D/g, ""), 10)
          , i = ["th", "st", "nd", "rd"]
          , o = n % 100
          , s = i[(o - 20) % 10] || i[o] || i[0];
        return t ? e + "<sup>" + s + "</sup>" : e + s
    }
}),
window.tcoStore.filter("orphan", function() {
    return function(e) {
        if (tco.empty(e))
            return void 0;
        try {
            return e.replace(/\s+([^\s]+)$/gm, "&nbsp;$1")
        } catch (t) {
            console.error(t, e)
        }
    }
}),
window.tcoStore.filter("partition", function() {
    var e = {};
    return function(t, n, i) {
        if (!_.isEmpty(t)) {
            var o = _.toArray(_.groupBy(_.values(t), function(e, t) {
                return Math.floor(t / n)
            }))
              , s = angular.toJson(t)
              , a = s + n;
            return i ? o : (angular.toJson(e[a]) !== angular.toJson(o) && (e[a] = o),
            e[a])
        }
    }
}),
window.tcoStore.filter("pathToMedia", ["tools", function(e) {
    return function(t) {
        return t ? _.isString(t) ? e.imagePathToUrl(t) : void 0 : t
    }
}
]),
window.tcoStore.filter("pathToUrl", ["website", "config", function(e, t) {
    var n = t.base.replace(/\/$/, "");
    return function(t) {
        if (!t)
            return t;
        var i = /(http(s?))/gi;
        return i.test(t) ? t : _.isString(t) ? ("/home" == t && (t = "/"),
        e.baseUrl + n + t) : void 0
    }
}
]),
window.tcoStore.filter("price", ["$filter", "website", "customer", "localConfig", function(e, t, n, i) {
    function o() {
        return _.findWhere(t.currency.list, {
            code: n.getCurrency()
        })
    }
    function s(t, n, s, c, l) {
        if (_.isUndefined(t))
            return t;
        _.isUndefined(s) && (s = 1);
        var d = o()
          , u = l ? t : t * (d ? d.rate : 1);
        if (!u && i.zeroPriceString && !c)
            return i.zeroPriceString;
        _.isUndefined(n) && (n = a),
        _.isString(n) && "auto" == n && (n = u % 1 > 0 ? 2 : 0);
        var p = -1e-4 > u
          , m = Math.abs(u).toFixed(n);
        r && (m = m.replace(/\B(?=(\d{3})+(?!\d))/g, ","));
        var f = l ? e("currency")(l) || l : d.symbol;
        return d ? (p ? "-" : "") + (s ? '<span class="price-currency">' + f + "</span>" : "") + m : ""
    }
    var a;
    a = _.isUndefined(i.defaultPricePrecission) ? "auto" : i.defaultPricePrecission;
    var r = i.thousandSeparator;
    return s
}
]),
window.tcoStore.filter("regex", function() {
    return function(e, t, n) {
        var i = new RegExp(n);
        return _.filter(e, function(e) {
            return e[t].match(i)
        })
    }
}),
window.tcoStore.filter("regionName", ["website", function(e) {
    return function(t, n) {
        if (t && n) {
            var i = _.findWhere(e.countries, {
                code: n
            });
            if (i.regions)
                return tco.pathVal(_.findWhere(i.regions, {
                    code: t
                }), "name")
        }
    }
}
]),
window.tcoStore.filter("stripTags", function() {
    return function(e) {
        return _.isUndefined(e) ? e : String(e).replace(/<[^>]+>/gm, "")
    }
}),
window.tcoStore.filter("trusted", ["$sce", function(e) {
    return function(t) {
        return e.trustAsResourceUrl(t)
    }
}
]),
window.tcoStore.filter("trustedHtml", ["$sce", function(e) {
    return function(t) {
        return t ? e.trustAsHtml(t) : t
    }
}
]),
window.tcoStore.filter("ucfirst", function() {
    return function(e) {
        return _.isString(e) ? e.charAt(0).toUpperCase() + e.slice(1).toLowerCase() : e
    }
}),
window.tcoStore.filter("yesno", function() {
    return function(e) {
        return e ? "Yes" : "No"
    }
}),
window.tcoStore.filter("isNew", function() {
    var e = new Date;
    return function(t) {
        try {
            var n = null;
            if (t.news_from_date && (n = new Date(t.news_from_date),
            n > e))
                return delete n,
                !1;
            if (t.news_to_date && (n = new Date(t.news_to_date),
            e > n))
                return delete n,
                !1;
            if (n)
                return delete n,
                !0
        } catch (i) {}
        return !1
    }
}),
window.tcoStore.filter("timeAgo", function() {
    var e = Date.now();
    return function(t, n) {
        if (_.isUndefined(t))
            return null;
        var i = new Date(t)
          , o = e - i.getTime();
        if (delete i,
        n && (o = -o),
        0 > o)
            return 0;
        var s = Math.floor(o / 1e3 / 60 / 60 / 24);
        if (s > 0)
            return s++,
            s + " days";
        o -= 1e3 * s * 60 * 60 * 24;
        var a = Math.floor(o / 1e3 / 60 / 60);
        if (a > 0)
            return a++,
            a + " hours";
        o -= 1e3 * a * 60 * 60;
        var r = Math.floor(o / 1e3 / 60);
        if (r > 0)
            return r++,
            r + " minutes";
        o -= 1e3 * r * 60;
        var c = Math.floor(o / 1e3);
        return c > 0 ? (c++,
        c + " seconds") : 0
    }
}),
window.tcoStore.filter("toUniversalId", function() {
    return function(e) {
        if (!e)
            return e;
        try {
            return e.className + ":" + e.id
        } catch (t) {
            return void 0
        }
    }
}),
tcoStore.provider("tcoStoreRoutes", ["localConfig", function(e) {
    function t(t) {
        try {
            return e.standardRoutes[t] || t
        } catch (n) {}
        return t
    }
    var n = function(e, t) {
        return e.load(t)
    };
    this.getStandardRoutePath = t,
    this.promises = {
        customer: ["router", "customer", n],
        page: ["router", "page", n],
        post: ["router", "post", n],
        postCategory: ["router", "postCategory", n],
        category: ["router", "category", n],
        product: ["router", "product", n],
        search: ["router", "search", function(e, t) {
            var i = n(e, t);
            return i.then(function() {
                t.redirect(e.model.url)
            }),
            i
        }
        ],
        websiteMore: ["website", "http", function(e, t) {
            return e.moreXhr || (e.moreHash || (e.moreHash = Math.floor(Date.now() / 1e3)),
            e.moreXhr = t.get("../js/more.json?" + e.moreHash),
            e.moreXhr.success(function(t) {
                e.hasMore = 1,
                _.extend(e, t)
            })),
            e.moreXhr
        }
        ]
    },
    this.views = {
        account: {
            login: {
                controller: "AccountLoginController",
                templateUrl: "/views/account/login.html",
                resolve: {
                    customerPromise: this.promises.customer
                }
            },
            resetPassword: {
                controller: "AccountLoginController",
                templateUrl: "/views/account/resetpassword.html",
                resolve: {
                    customerPromise: this.promises.customer
                }
            },
            pages: {
                templateUrl: "/views/account.html",
                controller: "AccountController",
                resolve: {
                    customerPromise: this.promises.customer,
                    pagePromise: ["customer", "$route", function(e, t) {
                        if (_.isUndefined(t.current.params.path))
                            return null;
                        var n = t.current.params.path;
                        return "card-details" == n ? e.tokens.load() : "order" == n ? e.orders.load() : null
                    }
                    ],
                    websiteMore: this.promises.websiteMore
                }
            },
            subscribe: {
                controller: "SubscribeController",
                templateUrl: "/views/account/subscribe.html"
            },
            unsubscribe: {
                controller: "UnsubscribeController",
                templateUrl: "/views/account/unsubscribe.html"
            }
        },
        basket: {
            view: {
                templateUrl: "/views/basket.html",
                controller: "BasketController",
                resolve: {
                    customerPromise: this.promises.customer
                }
            },
            addProduct: {
                controller: "EmptyController",
                resolve: {
                    promise: ["customer", "$location", "$route", function(e, n, i) {
                        var o = e.basket.add(1, i.current.params.product);
                        return o.then(function() {
                            n.path(t("/basket"))
                        }),
                        o
                    }
                    ]
                }
            }
        },
        checkout: {
            login: {
                controller: "CheckoutLoginController",
                templateUrl: "/views/checkout/login.html",
                resolve: {
                    customerPromise: this.promises.customer
                }
            },
            form: {
                templateUrl: "/views/checkout/form.html",
                controller: "CheckoutController",
                controllerAs: "$ctrl",
                reloadOnSearch: !1,
                resolve: {
                    customerPromise: this.promises.customer,
                    checkoutPromise: ["customer", function(e) {
                        return e.checkout.load()
                    }
                    ],
                    websiteMore: this.promises.websiteMore
                }
            },
            success: {
                templateUrl: "/views/checkout/success.html",
                controller: "SuccessController",
                resolve: {
                    successPromise: ["customer", function(e) {
                        return e.success.load()
                    }
                    ]
                }
            },
            paypal: {
                controller: "EmptyController",
                templateUrl: "/views/checkout/paypal.html",
                resolve: {
                    promise: ["customer", "$location", "$route", "http", "router", function(e, t, n, i, o) {
                        var s = t.search();
                        s.method = n.current.params.method,
                        s.action = n.current.params.action;
                        var a = e.customerPost("checkout/paypal", s, o, {}, {
                            returnMatching: !0
                        });
                        return a.then(function() {
                            o.busy = !1
                        }),
                        a.success(function(e) {
                            t.search(""),
                            !_.isUndefined(e.error) && e.error ? (t.path("/checkout"),
                            alert(e.error)) : t.path(e.redirect)
                        }),
                        a.error(function() {
                            t.search(""),
                            t.path("/checkout")
                        }),
                        a
                    }
                    ]
                }
            }
        },
        catalog: {
            search: {
                templateUrl: "/views/catalog/category/view.html",
                controller: "CategoryController",
                reloadOnSearch: !1,
                resolve: {
                    request: this.promises.search
                }
            },
            searchPage: {
                templateUrl: "/views/catalog/search/view.html",
                controller: "SearchController",
                reloadOnSearch: !1
            },
            category: {
                templateUrl: "/views/catalog/category/view.html",
                controller: "CategoryController",
                resolve: {
                    request: this.promises.category
                },
                reloadOnSearch: !1
            },
            product: {
                templateUrl: "/views/catalog/product/view.html",
                controller: "ProductController",
                resolve: {
                    request: this.promises.product
                },
                reloadOnSearch: !1
            }
        },
        content: {
            page: {
                template: '<div ng-include="templateUrl"></div>',
                controller: "PageController",
                resolve: {
                    request: this.promises.page
                }
            },
            reviews: {
                templateUrl: "/views/content/reviews.html",
                controller: "ReviewsListController",
                resolve: {
                    request: this.promises.page,
                    reviews: ["review", function(e) {
                        return e.loadAll(3)
                    }
                    ]
                }
            },
            noRoute: {
                templateUrl: "/views/404.html",
                resolve: {
                    status: ["router", function(e) {
                        e.status = 404
                    }
                    ]
                }
            }
        },
        blog: {
            post: {
                template: '<div ng-include="templateUrl"></div>',
                controller: "PostController",
                resolve: {
                    request: this.promises.post
                },
                reloadOnSearch: !1
            },
            category: {
                templateUrl: "/views/blog/category/view.html",
                controller: "PostCategoryController",
                reloadOnSearch: !1,
                resolve: {
                    request: this.promises.postCategory
                }
            }
        },
        special: {
            makedev: {
                template: "",
                controller: ["$location", "$scope", "config", function(e, t, n) {
                    n.isDeveloper = !0;
                    var i = new Date;
                    i.setTime(i.getTime() + 2592e6),
                    document.cookie = "isDeveloper=1;expires=" + i.toUTCString() + ";path=/",
                    alert("Developer mode enabled"),
                    e.path("/")
                }
                ]
            }
        }
    },
    this.setUpRoutingTable = function(e, n) {
        benchmarkId = "tcoStoreRoutes::setUpRoutingTable",
        tco.benchmark.start(benchmarkId);
        var i = this.views;
        e.when("/account/login", i.account.login).when("/account/resetpassword", i.account.resetPassword).when("/account/:path/:id|/account/:path|/account", i.account.pages).when("/newsletter/subscribe", i.account.subscribe).when("/newsletter/unsubscribe", i.account.unsubscribe),
        _.isUndefined(i.basket) || e.when(t("/basket"), i.basket.view).when(t("/basket") + "/add/:product", i.basket.addProduct),
        _.isUndefined(i.checkout) || (_.isUndefined(i.checkout.success) || e.when("/checkout/success", i.checkout.success),
        _.isUndefined(i.checkout.form) || e.when("/checkout/login", i.checkout.login).when("/checkout/paypal/:method/:action", i.checkout.paypal).when("/checkout", i.checkout.form).when("/checkout/onepage", {
            redirectTo: "/checkout"
        })),
        e.when("/search", i.catalog.searchPage).when("/search/:path*", i.catalog.search).when("/reviews", i.content.reviews).when("/home", {
            redirectTo: "/"
        }).when("/_makedev", i.special.makedev).otherwise(i.content.page),
        tco.benchmark.point(benchmarkId, "standard routes set");
        var o = function(t, n, i) {
            var o = tco.pathVal(window, "autoInitData.data." + t);
            if (o) {
                _.isUndefined(window.autoInitData.routes[n]) && (window.autoInitData.routes[n] = []),
                o = _.sortBy(_.filter(o, function(e) {
                    return !_.isUndefined(e.url) && e.url
                }));
                var s = window.autoInitData.routes[n];
                _.each(o, function(t) {
                    s.push(t.url),
                    e.when(t.url, i)
                })
            }
        };
        if (!_.isUndefined(window.autoInitData)) {
            if (o("category", "product", i.catalog.category),
            tco.benchmark.point(benchmarkId, "catalog"),
            o("postCategory", "post", i.blog.category),
            tco.benchmark.point(benchmarkId, "blog"),
            !_.isUndefined(window.autoInitData.routes)) {
                var s, a, r, c = window.autoInitData.routes;
                for (s in c) {
                    switch (s) {
                    case "product":
                        a = "/:path",
                        r = i.catalog[s];
                        break;
                    case "post":
                        a = "/:path",
                        r = i.blog[s];
                        break;
                    default:
                        r = !1
                    }
                    r && _.each(c[s], function(t) {
                        e.when(t + a, r)
                    })
                }
            }
            tco.benchmark.point(benchmarkId, "sub routes")
        }
        e.when("/blog/:category/:post", i.blog.post).when("/blog/:category", i.blog.category).when("/blog", i.blog.category),
        n.html5Mode(!0),
        n.hashPrefix = "!",
        tco.benchmark.stop(benchmarkId)
    }
    ,
    this.$get = [function() {
        return this
    }
    ]
}
]),
"scrollingElement"in document || function() {
    function e(e) {
        return window.getComputedStyle ? getComputedStyle(e, null) : e.currentStyle
    }
    function t(e) {
        return window.HTMLBodyElement ? e instanceof HTMLBodyElement : /body/i.test(e.tagName)
    }
    function n(e) {
        for (var n = e; n = n.nextSibling; )
            if (1 == n.nodeType && t(n))
                return n;
        return null
    }
    function i(e) {
        return "none" != e.display && !("collapse" == e.visibility && /^table-(.+-group|row|column)$/.test(e.display))
    }
    function o(t) {
        var n = e(t)
          , o = e(document.documentElement);
        return "visible" != n.overflow && "visible" != o.overflow && i(n) && i(o)
    }
    var s, a = function() {
        var e = /^CSS1/.test(document.compatMode);
        if (!e)
            return !1;
        if (void 0 === s)
            try {
                var t = document.createElement("iframe");
                t.style.height = "1px",
                (document.body || document.documentElement || document).appendChild(t);
                var n = t.contentWindow.document;
                n.write('<!DOCTYPE html><div style="height:9999em">x</div>'),
                n.close(),
                s = n.documentElement.scrollHeight > n.body.scrollHeight,
                t.parentNode.removeChild(t)
            } catch (i) {
                s = !1
            }
        return s
    }, r = function() {
        if (a())
            return document.documentElement;
        var e = document.body
          , t = e && !/body/i.test(e.tagName);
        return e = t ? n(e) : e,
        e && o(e) ? null : e
    };
    Object.defineProperty ? Object.defineProperty(document, "scrollingElement", {
        get: r
    }) : document.__defineGetter__ ? document.__defineGetter__("scrollingElement", r) : (document.scrollingElement = r(),
    document.attachEvent && document.attachEvent("onpropertychange", function() {
        "activeElement" == window.event.propertyName && (document.scrollingElement = r())
    }))
}(),
window.tcoStore.constant("browser", {
    prerender: "object" == typeof navigator && "string" == typeof navigator.userAgent && /prerender/i.test(navigator.userAgent),
    touchy: "ontouchstart"in window || window.DocumentTouch && document instanceof DocumentTouch,
    isRetina: function() {
        try {
            if (window.devicePixelRatio > 1)
                return !0;
            var e = "(-webkit-min-device-pixel-ratio: 1.5),                (min--moz-device-pixel-ratio: 1.5),                (-o-min-device-pixel-ratio: 3/2),                (min-resolution: 1.5dppx)";
            if (window.matchMedia && window.matchMedia(e).matches)
                return !0
        } catch (t) {
            return !1
        }
    }()
}),
window.tcoStore.constant("config", _.extend({
    isDeveloper: function() {
        try {
            return document.cookie.match(/isDeveloper/)
        } catch (e) {}
        return !1
    }(),
    bases: function() {
        var e = [];
        return e.push("trade"),
        e
    }()
}, window.core2Config)),
window.tcoStore.constant("errorNoticeText", {
    INVALID: "This field is not valid.",
    REQUIRED: "This is a required field.",
    EMAIL: "Valid email is required."
}),
window.tcoStore.constant("noticeText", {
    ACCOUNT_EXISTS: "Account already exists",
    ACCOUNT_NOT_ACTIVE: "Account is not active",
    AUTH: "Authentication error",
    STOCK: "Product is out of stock",
    ERROR: "Unexpected error",
    INVALID: "Invalid data provided",
    INVALID_COUPON: "Invalid coupon code",
    LOGGEDIN: "You are already logged in",
    LOGGEDOUT: "You are not logged in",
    MISSING: "Please fill all required fields",
    OPTIONS: "Please select all required options",
    REQUEST: "Invalid request",
    COUPON_REMOVED: "Coupon code has been removed",
    SESSION_EXPIRED: "Session expired",
    SUCCESS: "Data saved",
    NOTEXIST: "Account does not exist",
    USED: "You can't set e-mail address to this one",
    SUBSCRIBED: "You are subscribed already"
}),
window.tcoStore.constant("storeMetaData", [{
    path: "/basket",
    meta: {
        title: "Basket",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "Basket"
    }]
}, {
    path: "/checkout",
    meta: {
        title: "Secure Checkout",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "Secure Checkout"
    }]
}, {
    path: "/checkout/login",
    meta: {
        title: "Secure Checkout - Login",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "Secure Checkout - Login"
    }]
}, {
    path: "/checkout/success",
    meta: {
        title: "Order has been placed",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "Order has been placed"
    }]
}, {
    path: new RegExp("^/account(/dashboard)?$"),
    meta: {
        title: "Dashboard",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account"
    }]
}, {
    path: "/account/login",
    meta: {
        title: "Sign In",
        robots: "NOINDEX,FOLLOW"
    }
}, {
    path: "/account/edit",
    meta: {
        title: "Account Information",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "Account Information"
    }]
}, {
    path: "/account/address-book",
    meta: {
        title: "Address Book",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "Address Book"
    }]
}, {
    path: new RegExp("^/account/address-edit"),
    meta: {
        title: "Address Edit",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "Address Book",
        url: "/account/address-book"
    }, {
        label: "Address Edit"
    }]
}, {
    path: "/account/my-orders",
    meta: {
        title: "My Orders",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "My Orders"
    }]
}, {
    path: "/account/card-details",
    meta: {
        title: "Card details",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "Card details"
    }]
}, {
    path: new RegExp("^/account/order"),
    meta: {
        title: "My Orders",
        robots: "NOINDEX,FOLLOW"
    },
    breadcrumbs: [{
        label: "My Account",
        url: "/account"
    }, {
        label: "My Orders",
        url: "/account/my-orders"
    }, {
        label: "Order Details"
    }]
}]),
window.tcoStore.constant("website", function() {
    var e = {
        baseUrl: location.origin
    };
    return _.isUndefined(window.autoInitData) || _.isUndefined(window.autoInitData.website) ? e : _.extend(e, window.autoInitData.website)
}()),
window.tcoStore.service("check", ["$location", "customer", "tcoStoreRoutes", "localConfig", function(e, t, n, i) {
    var o = {}
      , s = {}
      , a = 2
      , r = !1
      , c = function(t, n) {
        e.path(_.isUndefined(t) || !t ? n : t).replace()
    }
      , l = n.getStandardRoutePath("/basket")
      , d = {
        hasItemsInBasket: function(e, n, i) {
            if (t.basket.loaded && t.basket.data.qty < 1) {
                if (e)
                    return 1;
                r && console.log("check: ", "hasItemsInBasket", "redirect"),
                c(n, l)
            }
            return 0
        },
        loggedIn: function(e, n) {
            if (t.loaded && !t.data.logged) {
                if (e)
                    return 1;
                console.log("check"),
                c(n, "/account/login")
            }
            return 0
        },
        notLoggedIn: function(e, n) {
            if (t.loaded && t.data.logged) {
                if (e)
                    return 1;
                c(n, i.account && i.account.afterLoginPath ? i.account.afterLoginPath : "/account")
            }
            return 0
        },
        hasCheckoutSuccessData: function(e, n) {
            if (t.success.loaded && (_.isUndefined(t.success.data.id) || !t.success.data.id)) {
                if (e)
                    return 1;
                r && console.log("check: ", "hasCheckoutSuccessData", "redirect"),
                c(n, l)
            }
            return 0
        }
    };
    return o.models = [],
    o.makeSure = function(e, t, n, i) {
        s[e] || (s[e] = 0),
        void 0 === i && (i = a);
        var c = {
            test: e
        };
        return c.interval = window.setInterval(function() {
            if (c.hold)
                return void (r && console.log("check: ", e, "hold flag set"));
            var o = d[e](s[e] < i, n, t);
            r && console.log("check: ", e, o, "tries:", s[e]),
            s[e] = o ? s[e] + o : 0
        }, 300),
        c.cancel = function() {
            r && console.log("check: ", e, "cancel"),
            window.clearInterval(c.interval)
        }
        ,
        c.hold = !1,
        t.$on("$destroy", function() {
            c.cancel(),
            delete c
        }),
        o.models.push(c),
        c
    }
    ,
    o
}
]),
window.tcoStore.service("EnhancedEcommerceGtm", [function() {
    this.runit = function() {
        console.log("RUNIT")
    }
}
]),
window.tcoStore.service("extended$q", ["$q", "config", function(e, t) {
    var n = {};
    return n.all = e.all,
    n.defer = function() {
        var n = e.defer()
          , i = n.promise;
        return i.success = function(e) {
            return i.then(function(n) {
                _.isUndefined(n) ? e() : e(n.data, n.status, n.headers, t)
            }),
            i
        }
        ,
        i.error = function(e) {
            return i.then(null, function(n) {
                if (n) {
                    if (!_.isUndefined(n.canceled))
                        return;
                    e(n.data, n.status, n.headers, t)
                } else
                    e()
            }),
            i
        }
        ,
        n
    }
    ,
    n
}
]),
window.tcoStore.service("gtm", ["$rootScope", "http", "$filter", "$injector", "config", "localConfig", "website", "product", "privacyService", function(e, t, n, i, o, s, a, r, c) {
    function l(e, t, n) {
        if ("success-page" == t)
            try {
                o = _.findWhere(n.success.data.gtm, {
                    event: "checkoutSuccess"
                }).ecommerce
            } catch (i) {
                o = null
            }
        else
            var o = _.map(n.basket.data.items, function(e) {
                var t = r.get(e.product)
                  , n = p.ee.getProductImpression(t);
                return n.qty = e.request.qty,
                n
            });
        o && p.ee.checkout(e, t, o)
    }
    function d() {
        p.push({
            event: "tier_cookie_consent_change",
            tco_tier_cookie_consent: c.getSettings()
        })
    }
    var u = null
      , p = {
        push: function(t) {
            if (_.isUndefined(window.dataLayer) && (window.dataLayer = []),
            e.$broadcast("before_gtm_event_send", t),
            window.google_tag_manager) {
                var n = window.google_tag_manager[o.GTM];
                n && Object.keys(t).forEach(function(e) {
                    n.dataLayer.set(e, void 0)
                })
            }
            window.dataLayer.push(t)
        },
        ee: {
            isEnabled: !!o.ee_enabled,
            keepCheckoutOrdered: s.gtm_keep_checkout_ordered,
            checkoutBuffer: [],
            _promotionImpressionsBuffer: [],
            push: function(e) {
                p.ee.isEnabled && p.push(e)
            },
            getProductImpression: function(t) {
                var o = t.data;
                try {
                    var s = {
                        name: o.name,
                        id: _.isUndefined(a.force_configurable_sku) || _.isUndefined(o.parent_sku) ? o.sku : o.parent_sku,
                        price: o.price,
                        brand: o.brand ? n("optionLabel")(o.brand, "brand") : "",
                        category: _.isUndefined(o.category_path) ? _.first(_.pluck(_.rest(_.initial(o.breadcrumbs || [])), "label"), 5).join(" / ") : o.category_path
                    };
                    if (e.$broadcast("alter_product_impression", {
                        productData: o,
                        impressionData: s
                    }),
                    i.has("customizedProductImpressionFilterFilter")) {
                        var r = n("customizedProductImpressionFilter");
                        "function" == typeof r && (s = r(s, o))
                    }
                    return s
                } catch (c) {
                    return {}
                }
            },
            productImpressions: function(e, t) {
                p.ee.push({
                    event: "enhancedEvent",
                    eventIsNonInteraction: !0,
                    "interaction-type": !0,
                    ecommerce: {
                        currencyCode: t,
                        impressions: e
                    }
                })
            },
            productClick: function(e, t) {
                var n = {
                    event: "productClick",
                    eventCategory: "Ecommerce",
                    eventAction: "Product Click",
                    eventLabel: "",
                    eventValue: "",
                    eventIsNonInteraction: !1,
                    "interaction-type": !1,
                    ecommerce: {
                        click: {
                            products: [e]
                        }
                    }
                };
                _.isUndefined(t) || (n.ecommerce.click.actionField = {
                    list: t
                }),
                p.ee.push(n)
            },
            checkout: function(e, t, n) {
                var i = {
                    event: "checkout",
                    eventIsNonInteraction: !0,
                    "interaction-type": !0,
                    ecommerce: {
                        checkout: {
                            actionField: {
                                step: e,
                                option: t
                            },
                            products: n
                        }
                    }
                };
                return p.ee.keepCheckoutOrdered ? (p.ee.checkoutBuffer.push(i),
                void p.ee.sendCheckoutBuffer()) : void p.ee.push(i)
            },
            sendCheckoutBuffer: _.debounce(function() {
                var e = p.ee.checkoutBuffer;
                p.ee.checkoutBuffer = [],
                e = _.sortBy(e, function(e) {
                    try {
                        return e.ecommerce.checkout.actionField.step
                    } catch (t) {
                        return !1
                    }
                }),
                _.each(e, function(e) {
                    p.ee.push(e)
                })
            }, 200),
            checkoutOption: function(e, t) {
                _.isUndefined(e) || _.isUndefined(t) || _.isNull(t) || p.ee.push({
                    event: "checkoutOption",
                    eventIsNonInteraction: !0,
                    "interaction-type": !0,
                    ecommerce: {
                        checkout_option: {
                            actionField: {
                                step: e,
                                option: t
                            }
                        }
                    }
                })
            },
            productDetails: function(e) {
                p.ee.push({
                    event: "enhancedEvent",
                    eventIsNonInteraction: !0,
                    "interaction-type": !0,
                    ecommerce: {
                        detail: {
                            products: [e]
                        }
                    }
                })
            },
            promotionImpressions: function(e) {
                p.ee._promotionImpressionsBuffer.push(e),
                p.ee._sendPromotionImpressions()
            },
            _sendPromotionImpressions: _.debounce(function() {
                p.ee.push({
                    event: "enhancedEvent",
                    eventIsNonInteraction: !0,
                    "interaction-type": !0,
                    ecommerce: {
                        promoView: {
                            promotions: p.ee._promotionImpressionsBuffer
                        }
                    }
                }),
                p.ee._promotionImpressionsBuffer = []
            }, 100),
            promotionClick: function(e) {
                p.ee._promotionImpressionsBuffer.push(e),
                p.ee.push({
                    event: "promotionClick",
                    eventCategory: "Ecommerce",
                    eventAction: "Promotion Click",
                    eventLabel: "",
                    eventValue: "",
                    eventIsNonInteraction: !1,
                    "interaction-type": !1,
                    ecommerce: {
                        promoClick: {
                            promotions: [e]
                        }
                    }
                })
            }
        },
        sendInteractionEvent: function(e, t, n, i) {
            p.sendEvent("interaction", e, t, n, i, !1)
        },
        sendNonInteractionEvent: function(e, t, n, i) {
            p.sendEvent("non-interaction", e, t, n, i, !0)
        },
        sendEvent: function(e, t, n, i, o, s) {
            var a = {
                event: e,
                target: t,
                action: n,
                label: i,
                "interaction-type": "undefined" != typeof s ? s : !1,
                "target-properties": i,
                eventCategory: t,
                eventAction: n,
                eventLabel: i,
                eventValue: o,
                eventIsNonInteraction: "undefined" != typeof s ? s : !1
            };
            p.push(a)
        },
        contentView: function(t, o, s) {
            if (u != o) {
                u = o;
                var a = void 0
                  , r = void 0;
                try {
                    var c;
                    switch (_.isArray(t) ? (c = t,
                    t = _.first(t)) : c = [t],
                    t.className) {
                    case "product":
                        var l = [];
                        _.each(c, function(e) {
                            l.push(p.ee.getProductImpression(e))
                        }),
                        a = {
                            id: t.data.sku,
                            name: t.data.name,
                            type: "product",
                            custom: _.isUndefined(t.data.passToGtm) ? void 0 : t.data.passToGtm
                        },
                        r = {
                            detail: {
                                products: l
                            }
                        };
                        break;
                    case "search":
                        a = {
                            type: "search",
                            term: t.data.term
                        };
                        break;
                    default:
                        a = {},
                        a.id = _.isUndefined(t.data.gtm_id) || "" == t.data.gtm_id ? t.data.id : t.data.gtm_id,
                        a.type = _.isUndefined(t.data.gtm_type) || "" == t.data.gtm_type ? t.className : t.data.gtm_type,
                        a.name = _.isUndefined(t.data.gtm_name) || "" == t.data.gtm_name ? t.data.name : t.data.gtm_name
                    }
                } catch (d) {}
                var m = {
                    event: "content-view",
                    "content-name": o,
                    "event-data": void 0,
                    ecommerce: r,
                    "content-data": a,
                    meta: s
                };
                if (e.$broadcast("before_gtm_content_view_send", m),
                i.has("customizedContentViewFilterFilter")) {
                    var f = n("customizedContentViewFilter");
                    "function" == typeof f && (m = f(m))
                }
                p.push(m)
            }
        },
        trackCheckoutStep: l,
        pushPrivacySettings: d
    };
    return p
}
]),
angular.module("tcoStore").service("http", ["$http", "extended$q", "$rootScope", "config", "$window", "$localStorage", "$filter", "$injector", function(e, t, n, i, o, s, a, r) {
    function c(e) {
        e.status = 3,
        e.canceler.resolve(),
        e.defer.reject({
            data: null,
            canceled: !0
        })
    }
    var l = Date.now()
      , d = {};
    d.url = i.api.host.replace(/https?:/, "") + "/",
    d.appendix = "",
    d.getUrl = function(e, t, n) {
        var o = location.protocol;
        !_.isUndefined(t) && t && !_.isUndefined(i.https) && i.https && (o = "https");
        var s = d.url
          , a = o + s + e + d.appendix;
        return a
    }
    ;
    var u = []
      , p = function(e, n, i, o, s) {
        var a = "POST" == e
          , r = {
            busy: 0,
            status: 0,
            priority: 0,
            cancelOnPathChange: !a,
            cancelMatchingImmediately: !a,
            returnMatching: !a,
            isPrivate: a,
            node: !1
        };
        if (angular.extend(r, i),
        r.canceler = t.defer(),
        r.method = e,
        r.path = n,
        r.model = _.isUndefined(s) ? null : s,
        r.data = _.isUndefined(o) ? null : o,
        r.cancelMatchingImmediately || r.returnMatching) {
            var l;
            for (l in u)
                if (u[l] && u[l].path == n && u[l].busy) {
                    if (r.returnMatching)
                        return u[l].defer.promise;
                    r.cancelMatchingImmediately && (tcologTime("CANCEL REQUEST"),
                    c(u[l]),
                    u[l] = null)
                }
        }
        return r.defer = t.defer(),
        u.push(r),
        m(r),
        r.defer.promise.cancel = function() {
            c(r)
        }
        ,
        r.defer.promise
    }
      , m = function(t) {
        t.busy = 1;
        var n;
        n = e({
            method: t.method,
            withCredentials: t.isPrivate,
            url: d.getUrl(t.path, t.isPrivate, t.node),
            headers: "POST" == t.method ? {
                "Content-type": "application/json"
            } : void 0,
            data: t.data,
            timeout: t.canceler.promise,
            responseType: t.responseType
        }),
        n.then(null, function(e) {
            try {
                var n = ["Request failed!"];
                try {
                    n.push("status:" + e.status),
                    n.push("status text:" + e.statusText),
                    n.push("url:" + e.config.url),
                    e.config.url.indexOf("piotrack") > -1 && n.push("data: " + angular.toJson(t.data))
                } catch (i) {}
                var o = n.join("\n");
                dev.error(o)
            } catch (i) {}
        }),
        n.success(function(e) {
            if (t.status = 1,
            t.busy = 0,
            !_.isUndefined(e.reload)) {
                var n = parseInt(e.reload, 10);
                l && n > l && (!localStorage.lastReload || localStorage.lastReload != n) && (localStorage.lastReload = n,
                window.location.reload())
            }
            t.defer.resolve({
                data: e
            }),
            e.gtm && (_.isUndefined(window.dataLayer) && (window.dataLayer = []),
            _.each(_.compact(_.isArray(e.gtm) ? e.gtm : [e.gtm]), function(e) {
                window.dataLayer.push(e)
            }))
        }),
        n.error(function(e) {
            t.status = 2,
            t.busy = 0,
            t.defer.reject({
                data: e
            })
        })
    };
    return d.post = function(e, t, n, i) {
        return p("POST", e, n, t, i)
    }
    ,
    d.get = function(e, t, n) {
        return p("GET", e, t, null, n)
    }
    ,
    d.postLikeForm = function(e, t, n) {
        var i = document.createElement("form");
        i.setAttribute("method", "post"),
        i.setAttribute("action", e);
        for (var o in t)
            if (t.hasOwnProperty(o)) {
                var s = document.createElement("input");
                s.setAttribute("type", "hidden"),
                s.setAttribute("name", o),
                s.setAttribute("value", t[o]),
                i.appendChild(s)
            }
        var a;
        (a = tco.pathVal(n, "target")) && i.setAttribute("target", a),
        document.body.appendChild(i),
        i.submit()
    }
    ,
    d
}
]),
window.tcoStore.service("postcodeanywhere", ["http", function e(t) {
    function n(e) {
        return _.isUndefined(i[e]) && (i[e] = t.get(e)),
        i[e]
    }
    var i = {}
      , e = {};
    return e.getList = function(e) {
        return e ? n("postcodeanywhere/list/" + e) : void 0
    }
    ,
    e.getView = function(e) {
        return e ? n("postcodeanywhere/view/" + e) : void 0
    }
    ,
    e
}
]),
window.tcoStore.service("ProductService", ["ngDialog", "product", "stock", "extended$q", function(e, t, n, i) {
    function o(o, s, a) {
        function r() {
            e.close(),
            e.open({
                templateUrl: "/views/catalog/product/view-preview.html",
                controller: "ProductPreviewController",
                className: "quick-view__modal-wrap",
                data: {
                    productId: o,
                    parentScope: a
                },
                showClose: !1
            }),
            c()
        }
        function c() {
            s && (s.busy = !1)
        }
        if (s) {
            if (s.busy)
                return;
            s.busy = !0
        }
        i.all(t.load(o, {
            verbosity: 3
        }), n.load(o)).then(r, c)
    }
    return {
        previewProduct: o
    }
}
]),
window.tcoStore.service("storelocator", ["http", "$filter", "structuralData", function t(e, n, i) {
    var t = {
        handles: {}
    };
    return t.init = function(e) {
        return _.isUndefined(t.handles[e]) && (t.handles[e] = {
            list: [],
            lookedup: !1,
            settings: {
                qty: 20,
                include_disabled: 0,
                country: "",
                distance: 100
            },
            postcode: ""
        }),
        t.handles[e]
    }
    ,
    t.getList = function(n, i) {
        var o = t.init(n);
        if (o.postcode || i) {
            var s = e.get("storelocator/list/" + o.postcode + "?qty=" + o.settings.qty + "&distance=" + o.settings.distance + "&include_disabled=" + o.settings.include_disabled + "&country=" + o.settings.country);
            return s.then(function(e) {
                o.list = e.data,
                o.lookedup = !0
            }),
            s
        }
    }
    ,
    t.getXHR = function(t) {
        return t = angular.extend({
            postcode: "",
            qty: "",
            distance: "",
            country: "",
            include_disabled: ""
        }, t),
        e.get("storelocator/list/" + t.postcode + "?qty=" + t.qty + "&distance=" + t.distance + "&include_disabled=" + t.include_disabled + "&country=" + t.country)
    }
    ,
    t.setStructuralData = function(e) {
        store = {
            name: e.name,
            description: e.description,
            openHours: _.map(e.open, function(e, t) {
                return n("date")(e.time, "EEEE", "+0000") + e.hours
            }),
            phone: e.phone,
            street: e.street,
            city: e.city,
            region: e.region,
            country: e.country
        },
        i.addStoresData(store)
    }
    ,
    t
}
]),
window.tcoStore.service("tools", ["$rootScope", "config", "smoothScroll", "localConfig", "creditCard", function(e, t, n, i, o) {
    var s = {}
      , a = null
      , r = null;
    s.replacingStateFlag = 0;
    var c = function(e) {
        return e
    };
    s.serialize = function(e, t, n, i) {
        _.isUndefined(n) && (n = "&"),
        _.isUndefined(i) && (i = "=");
        var o, s = [], a = _.isUndefined(t) || t ? encodeURIComponent : c;
        for (var r in e)
            if (o = e[r],
            e.hasOwnProperty(r) && (_.isArray(o) ? o.length : o)) {
                var l = _.isArray(o) ? _.reduce(o, function(e, t) {
                    return e + (e ? "," : "") + a(t)
                }, "") : a(o);
                l && s.push(a(r) + i + l)
            }
        return s.join(n)
    }
    ,
    s.unserialize = function(e, t, n, i) {
        _.isUndefined(n) && (n = "&"),
        _.isUndefined(i) && (i = "=");
        var o = _.object(_.compact(_.map(e.split(n), function(e) {
            if (e) {
                var n = e.split(i);
                return t && !tco.empty(n[1]) && (n[1] = decodeURIComponent(n[1])),
                n
            }
        })));
        return o
    }
    ,
    s.scrollToError = function(t) {
        try {
            t ? t += " .ng-invalid" : t = ".app-body .ng-invalid";
            var n = _.find(document.querySelectorAll(t), function(e) {
                return "FORM" != e.nodeName && "NG-FORM" != e.nodeName && !e.hasAttribute("ng-form")
            }).parentNode;
            s.isElementInViewport(n, 0, !1) || (e.scrollTo(n, {
                offset: i.scrollToOffset || 70
            }),
            e.$broadcast("onErrorScrollToElement"))
        } catch (o) {}
    }
    ,
    s.hash = function(e, t, n, i) {
        a || (a = tco.get("$location"));
        var o = a.hash()
          , r = s.unserialize(o);
        if (_.isUndefined(t))
            return _.isUndefined(r[e]) ? null : r[e];
        r[e] = t;
        var c = s.serialize(r, !1);
        o != c && (s.replacingStateFlag = 1,
        "/" === a.path() ? a.search({
            p: 1
        }).hash(c || ".").replace() : a.hash(c || ".").replace())
    }
    ,
    s.getSize = function(e, t) {
        try {
            var n = "pixel" + t
              , i = "client" + t
              , o = "offset" + t
              , s = _.isArray(e) ? e[0] : e
              , a = s.style;
            return !_.isUndefined(a[n]) && a[n] ? a[n] : _.isUndefined(s[i]) ? s[o] : s[i]
        } catch (r) {}
        return 0
    }
    ,
    s.getServiceByName = function(e) {
        return r || (r = angular.element(document.querySelectorAll("html")).injector()),
        r.get(e)
    }
    ,
    s.updateScopeAttribute = function(e, t, n) {
        (_.isUndefined(e[t]) || _.isUndefined(n) || !angular.equals(e[t], n)) && (e[t] = n)
    }
    ,
    s.isElementInViewport = function(e, t, n) {
        function i(e, n) {
            return n >= e - t && e + t > 0
        }
        try {
            var o = _.isArray(e) ? e[0] : e
              , s = o.getBoundingClientRect();
            _.isUndefined(t) && (t = 500),
            _.isUndefined(n) && (n = !1);
            var a, r = window.innerHeight || document.documentElement.clientHeight, c = window.innerWidth || document.documentElement.clientWidth;
            return a = n ? i(s.top, r) && i(s.bottom, r) && i(s.left, c) && i(s.right, r) : (i(s.top, r) || i(s.bottom, r)) && (i(s.left, c) || i(s.right, r))
        } catch (l) {
            return !0
        }
    }
    ,
    s.findScrollableElement = function() {
        return document.scrollingElement
    }
    ,
    s.GetCardType = function(e) {
        var t = o.detectCardType(e);
        return t ? t.code : void 0
    }
    ,
    s.nearest = function(e, t, n) {
        return e ? _.isUndefined(e[t]) ? _.isUndefined(e.$parent) ? null : s.nearest(e.$parent, t, n) : n ? e : e[t] : void 0
    }
    ,
    s.getRelativeCoordinates = function(e, t) {
        function n(e) {
            var t = {
                x: e.offsetLeft,
                y: e.offsetTop
            };
            if (e.offsetParent) {
                var i = n(e.offsetParent);
                t.x += i.x,
                t.y += i.y
            }
            return t
        }
        var i, o;
        e = e || window.event;
        var s = e.target || e.srcElement;
        if (window.opera || "undefined" == typeof e.offsetX) {
            var a = n(t);
            i = e.pageX - a.x,
            o = e.pageY - a.y
        } else {
            for (var a = {
                x: e.offsetX,
                y: e.offsetY
            }, r = s; r; )
                r.mouseX = a.x,
                r.mouseY = a.y,
                a.x += r.offsetLeft,
                a.y += r.offsetTop,
                r = r.offsetParent;
            for (var r = t, c = {
                x: 0,
                y: 0
            }; r; ) {
                if ("undefined" != typeof r.mouseX) {
                    i = r.mouseX - c.x,
                    o = r.mouseY - c.y;
                    break
                }
                c.x += r.offsetLeft,
                c.y += r.offsetTop,
                r = r.offsetParent
            }
            for (r = s; r; )
                r.mouseX = void 0,
                r.mouseY = void 0,
                r = r.offsetParent
        }
        return {
            x: i,
            y: o
        }
    }
    ;
    var l = [{
        from: /^\/wp\//,
        to: "/static/uploads/"
    }, {
        from: /^\/product\//,
        to: "/static/media/catalog/product/"
    }, {
        from: /^\/category\//,
        to: "/static/media/catalog/category/"
    }, {
        from: /^\/storepickup\//,
        to: "/static/media/storepickup/"
    }, {
        from: /^\/media\//,
        to: "/static/"
    }, {
        from: /^\/fronturl\//,
        to: "/images/"
    }, {
        from: /^\/front\//,
        to: "/images/"
    }];
    return s.imagePathToUrl = function(e, n) {
        if (!e)
            return e;
        _.isUndefined(n) && (n = t.api.media);
        for (var i in l)
            e = e.replace(l[i].from, l[i].to);
        return e.match(/^http/) ? e : n + "/" + e.replace(/^\//, "")
    }
    ,
    s.isMobileSafari = function() {
        return window.navigator.userAgent.match(/(iPod|iPhone|iPad)/i) && window.navigator.userAgent.match(/WebKit/i) && !window.navigator.userAgent.match(/CriOS/i)
    }
    ,
    s
}
]),
window.tcoStore.service("webStorageService", ["$document", "$window", function(e, t) {
    var n = {}
      , i = {};
    e ? e[0] && (e = e[0]) : e = document;
    var o = function(e) {
        return _.isUndefined(e) ? null : _.isObject(e) || _.isArray(e) || _.isNumber(+e || e) ? angular.toJson(e) : e
    }
      , s = function(e) {
        switch (e) {
        case "localStorage":
        case "sessionStorage":
            if (!_.isUndefined(i[e]))
                return i[e];
            var o = t[e]
              , s = n.prefix("__" + Math.round(1e7 * Math.random()));
            return o.setItem(s, ""),
            o.removeItem(s),
            i[e] = o;
        case "cookie":
        default:
            throw Exception("usupported")
        }
    }
      , a = function(t) {
        var n, i, o, s, a = {}, r = t.prefix.length, c = e.cookie.split(";");
        for (n = 0; n < c.length; n++) {
            for (i = c[n]; " " === i.charAt(0); )
                i = i.substring(1, i.length);
            s = i.substring(r, i.indexOf("=")),
            o = decodeURIComponent(s.substring(r + s.length + 1, i.length));
            try {
                o = angular.fromJson(o)
            } catch (l) {}
            a[i] = o
        }
        return a
    };
    return n.set = function(e, t, i) {
        try {
            s(e.type).setItem(n.prefix(e, t), o(i))
        } catch (a) {
            n.addToCookies(e, t, i)
        }
        return n
    }
    ,
    n.get = function(e, t) {
        var i;
        try {
            i = s(e.type).getItem(n.prefix(e, t))
        } catch (o) {
            i = n.getFromCookies(e, t)
        }
        try {
            return angular.fromJson(i)
        } catch (o) {
            return i
        }
    }
    ,
    n.getAll = function(t) {
        var i, o, a = {};
        try {
            for (i in s(t.type))
                (o = n.unprefix(t, i)) && (a[o] = n.get(t, o))
        } catch (r) {
            for (var c = t.prefix.length, l = e.cookie.split(";"), i = 0; i < l.length; i++) {
                for (o = l[i]; " " === o.charAt(0); )
                    o = o.substring(1, o.length);
                o = o.substring(c, o.indexOf("=")),
                a[o] = n.getFromCookies(t, o)
            }
        }
        return a
    }
    ,
    n.remove = function(e, t) {
        try {
            s(n.type).removeItem(n.prefix(e, t))
        } catch (i) {
            n.removeFromCookies(e, t)
        }
    }
    ,
    n.addToCookies = function(t, i, s) {
        try {
            s = o(s);
            var a = ""
              , r = new Date
              , c = "";
            if (null === s ? (r.setTime(r.getTime() + -864e5),
            a = "; expires=" + r.toGMTString(),
            s = "") : tco.pathVal(t, "expiry") && (r.setTime(r.getTime() + 24 * tco.pathVal(t, "expiry") * 60 * 60 * 1e3),
            a = "; expires=" + r.toGMTString()),
            i) {
                var l = "; path=" + t.path;
                e.cookie = n.prefix(t, i) + "=" + encodeURIComponent(s) + a + l + c
            }
        } catch (d) {
            return !1
        }
        return !0
    }
    ,
    n.getFromCookies = function(e, t, n) {
        var i = a(e);
        return _.isUndefined(i[t]) ? null : i[t]
    }
    ,
    n.removeFromCookies = function(e, t, i) {
        return n.addToCookies(e, t, null)
    }
    ,
    n.prefix = function(e, t) {
        return e.prefix + t
    }
    ,
    n.unprefix = function(e, t) {
        var n = e.prefix.length;
        return e.prefix == t.slice(0, n) ? t.slice(n) : !1
    }
    ,
    n
}
]),
function() {
    function e(e) {
        return ["$rootScope", "webStorageService", "$window", function(t, n, i) {
            var o = {
                prefix: "ngStorage" + (window.core2Config && window.core2Config.base ? window.core2Config.base : "/"),
                type: e
            }
              , s = n.getAll(o)
              , a = !1
              , r = !1;
            return a = angular.copy(s),
            t.$watch(function() {
                r || (r = setTimeout(function() {
                    if (r = null,
                    !angular.equals(s, a)) {
                        angular.forEach(s, function(e, t) {
                            angular.isDefined(e) && "$" !== t[0] && n.set(o, t, e),
                            delete a[t]
                        });
                        for (var e in a)
                            n.remove(o, e);
                        a = angular.copy(s)
                    }
                }, 100))
            }),
            "localStorage" === e && i.addEventListener && i.addEventListener("storage", function(e) {
                try {
                    var i;
                    (i = n.unprefix(o, e.key)) && (e.newValue ? s[i] = angular.fromJson(e.newValue) : delete s[i],
                    a = angular.copy(s),
                    t.$applyAsync())
                } catch (r) {
                    _.isUndefined(i) || !i || _.isUndefined(s[i]) || delete s[i]
                }
            }),
            s
        }
        ]
    }
    window.tcoStore.factory("$localStorage", e("localStorage")),
    window.tcoStore.factory("$sessionStorage", e("sessionStorage"))
}(),
window.tcoStore.service("websocket", ["config", "localConfig", function(e, t) {
    var n = {
        connected: !1
    };
    if (_.isUndefined(t.enableWebsocket) || !t.enableWebsocket)
        return n;
    var i = io.connect(location.protocol + "//" + e.socket.host + ":" + e.socket.port, {
        reconnection: !1
    });
    return n.request = function(e) {
        var t = {
            callbacks: [],
            addCallback: function(e, n) {
                t.callbacks.push({
                    type: e,
                    func: n
                })
            },
            then: function(e) {
                return t.addCallback("always", e)
            },
            success: function(e) {
                return t.addCallback("success", e)
            },
            error: function(e) {
                return t.addCallback("error", e)
            }
        };
        if (logverbosity > 0) {
            var n = performance.now();
            tcologTime("WS CALL: " + e)
        }
        return i.emit("catalog", e, function(i) {
            if (logverbosity > 0) {
                var o = performance.now() - n;
                tcologTime("WS CALL time: " + Math.round(o) + "ms for path " + e)
            }
            var s, a, r, c = 0;
            try {
                r = _.isObject(i) ? i : angular.fromJson(i)
            } catch (l) {
                c = 1
            }
            for (s in t.callbacks)
                switch (a = t.callbacks[s],
                a.type) {
                case "success":
                    c || a.func(r);
                case "error":
                    c && a.func(r);
                    break;
                case "always":
                    a.func({
                        data: r
                    })
                }
        }),
        t
    }
    ,
    n.connected = !1,
    i.on("connect", function() {
        n.connected = !0
    }),
    i.on("reconnect", function() {
        n.connected = !0
    }),
    i.on("connect_error", function() {
        n.connected = !1
    }),
    i.on("discconnect", function() {
        n.connected = !1
    }),
    n
}
]),
window.tcoStore.service("smoothScroll", function() {
    var e, t, n = function(n, i) {
        if (clearInterval(e),
        clearTimeout(t),
        !_.isUndefined(n)) {
            i = i || {};
            var o = 50
              , s = i.duration || 400
              , a = i.offset || 0
              , r = i.easing || "easeInOutQuart"
              , c = i.callbackBefore || function() {}
              , l = i.callbackAfter || function() {}
              , d = document.getElementById(i.containerId) || null
              , u = void 0 != d && null != d
              , p = function() {
                return u ? d.scrollTop : window.pageYOffset ? window.pageYOffset : document.documentElement.scrollTop
            }
              , m = function(e, t) {
                switch (e) {
                case "easeInQuad":
                    return t * t;
                case "easeOutQuad":
                    return t * (2 - t);
                case "easeInOutQuad":
                    return .5 > t ? 2 * t * t : -1 + (4 - 2 * t) * t;
                case "easeInCubic":
                    return t * t * t;
                case "easeOutCubic":
                    return --t * t * t + 1;
                case "easeInOutCubic":
                    return .5 > t ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
                case "easeInQuart":
                    return t * t * t * t;
                case "easeOutQuart":
                    return 1 - --t * t * t * t;
                case "easeInOutQuart":
                    return .5 > t ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;
                case "easeInQuint":
                    return t * t * t * t * t;
                case "easeOutQuint":
                    return 1 + --t * t * t * t * t;
                case "easeInOutQuint":
                    return .5 > t ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;
                default:
                    return t
                }
            }
              , f = function(e) {
                if (_.isNumber(e))
                    return e;
                var t = 0;
                if (e.offsetParent)
                    do
                        t += e.offsetTop,
                        e = e.offsetParent;
                    while (e);return t = Math.max(t - a, 0)
            };
            setTimeout(function() {
                function t(e) {
                    u ? d.scrollTop = e : window.scrollTo(0, e)
                }
                function i() {
                    k += o,
                    a = k / s,
                    a = a > 1 ? 1 : a,
                    g = y + S * m(r, a),
                    t(g),
                    $()
                }
                var a, g, v, h, b, w = null, y = p(), _ = f(n), k = 0, S = _ - y, $ = function() {
                    w = p(),
                    u ? (v = d.scrollHeight,
                    h = d.clientHeight + w) : (v = document.body.scrollheight,
                    h = window.innerHeight + w),
                    (g == _ || w == _ || h >= v) && (clearInterval(e),
                    clearTimeout(b),
                    l(n))
                };
                c(n),
                window.clearInterval(e),
                e = setInterval(i, o),
                b = setTimeout(function() {
                    clearInterval(e),
                    t(g, _)
                }, 2 * s)
            }, 0)
        }
    };
    return n
}),
tcoStore.controller("PageController", ["$scope", "$route", "$templateCache", "router", "page", function(e, t, n, i, o) {
    tcologTime("pageController::start"),
    e.page = i.modelData;
    var s = [];
    !_.isUndefined(e.page.template) && e.page.template && (s.push("/views/content/" + e.page.template + ".html"),
    s.push("/views/" + e.page.template + ".html"),
    s.push("/views" + e.page.template)),
    s.push("/views/content" + i.currentPath + ".html"),
    !_.isUndefined(t.current.defaultTemplateUrl) && t.current.defaultTemplateUrl && s.push(t.current.defaultTemplateUrl),
    s.push("/views/content/default.html");
    for (var a = 0; a < s.length; a++)
        if (n.get(s[a])) {
            e.templateUrl = s[a];
            break
        }
    e.loadChildren = function(t) {
        o.loadCollection(_.pluck(e.page.children, "id"), {
            verbosity: t || 2
        }).success(function() {
            e.childrenLoaded = 1
        })
    }
}
]),
tcoStore.controller("PostCategoryController", ["$scope", "router", "transport", function(e, t, n) {
    tcologTime("postCategoryController::start"),
    200 == t.status && (e.category = t.modelData,
    n.getModel("post-list-sort", {
        code: "date",
        reverse: !0
    }, {
        storage: "url",
        parser: "simple",
        hashName: "sort"
    }))
}
]),
tcoStore.controller("PostController", ["$scope", "$templateCache", "router", "post", function(e, t, n, i) {
    if (tcologTime("postController::start"),
    200 == n.status) {
        e.post = n.modelData;
        var o = i.getPostCategory(e.post.id);
        _.isUndefined(o) || (e.category = o.data);
        var s = [];
        !_.isUndefined(e.post.template) && e.post.template && (s.push("/views/blog/post/" + e.post.template + ".html"),
        s.push("/views/post/" + e.post.template + ".html"),
        s.push("/views/" + e.post.template + ".html"),
        s.push("/views" + e.post.template)),
        s.push("/views/blog/post" + n.currentPath + ".html"),
        s.push("/views/blog/post/default.html");
        for (var a = 0; a < s.length; a++)
            if (t.get(s[a])) {
                e.templateUrl = s[a];
                break
            }
    }
}
]),
window.tcoStore.controller("CategoryController", ["$scope", "category", "router", "transport", "localConfig", "$rootScope", "$localStorage", "$location", function(e, t, n, i, o, s, a, r) {
    if (200 == n.status) {
        e.vars = {};
        var c = "CategoryController";
        tco.benchmark.start(c);
        var l = r.path()
          , d = function() {
            e.categoryModel = n.model,
            e.category = n.modelData,
            e.isSearch = "search" == n.model.className,
            a.lastCategoryPath = l
        };
        e.$watch(function() {
            return n.model
        }, d),
        d(),
        e.modelsNamePrependix = "product-list";
        var u = i.getModel(e.modelsNamePrependix + "-filters", !1, {
            storage: !1
        })
          , p = e.modelsNamePrependix + "-sort";
        u.selection = i.getModel(e.modelsNamePrependix + "-filters-selection", !1, {
            storage: "url",
            parser: "attribute",
            hashName: "filter"
        }),
        i.getModel(e.modelsNamePrependix + "-size", {
            size: _.isUndefined(e.category.grid_size) || !e.category.grid_size ? tco.pathVal(o, "defaultGridSize") || 5 : parseInt(e.category.grid_size, 10)
        }, {
            storage: "url",
            parser: "value",
            valueName: "size",
            hashName: "size"
        }),
        i.getModel(p, {
            code: ["position"],
            reverse: !1
        }, {
            storage: "url",
            parser: "simple",
            hashEncode: !1,
            hashName: "sort"
        }),
        e.infoModel = i.getModel(e.modelsNamePrependix + "-info");
        try {
            e.eeListName = _.first(_.pluck(_.rest(e.category.breadcrumbs || []), "label"), 5).join(">")
        } catch (m) {}
        tco.benchmark.stop(c)
    }
}
]),
window.tcoStore.controller("ProductController", ["$scope", "product", "router", "customer", "transport", "tools", "gtm", "localConfig", function(e, t, n, i, o, s, a, r) {
    if (tcologTime("ProductController::start"),
    200 == n.status) {
        e.routerProduct = n.model;
        try {
            e.topLevelProductModel = tco.empty(n.model.data.parent) ? n.model : t.get(n.model.data.parent)
        } catch (c) {
            e.topLevelProductModel = n.model
        }
        var l;
        e.modelData = {
            productId: n.model.id
        },
        e.vars = {},
        e.carouselId = "main-product-carousel",
        e.productModel = e.topLevelProductModel;
        var d = s.hash("item")
          , u = {}
          , p = !1
          , m = !1
          , f = !1;
        if (d && (e.basketItem = i.basket.getItemById(d),
        !_.isUndefined(e.basketItem))) {
            var g = e.basketItem.request;
            u = {
                qty: g.qty
            },
            _.isUndefined(g.selection) || (p = g.selection),
            _.isUndefined(g.bundle) || (m = g.bundle),
            _.isUndefined(g.options) || (f = g.options)
        }
        u.selection = o.getModel("product-options-selection", p, {
            storage: "url",
            parser: "attribute",
            hashName: "selection",
            format: "flat",
            removeDefaultHash: !1
        }),
        u.bundle = o.getModel("product-options-bundle", m, {
            storage: "url",
            parser: "simple",
            hashName: "bundle",
            removeDefaultHash: !1
        }),
        u.options = o.getModel("product-options-options", f, {
            storage: "history"
        }),
        e.optionsModel = o.getModel("product-options", u),
        o.getModel("related-sort", {
            code: ["position", "-created_at"],
            reverse: !1
        }, {
            storage: "url",
            parser: "simple",
            hashEncode: !1,
            hashName: "sort"
        }),
        e.$watch("modelData.productId", function(n) {
            l = !r.allowEmptyConfigurable || n && n != e.topLevelProductModel.id ? t.getChildProduct(e.modelData.productId) : e.productModel;
            try {
                e.isConfigurable = l.data.options.configurable.children.length ? !0 : !1
            } catch (i) {
                e.isConfigurable = !1
            }
            l && l.data && l.data.url && e.$root.$broadcast("product.view", l.id)
        }),
        e.$watch(function() {
            e.currency = i.currency;
            try {
                return l.data
            } catch (t) {
                return void 0
            }
        }, function(t) {
            if (!t || !e.product || t.id != e.product.id) {
                var i = t || e.productModel.data;
                e.product = i,
                n.changeModel(l || e.productModel, i.meta || e.productModel.data.meta, i.breadcrumbs || e.productModel.data.breadcrumbs),
                e.$root.$broadcast("routerDataPatched"),
                e.vars.renderVisible = e.product.parent ? !0 : !1
            }
        }),
        e.$on("carouselGoTo", function(t, n, i, o) {
            !o && (n = e.carouselId) && (e.vars.renderVisible = !1)
        })
    }
}
]),
window.tcoStore.controller("productListItemController", ["$scope", "website", "$rootScope", "customer", "product", "attribute", "gtm", "transport", "$location", function(e, t, n, i, o, s, a, r, c) {
    function l() {
        try {
            var e = r.getModelInstance("product-list-filters-selection")
              , t = _.pluck(s.getConfigurableAttributes(), "code")
              , n = e.data
              , i = _.pick(n, t)
              , o = e.getDataHash(i);
            return o
        } catch (a) {
            return null
        }
    }
    function d() {
        var t = o.get(u)
          , n = a.ee.getProductImpression(t);
        n.position = e.position,
        a.ee.productClick(n, e.eeListName)
    }
    if (tcologTime("productListItem::controller::start", !1, 2),
    e.vars = {},
    e.website = t,
    _.defaults(e, {
        templateFamily: ""
    }),
    e.template = "/views/catalog/product/list/item" + (e.templateFamily ? "-" + e.templateFamily : "") + ".html",
    !_.isUndefined(e.productId)) {
        var u = parseInt(e.productId, 10)
          , p = e.$watch(function() {
            var t = o.get(u);
            _.isUndefined(t) || p(),
            e.productModel = t
        });
        e.$watch("productModel.data", function(t) {
            e.product = t
        }),
        _.isUndefined(e.buyRequest) || _.isUndefined(e.buyRequest.options) || (e.options = s.prepareOptions(e.buyRequest.options)),
        e.$watch(function() {
            e.currency = i.currency
        }),
        e.load = function() {
            o.load(u, {
                verbosity: 3
            })
        }
        ,
        e.trackProductClick = _.throttle(d, 300),
        e.goToProduct = _.throttle(function(t) {
            t && t.preventDefault(),
            d();
            var n = l();
            c.path(e.product.url),
            n ? c.hash("selection=" + n) : c.hash("")
        }, 300)
    }
}
]),
window.tcoStore.controller("ProductPreviewController", ["$scope", "product", "ngDialog", "customer", "localConfig", function(e, t, n, i, o) {
    tcologTime("ProductPreviewController::start");
    var s = {
        data: null
    }
      , a = s;
    _.isUndefined(e.previewModel) && (e.previewModel = {
        data: {}
    }),
    e.$watch("ngDialogData.productId", function(t) {
        t && (e.productId = t)
    }),
    e.ready = !1,
    e.$watch("productId", function(n) {
        e.productModel = t.set(n),
        e.optionsModel = {
            bundle: {},
            qty: 1,
            options: {},
            selection: {}
        },
        e.modelData = {
            productId: e.productId
        },
        t.load(n, {
            verbosity: 3
        }).success(function() {
            if (e.topLevelProductModel = t.getTopProduct(n),
            o.allowEmptyConfigurable)
                e.previewModel.productId = e.topLevelProductModel.id;
            else {
                var i;
                (i = t.getChildProduct(n)) && (e.previewModel.productId = i.id)
            }
            e.ready = !0
        })
    }),
    e.$watch("previewModel.productId", function(n) {
        var i = t.get(n);
        a = _.isUndefined(i) || !i ? s : i,
        e.$root.$broadcast("product.preview", a.id)
    }, !0),
    e.$watch(function() {
        return e.currency = i.currency,
        _.isUndefined(a) ? void 0 : a.data
    }, function(t) {
        var n = t || e.productModel.data;
        e.product = n
    }),
    e.close = n.close
}
]),
window.tcoStore.controller("ReviewsListController", ["$scope", "review", "router", "transport", function(e, t, n, i) {
    i.getModel("reviews-sort", {
        code: "date",
        reverse: !0
    }),
    tcologTime("ReviewsListController::start"),
    e.page = n.modelData,
    e.collection = _.pluck(t.getResource(), "data")
}
]),
window.tcoStore.controller("wishlistButtonController", ["$scope", "customer", "$q", function(e, t, n) {
    function i() {
        e._productIds = e.productId,
        _.isArray(e.productId) || (e._productIds = [e.productId]),
        e.inWishlist = !_.find(e._productIds, function(e) {
            return !t.wishlist.getItem(e)
        })
    }
    _.defaults(e, {
        template: "/views/catalog/product/view/wishlist-button.html"
    }),
    e.inWishlist = !1,
    e.busyModel = {
        busy: !1
    },
    e.result = "",
    e.toggleWishlist = function() {
        if (!e.busyModel.busy) {
            e.busyModel.busy = !0;
            var o = [];
            e.inWishlist ? _.each(e._productIds, function(e) {
                var n = t.wishlist.getItem(e);
                o.push(t.wishlist.remove(n))
            }) : _.each(e._productIds, function(e) {
                o.push(t.wishlist.add({
                    product: e
                }))
            });
            var s;
            o.length > 1 ? (s = n.all(o),
            s.cancel = function() {
                o.forEach(function(e) {
                    e.cancel()
                })
            }
            ) : s = _.first(o),
            s && s.then(function() {
                i(),
                e.busyModel.busy = !1
            }, function(t) {
                try {
                    e.result = t.error || "ERROR"
                } catch (n) {
                    e.result = "ERROR"
                }
                e.busyModel.busy = !1
            })
        }
    }
    ,
    e.$watch("productId", i),
    e.$on("wishlistDataUpdate", i),
    e.$watch("inWishlist", function(n) {
        e.buttonCopy = n ? e.added : t.data.logged ? e.add : e.addGuest || e.add
    })
}
]),
window.tcoStore.controller("wishlistItemController", ["$scope", "customer", function(e, t) {
    e.removeAction = {
        busy: !1,
        result: null
    },
    e.buyAction = {
        busy: !1,
        result: null
    },
    e.remove = function(n) {
        t.wishlist.remove({
            id: n.id
        }, e.removeAction, e.removeAction)
    }
    ,
    e.buy = function(n) {
        t.wishlist.remove({
            id: id
        }, e.buyAction, e.buyAction)
    }
}
]),
window.tcoStore.controller("BasketController", ["$scope", "customer", "website", "product", "stock", "$localStorage", function(e, t, n, i, o, s) {
    function a() {
        return e.basketData = t.basket.data,
        e.currency = t.currency,
        t.basket.loaded
    }
    e.$watch(function() {
        e.lastCategoryPath = _.isUndefined(s.lastCategoryPath) ? "/" : s.lastCategoryPath
    }),
    a(),
    e.$watch(a, function() {
        if (n.manageStock)
            try {
                var t = _.pluck(e.basketData.items, "product");
                o.loadCollection(t)
            } catch (i) {}
    })
}
]),
window.tcoStore.controller("basketItemController", ["$scope", "customer", "stock", "product", "website", "attribute", "$filter", "bundleProduct", function(e, t, n, i, o, s, a, r) {
    function c() {
        return h.bundle_option && !_.isEmpty(h.bundle_option)
    }
    function l() {
        var e = {}
          , t = [];
        try {
            _.each(v.data.options.bundle, function(n, o) {
                var s = {};
                _.each(n.children, function(e) {
                    s[e.selection_id] = e,
                    e.productModel = i.set(e.id),
                    t.push(e.id)
                }),
                e[n.id] = {
                    position: o,
                    title: n.title,
                    type: n.type,
                    children: s
                }
            })
        } catch (n) {
            console.error("Basket item: missing bundle data in product", n)
        }
        return e
    }
    function d() {
        var e = h.bundle_option
          , t = l();
        return _.map(_.keys(e), function(n) {
            var i = e[n]
              , o = t[n]
              , s = o.children;
            return {
                option: o,
                items: _.map(_.isArray(i) ? i : [i], function(e) {
                    return s[e]
                })
            }
        })
    }
    function u() {
        return 3 == v.data.verbosity
    }
    function p() {
        u() && _.each(b, function(e) {
            e()
        })
    }
    function m() {
        return x(),
        y = t.basket.setQty({
            id: e.item.id,
            qty: e.orgQty
        }, e.action, e.action, y)
    }
    var f = []
      , g = e.item = _.isNumber(e.item) ? t.basket.getItemById(e.item) : e.item
      , v = i.set(g.product)
      , h = e.item.request;
    e.buyRequest = h,
    e.data || (e.data = {}),
    e.data.qty = h.qty;
    var b = []
      , w = function() {
        var t = e.item
          , n = v.data
          , i = _.isUndefined(n.org_price) ? n.price : n.org_price;
        t.price;
        e.hasDiscount = i - .1 > t.price,
        e.orgPrice = e.hasDiscount ? i : null,
        e.price = t.price,
        e.discount = e.hasDiscount ? e.price - e.orgPrice : null,
        e.qty = e.data.qty || e.orgQty || h.qty,
        e.rowOrgPrice = e.hasDiscount ? e.qty * e.orgPrice : null,
        e.rowPrice = e.qty * e.price,
        e.rowDiscount = e.hasDiscount ? e.rowOrgPrice - e.rowPrice : null
    };
    b.push(w),
    e.$watch("data.qty", w),
    c() && (e.isBundle = !0,
    b.push(function() {
        e.bundleInfo = d()
    })),
    b.push(e.$watch(function() {
        return u()
    }, p)),
    e.action = {
        busy: !1,
        result: null
    };
    var y = {}
      , k = e.$watch(function() {
        var t = i.get(e.item.product);
        _.isUndefined(t) || (e.productModel = t,
        k())
    });
    e.$watch("productModel.data", function(t) {
        var n = [];
        if (e.product = t,
        _.isUndefined(t))
            e.productPrice = null,
            e.editUrl = null;
        else {
            if (e.productPrice = _.isUndefined(t.org_price) ? t.price : t.org_price,
            !_.isUndefined(t.options) && !_.isUndefined(t.options.custom)) {
                var o, s, a, c, l, d = t.options.custom, u = e.item.request.options;
                for (o = 0; o < d.length; o++)
                    a = d[o],
                    s = a.id,
                    !_.isUndefined(u[s]) && (c = u[s]) && (l = void 0,
                    _.isUndefined(a.values) || (l = _.findWhere(a.values, {
                        value: c
                    })),
                    n.push({
                        label: _.isUndefined(l) ? c : l.title,
                        title: a.title
                    }))
            }
            e.editUrl = t.url + "#item=" + e.item.id,
            tco.empty(t.parent) ? e.parentModel = e.productModel : (e.parentModel = i.set(t.parent),
            i.load(t.parent, {
                verbosity: 3
            }))
        }
        e.options = n,
        f = e.isBundle ? r.getSelectedProducts(e.productModel, h.bundle_option) : [{
            id: t.id,
            qty: 1
        }]
    });
    var S = s.getConfigurableAttributes();
    if (e.$watch("parentModel.data.options.configurable.attributes", function(t) {
        var n, i, o, s = [];
        if (!tco.empty(t))
            for (o = a("orderBy")(t, "position"),
            n = 0; n < o.length; n++)
                (i = tco.pathVal(_.findWhere(S, {
                    id: o[n].attribute
                }), "code")) && s.push(i);
        e.configurableAttributes = s
    }),
    e.$watch(function() {
        e.currency = t.currency
    }),
    o.manageStock) {
        e.isInStock = function() {
            return !_.find(f, function(t) {
                var i = e.data.qty * t.qty;
                return n.isInStock(t.id, i) ? !1 : !0
            })
        }
        ,
        e.onlyBackorder = function() {
            var t = !1;
            return _.find(f, function(i) {
                var o = e.data.qty * i.qty;
                if (n.onlyBackorder(i.id, o))
                    t = !0;
                else if (!n.isInStock(i.id, o))
                    return !0
            }) ? !1 : t
        }
        ;
        var $ = window.setInterval(function() {
            e.isOutOfStock = !(e.isInStock() || e.onlyBackorder());
            var t = []
              , i = [];
            _.each(f, function(e) {
                var o = Math.floor
                  , s = n.get(e.id);
                if (s) {
                    var a = s.data;
                    t.push(o((a.backorders ? a.backorders_qty : a.qty) / e.qty)),
                    i.push(o(a.qty / e.qty))
                }
            }),
            e.maxQty = _.max([_.min(t), 0]),
            e.maxInQty = _.max([_.min(i), 0])
        }, 1e3);
        e.$on("$destroy", function() {
            window.clearInterval($)
        })
    } else
        e.maxQty = null,
        e.maxInQty = null;
    var y = null
      , x = function() {
        y && (y.cancel(),
        y = null)
    }
      , C = _.debounce(m, 200);
    e.$watch("data.qty", function(t, n) {
        _.isNumber(t) && n != t && (e.orgQty = t,
        x(),
        C())
    }),
    e.oneMore = function() {
        e.data.qty++
    }
    ,
    e.oneLess = function() {
        e.data.qty > 1 && e.data.qty--
    }
    ,
    e.remove = function(n) {
        return n || (n = e.item.id),
        x(),
        t.basket.remove({
            ids: n
        }, e.action)
    }
    ,
    e.removeOne = function(t) {
        return e.oneLess(),
        m()
    }
}
]),
window.tcoStore.controller("deliveryPriceController", ["$scope", "formHelper", "http", function(e, t, n) {
    function i(e, t) {
        return n.post("basket/deliveryprice/quote", e, t)
    }
    function o(e, t) {
        return n.post("basket/deliveryprice/product", e, t)
    }
    function s(n, i) {
        return e.result = null,
        t.init(e, "data", "code"),
        t.submit(e, n, i, {
            success: function(t) {
                e.result = t
            },
            scrollToError: !1
        })
    }
    e.data = {},
    e.checkQuoteDelivery = function(e) {
        return s(e, i)
    }
    ,
    e.checkProductDelivery = function(t, n) {
        return n && (e.data.product = n),
        s(t, o)
    }
}
]),
window.tcoStore.controller("AccountController", ["$scope", "customer", "$location", "accountNavigation", "$interpolate", "$route", "localConfig", "check", "page", "$templateCache", function(e, t, n, i, o, s, a, r, c, l) {
    if (tcologTime("AccountController::start"),
    r.makeSure("loggedIn", e),
    e.customer = t,
    e.logoutButtonStatus = {
        busy: !1
    },
    e.logout = function() {
        return t.logout(null, e.logoutButtonStatus)
    }
    ,
    i) {
        var d = a.dashboardPath || "dashboard"
          , u = s.current.params.path + (!_.isUndefined(s.current.params.id) && _.isNaN(parseInt(s.current.params.id)) ? "/" + s.current.params.id : "")
          , p = _.findWhere(i, {
            urlkey: _.isUndefined(u) || "undefined" == u ? d : u
        });
        _.isUndefined(p) && (p = _.findWhere(i, {
            urlkey: _.isUndefined(s.current.params.path) ? d : s.current.params.path
        })),
        p || (p = {}),
        e.toggles = [],
        e.toggleGroup = function(t) {
            e.toggles[t] = !e.toggles[t]
        }
        ,
        _.isUndefined(p.toggledBy) || (e.toggles[p.toggledBy] = !0),
        _.isUndefined(p.toggle) || (e.toggles[p.toggle] = !0),
        _.isUndefined(p.label) && _.isUndefined(p.orgLabel) || (_.isUndefined(p.orgLabel) && (p.orgLabel = p.label),
        p.label = o(p.orgLabel)(e)),
        _.isUndefined(p.title) && _.isUndefined(p.orgTitle) || (_.isUndefined(p.orgTitle) && (p.orgTitle = p.title),
        p.title = o(p.orgTitle)(e));
        for (g in i)
            i[g].active = i[g].urlkey == p.urlkey,
            i[g].link = "/account/" + i[g].urlkey;
        if (e.accountNavigation = i,
        p.page)
            p.loading = !0,
            c.load(p.page, {
                verbosity: 3
            }).success(function() {
                var t = angular.copy(c.get(p.page));
                e.page = t.data,
                e.current = t.data,
                e.current.template = "/views/content/" + t.data.template + ".html"
            });
        else {
            var m = "/views/404.html";
            if (!_.isUndefined(p.urlkey))
                for (var f = p.urlkey.split("/"), g = f.length - 1; g >= 0 && (m = "/views/account/" + _.first(f, g + 1).join("/") + ".html",
                !l.get(m)); g--)
                    ;
            p.template = m
        }
        e.current = p
    }
}
]),
window.tcoStore.controller("AccountLoginController", ["$scope", "check", "$localStorage", "$location", function(e, t, n, i) {
    tcologTime("AccountController::start"),
    t.makeSure("notLoggedIn", e, i.path().match("resetpassword") ? n.lastResetRequestPath : void 0)
}
]),
window.tcoStore.controller("LoginController", ["$scope", "ngDialog", "customer", "formHelper", "website", "$location", "config", "tools", "$sessionStorage", function(e, t, n, i, o, s, a, r, c) {
    function l() {
        e.$root.$broadcast("checkoutHold", !0)
    }
    function d() {
        e.$root.$broadcast("checkoutUnold", !0)
    }
    e.isMessageVisible = !1,
    e.guestCheckout = c.guestCheckout,
    e.website = o,
    e.isSubscriber = !0,
    e.continueAsGuest = function(t) {
        e.data.password = "",
        c.guestCheckout = e.guestCheckout = void 0 === t ? !0 : !!t
    }
    ,
    e.data || (e.code = "",
    e.data = {
        register: "",
        reset: ""
    });
    var u, p = s.path().match("/checkout") ? !0 : !1;
    if (p) {
        e.parentScope = r.nearest(e.$parent, "submit", !0);
        var m = n.checkout.data.user;
        m && m.email ? (u = e.data.email = m.email,
        e.hasAccount = m.has_account === !0 ? " " : m.has_account,
        e.data.register = e.hasAccount ? !1 : !0,
        e.checked = !0) : e.continueAsGuest(!1)
    }
    if (e.checkBusy = !1,
    !_.isUndefined(o.connect)) {
        e.connect = {};
        var f;
        for (f in o.connect)
            e.connect[f] = o.connect[f]
    }
    e.ok = function() {
        i.ok(e)
    }
    ,
    e.close = function() {
        t.close()
    }
    ,
    e.login = function(t, o) {
        e.data.token = o,
        i.init(e, "data", "code");
        var s = i.submit(e, t, p ? n.loginWithCheckout : n.login, {
            prependix: "LG_"
        });
        return p && s && (p && l(),
        s.then(d, d)),
        s
    }
    ,
    e.register = function(t, o) {
        return e.data.token = o,
        i.init(e, "data", "code"),
        i.submit(e, t, n.register, {
            prependix: "RG_"
        })
    }
    ,
    e.password = function(t, o) {
        return e.data.token = o,
        i.init(e, "data", "code"),
        i.submit(e, t, n.password, {
            prependix: "PA_"
        })
    }
    ,
    e.resetpassword = function(t) {
        var o = s.search();
        return i.init(e, "data", "code"),
        e.data.token = _.isUndefined(o.token) ? "****" : _.isArray(o.token) ? o.token[o.token.length - 1] : o.token,
        e.data.id = _.isUndefined(o.id) ? "****" : o.id,
        i.submit(e, t, n.resetpassword, {
            prependix: "RP_"
        })
    }
    ,
    e.softLogout = function() {
        l();
        var e = n.logoutWithCheckout({
            preserve_quote: !0
        });
        return e.then(d, d),
        e
    }
    ,
    e.logout = function(t) {
        return i.init(e, "data", "code"),
        i.submit(e, t, n.logout, {
            prependix: "LO_"
        })
    }
    ,
    e.autoAction = function(t, n) {
        return e.data.reset ? e.password(t, n) : e.data.register ? e.register(t, n) : e.login(t, n)
    }
    ;
    var g = {
        request: null,
        code: null,
        email: null,
        cancel: function() {
            g.request && g.email != e.data.email && g.request.cancel()
        }
    };
    if (e.check = _.debounce(function(t) {
        t && (t.submitted = !0),
        e.data.email && (e.checkBusy = !0,
        e.code = null,
        g.cancel(),
        g.email = e.data.email,
        g.request = n.exists({
            email: e.data.email
        }, g),
        g.request.success(function(n) {
            e.hasAccount = n.exists ? n.name || " " : !1,
            t && (t.submitted = !1),
            e.form && (e.form.submitted = !1),
            e.checked = !0,
            e.data.register = e.hasAccount ? !1 : !0,
            e.checkBusy = !1
        }),
        g.request.error(function(t) {
            e.checkBusy = !1,
            e.code = t.error || "ERROR"
        }),
        n.isSubscriber({
            email: e.data.email
        }).success(function(t) {
            e.isSubscriber = t.is_subscriber
        }))
    }, 200),
    !_.isUndefined(e.form))
        try {
            _.isUndefined(e.form.error) && (e.form.error = {}),
            e.form.error.account = !0
        } catch (v) {}
    e.$watch(function() {
        e.guestCheckout = c.guestCheckout,
        e.customerEmail = (e.logged = n.data.logged) ? n.data.email : null;
        try {
            _.isUndefined(e.form) || (e.form.error.account = !e.logged && (!e.checked || e.hasAccount && !e.guestCheckout))
        } catch (t) {}
        e.canCheckout = e.logged || e.checked && !e.hasAccount || e.guestCheckout,
        e.form && (e.form.noNext = !e.logged && (e.checked && e.hasAccount && !e.guestCheckout || !e.checked)),
        e.externalData && (e.externalData.email = e.data.email,
        e.externalData.register = e.data.register)
    }),
    e.onCanCheckout && e.$watch("canCheckout", function(t, n) {
        t && (e.auto || !n && void 0 !== n) && e.onCanCheckout()
    }),
    e.$watch("data.email", function(t) {
        return t && t == u ? void (u = null) : (g.cancel(),
        e.hasAccount = !1,
        e.checked = !1,
        e.data.password = null,
        void (e.guestCheckout = !1))
    }, !0),
    e.resetAction = {
        busy: !1,
        result: !1
    },
    e.quickPassword = function() {
        e.resetAction.busy || e.checked && n.password(e.data, e.resetAction, e.resetAction)
    }
    ,
    e.doBlur = function(e) {
        try {
            e.target.blur()
        } catch (t) {}
    }
    ,
    e.setForm = function(t) {
        e.form = t
    }
}
]),
window.tcoStore.controller("NewsletterController", ["$scope", "$localStorage", "ngDialog", "customer", "formHelper", "website", function(e, t, n, i, o, s) {
    e.code = "",
    e.data = {},
    e.website = s;
    var a = !1;
    e.ok = function(t) {
        (t || "SUCCESS" == e.code) && n.close(),
        e.code = null
    }
    ,
    e.autoForgetOnClose = function() {
        a = !0
    }
    ,
    e.later = function() {
        a = !1,
        n.close()
    }
    ,
    e.forget = function() {
        n.close(),
        e.code = null
    }
    ,
    e.setForm = function(t) {
        e.form = t
    }
    ,
    e.submit = function(t, n, s) {
        _.isUndefined(t) && (t = e.form),
        o.init(e, "data", "code"),
        o.submit(e, t, i.subscribe, {
            close_delay: n,
            scrollToError: !1,
            success: function() {
                e.data.email = "",
                s && s()
            }
        })
    }
    ,
    e.markToBeForgotten = function() {
        t.newsletter = 0
    }
    ,
    e.$on("$destroy", function() {
        a && (t.newsletter = 0)
    })
}
]),
window.tcoStore.controller("SubscribeController", ["$scope", "customer", "$location", function(e, t, n) {
    e.unsubscribed = !1,
    e.action = {
        busy: !0
    },
    t.subscribe(n.search(), e.action).success(function(t) {
        t && !t.error && (e.subscribed = !0)
    })
}
]),
window.tcoStore.controller("UnsubscribeController", ["$scope", "customer", "$location", function(e, t, n) {
    e.unsubscribed = !1,
    e.action = {
        busy: !0
    },
    t.unsubscribe(n.search(), e.action).success(function(t) {
        t && !t.error && t.email && (e.unsubscribed = !0)
    })
}
]),
window.tcoStore.controller("WishlistController", ["$scope", "customer", "product", "$location", "wishlist", "ngDialog", "localConfig", function(e, t, n, i, o, s, a) {
    function r(n) {
        var i = o.load(n, {
            verbosity: l
        });
        i.success(function() {
            e.wishlist = o.get(n),
            e["public"] || e.$watch(function() {
                return t.wishlist.data
            }, function(t) {
                var n = t ? _.pluck(t.items, "id") : [];
                e.wishlist.data.items = _.filter(e.wishlist.data.items, function(e) {
                    return n.indexOf(e.id) > -1
                })
            })
        })
    }
    var c = i.search()
      , l = a.wishlistVerbosity || 1;
    if (_.isUndefined(c.id)) {
        if (l > 1)
            var d = e.$watch(function() {
                return t.wishlist.data.url
            }, function(n) {
                n ? (d(),
                r(n)) : e.wishlist = t.wishlist
            });
        else
            e.wishlist = t.wishlist;
        e["public"] = !1
    } else
        r(c.id),
        e["public"] = !0;
    e.$watch("wishlist.data", function(t) {
        e.wishlistData = t
    }),
    e.$watch("wishlistData.items", function(t) {
        t && (e.collection = _.pluck(t, "product"))
    }, !0),
    e.$watch(function() {
        e.currency = t.currency
    }),
    e.vote = function(t, n) {
        return o.voteItem({
            item: t,
            vote: n,
            hash: e.wishlistData.url
        })
    }
    ,
    e.openCommentFrame = function(t) {
        s.open({
            templateUrl: "/views/account/wishlist/comment.html",
            scope: e,
            controller: ["$scope", "formHelper", "customer", "ngDialog", function(e, n, i, s) {
                function a() {
                    e.data = {
                        newsletter: 0,
                        comment: null,
                        item: t.id,
                        hash: e.wishlistData.url
                    },
                    i.data.logged && (e.data.signature = i.data.firstname,
                    e.data.email = i.data.email)
                }
                a(),
                e.close = s.close,
                e.submit = _.debounce(function(t) {
                    return n.init(e, "data", "result"),
                    n.submit(e, e.form, o.commentItem, {
                        success: function() {
                            a(),
                            t && window.setTimeout(e.close, t)
                        }
                    })
                }, 100),
                e.setForm = function(t) {
                    e.form = t
                }
            }
            ]
        })
    }
    ,
    e.canShare = function() {
        try {
            return !e["public"] && e.wishlistData.url
        } catch (t) {
            return void 0
        }
    }
    ,
    e.openShareFrame = function(n) {
        if (e.canShare()) {
            if (!t.data.logged) {
                var a = i.path();
                return t.doAfterLogin(function() {
                    i.path(a)
                })
            }
            s.open({
                templateUrl: "/views/account/wishlist/share.html",
                scope: e,
                controller: ["$scope", "formHelper", "customer", "ngDialog", "$filter", function(e, t, n, i, s) {
                    function a() {
                        e.data = {
                            url: s("pathToUrl")("/wishlist?id=" + e.wishlistData.url),
                            emails: "",
                            message: "",
                            copy: !1
                        }
                    }
                    a(),
                    e.close = i.close,
                    e.submit = _.debounce(function(n) {
                        return t.init(e, "data", "result"),
                        t.submit(e, e.form, o.share, {
                            success: function() {
                                a(),
                                n && window.setTimeout(e.close, n)
                            }
                        })
                    }, 100),
                    e.setForm = function(t) {
                        e.form = t
                    }
                }
                ]
            })
        }
    }
}
]),
window.tcoStore.controller("ContactController", ["$scope", "formHelper", "customer", function(e, t, n) {
    e.result = "";
    var i = function() {
        n.logged ? e.data = {
            email: n.data.email,
            firstname: n.data.firstname,
            lastname: n.data.lastname,
            newsletter: 0
        } : e.data = {
            newsletter: 0
        },
        _.isUndefined(e.form) || (e.form.submitted = e.form.$submitted = !1)
    };
    i(),
    e.setForm = function(t) {
        e.form = t
    }
    ,
    e.submit = function() {
        t.init(e, "data", "result"),
        t.submit(e, e.form, n.contact, {
            success: i
        })
    }
}
]),
window.tcoStore.controller("EmptyController", function() {}),
window.tcoStore.controller("CreditCardController", ["$scope", "customer", "tools", function(e, t, n) {
    e.months = [{
        value: 1,
        label: "01 - January"
    }, {
        value: 2,
        label: "02 - February"
    }, {
        value: 3,
        label: "03 - March"
    }, {
        value: 4,
        label: "04 - April"
    }, {
        value: 5,
        label: "05 - May"
    }, {
        value: 6,
        label: "06 - June"
    }, {
        value: 7,
        label: "07 - July"
    }, {
        value: 8,
        label: "08 - August"
    }, {
        value: 9,
        label: "09 - September"
    }, {
        value: 10,
        label: "10 - October"
    }, {
        value: 11,
        label: "11 - November"
    }, {
        value: 12,
        label: "12 - December"
    }];
    var i, o = [], s = (new Date).getFullYear();
    for (i = 0; 10 > i; i++)
        o.push(s + i);
    e.years = o,
    e.$watch(function() {
        e.logged = t.data.logged
    }),
    e.$watch("data.cc_number", function(t) {
        var i = n.GetCardType(t);
        i && tco.pathVal(e.method, "cc.types." + i) ? (e.cardNotMatched = 0,
        e.data.cc_type = i) : e.cardNotMatched = t ? 1 : 0
    })
}
]),
window.tcoStore.controller("SuccessController", ["$scope", "check", "customer", function(e, t, n) {
    function i() {
        try {
            e.successData = n.success.data
        } catch (t) {}
    }
    e.$on("successDataUpdate", i),
    e.$on("customerDataUpdate", i),
    i()
}
]),
window.tcoStore.controller("MiniSearchController", ["$scope", "customer", "transport", "$location", "$rootScope", function(e, t, n, i, o) {
    e.form = null,
    e.setForm = function(t) {
        e.form = t
    }
    ,
    e.data = n.getModel("_miniSearchData", void 0, {
        storage: "static"
    }),
    e.reset = function() {
        e.data.search = "",
        e.data.visible = !1
    }
    ,
    e.reset(),
    e.$watch(function() {
        e.currency = t.currency
    }),
    e.submit = function(t) {
        if (_.isUndefined(t) || e.setForm(t),
        e.form.submitted = !0,
        !tco.empty(e.data.search) && e.data.search.length > 2) {
            var n = "/search/" + e.data.search;
            i.path() == n ? (e.reset(),
            o.$broadcast("hide-minisearch-hint")) : i.url(n),
            e.form.submitted = !1
        }
    }
    ,
    e.setFocus = function() {
        e.data.focusParameter = !0
    }
    ,
    e.resetFocus = function() {
        e.data.focusParameter = !1
    }
}
]),
window.tcoStore.controller("SearchController", ["$scope", "$location", "search", "router", "localConfig", function(e, t, n, i, o) {
    var s;
    e.data = {},
    e.$watch(function() {
        return tco.pathVal(i, "model.className")
    }, function(t) {
        if (s = "search" == t) {
            var n;
            (n = tco.pathVal(i, "model.data.term")) && (e.data.search = n)
        } else
            e.data.search = ""
    }),
    e.busy = !1;
    var a, r = function() {
        window.clearTimeout(a),
        a = window.setTimeout(c, 500)
    }, c = function() {
        window.clearTimeout(a);
        var o = e.data.search;
        if (!tco.empty(o)) {
            if (currentSearch = o,
            e.busy = !0,
            s)
                return void t.path("search/" + encodeURIComponent(o));
            if (o && o.length > 2) {
                var r = i.parseRequest(n, "/" + o)
                  , c = n.set(r);
                n.load(r, {
                    verbosity: 3
                }).success(function() {
                    n.redirect(r, !0) || (i.changeModel(c),
                    e.busy = !1)
                })
            }
        }
    };
    e.doSearch = c,
    e.search = r
}
]),
window.tcoStore.controller("WebsiteController", ["$scope", "website", function(e, t) {
    e.website = t
}
]),
window.tcoStore.directive("descriptionMore", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ></ng-include>',
        scope: {
            shortText: "=short",
            longText: "=long",
            template: "@"
        },
        controller: ["$scope", function(e) {
            _.defaults(e, {
                template: "/views/catalog/product/view/description.html"
            }),
            e.more = function() {
                e.visible = !0
            }
            ,
            e.less = function() {
                e.visible = !1
            }
        }
        ]
    }
}),
window.tcoStore.directive("listing", ["$filter", "$injector", "$location", "browser", "transport", "stock", "website", "product", "gtm", function(e, t, n, i, o, s, a, r, c) {
    var l = 0;
    return {
        restrict: "EA",
        transclude: !0,
        template: '<div class="listing-container" ng-show="initiated&&(empty||items.length)&&infoModel.counted"><ng-transclude></ng-transclude><div ng-include="template"></div></div>',
        scope: {
            collection: "=",
            empty: "@",
            modelsNamePrependix: "@",
            factoryName: "@",
            template: "@",
            pageSize: "@",
            totalLimit: "@",
            staticCollection: "@",
            enableLazyLoad: "@",
            preventAutoScroll: "@",
            preventLazyLoadHash: "@",
            onUpdate: "=",
            custom: "=?",
            listType: "@",
            searchTerm: "@",
            eeListName: "@",
            eePreventImpressions: "=",
            showOutOfStock: "=?",
            customFilter: "=?"
        },
        replace: !0,
        controller: ["$scope", function(d) {
            _.defaults(d, {
                modelsNamePrependix: "product-list",
                factoryName: "product",
                empty: null,
                lazyLoad: !0,
                pageSize: 0,
                totalLimit: 0,
                enableLazyLoad: 0,
                allItems: [],
                initiated: !1
            }),
            d.uniqueId = l++;
            var u = !1
              , p = "listing::controller (" + d.factoryName + " / " + d.modelsNamePrependix + ")";
            tco.benchmark.start(p);
            var m, f = t.get(d.factoryName), g = parseInt(d.pageSize, 10), v = d.modelsNamePrependix + "-filters", h = d.modelsNamePrependix + "-size", b = d.modelsNamePrependix + "-sort";
            _.isUndefined(d.template) && (d.template = f.templatesDir + "list.html"),
            void 0 === d.showOutOfStock && (d.showOutOfStock = !a.manageStock || a.showOutOfStock);
            var w = function() {
                var t = "listing::applyFilterAndSort (" + d.factoryName + " / " + d.modelsNamePrependix + ")";
                tco.benchmark.start(t);
                var n, i = {};
                if (tco.empty(d.collection))
                    n = [];
                else {
                    var o = d.collection
                      , a = _.compact(_.map(o, function(e, t) {
                        return e ? (_.isNumber(e) && (e = {
                            id: e,
                            position: t + 1
                        }),
                        i[e.id] = e,
                        e) : void 0
                    }));
                    tco.benchmark.point(t, "collection prepared"),
                    d.showOutOfStock || "product" != d.factoryName || (a = s.filterOutOfStock(a),
                    tco.benchmark.point(t, "stock filter applied"));
                    var r = a;
                    _.isUndefined(f.filterCollection) || (r = f.filterCollection(a, d.filtersModel.selection),
                    d.customFilter && _.each(_.isArray(d.customFilter) ? d.customFilter : [d.customFilter], function(e) {
                        r = f.filterCollection(r, e)
                    }),
                    r = _.pluck(r, "data"),
                    tco.benchmark.point(t, "filters applied")),
                    r.forEach(function(e) {
                        if (e && e.id) {
                            var t = i[e.id];
                            t && (e.position = t.position)
                        }
                    }),
                    tco.benchmark.point(t, "positions assigned"),
                    r = e("orderBy")(r, d.sortModel.code, d.sortModel.reverse),
                    tco.benchmark.point(t, "list sorted"),
                    d.totalLimit && (r = r.slice(0, parseInt(d.totalLimit, 10))),
                    n = _.unique(_.pluck(r, "id")),
                    d.onUpdate && d.onUpdate(n, r),
                    "product" == d.factoryName && x(n),
                    delete i
                }
                _.isEqual(n, d.allItems) || (d.allItems = n,
                d.itemsModels = _.filter(a, function(e) {
                    return n.indexOf(e.id) > -1
                }),
                d.infoModel.count = d.allItems.length),
                d.infoModel.counted = !0,
                d.$broadcast(d.modelsNamePrependix + "-listing-updated"),
                window.setTimeout(function() {
                    d.$broadcast("imagesRecheckRequest")
                }, 200),
                window.setTimeout(function() {
                    d.$broadcast("imagesRecheckRequest")
                }, 1e3),
                tco.benchmark.stop(t)
            }
              , y = _.debounce(w, 50);
            d.staticCollection && "0" != d.staticCollection || (d.$watch("collection", y),
            d.$watch("totalLimit", y),
            d.$watch("customFilter", y)),
            d.$on("listing.update.request", y),
            d.$watch(function() {
                return o.getModelInstance(v)
            }, function() {
                m = o.getModel(v, {
                    selection: {}
                }),
                d.filtersModel = m
            }),
            d.$watch("filtersModel.selection", y, !0),
            d.$watch(function() {
                return o.getModelInstance(h)
            }, function() {
                d.sizeModel = o.getModel(h)
            }),
            d.$watch(function() {
                return o.getModelInstance(b)
            }, function() {
                d.sortModel = o.getModel(b)
            }),
            d.$watch("sortModel", y, !0),
            d.infoModel = o.getModel(d.modelsNamePrependix + "-info");
            var k = function() {};
            if (!d.eePreventImpressions) {
                var S = null
                  , $ = null;
                switch (d.factoryName) {
                case "product":
                    k = function() {
                        var e, t = d.items;
                        C && ($ && (t = _.rest(t, $)),
                        e = d.lazyLoadData.limit);
                        var n = _.compact(_.map(t, function(e, t) {
                            var n = c.ee.getProductImpression
                              , i = r.get
                              , o = i(e)
                              , s = n(o);
                            return s.list = _.isUndefined(d.eeListName) ? "" : d.eeListName,
                            s.position = t + $,
                            s
                        }));
                        !u && n.length > 0 && (c.ee.productImpressions(n, a.currency.base),
                        "search" == d.listType && c.push({
                            event: "Search",
                            searchTerm: d.searchTerm
                        })),
                        e && ($ = e)
                    }
                }
            }
            var x = function() {
                window.clearTimeout(S),
                S = window.setTimeout(k, 1e3)
            }
              , C = parseInt(d.enableLazyLoad, 10) > 0
              , D = _.debounce(function() {
                u || (C ? d.items = _.first(d.allItems, d.lazyLoadData.limit) : d.items = d.allItems,
                d.infoModel.counted && (d.initiated = !0,
                x()),
                d.$phase || d.$root.$phase || d.$apply())
            }, 50);
            C ? (i.prerender ? d.lazyLoadData = {
                limit: 100
            } : d.lazyLoadData = o.getModel(d.modelsNamePrependix + "-lazy-load", {
                limit: 3 * g
            }, d.preventLazyLoadHash ? {} : {
                storage: "url",
                parser: "value",
                valueName: "limit",
                hashName: "show",
                filter: function(e) {
                    return parseInt(e, 10)
                }
            }),
            d.lazyLoad = function(e) {
                if (d.infoModel.counted) {
                    var t = d.lazyLoadData.limit + (_.isUndefined(e) ? g : e);
                    d.lazyLoadData.limit = _.min([d.allItems.length, t])
                }
            }
            ,
            d.$watch("lazyLoadData.limit", D)) : d.pageSize && (d.pager = o.getModel(d.modelsNamePrependix + "-pager", {
                limit: g
            }, {
                storage: "history"
            }),
            d.$watch(function() {
                return d.pager.current
            }, function() {
                n.search("page", 1 == d.pager.current ? null : d.pager.current)
            }),
            d.$watch(function() {
                var e = n.search()
                  , t = 0;
                return _.isUndefined(e.page) || (t = parseInt(e.page, 10)),
                d.pager.current = t > 0 ? t : 1,
                d.pager.current
            })),
            d.$watch("allItems", function(e, t) {
                C && (i.prerender || (t && t.length || !d.lazyLoadData.limit) && (d.lazyLoadData.limit = 3 * g),
                $ = 0,
                d.lazyLoad(0)),
                D()
            }),
            d.$on("$destroy", function() {
                u = !0,
                window.clearTimeout(S)
            }),
            tco.benchmark.stop(p)
        }
        ]
    }
}
]),
window.tcoStore.directive("listingSort", function() {
    return {
        restrict: "E",
        templateUrl: "/views/catalog/product/list/sort.html",
        scope: {
            modelsNamePrependix: "@"
        },
        replace: !0,
        controller: ["$scope", "transport", function(e, t) {
            _.isUndefined(e.modelsNamePrependix) && (e.modelsNamePrependix = "product-list"),
            e.sortModel = t.getModel(e.modelsNamePrependix + "-sort"),
            e.dropdownVisible = !1,
            e.sortBy = function(t, n) {
                var i = _.isObject(t) ? t.code : t;
                _.isUndefined(n) && (n = e.sortModel.code == i ? !e.sortModel.reverse : !1),
                e.sortModel.code = i,
                e.sortModel.reverse = n,
                e.dropdownVisible = !1
            }
        }
        ]
    }
}),
window.tcoStore.directive("productListSize", function() {
    return {
        restrict: "E",
        templateUrl: "/views/catalog/product/list/size.html",
        scope: {
            modelsNamePrependix: "@",
            defaultSize: "@",
            custom: "="
        },
        replace: !0,
        controller: ["$scope", "transport", function(e, t) {
            function n(t) {
                t != e.sizeModel.size && (e.sizeModel.size = t,
                e.$root.$broadcast(e.modelsNamePrependix + "-size.change", t))
            }
            _.isUndefined(e.modelsNamePrependix) && (e.modelsNamePrependix = "product-list"),
            e.setSize = n,
            e.sizeModel = t.getModel(e.modelsNamePrependix + "-size"),
            _.isUndefined(e.sizeModel.size) && n(e.defaultSize ? parseInt(e.defaultSize, 10) : 5)
        }
        ]
    }
}),
window.tcoStore.directive("orderItem", function() {
    var e = ["$scope", "stock", "product", function(e, t, n) {
        e.buyRequest = e.item.request,
        e.productModel = n.get(e.item.product_id),
        t.provideWhenReady(e, "item.product")
    }
    ];
    return {
        restrict: "A",
        templateUrl: "/views/account/order/item.html",
        scope: {
            item: "="
        },
        controller: e
    }
}),
window.tcoStore.directive("basketListItem", function() {
    return {
        restrict: "A",
        templateUrl: "/views/catalog/product/list/item-basket.html",
        scope: {
            item: "=",
            custom: "="
        },
        controller: "basketItemController",
        link: function(e, t) {
            e.$watch("action.busy", function(e) {
                e ? t.addClass("busy") : t.removeClass("busy")
            })
        }
    }
}),
window.tcoStore.directive("checkoutButton", function() {
    return {
        restrict: "EA",
        templateUrl: "/views/basket/checkout-button.html",
        scope: {
            busy: "=",
            template: "@"
        },
        transclude: !0,
        replace: !0,
        controller: ["$scope", "customer", "stock", "$location", "localConfig", "website", "tcoStoreRoutes", function(e, t, n, i, o, s, a) {
            function r(e) {
                return _.some(e || t.basket.getItemsForStockCheck(), function(e) {
                    return !n.isSelable(e.id, e.qty)
                })
            }
            function c(e) {
                return _.some(e || t.basket.getItemsForStockCheck(), function(e) {
                    return n.onlyBackorder(e.id, e.qty)
                })
            }
            function l() {
                var i = t.basket.getItemsForStockCheck();
                return d > u || !n.hasModelsData(_.pluck(i, "id")) ? void d++ : (d = 0,
                e.hasOutOfStockItems = r(i),
                void (e.hasBackorderOnlyItems = c(i)))
            }
            var d = 0
              , u = 6;
            if (s.manageStock) {
                var p = window.setInterval(l, 500);
                e.$on("$destroy", function() {
                    window.clearInterval(p)
                })
            }
            e.checkout = function() {
                var t = a.getStandardRoutePath("/basket");
                e.hasOutOfStockItems ? i.path() !== t && i.url(t) : i.url("/checkout")
            }
        }
        ]
    }
}),
window.tcoStore.directive("checkoutListItem", function() {
    return {
        restrict: "A",
        templateUrl: "/views/catalog/product/list/item-checkout.html",
        scope: {
            item: "=",
            multishippingQty: "=?"
        },
        controller: "basketItemController"
    }
}),
window.tcoStore.directive("couponCodeForm", function() {
    return {
        restrict: "A",
        scope: {
            template: "@",
            custom: "@",
            onCheck: "&"
        },
        template: '<ng-include src="template"></ng-include>',
        controller: ["$scope", "customer", "formHelper", "$location", function(e, t, n, i) {
            function o() {
                var n = t.basket.data.coupon;
                _.isArray(n) ? (e.coupon = n.length ? n.join(", ") : null,
                e.coupons = n,
                e.many = n.length > 1) : (e.coupon = t.basket.data.coupon || null,
                e.many = !1),
                e.basketData = t.basket.data
            }
            _.defaults(e, {
                template: "/views/basket/coupon-form.html",
                busy: !1,
                result: null,
                data: {}
            }),
            e.$on("basketDataUpdate", o),
            o(),
            e.setForm = function(t) {
                e.form = t
            }
            ,
            e.submit = function() {
                return e.data.checkout = i.path().match("/checkout"),
                n.init(e, "data", "result"),
                n.submit(e, e.form, t.basket.addCoupon, {
                    success: function() {
                        e.data.coupon = "";
                        try {
                            e.onCheck({
                                result: !0
                            })
                        } catch (t) {}
                    },
                    error: function() {
                        try {
                            e.onCheck({
                                result: !1
                            })
                        } catch (t) {}
                    }
                })
            }
            ,
            e.remove = function(n) {
                var o = _.isUndefined(n) ? e.data : {
                    coupon: n
                };
                o.checkout = i.path().match("/checkout");
                var s = t.basket.removeCoupon(o, e, e);
                return s.then(function(t) {
                    _.isObject(t) && _.isUndefined(t.error) && (e.result = "COUPON_REMOVED")
                }),
                s
            }
        }
        ]
    }
}),
window.tcoStore.directive("minibasketListItem", function() {
    return {
        restrict: "EA",
        templateUrl: "/views/catalog/product/list/item-minibasket.html",
        scope: {
            item: "="
        },
        controller: "basketItemController"
    }
}),
window.tcoStore.directive("checkoutLogin", function() {
    return {
        restrict: "EA",
        scope: {
            data: "=?",
            externalData: "=?",
            form: "=?",
            step: "=",
            auto: "=?",
            onCanCheckout: "&"
        },
        templateUrl: "/views/checkout/form/login.html",
        controller: "LoginController"
    }
}),
window.tcoStore.directive("checkoutStep", ["transport", "$exceptionHandler", "tools", "customer", "product", "gtm", "localConfig", function(e, t, n, i, o, s, a) {
    var r = e.getModel("_stepsModel", {})
      , c = {
        account: ["account"]
    }
      , l = s.trackCheckoutStep
      , d = function(o, s) {
        var d = !1;
        if (o.stepName)
            try {
                if (a.checkoutSteps) {
                    if (stepNumber = 1 + a.checkoutSteps.indexOf(o.stepName),
                    stepNumber < 1)
                        throw "Missing checkout step `" + o.stepName + "` in localConfig"
                } else {
                    if (!o.stepNumber)
                        throw "Missing checkout step number";
                    stepNumber = o.stepNumber
                }
                if ("basket" == o.stepName || "success-page" == o.stepName)
                    return !d && l(stepNumber, o.stepName, i),
                    void (d = !0);
                var u = o.form || n.nearest(o, "form");
                if (!u)
                    throw "Checkout step can't find form in parents: " + o.stepName;
                o.ngErrors = u.$error,
                _.isUndefined(u.error) && (u.error = {}),
                o.tcErrors = u.error,
                o.stepModel = r[o.stepName] = {
                    valid: !1
                };
                var p = _.isUndefined(o.customErrors) ? tco.pathVal(c, o.stepName) : o.customErrors
                  , m = function() {
                    if (p)
                        for (var e = o.tcErrors, t = p.length - 1; t >= 0; t--)
                            if (tco.pathVal(e, p[t]))
                                return void (o.stepModel.valid = !1);
                    var n, i = o.ngErrors, a = [], r = !0;
                    for (n in i)
                        a = _.union(a, _.pluck(i[n], "$name"));
                    a.length > 0 && s[0].querySelector('[name="' + a.join('"],[name="') + '"]') && (r = !1),
                    o.stepModel.valid = r
                };
                o.$watch("ngErrors", m, !0),
                o.$watch("tcErrors", m, !0),
                o.$watch("stepModel.valid", function(e) {
                    (e ? s.addClass("valid") : s.removeClass("valid")) && (u.$pristine || (stepNumber = 1 + a.checkoutSteps.indexOf(o.stepName),
                    l(stepNumber, o.stepName, i)))
                }, !0),
                o.$watch("stepModel", function() {
                    var t = e.getModel("_stepsModel", {});
                    t[o.stepName] = o.stepModel
                }),
                m(),
                o.triggerOnLoad && (d || l(stepNumber, o.stepName, i),
                d = !0)
            } catch (f) {
                t(f)
            }
    };
    return {
        restrict: "A",
        scope: {
            triggerOnLoad: "=?",
            stepName: "@checkoutStep",
            form: "=?",
            stepNumber: "=?",
            customErrors: "=?"
        },
        link: d
    }
}
]),
window.tcoStore.directive("deliveryDate", function() {
    function e(e) {
        var t = e.getFullYear().toString()
          , n = (e.getMonth() + 1).toString()
          , i = e.getDate().toString();
        return [t, n[1] ? n : "0" + n[0], i[1] ? i : "0" + i[0]].join("-")
    }
    return {
        restrict: "AE",
        scope: {
            data: "=",
            form: "="
        },
        templateUrl: "/views/checkout/form/delivery-date.html",
        controller: ["$scope", "customer", function(t, n) {
            function i(e) {
                try {
                    var t = Math.round((e - s) / 864e5)
                      , n = o.dayDeliveryDelayMap;
                    return n[t]
                } catch (i) {
                    return void 0
                }
            }
            t.model = {},
            t.customer = n;
            var o, s, a = _.debounce(function() {
                var n = t.model.date;
                if (t.deliveryDate && delete t.deliveryDate,
                t.dispatchDate && delete t.dispatchDate,
                n) {
                    var s = new Date(n)
                      , a = i(s);
                    _.isUndefined(a) ? t.dispatchDate = t.data.dispatch_date = t.data.dispatch_iso_date = t.deliveryDate = t.data.delivery_date = t.data.delivery_iso_date = void 0 : o.isDeliveryDateMode ? (t.deliveryDate = n,
                    t.data.delivery_date = e(s),
                    t.data.delivery_iso_date = s.toISOString(),
                    s.setDate(s.getDate() - a),
                    t.dispatchDate = s,
                    t.data.dispatch_date = e(s),
                    t.data.dispatch_iso_date = s.toISOString()) : (t.dispatchDate = n,
                    t.data.dispatch_date = e(s),
                    t.data.dispatch_iso_date = s.toISOString(),
                    s.setDate(s.getDate() + a),
                    t.deliveryDate = s,
                    t.data.delivery_date = e(s),
                    t.data.delivery_iso_date = s.toISOString())
                }
            }, 100), r = _.debounce(function() {
                try {
                    var e = n.checkout.data.dispatchdeliverydate
                      , a = t.data.method;
                    if (t.currentConfig = o = e[a],
                    !o)
                        throw 1;
                    s = new Date(o.minDate),
                    t.options = {
                        minDate: o.minDate - 828e5,
                        maxDate: o.maxDate,
                        onDateCheck: function(e) {
                            var t = i(e);
                            return _.isUndefined(t) ? !1 : 0 > t ? !1 : !0
                        }
                    }
                } catch (r) {
                    t.currentConfig = null,
                    t.model.date = null
                }
            }, 100);
            t.$watch("customer.checkout.data.dispatchdeliverydate", r),
            t.$watch("data.method", function() {
                t.model.date = null,
                r()
            }),
            t.$watch("model.date", a)
        }
        ]
    }
}),
window.tcoStore.directive("giftMessage", function() {
    return {
        restrict: "EA",
        scope: {
            data: "=",
            form: "="
        },
        templateUrl: "/views/checkout/form/gift-message.html",
        controller: ["$scope", function(e) {
            e.vars = {
                active: e.data && (e.data.message || e.data.price_tag) ? 1 : 0
            };
            var t = e.data;
            e.$watch("vars.active", function(n, i) {
                n ? i || (e.data = t) : (i && (t = e.data),
                e.data = {})
            })
        }
        ]
    }
}),
window.tcoStore.directive("paymentMethods", function() {
    return {
        restrict: "A",
        scope: {
            data: "=",
            form: "=",
            autoPick: "=",
            checkoutOptionStep: "="
        },
        templateUrl: "/views/checkout/form/payment-methods.html",
        controller: ["$scope", "customer", "tools", "gtm", "localConfig", function(e, t, n, i, o) {
            function s() {
                var i = t.checkout.data;
                i.payment && (i && i.totals && (e.noPayment = !(i.totals.grand_total > 0)),
                n.updateScopeAttribute(e, "payment", i.payment),
                n.updateScopeAttribute(e, "methods", _.isUndefined(i.payment.methods) ? null : i.payment.methods))
            }
            e.customer = t,
            e.$on("checkoutDataUpdate", s),
            s();
            var a = _.debounce(function(t, n) {
                if (!_.isUndefined(e.methods))
                    try {
                        if (!_.findWhere(e.methods, {
                            code: e.data.method
                        }))
                            throw 0
                    } catch (i) {
                        if (e.autoPick) {
                            var o = _.first(e.methods);
                            e.data.method = o ? o.code : null
                        } else
                            e.data.method = null
                    }
            }, 100);
            e.$watch("methods", a, !0),
            e.$watch("data.method", function(t, n) {
                a(n, t),
                i.ee.checkoutOption(e.checkoutOptionStep, t)
            }, !0)
        }
        ]
    }
}),
window.tcoStore.directive("sagepay", function() {
    return {
        restrict: "AE",
        scope: {
            data: "=",
            method: "=",
            form: "=",
            sagepay: "@"
        },
        templateUrl: "/blocks/checkout/sagepay/sagepaydirectpro.html",
        controller: "CreditCardController"
    }
}),
window.tcoStore.directive("shippingMethods", function() {
    return {
        restrict: "AE",
        scope: {
            data: "=",
            form: "=",
            source: "=?",
            preventAutoPick: "=?",
            checkoutOptionStep: "="
        },
        templateUrl: "/views/checkout/form/shipping-methods.html",
        controller: ["$scope", "customer", "tools", "gtm", "localConfig", function(e, t, n, i, o) {
            e.data || (e.data = {}),
            e.$watch(function() {
                return e.currency = t.currency,
                t.checkout.data
            }, function(i) {
                try {
                    e.noShipping = i.quote.isVirtual,
                    e.currency = t.currency,
                    n.updateScopeAttribute(e, "shipping", i.shipping),
                    n.updateScopeAttribute(e, "methods", e.source || (_.isUndefined(i.shipping.methods) ? null : i.shipping.methods))
                } catch (o) {}
            });
            var s = _.debounce(function(t, n) {
                var i = ["storepickup_storepickup"];
                if (e.nonPickupMethods = _.filter(e.methods, function(e) {
                    return -1 == i.indexOf(e.code)
                }),
                !e.preventAutoPick && !_.isUndefined(e.methods))
                    try {
                        if (!_.findWhere(e.methods, {
                            code: e.data.method
                        }))
                            throw 0
                    } catch (o) {
                        e.data.method = null
                    }
            }, 100);
            e.customer = t,
            e.$watch("methods", s, !0),
            e.$watch("data.method", function(t, n) {
                s(n, t),
                i.ee.checkoutOption(e.checkoutOptionStep, t)
            }, !0)
        }
        ]
    }
}),
window.tcoStore.directive("storepickup", ["storelocator", function(e) {
    return {
        restrict: "AE",
        scope: {
            data: "=",
            form: "=?",
            handle: "@"
        },
        templateUrl: "/blocks/checkout/storepickup.html",
        link: function(t) {
            t.message = "",
            t.sl_data = e.init(t.handle),
            t.sl_data.settings.qty = 0,
            t.sl_data.settings.distance = 0,
            t.finder = {
                busy: !1
            },
            t.vars = {},
            _.isUndefined(t.data.store_id) && (t.data.store_id = 0),
            t.loadMessage = function() {
                for (var e = 0; e < t.sl_data.list.length; e++)
                    if (t.sl_data.list[e].id == t.data.store_id) {
                        t.message = t.sl_data.list[e].message ? t.sl_data.list[e].message + "" : "";
                        break
                    }
            }
            ,
            t.data.store_id && (t.sl_data.lookedup = !0,
            t.loadMessage()),
            t.getList = function() {
                t.finder.busy = !0;
                var n = e.getList(t.handle);
                n.then(function() {
                    t.data.store_id = t.sl_data.list[0].id,
                    t.loadMessage(),
                    t.finder.busy = !1
                })
            }
        }
    }
}
]),
window.tcoStore.directive("successRegistration", function() {
    return {
        restrict: "E",
        scope: {
            successData: "="
        },
        templateUrl: "/views/checkout/success/registration.html",
        controller: ["$scope", "customer", "formHelper", function(e, t, n) {
            e.result = "",
            e.data = {},
            e.$watch(function() {
                e.logged = t.data.logged,
                e.data.email = t.data.email,
                e.data.order = e.successData.id
            }),
            e.setForm = function(t) {
                e.form = t
            }
            ,
            e.register = function() {
                n.init(e, "data", "result"),
                n.submit(e, e.form, t.register)
            }
        }
        ]
    }
}),
window.tcoStore.directive("customForm", ["formHelper", "http", function(e, t) {
    var n = ["$scope", "formHelper", "http", "$location", "customer", "$filter", function(e, t, n, i, o, s) {
        function a() {
            e.data = {},
            e.defaults && _.defaults(e.data, e.defaults),
            _.isUndefined(e.form) || (e.form.submitted = e.form.$submitted = !1)
        }
        function r(t) {
            return e.forcedData && _.extend(e.data, e.forcedData),
            e.formData["static"] && _.extend(e.data, e.formData["static"]),
            e.dataSent = t,
            n.post("blog/form/submit", {
                id: e.formData.id,
                data: t,
                type: e.formData.type
            })
        }
        function c(t, a) {
            var r = !1
              , c = {
                success_message: 1,
                email: 2,
                newsletter_subscription: 3,
                redirect: 4
            };
            t.actions = _.sortBy(t.actions, function(e) {
                return _.isUndefined(c[e.type]) ? 99 : c[e.type]
            }),
            _.each(t.actions, function(c) {
                if (!_.isUndefined(c.type))
                    switch (c.type) {
                    case "redirect":
                        if (r)
                            break;
                        var d = 0;
                        d = _.isNumber(c.redirect_delay) ? c.redirect_delay : _.isUndefined(e.delayBeforeRedirect) ? 3e3 : e.delayBeforeRedirect,
                        d > 0 ? (window.setTimeout(function() {
                            i.url(c.redirect_url)
                        }, d),
                        r = !0) : i.url(c.redirect_url);
                        break;
                    case "email":
                        var u = c;
                        if (_.isUndefined(a[c.to])) {
                            if (!l(c.to))
                                break;
                            u.to = c.to
                        } else
                            u.to = a[c.to];
                        n.post("custom/tcowordpress/sendEmails", {
                            id: e.formData.id,
                            form: a,
                            config: u
                        });
                        break;
                    case "newsletter_subscription":
                        var p = c.newsletter_subscription
                          , m = c.subscription_email
                          , f = a[m];
                        a[p] && o.subscribe({
                            email: f,
                            source: "WP form ID " + t.id
                        }).success(function(t) {
                            t && !t.error ? e.successMessage = c.success_msg : e.successMessage += s("noticeText")(t.error)
                        }).error(function() {
                            e.successMessage += "Newsletter subscription failed. " + s("noticeText")(ERROR)
                        });
                        break;
                    case "success_message":
                        e.successMessage = c.success_msg
                    }
            })
        }
        function l(e) {
            var t = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return t.test(e)
        }
        e.result = "",
        a(),
        e.setForm = function(t) {
            e.form = t
        }
        ,
        e.submit = function() {
            e.$root.$broadcast("custom-form-request", e.data, e.formData),
            t.init(e, "data", "result"),
            t.submit(e, e.form, r, {
                success: function(t) {
                    e.$root.$broadcast("custom-form-request-success", e.data, e.formData, t),
                    a(),
                    _.isFunction(e.onSubmitSuccess) && e.onSubmitSuccess({
                        res: t
                    }),
                    e.performActions && !_.isUndefined(e.formData.actions) && c(e.formData, e.dataSent)
                }
            })
        }
    }
    ];
    return {
        restrict: "AE",
        templateUrl: "/blocks/blog/custom-form.html",
        scope: {
            formData: "=",
            defaults: "=?",
            forcedData: "=?",
            successMessage: "@",
            performActions: "<",
            delayBeforeRedirect: "<",
            custom: "<",
            onSubmitSuccess: "&"
        },
        controller: n
    }
}
]),
window.tcoStore.directive("postcomment", ["formHelper", "http", "customer", function(e, t, n) {
    return {
        restrict: "AE",
        templateUrl: "/blocks/blog/postcomment.html",
        scope: {
            post: "="
        },
        link: function(i) {
            function o(e, n, i) {
                var o = t.post("/blog/comment/add", e, null, i);
                return o
            }
            i.notice = {
                ERROR: "Unexpected error",
                INVALID: "Invalid data provided",
                MISSING: "Please fill all required fields",
                SUCCESS: "Thank you for your comment!"
            },
            i.code = null;
            var s = function() {
                i.data = {
                    newsletter: !1,
                    post: i.post.id
                },
                n.logged && (i.data.email = n.data.email,
                i.data.name = n.data.firstname,
                i.nonewsletter = n.subscribed)
            };
            s(),
            e.init(i, "data", "code"),
            i.submit = function(t) {
                e.submit(i, t, o, {
                    success: s
                })
            }
        }
    }
}
]),
window.tcoStore.directive("postRelated", ["$compile", function(e) {
    return {
        restrict: "E",
        template: '<ng-include src="template||defaultDemplate" asrc="{{template||defaultDemplate}}"></ng-include>',
        scope: {
            posts: "=",
            limit: "=",
            template: "@"
        },
        transclude: !0,
        link: function(t, n, i, o, s) {
            s(t, function(n, i) {
                if (n) {
                    var o = e(n)(t);
                    t.parentTraclusion = tco.empty(o[0]) ? null : o[0].outerHTML
                }
            })
        },
        controller: ["$scope", "post", function(e, t) {
            e.defaultDemplate = "/views/blog/post/list-related.html",
            tcologTime("postRelated::controller::start", !1, 2),
            e.$watch("posts", function() {
                if (e.loaded = !1,
                !_.isUndefined(e.posts) && e.posts.length > 0) {
                    var n = _.uniq(_.isObject(_.first(e.posts)) ? _.pluck(e.posts, "id") : e.posts);
                    e.items = n,
                    t.loadCollection(n, {
                        verbosity: 2
                    }).then(function() {
                        e.loaded = !0
                    })
                }
            })
        }
        ]
    }
}
]),
window.tcoStore.directive("relatedPosts", function() {
    return {
        restrict: "E",
        scope: {
            post: "=",
            limit: "=",
            listTemplate: "@"
        },
        templateUrl: "/views/blog/post/view/related.html",
        controller: ["$scope", "post", function(e, t) {
            var n = t.getPostCategory(e.post.id);
            if (e.category = n.data,
            !_.isUndefined(n)) {
                var i = _.without(n.data.posts, e.post.id);
                t.loadCollection(i, {
                    verbosity: 2
                }).then(function() {
                    e.collection = i
                })
            }
        }
        ]
    }
}),
window.tcoStore.directive("fieldNotice", function() {
    return {
        restrict: "A",
        scope: {
            fieldName: "@fieldNotice",
            form: "=",
            parentErrorClass: "@"
        },
        replace: !0,
        template: '<span ng-cloak class="input-validation-msg ng-hide" ng-show="isError()" ng-bind="form[fieldName] | errorNotice"></span>',
        link: function(e, t) {
            if (e.isError = function() {
                try {
                    return e.form.submitted && e.form[e.fieldName].$invalid
                } catch (t) {
                    return !1
                }
            }
            ,
            e.parentErrorClass) {
                var n = t.parent();
                e.$watch(e.isError, function(t) {
                    t ? n.addClass(e.parentErrorClass) : n.removeClass(e.parentErrorClass)
                })
            }
        }
    }
}),
window.tcoStore.directive("pwCheck", function() {
    return {
        restrict: "A",
        scope: !0,
        require: "ngModel",
        link: function(e, t, n, i) {
            var o = function() {
                var t = e.$eval(n.ngModel)
                  , i = e.$eval(n.pwCheck);
                return t == i
            };
            e.$watch(o, function(e) {
                i.$setValidity("unique", e)
            })
        }
    }
}),
window.tcoStore.directive("svgIcon", function() {
    var e;
    try {
        e = angular.element(document.querySelectorAll("html")).injector().get("svgIcons")
    } catch (t) {
        e = {}
    }
    return {
        restrict: "E",
        replace: !0,
        scope: {
            id: "@",
            icon: "@"
        },
        template: '<span><svg ng-if="icon" class="svg-{{icon}}-dims "><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{\'#\'+icon}}"></use></svg><svg ng-if="path" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" ><path d="{{path}}"/></svg></span>',
        controller: ["$scope", function(t) {
            t.path = _.isUndefined(t.id) || _.isUndefined(e[t.id]) ? null : e[t.id]
        }
        ]
    }
}),
window.tcoStore.directive("abTest", function() {
    var e = ["$scope", function(e) {
        var t = 0
          , n = t ? "versionB" : "versionA";
        e.$watch("force", function(t) {
            var i = !1;
            if (t)
                for (vName in t)
                    if (t[vName]) {
                        i = !0,
                        e.versionName = vName;
                        break
                    }
            i || (e.versionName = n)
        }, !0),
        e.$watch("versionName", function() {
            e.versionTemplate = e.template.replace("VERSION", e.versionName)
        })
    }
    ];
    return {
        restrict: "EA",
        template: '<div ng-include="versionTemplate"></div>',
        scope: {
            template: "@",
            abTest: "@",
            force: "="
        },
        controller: e
    }
}),
window.tcoStore.directive("backToTop", function() {
    return {
        restrict: "E",
        replace: !0,
        templateUrl: "/views/page/back-to-top.html",
        scope: {
            selector: "@selector",
            top: "@"
        },
        controller: ["$scope", function(e) {
            function t() {
                var t = _.max(_.pluck(i, "scrollTop"));
                e.visible = t > o
            }
            function n() {
                e.$root.scrollTo(0)
            }
            var i = angular.element(document.querySelectorAll(_.isUndefined(e.selector) ? "body,html" : e.selector))
              , o = parseInt(e.top, 10);
            if (o) {
                var s = _.throttle(t, 100);
                window.addEventListener("resize", s),
                window.addEventListener("scroll", s),
                window.addEventListener("touchmove", s),
                e.$on("$destroy", function() {
                    window.removeEventListener("resize", s),
                    window.removeEventListener("scroll", s),
                    window.removeEventListener("touchmove", s)
                })
            } else
                e.visible = !0;
            e.backToTop = _.throttle(n, 1e3)
        }
        ]
    }
}),
tcoStore.directive("breadcrumbs", function() {
    var e = null
      , t = null;
    return {
        restrict: "E",
        transclude: !0,
        templateUrl: "/views/page/breadcrumbs.html",
        controller: ["$scope", "router", function(n, i) {
            n.$watch(function() {
                return i.breadcrumbs
            }, function() {
                var o = null;
                if (!_.isUndefined(i.model) && !_.isUndefined(i.model.className)) {
                    var s = i.model.className;
                    "category" == s ? (e = i.breadcrumbs,
                    t = null) : "product" == s ? (t && t != i.currentPath && (e = null),
                    t = i.currentPath,
                    o = e) : (e = o = null,
                    t = null)
                }
                if (o) {
                    var a = angular.copy(o);
                    a.push(_.last(i.breadcrumbs)),
                    n.breadcrumbs = a
                } else
                    n.breadcrumbs = i.breadcrumbs;
                n.routerStatus = i.status
            })
        }
        ]
    }
}),
tcoStore.directive("cookiesInfo", function() {
    return {
        restrict: "EA",
        templateUrl: "/page/cookies-info.html",
        scope: {
            delay: "@"
        },
        controller: ["$scope", "$localStorage", "$timeout", "$rootScope", function(e, t, n, i) {
            e.confirmatioNeeded = _.isUndefined(t._cookiesAccepted),
            e.visible = !1,
            e.confirmatioNeeded && n(function() {
                e.visible = !0
            }, _.isUndefined(e.delay) ? 5e3 : parseInt(e.delay)),
            e.accept = function() {
                t._cookiesAccepted = 1,
                e.close()
            }
            ,
            e.close = function() {
                e.visible = !1
            }
            ,
            e.showPrivacySettings = function() {
                i.$broadcast("privacySettings.show")
            }
        }
        ]
    }
}),
function() {
    function e() {
        var e = this;
        e.year = (new Date).getFullYear()
    }
    tcoStore.component("currentYear", {
        controller: e,
        template: '<span ng-bind=":: vm.year"></span>',
        controllerAs: "vm"
    })
}(),
window.tcoStore.directive("meganavItem", ["transport", function(e) {
    var t = !1
      , n = e.getModel("meganavLocks", {
        lock: !1
    })
      , i = function() {
        n.timeout && window.clearTimeout(n.timeout)
    }
      , o = function(e, t) {
        n.lock || (i(),
        n.timeout = window.setTimeout(e, t))
    }
      , s = function(e, t) {
        n.lock = !1
    };
    return {
        restrict: "E",
        replace: !0,
        templateUrl: "/page/header/meganav/item.html",
        scope: {
            item: "=",
            clickOnly: "@",
            delayIn: "@",
            delayOut: "@",
            noShow: "=?"
        },
        link: function(e, t, n) {
            e.clickOnly || (e.delayInValue = parseInt(e.delayIn || 300, 10),
            e.delayOutValue = parseInt(e.delayOut || 500, 10),
            t.on("mouseenter", e.showDelayed),
            e.delayOutValue > 0 && t.on("mouseleave", e.hideDelayed))
        },
        controller: ["$scope", "transport", "$location", "browser", function(e, a, r, c) {
            function l() {
                if (e.item.link) {
                    var t = r.path().replace(/\/+$/, "")
                      , n = e.item.link.replace(/\/+$/, "");
                    e.isActive = n == t,
                    e.linkMatch = e.isActive || t.indexOf(n + "/") > -1
                } else
                    e.isActive = !1,
                    e.linkMatch = !1
            }
            e.$on("$locationChangeStart", function() {
                e.hide(!0)
            }),
            e.$on("hideMeganavRequest", function() {
                e.hide(!0)
            }),
            e.$on("$routeChangeSuccess", l),
            l(),
            e.loadSubmenu = c.prerender ? 1 : 0;
            var d = a.getModel("meganavActive", void 0, {
                storage: "static"
            })
              , u = e.item.$$hashKey;
            d[u] = !1,
            e.hide = function(o) {
                return i(),
                o && (n.lock = !0,
                window.clearTimeout(t),
                t = window.setTimeout(s, 1e3)),
                d[u] = !1,
                e.$$phase || e.$root.$$phase ? void 0 : e.$apply()
            }
            ,
            e.hideDelayed = function(t) {
                o(e.hide, _.isNumber(t) ? t : e.delayOutValue)
            }
            ,
            e.show = function() {
                if (!n.lock) {
                    i(),
                    e.loadSubmenu = 1;
                    for (var t in d)
                        d[t] = u == t && !e.noShow;
                    return (e.$$phase || e.$root.$$phase) && (e.$$phase || e.$root.$$phase) ? void 0 : e.$apply()
                }
            }
            ,
            e.showDelayed = function(t) {
                o(e.show, _.isNumber(t) ? t : e.delayInValue)
            }
            ,
            e.$watch(function() {
                return e.visible = d[u]
            }, function() {
                e.$root.$broadcast("imagesRecheckRequest"),
                window.setTimeout(function() {
                    e.$root.$broadcast("imagesRecheckRequest")
                }, 500)
            }),
            e.touch = _.throttle(function(t, n) {
                e.visible ? tco.empty(n) ? e.hide() : n.match(/^https?:/) ? window.location.href = n : r.path(n) : e.show()
            }, 1e3)
        }
        ]
    }
}
]),
tcoStore.directive("meganavSubmenu", ["transport", function(e) {
    var t = e.getModel("meganavLocks")
      , n = function() {
        t.timeout && window.clearTimeout(t.timeout)
    }
      , i = function(e, i) {
        t.lock || (n(),
        t.timeout = window.setTimeout(e, i))
    };
    return {
        restrict: "E",
        replace: !0,
        templateUrl: "/page/header/meganav/submenu.html",
        scope: {
            item: "="
        },
        controller: ["$scope", "transport", "$location", function(e, o, s) {
            var a = o.getModel("meganavActive", void 0, {
                storage: "static"
            })
              , r = e.item.$$hashKey;
            e.hide = function(e) {
                a[r] = !1
            }
            ,
            e.show = function(e) {
                if (!t.lock) {
                    n();
                    for (var i in a)
                        a[i] = r == i
                }
            }
            ,
            e.$watch(function() {
                e.visible = a[r]
            }),
            e.hideDelayed = function(t) {
                i(e.hide, t)
            }
            ,
            e.showDelayed = function(t) {
                i(e.show, t)
            }
        }
        ]
    }
}
]),
tcoStore.directive("minisearchHint", function() {
    var e = ["$scope", "transport", "search", "post", "page", "category", "product", "website", "stock", "$location", function(e, t, n, i, o, s, a, r, c, l) {
        function d() {
            if (e.search) {
                var t = e.search;
                h = n.load("/" + t, {
                    verbosity: 1
                }),
                h.then(function() {
                    u(t)
                })
            }
        }
        function u(t) {
            function l(t, n) {
                try {
                    var i = d.data[t];
                    "products" == t && r.manageStock && !r.showOutOfStock && (i = c.filterOutOfStock(i)),
                    e[t] = n ? _.filter(_.pluck(n.getModels(i), "data"), function(e) {
                        return e.url ? !0 : !1
                    }) : i,
                    e[t].length && (u = !0)
                } catch (o) {
                    e[t] = []
                }
            }
            if (e.search && e.search == t) {
                var d = n.get("/" + e.search);
                e.result = d.data;
                var u = !1;
                l("pages", o),
                l("posts", i),
                l("categories", s),
                l("products", a),
                e.hasStandardResults = u,
                g()
            }
        }
        function p() {
            h && (h.cancel(),
            h = null)
        }
        function m() {
            e.search = void 0,
            p(),
            v()
        }
        function f() {
            var t = e.result.breadcrumbs[0].url;
            l.path() == t ? v() : l.path(t)
        }
        function g() {
            e.visible = !0,
            e.$root.$broadcast("hideMeganavRequest"),
            e.$root.$broadcast("minisearch-hint.show")
        }
        function v() {
            e.visible = !1,
            e.$root.$broadcast("minisearch-hint.hide")
        }
        e.defaultTemplate = "/page/header/minisearch-hint.html";
        var h, b = _.debounce(d, 500);
        e.$on("$routeChangeStart", m),
        e.$on("hide-minisearch-hint", v),
        e.useTransport && (e.searchFormData = t.getModel("_miniSearchData", void 0, {
            storage: "static"
        }),
        e.$watch("searchFormData.search", function() {
            e.search = e.searchFormData.search
        })),
        e.$watch("search", function() {
            p(),
            b()
        }, !0),
        e.hide = v,
        e.browseAll = f
    }
    ];
    return {
        restrict: "E",
        template: '<ng-include src=":: template||defaultTemplate" ></ng-include>',
        scope: {
            template: "@",
            search: "=?",
            useTransport: "@"
        },
        controller: e
    }
}),
tcoStore.directive("minisearchResult", function() {
    return {
        restrict: "E",
        transclude: !0,
        template: '<div ng-if="initiated"><listing collection="collection" off-click="hide()" models-name-prependix="minisearch" template="/views/catalog/product/list-minisearch.html" enable-lazy-load="0" listing-name="Minisearch results"></listing></div>',
        controller: ["$scope", "transport", "search", function(e, t, n) {
            e.data = t.getModel("_miniSearchData");
            var i, o, s, a = !1, r = !1, c = !1, l = function() {
                if (c) {
                    var t = e.data.search;
                    if (s) {
                        if (s == t)
                            return;
                        r && o.cancel()
                    }
                    t && t.length > 2 && (o = n.load("/" + t, {
                        verbosity: 1
                    }),
                    r = !0,
                    s = t,
                    o.success(function() {
                        if (s == t && c) {
                            r = !1;
                            var o = n.get("/" + t);
                            o && o.data ? (e.collection = i = o.data.products,
                            a = !0) : (e.collection = null,
                            e.hide())
                        }
                    }))
                }
            }, d = _.debounce(l, 500);
            e.$watch("data.search", function() {
                c = !0,
                d()
            }, !0);
            var u = function() {
                a && (e.initiated = !0),
                e.collection = a ? i : []
            };
            e.$watch(function() {
                return a
            }, u),
            e.hide = function() {
                a = !1,
                s = null
            }
            ,
            e.$on("$routeChangeStart", function() {
                c = !1,
                e.hide()
            })
        }
        ]
    }
}),
tcoStore.directive("pageFooter", function() {
    return {
        restrict: "E",
        replace: !0,
        templateUrl: "/page/footer.html",
        controller: "WebsiteController"
    }
}),
tcoStore.directive("pageHeader", function() {
    return {
        restrict: "E",
        replace: !0,
        templateUrl: "/page/header.html",
        controller: ["$scope", "customer", "$location", "website", function(e, t, n, i) {
            e.content_currencies_list = i.currency.list,
            e.website = i,
            e.customer = t,
            e.logout = function() {
                return t.logout()
            }
            ,
            e.$watch(function() {
                e.customer_currency = t.currency,
                e.customer_basket_qty = t.basket.data.qty,
                e.customer_wishlist_qty = t.wishlist.data.qty,
                e.customer_logged = t.data.logged
            }),
            e.setCurrency = function(e) {
                t.setCurrency(e)
            }
            ,
            e.isCurrencySwitchVisible = !1,
            e.toggleCurrency = function(t) {
                e.isCurrencySwitchVisible = _.isUndefined(t) ? !e.isCurrencySwitchVisible : !!t
            }
        }
        ]
    }
}),
window.tcoStore.directive("socialButtons", function() {
    return {
        restrict: "AE",
        scope: {
            model: "=",
            selectedImage: "=",
            factoryName: "@",
            template: "@",
            utm: "<"
        },
        transclude: !0,
        template: '<div class="social-buttons"><ng-transclude></ng-transclude><div ng-include="template"></div></div>',
        controller: ["$scope", "tools", "http", "config", function(e, t, n, i) {
            _.defaults(e, {
                template: "/page/socialButtons.html"
            });
            var o = i.base.replace(/\/$/, "")
              , s = document.location.protocol + "//" + document.location.hostname + o
              , a = encodeURIComponent;
            e.share = function(n) {
                var i = []
                  , o = "";
                e.utm && (_.each(e.utm, function(e, t) {
                    i.push("utm_" + t + "=" + a(e))
                }),
                i.push("utm_medium=" + n),
                o = "?" + i.join("&"));
                var r, c, l, d = a(s + e.model.url + o);
                switch (n) {
                case "facebook":
                    r = "http://www.facebook.com/sharer/sharer.php?u=" + d,
                    c = 600,
                    l = 500;
                    break;
                case "twitter":
                    r = "http://twitter.com/intent/tweet?url=" + d + "&text=" + a(e.model.name || e.model.title),
                    c = 600,
                    l = 450;
                    break;
                case "gplus":
                    r = "https://plus.google.com/share?url=" + d,
                    c = 700,
                    l = 500;
                    break;
                case "whatsapp":
                    r = "whatsapp://send?text=" + d,
                    c = 700,
                    l = 500;
                    break;
                case "pinterest":
                    r = "http://pinterest.com/pin/create/button/?url=" + d + "&description=" + a(tco.pathVal(e.model, "meta.description") || e.model.name || e.model.title) + "&media=" + t.imagePathToUrl(!_.isUndefined(e.selectedImage) && e.selectedImage && e.selectedImage.length > 0 ? e.selectedImage : e.model.image),
                    c = 630,
                    l = 270;
                    break;
                default:
                    return !1
                }
                var u = Math.round(screen.width / 2 - c / 2)
                  , p = screen.height > l ? Math.round(screen.height / 3 - l / 2) : 0
                  , m = window.open(r, "socialShare", "left=" + u + ",top=" + p + ",width=" + c + ",height=" + l + ",personalbar=0,toolbar=0,scrollbars=1,resizable=1");
                m ? m.focus() : location.href = r
            }
            ;
            var r = {};
            e.count = function(t) {
                var i = a(s + e.model.url);
                return "undefined" == typeof r[i] && (r[i] = {},
                n.post("socials/count", {
                    url: i
                }).success(function(e) {
                    r[i] = e
                })),
                "undefined" == typeof r[i][t] ? null : null !== r[i][t] ? r[i][t] + "" : null
            }
        }
        ]
    }
}),
window.tcoStore.directive("socialConnect", function() {
    var e = ["$scope", "website", function(e, t) {
        e.connect = t.connect
    }
    ];
    return {
        restrict: "E",
        scope: !0,
        templateUrl: "/page/social-connect.html",
        controller: e
    }
}),
window.tcoStore.factory("attribute", ["core", "localConfig", "$exceptionHandler", "cache", function(e, t, n, i) {
    function o(e, t, n) {
        if (n) {
            var i = t.split(r);
            if (i.length > 1) {
                var o = parseInt(i[1]);
                if (o > 0 && _.findWhere(e, {
                    value: o
                }))
                    return o
            }
        }
        var s = _.findWhere(e, {
            label: t
        });
        return _.isUndefined(s) ? (t.match(/^\d+$/) && (t = parseInt(t, 10)),
        s = _.findWhere(e, {
            label: t
        }),
        _.isUndefined(s) ? null : s.value) : s.value
    }
    var s = e.createFactory("attribute", {
        valid: 600
    })
      , a = (_.isUndefined(t.calculateFiltersQtys) ? 1 : t.calculateFiltersQtys,
    {})
      , r = "__";
    s.loadStaticCollection = function() {
        return null
    }
    ,
    s.getFilterableAttributes = function() {
        return _.isUndefined(a.getFilterableAttributes) && (a.getFilterableAttributes = _.where(_.pluck(s.getResource(), "data"), {
            filterable: 1
        })),
        a.getFilterableAttributes
    }
    ,
    s.getConfigurableAttributes = function() {
        return _.isUndefined(a.getConfigurableAttributes) && (a.getConfigurableAttributes = _.where(_.pluck(s.getResource(), "data"), {
            configurable: 1
        })),
        a.getConfigurableAttributes
    }
    ,
    s.getRangeTypeAttributes = function() {
        return _.isUndefined(a.getRangeTypeAttributes) && (a.getRangeTypeAttributes = _.where(_.pluck(s.getResource(), "data"), {
            range: 1
        })),
        a.getRangeTypeAttributes
    }
    ,
    s.getRangeTypeAttributesCodes = function() {
        return _.isUndefined(a.getRangeTypeAttributesCodes) && (a.getRangeTypeAttributesCodes = _.pluck(s.getRangeTypeAttributes(), "code")),
        a.getRangeTypeAttributesCodes
    }
    ,
    s.getByCode = function(e) {
        return _.findWhere(_.pluck(s.getResource(), "data"), {
            code: e
        })
    }
    ,
    s.matchesFilters = function(e, t, i) {
        function o(e) {
            return (_.isUndefined(d.min) || d.min <= e) && (_.isUndefined(d.max) || d.max >= e) ? !0 : !1
        }
        try {
            var a, r, c = _.isUndefined(e.data) ? e : e.data, l = s.getRangeTypeAttributesCodes();
            for (a in t) {
                var d = t[a];
                if (!tco.empty(d)) {
                    if (_.isUndefined(c[a])) {
                        if (i)
                            continue;
                        return !1
                    }
                    var u = c[a];
                    if (l.indexOf(a) > -1) {
                        if (_.isArray(u)) {
                            if (!_.find(u, o))
                                return !1
                        } else if (!o(u))
                            return !1
                    } else if (r = d.map(Number),
                    !(_.size(r) < 1) && (_.isUndefined(u) || (_.isArray(u) ? _.size(_.intersection(r, u)) < 1 : !u || _.indexOf(r, u) < 0)))
                        return !1
                }
            }
        } catch (p) {
            n(p)
        }
        return !0
    }
    ,
    s.getOptionLabel = function(e, t, n, i) {
        function o(e, t) {
            return !i || _.find(e.options, {
                label: t.label
            }).length < 2 ? t.label : t.label + r + t.value
        }
        if (!e)
            return null;
        var a, c = s.getByCode(t);
        if (_.isUndefined(c) || _.isUndefined(c.options))
            return e;
        if (_.isArray(e)) {
            var l, d, u = [];
            for (l = 0,
            d = e.length; d > l; l++)
                (a = _.findWhere(c.options, {
                    value: parseInt(e[l], 10)
                })) && u.push(o(c, a));
            return _.isUndefined(n) && (n = ", "),
            n === !1 ? u : u.join(n)
        }
        return a = _.findWhere(c.options, {
            value: parseInt(e, 10)
        }),
        a ? o(c, a) : null
    }
    ,
    s.getOptionValue = function(e, t, n) {
        if (!e)
            return null;
        var i, a = s.getByCode(t);
        if (_.isUndefined(a))
            return null;
        if (_.isArray(e)) {
            var r, c, l = [];
            for (r = 0,
            c = e.length; c > r; r++)
                (i = o(a.options, e[r], n)) && l.push(i);
            return l
        }
        return o(a.options, e, n)
    }
    ,
    s.prepareOptions = function(e) {
        var t, n, i, o, a = s.getConfigurableAttributes(), r = [];
        for (t in e)
            n = _.findWhere(a, {
                code: t
            }),
            _.isUndefined(n) || (i = e[t],
            o = _.findWhere(n.options, {
                value: i
            }),
            r.push({
                code: t,
                valueId: i,
                valueLabel: _.isUndefined(o) ? "" : o.label,
                attributeId: n.id,
                attributeLabel: n.label
            }));
        return r
    }
    ,
    s.prepareFiltersModelMetaData = function(n, i, o) {
        var a, r, c, l, d, u, p = _.isUndefined(o) ? s.getFilterableAttributes() : _.pluck(s.getModels(o), "data"), m = e.getCollectionFromResource("product", n);
        _.isUndefined(i.meta) && (i.meta = {});
        var f = i.meta;
        _.defaults(f, {
            qty: {},
            min: {},
            max: {}
        });
        var g = f.qty
          , v = s.getRangeTypeAttributesCodes()
          , h = t.permanentAttrs || [];
        for (a in p)
            if (r = p[a],
            r.range) {
                var b = _.flatten(_.filter(_.pluck(_.pluck(m, "data"), r.code)), function(e) {
                    return e
                });
                f.min[r.code] = b.length ? _.min(b) : 0,
                f.max[r.code] = b.length ? _.max(b) : 0,
                delete b
            } else {
                d = u = 0;
                var w = angular.extend({}, i.selection);
                _.isUndefined(g[r.code]) && (g[r.code] = {}),
                _.isUndefined(r.options) ? console.error("MISSING options", r) : (_.each(r.options, function(e) {
                    c = l = 0;
                    var t = {};
                    t[r.code] = [e.value],
                    w[r.code] = [e.value],
                    _.each(m, function(e) {
                        var n = s.matchesFilters;
                        n(e, t) && (c++,
                        n(e, w) && l++)
                    }),
                    _.isUndefined(g[r.code][e.value]) && (g[r.code][e.value] = {}),
                    g[r.code][e.value].independent = c,
                    g[r.code][e.value].dependent = l,
                    u += l,
                    d += c
                }),
                g[r.code].independent = d,
                g[r.code].dependent = u,
                _.isUndefined(f.revision) ? f.revision = 1 : f.revision++)
            }
        var y = i.meta.qty
          , k = i.selection;
        for (a in k)
            -1 == v.indexOf(a) && -1 == h.indexOf(a) && (k[a] = _.filter(k[a], function(e) {
                try {
                    return y[a][e].independent
                } catch (t) {}
                return !1
            }));
        return p
    }
    ;
    var c = {
        " & ": "+and+",
        ":": "%3A",
        ";": "%3B",
        ",": "%2C",
        "&": "%26"
    }
      , l = function(e, t) {
        return tco.empty(e) ? null : (e += "",
        _.each(c, function(n, i) {
            e = e.split(t ? n : i).join(t ? i : n)
        }),
        e)
    }
      , d = function(e) {
        return l(e, !1)
    }
      , u = function(e) {
        return l(e, !0)
    }
      , p = function(e) {
        return _.compact(_.map(_.pluck(s.getResource(), "data"), function(t) {
            return e && (2 == e ? t.indexable : !t.indexable) ? !1 : t.code
        }))
    };
    return s.serialize = function(e, t) {
        var n, i, o = [], a = p(t), r = s.getRangeTypeAttributesCodes();
        for (n in e)
            if (!(a.indexOf(n) < 0)) {
                i = e[n];
                var c, l;
                r.indexOf(n) > -1 ? _.isUndefined(i.min) && _.isUndefined(i.max) || (l = (i.min || "") + "-" + (i.max || "")) : (c = s.getOptionLabel(i, n, !1, !0),
                l = _.isArray(c) ? _.map(c, d).join(",") : d(c)),
                l && o.push(n + ":" + l)
            }
        return o.join(";")
    }
    ,
    s.unserialize = function(e, t, n) {
        var i, o, a, r, c, l, d = p(n), m = e.match(/[^:,][^;]+(;|$)/g), f = {}, g = s.getRangeTypeAttributesCodes();
        for (i = 0; i < m.length; i++)
            if (o = m[i],
            a = o.replace(";", "").split(":"),
            l = a[0],
            !(d.indexOf(l) < 0))
                if (g.indexOf(l) > -1) {
                    r = a[1].split("-");
                    var v = parseFloat(r[0]);
                    _.isUndefined(f[l]) && (f[l] = {}),
                    isNaN(v) || (f[l].min = v);
                    var h = parseFloat(r[1]);
                    isNaN(h) || (f[l].max = h)
                } else
                    r = _.map(a[1].split(","), u),
                    c = s.getOptionValue(r, l, !0),
                    f[l] = c;
        return f
    }
    ,
    s
}
]),
window.tcoStore.factory("category", ["core", "extended$q", "product", "attribute", "stock", "website", function(e, t, n, i, o, s) {
    var a = e.createFactory("category");
    return a.productVerbosity = 2,
    a.afterLoadInjection(function(e, t) {
        var n = _.flatten(_.map(e, function(e) {
            try {
                return _.flatten(_.map(_.values(e.data.products), function(e) {
                    return _.isObject(e) ? e.id : _.isNumber(e) ? e : null
                }))
            } catch (t) {
                return []
            }
        }))
          , i = s.manageStock && !s.showOutOfStock;
        return i && (n = o.filterOutOfStock(n)),
        {
            stock: {
                ids: s.manageStock ? n : []
            },
            product: {
                ids: n,
                verbosity: t.productVerbosity || a.productVerbosity
            }
        }
    }),
    a.getSiblings = function(e) {
        var t = a.get(e);
        return _.isUndefined(t) || _.isUndefined(t.data.parent) ? [] : _.where(_.pluck(a.getResource(), "data"), {
            parent: t.data.parent
        })
    }
    ,
    a.getChildren = function(e) {
        return _.isUndefined(e) ? [] : _.where(_.pluck(a.getResource(), "data"), {
            parent: e
        })
    }
    ,
    a
}
]),
window.tcoStore.factory("page", ["core", "http", function(e, t) {
    var n = e.createFactory("page", {
        previewable: !0
    });
    return n
}
]),
window.tcoStore.factory("post", ["core", function(e) {
    var t = e.createFactory("post", {
        previewable: !0
    });
    t.templatesDir = "/views/blog/post/",
    t.getPostCategory = function(t) {
        return _.find(e.getResource("postCategory"), function(e) {
            var n = tco.pathVal(e, "data.posts");
            return n && n.indexOf(t) > -1 && "/blog" != tco.pathVal(e, "data.url")
        })
    }
    ,
    t.filterCollection = function(e, n) {
        e = _.pluck(e, "id");
        var i, o = t.getModels(e, !0), s = [];
        for (i in o)
            o[i].matchesFilters(n) && s.push(o[i]);
        return s
    }
    ;
    var n = e.model.post;
    return e.model.post = function() {
        var e = new n;
        return e.matchesFilters = function(e) {
            try {
                var t, n, i = this.data;
                for (t in e)
                    if (e.hasOwnProperty(t) && !tco.empty(e[t]))
                        if ("archive" != t) {
                            if (n = e[t].map(Number),
                            !(_.size(n) < 1) && (_.isUndefined(i[t]) || (_.isArray(i[t]) ? _.size(_.intersection(n, i[t])) < 1 : !i[t] || _.indexOf(n, i[t]) < 0)))
                                return !1
                        } else {
                            var o = i[t]
                              , s = !0;
                            for (var a in e[t])
                                if (e[t].hasOwnProperty(a) && o[a] != e[t][a]) {
                                    s = !1;
                                    break
                                }
                            if (!s)
                                return !1
                        }
            } catch (r) {
                $exceptionHandler(err)
            }
            return !0
        }
        ,
        e
    }
    ,
    t
}
]),
window.tcoStore.factory("postCategory", ["core", "extended$q", "post", function(e, t, n) {
    var i = e.createFactory("postCategory");
    return i.getVisibleCategories = function() {
        return _.filter(_.pluck(i.getResource(), "data"), function(e) {
            return "/blog" != e.url
        })
    }
    ,
    i.afterLoadInjection(function(e) {
        var t = _.flatten(_.map(e, function(e) {
            try {
                return _.values(e.data.posts)
            } catch (t) {
                return []
            }
        }));
        return {
            post: {
                ids: t,
                verbosity: 2
            }
        }
    }),
    i.getSiblings = function(e) {
        var t = i.get(e);
        return _.isUndefined(t) || _.isUndefined(t.data.parent) ? [] : _.where(_.pluck(i.getResource(), "data"), {
            parent: t.data.parent
        })
    }
    ,
    i.getChildren = function(e) {
        return _.isUndefined(e) ? [] : _.where(_.pluck(i.getResource(), "data"), {
            parent: e
        })
    }
    ,
    i
}
]),
window.tcoStore.factory("product", ["extended$q", "core", "attribute", "stock", "website", "$exceptionHandler", "$filter", "localConfig", function(e, t, n, o, s, a, r, c) {
    function l(e, t, n) {
        var i = _.difference(u(e), n);
        return _.find(i, function(e) {
            return !t[e]
        }) ? void 0 : _.findWhere(p(e), t)
    }
    function d(e, t) {
        return _.findWhere(p(e), t)
    }
    function u(e) {
        var t = f(e);
        return m(t) ? _.pluck(t.options.configurable.attributes, "code") : !1
    }
    function p(e) {
        try {
            return g.getModelsData(f(e).options.configurable.children)
        } catch (t) {
            return []
        }
    }
    function m(e) {
        try {
            return !!f(e).options.configurable.children.length
        } catch (t) {
            return !1
        }
    }
    function f(e) {
        return _.isNumber(e) && (e = g.get(e)),
        e.id && e.loaded && e.data ? e.data : e
    }
    var g = t.createFactory("product", {
        node: !0
    });
    return g.templatesDir = "/views/catalog/product/",
    g.nativeGet = g.get,
    g.get = function(e) {
        var t = g.nativeGet(e);
        if (c.allowEmptyConfigurable)
            return t;
        if (_.isString(e) && !_.isUndefined(t) && !_.isUndefined(t.data.options) && !_.isUndefined(t.data.options.configurable)) {
            var n, i = t.data.options.configurable.children;
            if (s.manageStock && !s.showOutOfStock && (n = o.filterOutOfStock(i),
            n && n.length > 0 && (i = n)),
            i.length > 0) {
                if (c.productPageDefaultOptions) {
                    var a = _.findWhere(g.getModelsData(i), c.productPageDefaultOptions);
                    if (a)
                        return g.nativeGet(a.id)
                }
                return g.nativeGet(_.first(i))
            }
        }
        return t
    }
    ,
    g.afterLoadInjection(function(e) {
        var t = _.compact(_.flatten(_.map(e, function(e) {
            var t = []
              , n = e.data.verbosity > 2 || !c.useParentStockForListing;
            if (e.verbosity > 2) {
                try {
                    var i = e.data.options.configurable.children;
                    t = _.union(t, i),
                    n && (stockIds = _.union(stockIds, i))
                } catch (o) {}
                if (n)
                    try {
                        var i = _.flatten(_.map(_.values(e.data.confmap), _.values));
                        stockIds = _.union(stockIds, i)
                    } catch (s) {}
                try {
                    if (!e.data.preventChildrenLoad) {
                        var i = _.pluck(_.flatten(_.pluck(e.data.options.bundle, "children")), "id");
                        t = _.union(t, i)
                    }
                } catch (o) {}
                try {
                    var i = e.data.options.grouped;
                    t = _.union(t, i)
                } catch (o) {}
                _.isUndefined(e.data.parent) || (e.data.parent == e.data.id ? delete e.data.parent : t.push(e.data.parent))
            } else if (n)
                try {
                    var i = _.flatten(_.map(_.values(e.data.confmap), _.values));
                    stockIds = _.union(stockIds, i)
                } catch (s) {}
            return t
        })));
        return {
            stock: {
                ids: s.manageStock ? t : []
            },
            product: {
                ids: t,
                verbosity: 3
            }
        }
    }),
    g.afterLoad(function(e) {
        _.each(e, function(e) {
            if (!_.isUndefined(e.data.options) && !_.isUndefined(e.data.options.bundle))
                for (items = _.pluck(e.data.options.bundle, "children"),
                i = items.length - 1; i >= 0; i--)
                    for (j = items[i].length - 1; j >= 0; j--)
                        items[i][j].productModel = g.get(items[i][j].id);
            _.isUndefined(e.data.options) || _.isUndefined(e.data.options.grouped) || (e.data.options.grouped = g.getModels(e.data.options.grouped, !0));
            try {
                e.data.options.configurable.children = _.pluck(g.getModels(e.data.options.configurable.children, !0), "id")
            } catch (t) {}
        })
    }),
    g.filterCollection = function(e, t) {
        _.isObject(_.first(e)) && (e = _.pluck(e, "id"));
        var i = g.getModels(e, !0);
        return _.filter(i, function(e) {
            return n.matchesFilters(e, t)
        })
    }
    ,
    g.getChildProduct = function(e) {
        var t = g.get(e)
          , n = tco.pathVal(t, "data.options.configurable.children");
        if (n) {
            var i;
            for (i = 0; i < n.length; i++)
                if (o.isSelable(n[i], 1)) {
                    var s = g.get(n[i]);
                    if (s.data && s.data.parent == e)
                        return s
                }
            return g.get(n[0])
        }
        return t
    }
    ,
    g.getTopProduct = function(e) {
        var t = g.get(e);
        try {
            var n;
            if (n = t.data.parent)
                return g.get(n)
        } catch (i) {}
        return t
    }
    ,
    g.syncConfigurableOptionsWithStock = function(e) {
        !s.manageStock || s.showOutOfStock || c.useParentStockForListing || _.each(e, function(e) {
            try {
                var t = e.data.options.configurable.attrMap;
                _.each(_.keys(t), function(n) {
                    var i = t[n];
                    e.data[n + "_orginal"] = e.data[n],
                    e.data[n] = _.compact(_.map(_.keys(i), function(e) {
                        var t = i[e];
                        return o.filterOutOfStock(t).length > 0 ? parseInt(e) : null
                    }))
                })
            } catch (n) {}
        })
    }
    ,
    g.getConfigurableFamilyIds = function(e, t) {
        try {
            var n = g.getTopProduct(e)
              , i = n.data.options.configurable.children;
            return t || i.push(n.id),
            _.unique(i)
        } catch (o) {}
        return [e]
    }
    ,
    !s.manageStock || s.showOutOfStock || c.useParentStockForListing || (g.afterLoadInjection(function(e) {
        var t = _.flatten(_.map(e, function(e) {
            try {
                return _.flatten(_.map(_.values(e.data.options.configurable.attrMap), function(e) {
                    return _.values(e)
                }))
            } catch (t) {
                return []
            }
        }));
        return {
            stock: {
                ids: t
            }
        }
    }),
    g.afterLoad(g.syncConfigurableOptionsWithStock)),
    g.matchChild = l,
    g.matchChildren = d,
    g.isConfigurable = m,
    g.toModelData = f,
    g
}
]),
window.tcoStore.factory("review", ["core", "product", "cache", function(e, t, n) {
    function i(e, t, i) {
        return n.get("review.loadAll", {
            verbosity: e,
            limit: t,
            skip: i
        }, function() {
            return r.find({
                verbosity: 1
            }, {
                verbosity: e,
                limit: t,
                skip: i,
                sort: {
                    date: -1
                }
            })
        })
    }
    function o(e, t, i) {
        return n.get("review.loadAllMerchant", {
            verbosity: e,
            limit: t,
            skip: i
        }, function() {
            return r.find({
                type_id: c.merchant
            }, {
                verbosity: e,
                limit: t,
                skip: i,
                sort: {
                    date: -1
                }
            })
        })
    }
    function s(e, t, i, o) {
        return n.get("review.loadByProduct", {
            productIds: e,
            verbosity: t,
            limit: i,
            skip: o
        }, function() {
            return r.find({
                entity_id: e,
                type_id: c.product
            }, {
                verbosity: t,
                limit: i,
                skip: o,
                sort: {
                    date: -1
                }
            })
        })
    }
    function a(e, n) {
        var i = t.getTopProduct(e).id || e;
        return s(n ? t.getConfigurableFamilyIds(i) : i, 3, 0, 0)
    }
    var r = e.createFactory("review", {
        valid: 1e3
    })
      , c = {
        product: 1,
        merchant: 4
    };
    return r.loadAll = i,
    r.loadAllMerchant = o,
    r.loadByProduct = s,
    r.getCollectionByParent = a,
    r
}
]),
window.tcoStore.factory("search", ["core", "extended$q", "product", "attribute", "website", "stock", "http", "localConfig", "category", "$location", "page", "post", function(e, t, n, i, o, s, a, r, c, l, d, u) {
    var p = e.createFactory("search")
      , m = null;
    p.productVerbosity = 2,
    p.postsVerbosity = 1,
    p.pagesVerbosity = 1;
    var f = function(e, t) {
        if (!_.isObject(e) && e.url && (e = e.url),
        !_.isString(e))
            return e;
        path = e;
        try {
            e = e.replace(/^\/search(\/)?/, "").replace(/\+/g, " ").replace(/^[\/\s]+/, "").replace(/[\/\s]+$/, ""),
            e = decodeURIComponent(e)
        } catch (n) {}
        return t && (e = encodeURIComponent(e)),
        "/" + e
    };
    return p.cleanupSearchUrl = f,
    p.nativeSet = p.set,
    p.set = function(e) {
        return p.nativeSet(f(e))
    }
    ,
    p.nativeGet = p.get,
    p.get = function(e) {
        return p.nativeGet(f(e))
    }
    ,
    p.nativeLoad = p.load,
    p.load = function(e, l) {
        e = f(e, !0);
        var g = p.set(e)
          , v = t.defer();
        g.localPromise = v.promise;
        var h = p.nativeLoad(e, l)
          , b = [];
        return h.success(function() {
            var e = _.pluck(g.data.products, "id");
            o.manageStock && b.push(s.loadCollection(e)),
            b.push(n.loadCollection(e, {
                verbosity: p.productVerbosity
            })),
            b.push(i.loadStaticCollection());
            try {
                var a = _.pluck(g.data.posts, "id");
                a.length && p.postsVerbosity && b.push(u.loadCollection(a, {
                    verbosity: p.postsVerbosity
                }))
            } catch (r) {}
            try {
                var l = _.pluck(g.data.pages, "id");
                l.length && p.pagesVerbosity && b.push(d.loadCollection(l, {
                    verbosity: p.pagesVerbosity
                }))
            } catch (r) {}
            try {
                _.map(g.data.terms, function(e) {
                    e.url = "/search/" + encodeURIComponent(e.phrase)
                })
            } catch (r) {}
            g.data.categories && (g.data.categories = _.filter(g.data.categories, function(e) {
                var t = c.get(e.id);
                return t && t.data && t.data.id ? (e.modelData = t.data,
                !0) : !1
            })),
            t.all(b).then(function() {
                v.resolve({
                    data: {
                        search: g
                    }
                })
            }, function(e) {
                v.reject(e)
            })
        }),
        h.error(function(e) {
            v.reject(e)
        }),
        r.doNotSaveSearch || m && m == e || e && e.length > 2 && (a.get("savesearch" + e),
        m = e),
        v.promise.cancel = function() {
            v.reject();
            try {
                h.cancel(),
                _.each(b, function(e) {
                    e.cancel()
                })
            } catch (e) {}
        }
        ,
        g.localPromise
    }
    ,
    p.redirect = function(e, t) {
        try {
            var n = p.get(e)
              , i = _.first(n.data.categories);
            if (!i)
                return !1;
            var o = _.isUndefined(n.data.products) ? null : _.first(n.data.products);
            if (!o || i.score > .4 || o.score < i.score)
                return (t || !_.isUndefined(r.redirectSearchForCategory) && r.redirectSearchForCategory) && 1 != i.score && l.path(i.modelData.url),
                !0
        } catch (s) {}
        return !1
    }
    ,
    p.getModel().className = "search",
    p
}
]),
angular.module("tcoStore").factory("stock", ["core", "website", function(e, t) {
    function n(e) {
        return t.manageStock ? _.filter(e, function(e) {
            var t = c.get(_.isObject(e) ? e.id : parseInt(e, 10));
            try {
                if ((_.isUndefined(t.data.isOut) || t.data.isOut) && (_.isUndefined(t.data.not_manage) || !t.data.not_manage))
                    return !1
            } catch (n) {
                return !1
            }
            return !0
        }) : e
    }
    function i(e, t) {
        return _.filter(e, function(e) {
            return c.isSelable(e, t)
        })
    }
    function o(e, n) {
        if (!t.manageStock)
            return !1;
        var i = c.get(e);
        return _.isUndefined(i) || _.isUndefined(i.data) ? !1 : i.data.isOut || !i.data.backorders || c.isInStock(e, n) ? !1 : (_.isUndefined(n) && (n = 1),
        n > i.data.backorders_qty ? !1 : !0)
    }
    function s(e, t) {
        if (!e)
            return !1;
        var i = [];
        try {
            var s = e.options.configurable.attrMap;
            i = _.unique(_.flatten(_.map(_.values(s), _.values)))
        } catch (a) {
            i = [e.id]
        }
        return i = n(i),
        i.length && !_.find(i, function(e) {
            return !o(e, t)
        })
    }
    function a(e, t) {
        try {
            var n = c.get(e).data
              , i = o(e, t)
              , s = r(e, t);
            return {
                outOfStock: !i && !s,
                inStock: s,
                onlyBackorder: i,
                maxQty: n.backorders ? n.backorders_qty : n.qty
            }
        } catch (a) {
            return null
        }
    }
    function r(e, n) {
        if (!t.manageStock)
            return !0;
        var i = c.get(e);
        return _.isUndefined(i) || _.isUndefined(i.data) ? !1 : (_.defaults(i.data, l.data),
        i.data.not_manage ? !0 : i.data.isOut ? !1 : (_.isUndefined(n) && (n = 1),
        !n || n <= i.data.qty ? !0 : !1))
    }
    var c = e.createFactory("stock", {
        valid: .03
    });
    c.defaults = {
        qty: !1,
        isOut: !1,
        backorders: !1,
        backorders_qty: 0
    },
    c.filterOutOfStock = n;
    var l = {
        data: {
            isOut: !0,
            qty: 0,
            backorders: !1,
            backorders_qty: 0,
            not_manage: 0
        }
    };
    return c.provideWhenReady = function(e, n) {
        t.manageStock && e.$watch(n, function(t) {
            var n = c.set(parseInt(t, 10));
            _.defaults(n.data, l.data),
            e.stockModel = n
        })
    }
    ,
    c.isSelable = function(e, t) {
        return c.isInStock(e, t) || c.onlyBackorder(e, t)
    }
    ,
    c.isInStock = r,
    c.onlyBackorder = o,
    c.onlyBackorder2 = s,
    c.getStockInfo = a,
    c.filterSalable = i,
    c
}
]),
window.tcoStore.factory("wishlist", ["core", "customer", "extended$q", "product", "website", "stock", "http", function(e, t, n, i, o, s, a) {
    var r = e.createFactory("wishlist");
    return r.productVerbosity = 2,
    r.nativeLoad = r.load,
    r.load = function(e, a) {
        var c = n.defer();
        if (e) {
            var l = r.set(e)
              , d = function(e) {
                c.reject(e)
            }
              , u = r.nativeLoad(e, a);
            u.success(function() {
                var e = _.pluck(l.data.items, "product")
                  , t = [];
                t.push(i.loadCollection(e, {
                    verbosity: r.productVerbosity
                })),
                o.manageStock && t.push(s.loadCollection(e));
                var a = n.all(t);
                a.then(function() {
                    c.resolve({
                        wishlist: l
                    })
                }, d);
                try {
                    l.data.qty = l.data.items.length
                } catch (u) {
                    l.data.qty = 0
                }
            }),
            u.error(d)
        } else {
            var l = r.set("/");
            l.data = t.wishlist.data,
            c.resolve({
                wishlist: l
            })
        }
        return c.promise
    }
    ,
    r.voteItem = function(t) {
        var n = a.post("custom/shortlist/vote", t);
        return n.success(e.processSuccessResult),
        n
    }
    ,
    r.commentItem = function(t) {
        var n = a.post("custom/shortlist/comment", t);
        return n.success(e.processSuccessResult),
        n
    }
    ,
    r.share = function(t) {
        var n = a.post("wishlist/share", t);
        return n.success(e.processSuccessResult),
        n
    }
    ,
    r
}
]),
window.tcoStore.factory("formHelper", ["$timeout", "tools", function(e, t) {
    var n = angular.element(document).injector().get("$rootScope")
      , i = {};
    return i.init = function(e, t, n) {
        e.formHelper = {
            dataVar: t,
            resultVar: n
        }
    }
    ,
    i.submit = function(o, s, a, r, c) {
        if (s.submitted = !0,
        !s.busy) {
            if (o[o.formHelper.resultVar] = "",
            _.isUndefined(r) && (r = {}),
            _.defaults(r, {
                prependix: "",
                success: null,
                error: null,
                modal: !1,
                scrollToError: !0,
                broadcast: !1,
                close_delay: 0
            }),
            s.$valid) {
                if (s.busy = !0,
                !_.isUndefined(r.before) && r.before && r.before(),
                !_.isUndefined(c) && c) {
                    var l, d, u = [];
                    for (l in c.files)
                        d = c.files[l],
                        u.push({
                            id: d.uniqueIdentifier,
                            type: d.file.type
                        });
                    o[o.formHelper.dataVar].files = u
                }
                var p = a(o[o.formHelper.dataVar], s);
                return p ? p.success(function(t) {
                    _.isObject(t) ? t.error ? (o[o.formHelper.resultVar] = t.error,
                    r.error && r.error(t.error, t)) : (o[o.formHelper.resultVar] = r.prependix + "SUCCESS",
                    s.submitted = !1,
                    r.success && r.success(t),
                    r.modal && i.ok(o, r.modal),
                    r.broadcast && n.$broadcast(r.broadcast, t),
                    r.close_delay && e(function() {
                        _.isUndefined(o.ok) ? o[o.formHelper.resultVar] = "" : o.ok()
                    }, r.close_delay)) : (o[o.formHelper.resultVar] = "ERROR",
                    r.error && r.error("ERROR", t)),
                    s.busy = !1
                }).error(function(e) {
                    try {
                        if (!_.isString(e.error))
                            throw 1;
                        o[o.formHelper.resultVar] = e.error
                    } catch (t) {
                        o[o.formHelper.resultVar] = "ERROR"
                    }
                    r.error && r.error(e),
                    s.busy = !1
                }) : s.busy = !1,
                p
            }
            return r.scrollToError && t.scrollToError(),
            null
        }
    }
    ,
    i.ok = function(e, t) {
        var n = e[e.formHelper.resultVar];
        n && n.match(/SUCCESS/) && t.close(),
        e[e.formHelper.resultVar] = null
    }
    ,
    i
}
]),
window.tcoStore.directive("currencySelector", ["customer", "website", function(e, t) {
    return {
        restrict: "E",
        template: '<ng-include src="template" ></ng-include>',
        scope: {
            template: "@"
        },
        controller: ["$scope", function(n) {
            function i() {
                n.customer_currency = e.getCurrency()
            }
            (_.isUndefined(n.template) || "" == n.template) && (n.template = "/views/widget/currency-selector.html"),
            n.content_currencies_list = t.currency.list,
            n.$on("customerCurrencyChange", i),
            i(),
            n.setCurrency = function(t) {
                e.setCurrency(t)
            }
            ,
            n.isCurrencySwitchVisible = !1,
            n.toggleCurrency = _.throttle(function(e) {
                n.isCurrencySwitchVisible = _.isUndefined(e) ? !n.isCurrencySwitchVisible : !!e
            }, 200)
        }
        ]
    }
}
]),
window.tcoStore.directive("filterCategory", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ></ng-include>',
        scope: {
            categoryId: "=",
            templateFamily: "@",
            type: "@",
            custom: "=",
            filterData: "=?"
        },
        replace: !0,
        controller: ["$rootScope", "$scope", "$filter", "transport", "category", "$location", function(e, t, n, i, o, s) {
            if (!_.isUndefined(t.categoryId)) {
                var a = parseInt(t.categoryId, 10) || 0
                  , r = o.get(a);
                if (!_.isUndefined(r) && !_.isUndefined(r.data)) {
                    t.category = r.data,
                    t.template = "/views/widget/filter-category" + (t.templateFamily ? "-" + t.templateFamily : "") + ".html",
                    r.data.parent && (t.parent = o.get(r.data.parent));
                    var c;
                    switch (t.type) {
                    case "siblings":
                        c = o.getSiblings(a);
                        break;
                    case "children":
                        c = o.getChildren(a),
                        c.length || (c = o.getSiblings(a));
                        break;
                    case "children-only":
                        c = o.getChildren(a);
                        break;
                    default:
                        c = !_.isUndefined(r) && r.data.parent ? o.getSiblings(a) : o.getChildren(a)
                    }
                    var l = n("orderBy")(c, "position")
                      , d = _.map(l, function(e) {
                        return {
                            url: e.url,
                            name: e.name,
                            active: e.id == a,
                            category: e
                        }
                    });
                    t.categories = d,
                    t.$watch(function() {
                        t.hash = s.hash()
                    }),
                    t.toggle = _.throttle(function(n, i) {
                        t.filterData.is_open = void 0 == n ? !t.filterData.is_open : !!n,
                        t.filterData.is_open && !i && e.$broadcast("hideAllFilters", {
                            requestFrom: t.filterData
                        })
                    }, 100)
                }
            }
        }
        ]
    }
}),
window.tcoStore.directive("filterDropdown", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ></ng-include>',
        scope: {
            filterData: "=",
            modelsNamePrependix: "@",
            templateFamily: "@",
            custom: "="
        },
        replace: !0,
        controller: ["$rootScope", "$scope", "transport", function(e, t, n) {
            var i = _.isUndefined(t.modelsNamePrependix) ? "product-list" : t.modelsNamePrependix
              , o = i + "-filters";
            t.template = "/views/widget/filter-dropdown" + (t.templateFamily ? "-" + t.templateFamily : "") + ".html",
            t.clearSelection = function() {
                t.filtersModelSelection[t.filterData.code] = []
            }
            ,
            t.toggle = _.throttle(function(n, i) {
                t.hasVisibleOptions = t.filterData.is_open = void 0 == n ? !t.filterData.is_open : !!n,
                t.filterData.is_open && !i && e.$broadcast("hideAllFilters", {
                    requestFrom: t.filterData
                })
            }, 100),
            t.$on("hideAllFilters", function(e, n) {
                _.isUndefined(n.requestFrom) || n.requestFrom.id == t.filterData.id || t.toggle(!1)
            }),
            t.$on("clearAllFilters", t.clearSelection);
            var s = function() {
                t.filtersModel = n.getModel(o, {
                    selection: {}
                }),
                t.filtersModelSelection = t.filtersModel.selection,
                _.isUndefined(t.filtersModelSelection[t.filterData.code]) && t.clearSelection()
            };
            t.$watch(function() {
                return n.getModelInstance(o)
            }, s);
            var a = function() {
                var e, n = [];
                tco.pathVal(t, "filtersModel.meta.qty") && (n = _.compact(_.map(t.filterData.options, function(n) {
                    return e = t.filtersModel.meta.qty[t.filterData.code][n.value],
                    e.independent ? {
                        value: n.value,
                        label: n.label,
                        independentQty: e.independent,
                        dependentQty: e.dependent
                    } : void 0
                }))),
                t.options = n,
                t.hasOptions = n.length > 1,
                t.hasOptionsDependent = _.find(n, function(e) {
                    return e.dependentQty > 0
                }) ? !0 : !1
            };
            t.$watch("filtersModel.meta.revision", a, !0)
        }
        ]
    }
}),
window.tcoStore.directive("filterPrice", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template"></ng-include>',
        scope: {
            filterData: "=",
            modelsNamePrependix: "@",
            min: "@",
            max: "@",
            templateFamily: "@",
            gtmTrackChange: "<"
        },
        replace: !0,
        controller: ["$rootScope", "$scope", "transport", "gtm", function(e, t, n, i) {
            var o = _.isUndefined(t.modelsNamePrependix) ? "product-list" : t.modelsNamePrependix
              , s = o + "-filters";
            _.defaults(t, {
                modelsNamePrependix: "product-list"
            }),
            t.template = "/views/widget/filter-price" + (t.templateFamily ? "-" + t.templateFamily : "") + ".html",
            t.data = {};
            var a = function() {
                function e(e, n) {
                    var i = Math.floor(t.min)
                      , o = Math.ceil(t.max);
                    if (_.isNull(e) || _.isUndefined(e))
                        "min" === n ? t.modelSelection.min = i : "max" === n && (t.modelSelection.max = o);
                    else
                        switch (e) {
                        case e >= i && o >= e:
                            t.modelSelection[n] = e;
                            break;
                        case i > e:
                            t.modelSelection[n] = i;
                            break;
                        case e > o:
                            t.modelSelection[n] = o
                        }
                }
                if (tco.pathVal(t, "filtersModel.meta.min") && tco.pathVal(t, "filtersModel.meta.max")) {
                    var n = t.filtersModel.meta.min[t.filterData.code]
                      , i = t.filtersModel.meta.max[t.filterData.code];
                    _.isNumber(n) || (n = 0),
                    _.isNumber(i) || (i = 100),
                    0 > n && (n = 0),
                    0 > i && (i = 0),
                    _.isUndefined(t.min) && (t.min = n),
                    _.isUndefined(t.max) && (t.max = i),
                    t.$watch("data.min", function(n) {
                        t.modelSelection && e(n, "min")
                    }),
                    t.$watch("data.max", function(n) {
                        t.modelSelection && e(n, "max")
                    }),
                    t.clearSelection(!0);
                    var o = t.filtersModel.selection[t.filterData.code];
                    t.data.min = o ? o.min : null,
                    t.data.max = o ? o.max : null
                }
            };
            t.clearSelection = function(e) {
                if (t.data.min = null,
                t.data.max = null,
                !_.isUndefined(t.modelSelection)) {
                    var n = Math.floor(t.min)
                      , i = Math.ceil(t.max);
                    (!e || _.isUndefined(t.modelSelection.min) || t.modelSelection.min < n) && (t.modelSelection.min = n),
                    (!e || _.isUndefined(t.modelSelection.max) || t.modelSelection.max > i) && (t.modelSelection.max = i)
                }
            }
            ;
            var r = function() {
                t.filtersModel = n.getModel(s, {
                    selection: {},
                    altSelection: {}
                })
            };
            t.$watch(function() {
                return n.getModelInstance(s)
            }, r),
            t.$watch("filtersModel.altSelection." + t.filterData.code, function(e) {
                return _.isUndefined(e) ? void (t.filtersModel.altSelection[t.filterData.code] = {}) : (t.modelSelection = e,
                void ((_.isUndefined(e.min) || _.isNaN(e.min) || _.isUndefined(e.max) || _.isNaN(e.max)) && a()))
            }),
            _.each(["min", "max"], function(e) {
                t.$watch("filtersModel.selection." + t.filterData.code + "." + e, function(n) {
                    var i = t.filtersModel.altSelection
                      , o = t.filterData.code;
                    n && (_.isUndefined(i[o]) && (i[o] = {}),
                    i[o][e] = n)
                }, !0),
                t.$watch("filtersModel.altSelection." + t.filterData.code + "." + e, function(n) {
                    var o = t.filtersModel.selection
                      , s = t.filterData.code;
                    if (n && n != t[e]) {
                        if (_.isUndefined(o[s]) && (o[s] = {}),
                        o[s][e] = n,
                        t.gtmTrackChange) {
                            var a = t.gtmTrackChange;
                            t.gtmTrackChange === !0 && (a = ["filter", "Price", "Price"]),
                            i.sendInteractionEvent(a[0], a[1], a[2])
                        }
                    } else
                        tco.pathVal(o, s + "." + e) && delete o[s][e]
                }, !0)
            }),
            t.hideFilters = function() {
                e.$broadcast("hideAllFilters", {
                    requestFrom: t.filterData
                })
            }
            ,
            t.$watch("filtersModel.meta.min." + t.filterData.code, a, !0),
            t.$watch("filtersModel.meta.max." + t.filterData.code, a, !0),
            t.$on("clearAllFilters", function() {
                t.clearSelection()
            }),
            t.toggle = _.throttle(function(n, i) {
                t.hasVisibleOptions = (_.isUndefined(n) ? !t.hasVisibleOptions : n) ? !0 : !1,
                t.hasVisibleOptions && !i && e.$broadcast("hideAllFilters", {
                    requestFrom: t.filterData
                })
            }, 100),
            t.$on("hideAllFilters", function(e, n) {
                _.isUndefined(n.requestFrom) || n.requestFrom.id == t.filterData.id || t.toggle(!1)
            })
        }
        ]
    }
}),
window.tcoStore.directive("galleryLargeThumbnails", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ng-if="images.length > 1"></ng-include>',
        scope: {
            images: "=",
            slideSize: "="
        },
        transclude: !0,
        controller: ["$scope", function(e) {
            e.setMainImage = e.$parent.goTo,
            e.currentSlide = 0;
            var t = 0;
            _.defaults(e, {
                template: "/views/widget/gallery-large/thumbnails.html",
                images: [],
                slideSize: 5
            }),
            e.$watch("images", function(n) {
                var i, o = _.toArray(_.groupBy(_.values(n), function(t, n) {
                    return Math.floor(n / e.slideSize)
                })), s = [];
                for (i = 0; i < o.length; i++)
                    s.push({
                        images: o[i],
                        active: !1,
                        index: i
                    });
                e.slides = s,
                t = s.length,
                e.hasSlides = t > 1,
                e.goTo(e.currentSlide)
            }),
            e.goTo = function(n) {
                if (!(1 > t)) {
                    _.isUndefined(n) || n >= t ? n = 0 : 0 > n && (n = t - 1),
                    e.currentSlide = n;
                    for (var i = t - 1; i >= 0; i--)
                        e.main = e.slides[i];
                    e.isFirst = !n,
                    e.isLast = n === t - 1
                }
            }
            ,
            e.prev = function() {
                e.goTo(e.currentSlide - 1)
            }
            ,
            e.next = function() {
                e.goTo(e.currentSlide + 1)
            }
        }
        ]
    }
}),
window.tcoStore.directive("imagesByLabels", function() {
    return {
        restrict: "A",
        scope: {
            media: "=",
            labels: "="
        },
        transclude: !0,
        link: function(e, t, n, i, o) {
            o(e, function(e) {
                t.append(e)
            })
        },
        controller: ["$scope", "$filter", function(e, t) {
            _.defaults(e, {
                media: []
            }),
            e.$watch("media", function() {
                var n = t("mediaLabelFilter")(angular.copy(e.media), e.labels);
                e.images = n
            })
        }
        ]
    }
}),
window.tcoStore.directive("price", function() {
    var e = ["$scope", "$filter", function(e, t) {
        function n() {
            e.priceHtml = i(e.price, e.pricePrecission, void 0, void 0, e.priceCurrency)
        }
        var i = t("price");
        e.$watch("price", n),
        e.$on("customerCurrencyChange", n)
    }
    ];
    return {
        restrict: "EA",
        template: '<span ng-bind-html="priceHtml"></span>',
        scope: {
            price: "=",
            pricePrecission: "=",
            priceCurrency: "="
        },
        controller: e
    }
}),
function() {
    function e() {
        function e(e) {
            try {
                return !!e.data.options.bundle.length
            } catch (t) {
                return !1
            }
        }
        function t(t) {
            return e(t) ? t.data.options.bundle : null
        }
        function n(e, n) {
            var o = t(e);
            if (!o)
                return [];
            n || (n = {},
            i(n));
            var a = {};
            o.forEach(function(e) {
                function t(t) {
                    var n = _.findWhere(e.children, {
                        selection_id: s(t)
                    });
                    if (n) {
                        var i = n.id;
                        a[i] || (a[i] = 0),
                        a[i] += n.qty
                    }
                }
                var i = n[e.id];
                _.isArray(i) ? i.forEach(t) : t(i)
            });
            var r, c = [];
            for (r in a)
                c.push({
                    id: s(r),
                    qty: a[r]
                });
            return c
        }
        function i(e, n) {
            var i = t(e);
            i && i.forEach(function(e) {
                var t = n[e.id];
                t ? t = _.isArray(t) ? _.map(t, s) : s(t) : (void 0 === t || !t && e.required) && (t = e.defaultSelection),
                n[e.id] = t
            })
        }
        function o(e) {
            return _.compact(_.flatten(_.pluck(t(e), "children")))
        }
        function s(e) {
            return parseInt(e, 10)
        }
        return {
            isBundle: e,
            cleanup: i,
            getAllChildren: o,
            getBundleOptions: t,
            getSelectedProducts: n
        }
    }
    angular.module("tcoStore").service("bundleProduct", e)
}(),
function() {
    function e() {
        function e(e, i, o) {
            var s = e + angular.toJson(i);
            return !n[s] && o ? t(s, o.call(this, i)) : n[s]
        }
        function t(e, i) {
            return n[e] = i,
            _.isObject(i) && _.isFunction(i.then) && i.then(void 0, function() {
                t(e, void 0)
            }),
            i
        }
        var n = {};
        return {
            get: e,
            set: t
        }
    }
    window.tcoStore.service("cache", e)
}(),
function() {
    function e(e, t, i, o, s) {
        function a() {
            return Object.keys(n)
        }
        function r() {
            var e = {};
            return a().forEach(function(t) {
                e[t] = p(n[t])
            }),
            e
        }
        function c(e) {
            return e == n.core
        }
        function l() {
            return !!_.find(a(), function(e) {
                return !p(n[e])
            })
        }
        function d() {
            return p(n.core)
        }
        function u() {
            return p(n.performance)
        }
        function p(t) {
            var n = e[v(t)]
              , i = void 0 === n || !!n || c(t);
            return i ? 1 : 0
        }
        function m(t) {
            var n = e[v(t)];
            return void 0 !== n
        }
        function f() {
            for (var e in n)
                if (!m(e))
                    return !0;
            return !1
        }
        function g(t, n) {
            e[v(t)] = n ? 1 : 0,
            i.$broadcast("privacy.update"),
            h()
        }
        function v(e) {
            return "_prm_" + e
        }
        var h = _.debounce(function() {
            t.privacyPermissionsChecked = !0,
            l() && _.each(o.getAll(), function(e, t) {
                var i = _.find(s, function(e) {
                    if ("string" == typeof e.test) {
                        if (e.test != t)
                            return !1
                    } else if (!t.match(e.test))
                        return !1;
                    return !0
                })
                  , a = i ? i.area : n.personalisation;
                if (!p(a)) {
                    var r = window.location.host.split(".");
                    r.map(function(e, t) {
                        return r.slice(t).join(".")
                    }).forEach(function(e) {
                        o.remove(t, {
                            domain: e
                        }),
                        o.remove(t, {
                            domain: "." + e
                        })
                    }),
                    o.remove(t),
                    console.warn("Cookie " + t + " droped cause of privacy restrictions")
                }
            })
        }, 100);
        return t.privacyPermissionsChecked || (t.privacyPermissionsChecked = !0,
        h()),
        {
            getAreas: a,
            getSettings: r,
            isRequired: c,
            isAnyDisallowed: l,
            isCoreAllowed: d,
            isPersonalisationAllowed: u,
            isAllowed: p,
            isDefined: m,
            needConfirmation: f,
            setPermission: g
        }
    }
    function t() {
        function t(e, t) {
            o.push({
                test: t,
                area: e
            })
        }
        function i(e) {
            o.splice(_.findIndex(o, function(t) {
                t.test == e
            }), 1)
        }
        var o = [];
        this.registerCookie = t,
        this.unregisterCookie = i,
        t(n.core, /^frontend/i),
        t(n.core, /^phpsessid/i),
        this.$get = ["$localStorage", "$sessionStorage", "$rootScope", "$cookies", function(t, n, i, s) {
            return new e(t,n,i,s,o)
        }
        ]
    }
    var n = {
        core: "core",
        personalisation: "personalisation"
    };
    window.tcoStore.provider("privacyService", t)
}(),
function() {
    function e(e, t, n, i, o, s, a, r, c, l, d) {
        function u(e) {
            I.push(angular.toJson(e)),
            O()
        }
        function p() {
            I = [],
            _.invoke(U, "cancel"),
            U = [],
            O()
        }
        function m() {
            var e = [];
            I.forEach(function(t) {
                _.findWhere(M, {
                    json: t
                }) || M.push({
                    json: t,
                    script: f(t)
                }),
                e.push(t)
            }),
            M = _.filter(M, function(t) {
                if (-1 == e.indexOf(t.json)) {
                    try {
                        document.head.removeChild(t.script)
                    } catch (n) {}
                    return !1
                }
                return !0
            })
        }
        function f(e) {
            var t = document.createElement("script");
            return t.setAttribute("type", "application/ld+json"),
            t.innerHTML = e,
            document.head.appendChild(t),
            t
        }
        function g() {
            u({
                "@context": "http://schema.org",
                "@type": "WebSite",
                url: t.baseUrl,
                name: t.name,
                potentialAction: {
                    "@type": "SearchAction",
                    target: t.baseUrl + "/search/{search_term_string}",
                    "query-input": "required name=search_term_string"
                }
            })
        }
        function v() {
            var e = {
                "@context": "http://schema.org",
                "@type": "Organization",
                name: t.name,
                url: t.baseUrl
            };
            if (t.social_services && (e.sameAs = _.pluck(t.social_services, "link")),
            t.logo && (e.logo = t.baseUrl + t.logo),
            t.phone) {
                var n = _.isArray(t.phone) ? t.phone : {
                    no: t.phone,
                    type: "customer service"
                };
                e.contactPoint = _.compact(_.map(n, function(e) {
                    return e.no ? {
                        "@type": "ContactPoint",
                        telephone: e.no ? _.isString(e.no) ? e.no.replace(/\s/g, "") : e.no : null,
                        contactType: e.type
                    } : void 0
                }))
            }
            S(e, t.reviews),
            h(e, function() {
                return r.loadAllMerchant(3, 30)
            }, "lastMerchantReviews")
        }
        function h(e, t, n) {
            var i = c.get(n);
            if (i)
                e.review = i,
                u(e);
            else {
                var o = t();
                o.success(function(t) {
                    var i = _.compact(_.pluck(t, "data"));
                    if (e.review = c.set(n, b(i)),
                    e.review && e.review.length) {
                        if (!e.aggregateRating) {
                            var o = _.compact(_.pluck(i, "rating"));
                            e.aggregateRating = {
                                ratingValue: Math.round(_.reduce(o, function(e, t) {
                                    return e + t
                                }, 0) / o.length || 1) / 20,
                                bestRating: 5,
                                worstRating: 1
                            }
                        }
                        e.aggregateRating.reviewCount = e.review.length
                    }
                    u(e)
                }),
                o.error(function(t) {
                    u(e)
                })
            }
        }
        function b(e) {
            return _.map(e, function(e) {
                return {
                    "@type": "Review",
                    author: e.author,
                    datePublished: e.date,
                    description: e.content,
                    reviewRating: {
                        "@type": "Rating",
                        bestRating: 5,
                        ratingValue: e.rating / 20,
                        worstRating: 1
                    }
                }
            })
        }
        function w(e) {
            var t;
            try {
                t = _.compact(_.map(e, function(e, t) {
                    return t ? {
                        "@type": "ListItem",
                        position: t,
                        item: {
                            "@id": e.url,
                            name: e.label
                        }
                    } : void 0
                }))
            } catch (n) {}
            t && u({
                "@context": "http://schema.org",
                "@type": "BreadcrumbList",
                itemListElement: t
            })
        }
        function y(e) {
            var t;
            try {
                t = e.meta.title
            } catch (i) {}
            var o;
            try {
                o = e.meta.description
            } catch (i) {}
            u({
                "@context": "http://schema.org/",
                "@type": "NewsArticle",
                headline: e.name,
                alternativeHeadline: t,
                image: n.imagePathToUrl(e.image),
                datePublished: e.date,
                description: o,
                articleBody: e.body
            })
        }
        function k(e) {
            var i = d.getTopProduct(e.id)
              , s = i ? i.data || e : e
              , a = {
                "@context": "http://schema.org/",
                "@type": "Product",
                name: e.name,
                sku: e.sku
            }
              , c = e.meta;
            _.isObject(c) && (a.image = n.imagePathToUrl(c.image),
            a.description = c.description);
            var l = o.getOptionLabel(e.manufacturer, "manufacturer") || o.getOptionLabel(e.brand, "brand");
            l && (a.brand = {
                "@type": "Thing",
                name: l
            }),
            a.offers = {
                "@type": "Offer",
                priceCurrency: t.currency.base,
                price: e.price,
                itemCondition: "https://schema.org/NewCondition",
                availability: "https://schema.org/" + x(e.id)
            },
            S(a, s.reviews),
            h(a, function() {
                var e = d.getConfigurableFamilyIds(s.id);
                return r.loadByProduct(e, 3, 30)
            }, "lastProductReviews" + e.id)
        }
        function S(e, t) {
            t && t.count && (e.aggregateRating = {
                "@type": "AggregateRating",
                ratingValue: Math.round(t.rating) / 20,
                bestRating: 5,
                worstRating: 1,
                reviewCount: t.count
            })
        }
        function $() {
            try {
                var e = i.model ? i.model.id : void 0;
                if (D && e && D == e)
                    return;
                if (D = e,
                p(),
                g(),
                i.model)
                    switch (i.model.className) {
                    case "product":
                        k(i.modelData);
                        break;
                    case "post":
                        y(i.modelData);
                        break;
                    case "page":
                        -1 != ["/", "", "/home", "/home/"].indexOf(i.modelData.url) && v()
                    }
                w(i.breadcrumbs)
            } catch (t) {
                console.error(t)
            }
        }
        function x(e, t) {
            _.isUndefined(t) && (t = !1);
            var n = d.isConfigurable(e);
            return l.isInStock(e, n ? !1 : 1) ? t ? "instock" : "InStock" : l.onlyBackorder(e, 1) ? t ? "instock" : "PreOrder" : t ? "oos" : "OutOfStock"
        }
        function C(e) {
            e && (_.isArray(e) || (e = [e]),
            _.each(e, function(e) {
                u({
                    "@context": "http://schema.org",
                    "@type": "Store",
                    name: e.name,
                    description: e.desc,
                    openingHours: e.openHours,
                    telephone: e.phone,
                    address: {
                        "@type": "PostalAddress",
                        streetAddress: e.street,
                        addressLocality: e.city,
                        addressRegion: e.region,
                        addressCountry: e.country
                    }
                })
            }))
        }
        var D, M = [], I = [], U = [], O = _.debounce(m, 200), T = {
            clear: p,
            add: u,
            addWebsiteData: g,
            addOrganizationData: v,
            addBreadcrumbsData: w,
            updateStructuralData: $,
            getProductAvailability: x,
            addStoresData: C
        };
        return T
    }
    window.tcoStore.service("structuralData", e),
    e.$inject = ["http", "website", "tools", "router", "attribute", "browser", "config", "review", "cache", "stock", "product"]
}(),
window.tcoStore.controller("WishlistShareController", ["$scope", "wishlist", "ngDialog", "formHelper", function(e, t, n, i) {
    e.code = "",
    e.data = {},
    e.notice = {
        ERROR: "Unexpected error",
        MISSING: "Please fill all required fields",
        SUCCESS: "You have successfully shared your wishlist",
        EMPTY: "You have no items in your wishlist",
        AUTH: "You need to be logged in to share your wishlist"
    },
    e.ok = function(t) {
        ("undefined" != typeof t && t || "SUCCESS" == e.code) && n.close(),
        e.code = null,
        e.classname = null
    }
    ,
    e.setForm = function(t) {
        e.form = t
    }
    ,
    e.submit = function(n, o) {
        return t.items.length < 1 ? void (e.code = "EMPTY") : (_.isUndefined(n) && (n = e.form),
        i.init(e, "data", "code"),
        void i.submit(e, n, t.share, {
            close_delay: o,
            success: function() {
                e.data = {}
            }
        }))
    }
}
]),
window.tcoStore.controller("AccountCardDetailsController", ["$scope", "customer", function(e, t) {
    function n() {
        e.cards = i.data
    }
    var i = t.tokens;
    e.actions = {},
    e.setDefault = function(t) {
        var o;
        _.isUndefined(e.actions[t.id]) && (e.actions[t.id] = {
            busy: !1,
            result: !1
        }),
        o = e.actions[t.id],
        o.busy || i.setDefault({
            id: t.id
        }, o, o).then(n)
    }
    ,
    e.remove = function(t) {
        var o;
        _.isUndefined(e.actions[t.id]) && (e.actions[t.id] = {
            busy: !1,
            result: !1
        }),
        o = e.actions[t.id],
        o.busy || i.remove({
            id: t.id
        }, o, o).then(n)
    }
    ,
    n()
}
]),
window.tcoStore.controller("AccountEditController", ["$scope", "customer", "$rootScope", "formHelper", function(e, t, n, i) {
    tcologTime("AccountEditController::start"),
    e.code = "",
    e.customerModel = t,
    e.data = t.data,
    e.reset = function() {
        e.code = ""
    }
    ;
    var o = null;
    e.setFlow = function(e) {
        o = e
    }
    ,
    e.submit = function(n, s) {
        return i.init(e, "data", "code"),
        i.submit(e, n, t.save, {
            close_delay: s
        }, o)
    }
}
]),
window.tcoStore.controller("AddressBookController", ["$scope", "customer", function(e, t) {
    e.addressData = t.address,
    e.$watch("addressData", function(n) {
        e.differentShipping = !t.address.shipping || t.address.billing != t.address.shipping,
        e.additionalAddresses = _.filter(t.address.list, function(e) {
            return n.billing && e.id == n.billing.id ? !1 : n.shipping && e.id == n.shipping.id ? !1 : !0
        })
    }, !0),
    e.action = {
        code: null,
        busy: !1
    },
    e.remove = function(n) {
        return t.removeAddress({
            id: n
        }, e.action)
    }
    ,
    e.setAsDefaultBilling = function(n) {
        return t.setAsDefaultBilling(n, e.action)
    }
    ,
    e.setAsDefaultShipping = function(n) {
        return t.setAsDefaultShipping(n, e.action)
    }
}
]),
window.tcoStore.controller("AddressController", ["$scope", "customer", "$rootScope", function(e, t, n) {
    var n = angular.element(document).injector().get("$rootScope")
      , i = [];
    e.$on("$destroy", function() {
        var e;
        for (e = 0; e < i.length; e++)
            i[e]()
    }),
    e.code = "",
    e.id = 0,
    e.notice = {
        ERROR: "Unexpected error",
        SUCCESS: "Data saved",
        LOGGEDOUT: "You are not logged in"
    },
    e.reset = function() {
        if (e.code = "",
        e.isMessageVisible = !1,
        _.isUndefined(e.address))
            e.data = {};
        else {
            var t = e.address;
            e.data = {
                id: t.id,
                firstname: t.firstname,
                lastname: t.lastname,
                street_1: t.street_1,
                street_2: t.street_2,
                city: t.city,
                postcode: t.postcode,
                telephone: t.telephone,
                telephone2: t.telephone2,
                country_id: t.country_id,
                region: t.region,
                region_id: t.region_id,
                is_billing: t.is_billing,
                is_shipping: t.is_shipping
            }
        }
    }
    ,
    e.reset(),
    e.submit = function(i) {
        i.$valid && t.getAccount().saveAddress(e.data).success(function(t) {
            t.error ? e.code = t.error : (e.code = "SUCCESS",
            n.$broadcast("customerDataSaved"))
        }).error(function() {
            e.code = "ERROR"
        })
    }
    ,
    i.push(n.$on("customerDataChanged", e.reset)),
    i.push(n.$on("formDataReset", e.reset))
}
]),
window.tcoStore.controller("AddressEditController", ["$scope", "customer", "formHelper", "$route", "$location", function(e, t, n, i, o) {
    tcologTime("AddressEditController::start");
    var s = i.current.params.id;
    if ("billing" == s || "shipping" == s)
        e.address = t.address[s];
    else if (s) {
        if (e.address = _.findWhere(t.address.list, {
            id: parseInt(s)
        }),
        _.isUndefined(e.address))
            return void o.path("/account")
    } else
        e.address = {};
    e.close = function() {
        o.path("/account/address-book")
    }
}
]),
window.tcoStore.controller("OrderListController", ["$scope", "customer", "$location", "tcoStoreRoutes", "stock", "product", function(e, t, n, i, o, s) {
    if (!t.data.logged) {
        var a = n.path();
        return t.doAfterLogin(function() {
            n.path(a)
        })
    }
    e.ordersModel = t.orders,
    e.ordersModel.busy || e.ordersModel.loaded || t.orders.load(),
    e.$watch("ordersModel.data", function(t) {
        e.orders = t
    }),
    e.action = {
        busy: !1
    },
    e.reorder = function(a, r, c, l) {
        var d = {};
        if (d.products = _.compact(_.map(a.items, function(e) {
            if (l) {
                var t = s.get(e.product_id);
                if (!o.isInStock(e.product_id, e.qty_ordered) || !t.data.id)
                    return
            }
            var n = {
                id: e.product_id,
                qty: e.qty_ordered,
                options: {}
            };
            return _.isUndefined(e.options) || _.each(e.options, function(e) {
                n.options[e.option_id] = e.option_value
            }),
            n
        })),
        d.products.length) {
            r && !_.isUndefined(r) && _.isObject(r) && _.extend(d, r);
            var u = t.basket.add(d, e.action, e.action);
            return u.success(function(e) {
                if (c && _.isObject(e) && (_.isUndefined(e.error) || !e.error)) {
                    var t = i.getStandardRoutePath(c);
                    n.url(t)
                }
            }),
            u
        }
    }
}
]),
window.tcoStore.controller("OrderViewController", ["$scope", "customer", "$route", "$location", function(e, t, n, i) {
    return e.order = t.orders.getOrderByNumber(n.current.params.id),
    _.isUndefined(e.order) ? void i.path("/account/my-orders") : void 0
}
]),
window.tcoStore.directive("buyButton", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template"></ng-include>',
        scope: {
            productId: "=",
            basketItemId: "=",
            template: "@",
            globalFlag: "=global",
            optionsModel: "=?",
            custom: "<",
            addEvent: "@",
            noStockCheck: "<"
        },
        replace: !0,
        controller: ["$scope", "customer", "stock", "transport", "website", "product", "bundleProduct", function(e, t, n, i, o, s, a) {
            function r(t) {
                return _.flatten(_.map(t, function(t) {
                    return d = !1,
                    a.isBundle(t) ? (d = !0,
                    a.getSelectedProducts(t, e.data.bundle)) : {
                        id: t.id,
                        qty: 1
                    }
                }))
            }
            _.defaults(e, {
                template: "/views/catalog/product/view/buybutton.html"
            }),
            e.website = o,
            e.isOutOfStock = !1;
            var c = _.isUndefined(e.globalFlag) || parseInt(e.globalFlag, 10)
              , l = function(t) {
                var n = {
                    qty: 1,
                    options: {}
                };
                e.data = c ? i.getModel("product-options", n) : _.isUndefined(e.optionsModel) ? n : e.optionsModel
            }
              , d = !1;
            e.$watch(function() {
                return !_.isUndefined(e.data) && c ? (e.data.bundle = i.getModel("product-options").bundle,
                e.data.bundle) : void 0
            }, f),
            e.$watch("globalFlag", l),
            e.$watch("optionsModel", l),
            e.anyItemAdded = !1,
            e.action = {
                busy: !1,
                result: null
            };
            var u = []
              , p = []
              , m = []
              , f = _.debounce(function(t) {
                var t = e.productId
                  , n = null;
                if (tco.empty(t))
                    u = [];
                else if (_.isArray(t))
                    u = t;
                else if (_.isObject(t))
                    u = [t.id];
                else {
                    try {
                        n = s.get(t)
                    } catch (i) {}
                    u = [t]
                }
                e.productModel = n,
                m = s.getModels(u),
                e.hasUnselectedOptions = _.max(_.map(m, function(e) {
                    try {
                        if (e.data.options.configurable.children.length)
                            return !0
                    } catch (t) {}
                    return !1
                })),
                p = r(m)
            }, 50);
            e.$watch("productId", function() {
                e.action.result = null,
                f()
            }),
            e.$watch("data", f, !0);
            var g = i.getModel("_notifications", {
                queue: []
            }, {
                storage: "static"
            });
            if (e.buy = function() {
                if (e.hasUnselectedOptions)
                    return void (e.action.result = "OPTIONS");
                var n;
                if (!e.noStockCheck && e.isOutOfStock)
                    return void (e.action.result = "STOCK");
                e.action.result = null;
                var i = [];
                for (n = 0; n < u.length; n++)
                    i.push({
                        id: u[n],
                        qty: e.data.qty,
                        options: e.data.options,
                        bundle_option: e.data.bundle,
                        item: _.isUndefined(e.basketItemId) ? 0 : e.basketItemId
                    });
                var o = {
                    products: i
                };
                return !_.isUndefined(e.custom) && _.isObject(e.custom) && _.extend(o, e.custom),
                t.basket.add(o, e.action, e.action, e.addEvent).success(function(t) {
                    !_.isObject(t) || !_.isUndefined(t.error) && t.error || (e.anyItemAdded = !0,
                    g.queue.push({
                        type: "addToCart",
                        request: i,
                        response: t
                    }))
                })
            }
            ,
            e.oneMore = function() {
                e.data.qty += 1
            }
            ,
            e.oneLess = function() {
                e.data.qty > 1 && (e.data.qty -= 1)
            }
            ,
            e.isInStock = function() {
                if (e.noStockCheck)
                    return !0;
                try {
                    var i = t.basket.getItemsForStockCheck();
                    for (var o in p) {
                        var s = p[o]
                          , a = e.data.qty * s.qty
                          , r = _.findWhere(i, {
                            id: s.id
                        });
                        if (r && (a += r.qty),
                        !n.isInStock(s.id, a))
                            return !1
                    }
                } catch (c) {}
                return !0
            }
            ,
            e.onlyBackorder = function() {
                var i = !1;
                try {
                    var o = t.basket.getItemsForStockCheck();
                    for (var s in p) {
                        var a = p[s]
                          , r = e.data.qty * a.qty
                          , c = _.findWhere(o, {
                            id: a.id
                        });
                        if (c && (r += c.qty),
                        n.onlyBackorder(a.id, r))
                            i = !0;
                        else if (!n.isInStock(a.id, r))
                            return !1
                    }
                } catch (l) {}
                return i
            }
            ,
            o.manageStock) {
                var v = 0
                  , h = window.setInterval(function() {
                    if (v > 4 || !n.hasModelsData(_.pluck(p, "id")))
                        return void v++;
                    if (v = 0,
                    e.hasUnselectedOptions)
                        return void (e.isOutOfStock = !1);
                    if (d && m.length > n.filterOutOfStock(m).length)
                        return void (e.isOutOfStock = !0);
                    e.isOutOfStock = !(e.isInStock() || e.onlyBackorder());
                    var t, i = [], o = [];
                    for (t = 0; t < p.length; t++) {
                        var s = p[t]
                          , a = Math.floor
                          , r = n.get(s.id).data;
                        i.push(a((r.backorders ? r.backorders_qty : r.qty) / s.qty)),
                        o.push(a(r.qty / s.qty))
                    }
                    e.maxQty = _.max([_.min(i), 0]),
                    e.maxInQty = _.max([_.min(o), 0])
                }, 500);
                e.$on("$destroy", function() {
                    window.clearInterval(h)
                })
            } else
                e.maxQty = null,
                e.maxInQty = null
        }
        ]
    }
}),
window.tcoStore.directive("postListItem", ["post", function(e) {
    return {
        restrict: "E",
        template: "<ng-include src=\"::template||((post.templatesDir||'/views/blog/post/')+'list/item.html')\" ></ng-include>",
        scope: {
            postId: "=",
            custom: "=?",
            template: "@"
        },
        replace: !0,
        controller: ["$scope", function(t) {
            t.postId = parseInt(t.postId, 10);
            var n;
            n = e.get(t.postId),
            t.post = _.isUndefined(n) ? {} : n.data,
            n = e.getPostCategory(t.postId),
            _.isUndefined(n) || (t.category = n.data)
        }
        ]
    }
}
]),
window.tcoStore.directive("productBundleOptions", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ng-if="hasOptions"></ng-include>',
        scope: {
            productId: "=",
            sourceData: "=data"
        },
        controller: ["$scope", "product", "website", "transport", "stock", "bundleProduct", function(e, t, n, i, o, s) {
            tcologTime("productBundleOptions::controller::start", !1, 2),
            _.defaults(e, {
                template: "/views/catalog/product/view/options-bundle.html",
                hasOptions: !1
            }),
            e.$watch("sourceData", function() {
                e.data = _.isUndefined(e.sourceData) ? {} : e.sourceData
            }),
            _.isUndefined(e.productId) || (e.productModel = t.get(parseInt(e.productId, 10)));
            var a = _.debounce(function() {
                var t = e.productModel;
                s.isBundle(t) ? (s.cleanup(t, e.data),
                n.manageStock && _.each(s.getAllChildren(t), function(e) {
                    e.isSelable = o.isSelable(e.id, e.qty)
                }),
                e.attributes = s.getBundleOptions(t),
                e.hasOptions = 1) : (e.attributes = !1,
                e.hasOptions = 0)
            }, 100);
            e.$watch("productModel.data", a),
            e.$watch("data", a)
        }
        ]
    }
}),
window.tcoStore.directive("productConfigurableOptions", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ng-if="hasOptions"></ng-include>',
        scope: {
            productId: "=",
            modelData: "=",
            template: "=?",
            sourceData: "=data",
            custom: "=?"
        },
        controller: ["$scope", "product", "attribute", "stock", "localConfig", function(e, t, n, i, o) {
            function s() {
                try {
                    return _.compact(_.map(_.pluck(a.data.options.configurable.attributes, "attribute"), function(e) {
                        var t = n.get(e);
                        return t.data.code
                    }))
                } catch (e) {
                    return []
                }
            }
            tcologTime("productOptions::controller::start", !1, 2),
            _.defaults(e, {
                template: "/views/catalog/product/view/options-configurable.html",
                hasOptions: !1
            }),
            e.modelData || (e.modelData = {
                productId: e.productId
            });
            var a, r, c, l, d = {}, u = {}, p = [];
            if (!_.isUndefined(e.productId)) {
                var m = t.get(parseInt(e.productId, 10));
                if (e.productModel = a = t.getTopProduct(m.id),
                m && m.data && _.each(s(), function(e) {
                    var t = m.data[e];
                    _.isNumber(t) && (u[e] = t)
                }),
                l = t.get(e.modelData.productId),
                o.allowEmptyConfigurable) {
                    try {
                        l.data.options.configurable.children.length && (l = null)
                    } catch (f) {}
                    l && _.each(s(), function(t) {
                        e.sourceData[t] || (e.sourceData[t] = l.data[t])
                    })
                }
                r = t.getChildProduct(m.id)
            }
            var g = function() {
                var o, s, l, m, f, g, h, b, w = !1, y = {}, k = {};
                if (p = [],
                !(_.isUndefined(a) || (_.isUndefined(a.data.parent) || (e.productModel = a = t.get(a.data.parent)),
                _.isUndefined(a) || _.isUndefined(a.data) || _.isUndefined(a.data.options)))) {
                    var S = a.data.options;
                    if (S.configurable) {
                        tcologTime("productOptions::controller::optionsUpdated", !1, 2),
                        b = S.configurable.children,
                        w = S.configurable.attributes,
                        c = _.pluck(t.getModels(b), "data"),
                        o = n.prepareFiltersModelMetaData(b, y, _.pluck(w, "attribute"));
                        for (m in o)
                            h = o[m],
                            g = y.meta.qty[h.code],
                            s = _.findWhere(w, {
                                attribute: h.id
                            }),
                            s.model = h,
                            s.code = h.code,
                            s.options = _.filter(h.options, function(e) {
                                return g[e.value].independent
                            }),
                            k[h.code] = u[h.code] || s["default"] || (r ? r.data[h.code] : null),
                            p.push(h.code);
                        for (m in w) {
                            s = w[m];
                            var $ = !1;
                            for (f in s.options) {
                                l = s.options[f];
                                var x = {};
                                x[s.code] = l.value,
                                (l.product = e.matchChildProduct(x)) && ($ = !0),
                                l.isOutOfStock = l.product && !i.isSelable(l.product.id, 1),
                                delete x
                            }
                            s.hasAnyMatches = $
                        }
                        e.attributes = w,
                        d = k,
                        v()
                    }
                }
                e.hasOptions = w ? 1 : 0,
                e.configurableAttributesCodes = p
            };
            e.$watch("sourceData", function() {
                e.data = _.isUndefined(e.sourceData) ? {} : e.sourceData
            }),
            e.$watch("productModel.data", g),
            e.matchChildProduct = function(t, n) {
                for (var i, o, s = {}, a = !_.isUndefined(t), r = p.length; r > 0; ) {
                    if (r--,
                    i = p[r],
                    n)
                        if (_.isArray(n)) {
                            if (n.indexOf(i) > -1)
                                continue
                        } else
                            console.log("Invalid skip type: ", typeof n, n);
                    (!a || e.data[i]) && (s[i] = parseInt(e.data[i], 10))
                }
                return a && _.extend(s, t),
                e.$root.$broadcast("product-configurable-options.matchChildProduct.beforeCheck", {
                    filter: s,
                    override: t,
                    skip: n
                }),
                o = _.findWhere(c, s),
                delete s,
                o
            }
            ;
            var v = function() {
                if (tcologTime("productOptions::controller::data changed", !1, 2),
                e.hasOptions) {
                    var t = e.matchChildProduct();
                    return _.isUndefined(t) ? void (!o.allowEmptyConfigurable || "pristine" == o.allowEmptyConfigurable && _.compact(_.values(e.data)).length ? _.defaults(e.data, d) : (e.modelData.productId = null,
                    _.each(e.attributes, function(t) {
                        try {
                            var n = t.code;
                            !o.allowOneOptionInConfigurable && d[n] && 1 == t.options.length && (e.data[n] = d[n])
                        } catch (i) {}
                    }))) : void (e.modelData.productId = t.id)
                }
            };
            e.$watch("data", _.debounce(function() {
                v(),
                g()
            }, 100), !0)
        }
        ]
    }
}),
window.tcoStore.directive("productCustomOptions", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ng-if="hasOptions"></ng-include>',
        scope: {
            productId: "=",
            modelData: "=",
            data: "=?"
        },
        controller: ["$scope", "product", "transport", function(e, t, n) {
            tcologTime("productCustomOptions::controller::start", !1, 2),
            _.defaults(e, {
                template: "/views/catalog/product/view/options-custom.html",
                hasOptions: !1
            }),
            e.$watch("modelData", function() {
                if (_.isUndefined(e.modelData.options) || _.isUndefined(e.modelData.options.custom))
                    return void (e.hasOptions = 0);
                var t = e.modelData.options.custom;
                e.hasOptions = t.length ? 1 : 0,
                e.options = t
            }),
            _.isUndefined(e.data) && (e.data = n.getModel("product-options-options"))
        }
        ]
    }
}),
window.tcoStore.directive("productListFilters", function() {
    return {
        restrict: "E",
        template: '<ng-include src="::template || defaultTemplate"></ng-include>',
        scope: {
            collection: "=",
            allowed: "=?",
            filters: "=?",
            categoryFilter: "=?",
            modelsNamePrependix: "@",
            templateFamily: "@",
            template: "@",
            custom: "=?",
            staticCollection: "=?"
        },
        replace: !0,
        controller: ["$scope", "transport", "attribute", "website", "stock", "$filter", function(e, t, n, i, o, s) {
            function a() {
                e.$root.$broadcast("clearAllFilters")
            }
            function r() {
                e.$root.$broadcast("closeOffCanvasRequest")
            }
            function c() {
                return _.map(e.filters || e.allowed || _.pluck(n.getFilterableAttributes(), "code"), function(e, t) {
                    return _.isObject(e) ? e : {
                        is_open: !0,
                        position: t,
                        results: !0,
                        source: e,
                        type: "attribute"
                    }
                })
            }
            function l() {
                tco.benchmark.start("productListFilters::prepareFilters");
                var t, a = e.collection, r = [];
                if (a) {
                    r = _.isObject(_.first(a)) ? _.pluck(a, "id") : a,
                    i.manageStock && !i.showOutOfStock && (r = o.filterOutOfStock(r)),
                    tco.benchmark.point("productListFilters::prepareFilters", "after stock");
                    var l = n.prepareFiltersModelMetaData(r, e.filtersModel);
                    tco.benchmark.point("productListFilters::prepareFilters", "after filters metadata"),
                    l = _.filter(l, function(t) {
                        return t.range || e.filtersModel.meta.qty[t.code].independent > 1
                    }),
                    tco.benchmark.point("productListFilters::prepareFilters", "after filterable");
                    var d = c();
                    t = d ? s("orderBy")(_.compact(_.map(d, function(t) {
                        var n = _.findWhere(e.items, {
                            code: t.source
                        }) || _.extend({}, t);
                        if (n.source)
                            switch (n.type) {
                            case "attribute":
                                if (attributeData = _.findWhere(l, {
                                    code: t.source
                                }),
                                attributeData)
                                    return _.defaults(n, attributeData),
                                    n;
                            default:
                                return n
                            }
                    })), "position", !1) : s("orderBy")(l, "position", !1),
                    _.isEqual(t, e.items) || (e.items = t),
                    tco.benchmark.stop("productListFilters::prepareFilters")
                }
            }
            var d = "productListFilters::controller";
            tco.benchmark.start(d),
            e.defaultTemplate = "/views/catalog/product/list/filters" + (e.templateFamily ? "-" + e.templateFamily : "") + ".html",
            e.clearAllFilters = a,
            e.closeOffCanvas = r,
            e.filtersModel = t.getModel((e.modelsNamePrependix || "product-list") + "-filters");
            var u = _.debounce(l, 100);
            e.staticCollection && void 0 !== e.staticCollection || e.$watchCollection("collection", u),
            e.$watch("filtersModel.selection", u, !0),
            e.$on("listing.update.request", u),
            tco.benchmark.stop(d)
        }
        ]
    }
}),
window.tcoStore.directive("productListItem", function() {
    return {
        restrict: "E",
        template: '<ng-include src="template" ></ng-include>',
        scope: {
            productId: "=",
            bemName: "@",
            templateFamily: "@",
            buyRequest: "=",
            item: "=",
            position: "=",
            custom: "=?",
            eeListName: "@"
        },
        transclude: !0,
        controller: "productListItemController"
    }
}),
window.tcoStore.directive("productPreviewButton", function() {
    return {
        restrict: "E",
        template: '<button ng-class="{ busy: action.busy}" ng-click="show()"><ng-transclude></ng-transclude></button>',
        scope: {
            productId: "=",
            position: "="
        },
        replace: !0,
        transclude: !0,
        controller: ["$scope", "ProductService", "product", "gtm", function(e, t, n, i) {
            e.action = {
                busy: !1
            },
            e.show = function() {
                var n = i.ee.getProductImpression({
                    data: e.productModel.data
                });
                n.position = e.position,
                i.ee.productClick(n),
                i.ee.productDetails(n),
                t.previewProduct(e.productId, e.action, e)
            }
            ,
            e.productModel = n.set(e.productId),
            e.modelData = {
                productId: e.productId
            }
        }
        ]
    }
}),
window.tcoStore.directive("productRelated", ["$compile", "product", "website", "stock", "customer", function(e, t, n, i, o) {
    function s(e) {
        return _.compact(_.map(e || [], function(e) {
            try {
                if (t.get(e).data.isDivergent)
                    throw 1;
                return t.getConfigurableFamilyIds(e)
            } catch (n) {}
        })) || []
    }
    function a(e, o, s, a) {
        function r(e) {
            if (-1 == c.indexOf(e)) {
                c.push(e);
                var n = t.get(e);
                if (!s)
                    try {
                        n.data.isDivergent || (n.data.parent && r(n.data.parent),
                        n.data.options.configurable.children.forEach(function(e) {
                            c.push(e)
                        }))
                    } catch (i) {}
            }
        }
        n.manageStock && !n.showOutOfStock && (e = i.filterOutOfStock(e));
        var c = [];
        return a && a.forEach(r),
        _.compact(_.map(t.getModelsData(e), function(e) {
            if (!e.id)
                return !1;
            if (o && e.org_price)
                return !1;
            if (!s && e.parent && !e.isDivergent) {
                if (c.indexOf(e.parent) > -1)
                    return !1;
                r(e.parent)
            }
            return c.indexOf(e.id) > -1 ? !1 : (r(e.id),
            e.id)
        }))
    }
    return {
        restrict: "E",
        template: '<ng-include src="template||defaultDemplate"></ng-include>',
        scope: {
            allProducts: "=?products",
            secondaryProducts: "=",
            pio: "@",
            pioEngine: "@",
            productId: "=?",
            productIdSource: "@?",
            categoryId: "=?",
            title: "@",
            limit: "=?",
            template: "@",
            boost: "=?",
            boostFactor: "=?",
            custom: "=?",
            eeListName: "@",
            verbosity: "=?",
            disalowDiscounted: "=?",
            allowFamily: "@"
        },
        transclude: !0,
        link: function(t, n, i, o, s) {
            s(t, function(n, i) {
                if (n && n.length > 0) {
                    var o = e(n)(t);
                    t.parentTraclusion = o[0].outerHTML
                }
            })
        },
        controller: ["$scope", "stock", "$q", "website", "$injector", function(e, n, i, r, c) {
            function l() {
                return e.productId ? _.isArray(e.productId) ? e.productId : [e.productId] : []
            }
            function d() {
                e.productId = _.unique(_.compact(_.pluck(o.basket.data.items, "product")))
            }
            tcologTime("productRelated::controller::start", !1, 2),
            e.loaded = !1,
            _.defaults(e, {
                limit: 4,
                eeListName: "Related products"
            }),
            e.defaultDemplate = "/views/catalog/product/view/related.html";
            var u = _.debounce(function() {
                var o = l();
                if (e.loaded = !1,
                e.allProducts && e.allProducts.length > 0) {
                    var s = _.uniq(_.isObject(_.first(e.allProducts)) ? _.pluck(e.allProducts, "id") : e.allProducts);
                    if (e.secondaryProducts) {
                        var c = _.flatten(e.secondaryProducts);
                        _.isObject(_.first(c)) && (c = _.pluck(c, "id")),
                        s = _.union(s, c)
                    }
                    s = _.without(s, e.productIds);
                    var d = [];
                    d.push(t.loadCollection(s, {
                        verbosity: e.verbosity || 2
                    })),
                    r.manageStock && d.push(n.loadCollection(s)),
                    i.all(d).then(function() {
                        e.products = a(s, e.disalowDiscounted, e.allowFamily, o),
                        e.loaded = !0
                    })
                }
            }, 100)
              , p = _.debounce(function() {
                if (e.pio) {
                    if (!c.has("pio"))
                        return void console.error("pio usage requested but its not included in code");
                    var t = c.get("pio");
                    if (t.enabled) {
                        var n = l()
                          , i = t.load(e.pioEngine, {
                            products: n,
                            category: e.categoryId,
                            num: 40,
                            blacklist: s(n),
                            boost: e.boost,
                            boostFactor: e.boostFactor
                        });
                        i && i.then(function(t) {
                            try {
                                e.allProducts = t.products,
                                u()
                            } catch (n) {}
                        })
                    }
                }
            }, 100);
            if (e.productIdSource)
                switch (e.productIdSource) {
                case "basket":
                    e.$on("basketDataUpdate", d),
                    d()
                }
            e.$watch("productId", p),
            e.$watch("categoryId", p),
            e.$watch("allProducts", u)
        }
        ]
    }
}
]),
window.tcoStore.directive("reviewForm", function() {
    return {
        restrict: "E",
        templateUrl: "/views/catalog/product/view/review-form.html",
        scope: {
            productId: "="
        },
        controller: ["$scope", "formHelper", "http", function(e, t, n) {
            e.code = null,
            e.data = {},
            e.rates = [1, 2, 3, 4, 5],
            e.setForm = function(t) {
                e.form = t
            }
            ,
            e.submit = function(i) {
                _.isUndefined(i) && (i = e.form),
                e.data.product = e.productId,
                t.init(e, "data", "code"),
                t.submit(e, i, function(e, t) {
                    return n.post("reviews/submit", e)
                }, {
                    success: function() {
                        e.data = {}
                    }
                })
            }
        }
        ]
    }
}),
window.tcoStore.directive("reviewListItem", function() {
    var e = ["$scope", "review", "product", function(e, t, n) {
        if (tcologTime("reviewListItem::controller::start", !1, 2),
        e.defaultTemplate = "/views/content/reviews/list/item.html",
        !_.isUndefined(e.reviewId)) {
            var i = parseInt(e.reviewId, 10)
              , o = e.$watch(function() {
                var n = t.get(i);
                _.isUndefined(n) || o(),
                e.reviewModel = n
            });
            e.$watch("reviewModel.data", function() {
                e.review = e.reviewModel.data,
                e.loadProduct && (e.review.product = n.get(e.review.entity_id),
                console.log(e.review))
            })
        }
    }
    ];
    return {
        restrict: "E",
        template: '<ng-include src="template || defaultTemplate" ng-if="review"></ng-include>',
        scope: {
            reviewId: "=",
            template: "@",
            loadProduct: "="
        },
        transclude: !0,
        controller: e
    }
}),
window.tcoStore.directive("wishlistButton", [function() {
    return {
        restrict: "EA",
        scope: {
            productId: "=",
            add: "@",
            addGuest: "@",
            added: "@",
            template: "@"
        },
        template: '<ng-include src="template"></ng-include>',
        replace: !0,
        controller: "wishlistButtonController"
    }
}
]),
window.tcoStore.directive("productReviews", function() {
    return {
        restrict: "E",
        templateUrl: "/views/catalog/product/view/reviews.html",
        scope: {
            product: "=",
            loadWholeFamily: "@"
        },
        transclude: !0,
        controller: ["$scope", "review", function(e, t) {
            var n = _.debounce(function() {
                e.product ? t.getCollectionByParent(e.product.id, e.loadWholeFamily).then(function(t) {
                    e.reviewsModel = {
                        collection: _.pluck(t.data, "data"),
                        loaded: !0
                    }
                }) : e.reviewsModel = null
            }, 300);
            e.$watch("product.id", n),
            e.$watch("loadWholeFamily", n)
        }
        ]
    }
}),
function() {
    angular.module("tcoStore").service("creditCard", [function() {
        function e(e) {
            return _.findWhere(i, {
                code: e
            })
        }
        function t() {
            return i
        }
        function n(e) {
            return _.isString(e) ? (e = e.replace(/\s/g, ""),
            _.find(i, function(t) {
                return null !== e.match(t.regex)
            })) : null
        }
        var i = [{
            name: "American Express",
            code: "AMEX",
            vendor: "AMEX",
            regex: /^3[47][0-9]{13}$/
        }, {
            name: "China UnionPay",
            code: "CUP",
            vendor: "CUP",
            regex: /^(62|88)[0-9]{13}$/
        }, {
            name: "Diners",
            code: "DINERS",
            vendor: "DINERS",
            regex: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/
        }, {
            name: "Discover Card",
            code: "DISCOVER",
            vendor: "DISCOVER",
            regex: /^6(?:011|5[0-9]{2})[0-9]{12}$/
        }, {
            name: "JBC",
            code: "JBC",
            vendor: "JBC",
            regex: /^(?:2131|1800|35\d{3})\d{11}$/
        }, {
            name: "Laser",
            code: "LASER",
            vendor: "LASER",
            regex: /^(6304|6706|6771|6709)\d{12}$/
        }, {
            name: "Maestro",
            code: "MAESTRO",
            vendor: "MAESTRO",
            regex: /^(?:5[0678]\d\d|6304|6390|67\d\d)\d{8,15}$/
        }, {
            name: "MasterCard",
            code: "MC",
            vendor: "MC",
            regex: /^5[1-5]\d{2}([\ \-]?)\d{4}\1\d{4}\1\d{4}$/
        }, {
            name: "VISA Electron",
            code: "UKE",
            vendor: "VISA",
            regex: /^((4026|4405|4508|4844|4913|4917)\d{12})|(417500\d{10})$/
        }, {
            name: "VISA",
            code: "VISA",
            vendor: "VISA",
            regex: /^4\d{3}([\ \-]?)(?:\d{4}\1){2}\d(?:\d{3})?$/
        }];
        return {
            getCardTypes: t,
            getTypeByCode: e,
            detectCardType: n
        }
    }
    ])
}(),
function() {
    function e(e) {
        function t(t, n) {
            n || (n = "code");
            var i = e.detectCardType(t);
            return i ? i[n] : (i = e.getTypeByCode(t),
            i ? i[n] : void 0)
        }
        return t
    }
    angular.module("tcoStore").filter("creditCardType", e),
    e.$inject = ["creditCard"]
}(),
function() {
    function e(e) {
        for (var t, n = e[0], i = e[e.length - 1], o = 1; n !== i && (n = n.nextSibling); o++)
            (t || e[o] !== n) && (t || (t = jQuery(slice.call(e, 0, o))),
            t.push(n));
        return t || e
    }
    function t(t, n, i, o) {
        window.tcoStore.directive(t, ["$animate", "$compile", "$log", function(s, a, r) {
            function c(n, o, c, l, d) {
                var u, p, m;
                n.$watch(function() {
                    return l.condition
                }, function(n) {
                    if (c.ngIf || c.ngSwitch || c.ngSwitchWhen)
                        return void r.error("Invalid usage of " + t + " directive - it cant be placed on same element with ngIf or ngSwitch.");
                    var l = i ? !n : n;
                    l ? p || d(function(e, t) {
                        p = t,
                        e[e.length++] = a.$$createComment("end ngIf", c.ngIf),
                        u = {
                            clone: e
                        },
                        s.enter(e, o.parent(), o)
                    }) : (m && (m.remove(),
                    m = null),
                    p && (p.$destroy(),
                    p = null),
                    u && (m = e(u.clone),
                    s.leave(m).then(function() {
                        m = null
                    }),
                    u = null))
                })
            }
            return _.extend({
                multiElement: !0,
                transclude: "element",
                priority: 600,
                terminal: !0,
                restrict: "EA",
                $$tlb: !0,
                link: c,
                controller: n,
                scope: !0
            }, o)
        }
        ])
    }
    tco.createIfDirective = t
}(),
function() {
    var e = ["$scope", function(e) {
        function t() {
            var t = ["S", "M", "L", "X"]
              , o = e.ifSize.replace(" ", "").replace(",", "").toUpperCase();
            i = "!" == o[0] ? _.difference(t, o.substr(1).split("")) : o.split(""),
            e.$on("resize", s),
            n()
        }
        function n() {
            try {
                o.condition = i.indexOf(e.$root.size) > -1
            } catch (t) {
                o.condition = !1
            }
        }
        var i, o = this, s = _.debounce(n, 100);
        t()
    }
    ];
    tco.createIfDirective("ifSize", e, !1, {
        scope: {
            ifSize: "@"
        }
    })
}(),
function() {
    function e(e, t, n, i) {
        function o() {
            _.isUndefined(i.geoForceCountry) || (t.data.geolocation = i.geoForceCountry)
        }
        var s = n.search() || {}
          , a = s.geoForceCountry;
        a && (i.geoForceCountry = a,
        n.search("geoForceCountry", null)),
        _.isUndefined(s.stopGeoForceCountry) || (i.geoForceCountry = void 0,
        n.search("stopGeoForceCountry", null)),
        e.$on("customerDataUpdate", o),
        o()
    }
    angular.module("tcoStore").run(e),
    e.$inject = ["$rootScope", "customer", "$location", "$localStorage"]
}(),
function() {
    var e = ["$scope", "website", "customer", function(e, t, n) {
        function i() {
            try {
                _.isUndefined(n.data.geolocation) || _.isUndefined(t.stores) || _.isUndefined(t.store) || (o.condition = !!_.find(t.stores, function(e) {
                    return e.id != t.store && e.country == n.data.geolocation
                }))
            } catch (e) {
                o.condition = !1
            }
        }
        var o = this;
        e.$on("customerDataUpdate", i),
        i()
    }
    ];
    tco.createIfDirective("ifGeoMatchStore", e, !1),
    tco.createIfDirective("ifNotGeoMatchStore", e, !0);
}(),
angular.module("tcoStore").directive("msHref", ["config", function(e) {
    var t = e.base.replace(/\/$/, "");
    return {
        priority: 99,
        link: function(e, n, i) {
            i.$observe("msHref", function(e) {
                i.$set("href", !e || e.match(/^http/i) ? e : t + e)
            })
        }
    }
}
]),
function() {
    function e(e, t, n, i) {
        function o() {
            var e = t.path();
            if (s.test(e)) {
                var n = i("pathToUrl")(e);
                window.location.href = n
            }
        }
        if (n.bases) {
            var s = new RegExp("^/(" + n.bases.join("|") + ")/.*$");
            e.$on("$locationChangeStart", o)
        }
    }
    angular.module("tcoStore").run(e),
    e.$inject = ["$rootScope", "$location", "config", "$filter"]
}(),
function() {
    function e(e, t, n) {
        function i(e) {
            return _.isString(e) ? (a[e] || (a[e] = e,
            r.push({
                copy: e
            }),
            s()),
            a[e]) : e
        }
        function o() {
            if (r.length) {
                var e = r;
                r = [],
                t.post("custom/translator/missing", {
                    terms: e
                })
            }
        }
        var s, a = e.translations || {}, r = [];
        return s = n.isDeveloper || 1 == Math.floor(100 * Math.random() + 1) ? _.debounce(o, 1e3) : function() {}
        ,
        i
    }
    angular.module("tcoStore").filter("ms", e),
    e.$inject = ["website", "http", "config"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            e.getEvents({}, {}, function(e) {
                a.events = e
            })
        }
        function o() {
            return a.events && a.events.length ? void (1 === a.events.length ? a.addProduct(a.events[0].event_id) : a.showListSelector = !0) : void t.path("/account/gift-registry")
        }
        function s(t) {
            a.showListSelector = !1;
            var n = {
                product_id: a.productId,
                event_id: t
            };
            return e.addToRegistry(a.status, n)
        }
        var a = this;
        return a.status = {},
        a.events = [],
        e.isActive() ? (a.$onInit = i,
        a.addToRegistry = o,
        void (a.addProduct = s)) : void n.remove()
    }
    angular.module("tcoStore").component("giftRegistryAddProduct", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/views/gift-registry/add-product.html",
        bindings: {
            productId: "<"
        }
    }),
    e.$inject = ["giftRegistry", "$location", "$element"]
}(),
function() {
    function e(e, t) {
        function n(e) {
            e.id && i()
        }
        function i() {
            var t = {
                id: c.id,
                password: e.getRememberedPassword(c.id)
            }
              , n = function(e) {
                c.requestPassword = !1,
                c.event = e.event
            }
              , i = function(e) {
                ("PASSWORD_REQUIRED" === e.error_code || "PASSWORD_INCORRECT" === e.error_code) && (c.password = "",
                c.requestPassword = !0,
                c.errorMessage = e.error)
            };
            e.getEventDetails(c.status, t, n, i)
        }
        function o() {
            e.rememberPassword(c.id, c.password),
            i()
        }
        function s(e) {
            var n = _.findWhere(t.basket.data.items, {
                product: e
            });
            return n && n.request && n.request.qty ? n.request.qty : 0
        }
        function a() {
            var t = {
                event_id: c.event.event_id,
                items: _.map(c.event.items, function(e) {
                    return {
                        item_id: e.item_id,
                        descr: e.descr,
                        num_wants: e.num_wants,
                        priority: e.priority
                    }
                })
            };
            e.updateItems(c.statusUpdate, t, i)
        }
        function r(t) {
            var n = {
                event_id: c.id,
                item_id: t.item_id
            }
              , i = function(e) {}
              , o = function(e) {
                t.status.error = e.error
            };
            e.removeFromRegistry(t.status, n, i, o)
        }
        var c = this;
        c.event = {},
        c.status = {},
        c.statusUpdate = {},
        c.password = "",
        c.requestPassword = !1,
        c.updateItems = a,
        c.usePassword = o,
        c.getInCartQty = s,
        c.removeFromRegistry = r,
        c.$onChanges = n
    }
    angular.module("tcoStore").component("giftRegistryManageItems", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/views/gift-registry/manage-items.html",
        bindings: {
            id: "<"
        }
    }),
    e.$inject = ["giftRegistry", "customer"]
}(),
function() {
    function e(e, t) {
        function n(e) {
            o.form = e
        }
        function i() {
            var n = function(e) {
                return o.selectedMonth ? _.filter(e, function(e) {
                    var t = e.date.split("-");
                    return parseInt(t[1], 10) === o.selectedMonth
                }) : e
            };
            e.init(o, "data", "result"),
            e.submit(o, o.form, function(e) {
                var i = angular.toJson(e);
                s[i] || t.search(o.status, e, function(e) {
                    e && e.events && (s[i] = e.events,
                    o.events = n(s[i]))
                }),
                o.events = n(s[i])
            })
        }
        var o = this
          , s = {};
        o.events = [],
        o.status = {},
        o.data = {},
        o.monthOptions = ["Please select event month", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        o.selectedMonth = 0,
        o.search = i,
        o.setForm = n
    }
    angular.module("tcoStore").controller("GiftRegistrySearchController", e),
    e.$inject = ["formHelper", "giftRegistry"]
}(),
function() {
    function e(e, t, n) {
        function i(e) {
            e.id && a()
        }
        function o(e) {
            c.form = e
        }
        function s() {
            c.data.event_id = c.event.event_id;
            var e = function(e) {
                c.statusShare.result = "SUCCESS"
            }
              , n = function(e) {
                c.statusShare.result = e.error
            };
            t.shareGiftList(c.status, c.data, e, n)
        }
        function a() {
            var e = {
                id: c.id,
                password: t.getRememberedPassword(c.id)
            }
              , n = function(e) {
                c.requestPassword = !1,
                c.event = e.event
            }
              , i = function(e) {
                ("PASSWORD_REQUIRED" === e.error_code || "PASSWORD_INCORRECT" === e.error_code) && (c.password = "",
                c.requestPassword = !0,
                c.errorMessage = e.error)
            };
            t.getEventDetails(c.status, e, n, i)
        }
        function r() {
            return c.event && c.event.customer_id == n.data.id
        }
        var c = this;
        c.status = {},
        c.statusShare = {},
        c.setForm = o,
        c.submit = s,
        c.isCurrentUserTheOwner = r,
        c.$onChanges = i
    }
    angular.module("tcoStore").component("giftRegistryShare", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/views/gift-registry/share.html",
        bindings: {
            id: "<"
        }
    }),
    e.$inject = ["formHelper", "giftRegistry", "customer"]
}(),
function() {
    function e(e, t, n, i, o) {
        function s(e) {
            e.id && a()
        }
        function a() {
            var t = {
                id: p.id,
                password: e.getRememberedPassword(p.id)
            };
            e.getEventDetails(p.status, t, r, r)
        }
        function r(e) {
            p.requestPassword = !1,
            "PASSWORD_REQUIRED" === e.error_code || "PASSWORD_INCORRECT" === e.error_code ? (p.password = "",
            p.requestPassword = !0,
            p.errorMessage = e.error) : p.event = e.event
        }
        function c() {
            e.rememberPassword(p.id, p.password),
            a()
        }
        function l(e) {
            var n = _.findWhere(t.basket.data.items, {
                product: e
            });
            return n && n.request && n.request.qty ? n.request.qty : 0
        }
        function d(n) {
            var s = {
                event_id: p.id,
                item_id: n.item_id,
                qty: n.qty
            }
              , a = function(e) {
                t.processSuccess(e),
                m.queue.push({
                    type: "addGiftProductToCart",
                    request: s,
                    response: e
                }),
                o.url(i.getStandardRoutePath("/basket"))
            }
              , r = function(e) {
                n.status.error = e.error
            };
            e.addGiftToCart(n.status, s, a, r)
        }
        function u() {
            return p.event && p.event.customer_id == t.data.id
        }
        var p = this
          , m = n.getModel("_gift_registry_notifications", {
            queue: []
        }, {
            storage: "static"
        });
        p.event = {},
        p.status = {},
        p.password = "",
        p.requestPassword = !1,
        p.usePassword = c,
        p.getInCartQty = l,
        p.addToCart = d,
        p.isCurrentUserTheOwner = u,
        p.$onChanges = s
    }
    angular.module("tcoStore").component("giftRegistryView", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/views/gift-registry/view.html",
        bindings: {
            id: "<"
        }
    }),
    e.$inject = ["giftRegistry", "customer", "transport", "tcoStoreRoutes", "$location"]
}(),
function() {
    function e(e, t) {
        t["gift-registry-enabled"] && (e.when("/gifts/search", {
            templateUrl: "/views/gift-registry/search.html",
            controller: "GiftRegistrySearchController",
            controllerAs: "vm"
        }),
        e.when("/gifts/view/:shareCode", {
            template: '<gift-registry-view id="::vm.shareCode"></gift-registry-view>',
            controller: ["$routeParams", function(e) {
                this.shareCode = e.shareCode
            }
            ],
            controllerAs: "vm"
        }),
        e.when("/gifts/manage-items/:shareCode", {
            template: '<gift-registry-manage-items id="::vm.shareCode"></gift-registry-manage-items>',
            controller: ["$routeParams", function(e) {
                this.shareCode = e.shareCode
            }
            ],
            controllerAs: "vm"
        }),
        e.when("/gifts/share/:shareCode", {
            template: '<gift-registry-share id="::vm.shareCode"></gift-registry-share>',
            controller: ["$routeParams", function(e) {
                this.shareCode = e.shareCode
            }
            ],
            controllerAs: "vm"
        }))
    }
    angular.module("tcoStore").config(e),
    e.$inject = ["$routeProvider", "website"]
}(),
angular.module("tcoStore").controller("GiftRegistryController", ["$scope", "customer", "formHelper", "giftRegistry", function(e, t, n, i) {
    function o() {
        s(),
        i.getOccasionTypes(f.statusOccasion, {}, function(e) {
            f.occasionTypes = e
        }),
        f.addresses.push({
            id: 0,
            label: "I will provide an address later"
        }),
        f.addresses = f.addresses.concat(_.map(t.address.list, function(e) {
            return _.extend({
                label: e.firstname + " " + e.lastname + ", " + e.street_1 + ", " + e.postcode + ", " + e.city
            }, e)
        }))
    }
    function s() {
        i.getEvents(f.statusEvents, {}, function(e) {
            f.eventsList = e
        })
    }
    function a(e) {
        f.form = e
    }
    function r(t) {
        f.viewForm != t && (f.viewForm = t,
        e.$root.scrollTo(0))
    }
    function c() {
        r(!0)
    }
    function l() {
        r(!1),
        s()
    }
    function d() {
        c(),
        f.editedEvent = {}
    }
    function u(e) {
        c(),
        f.editedEvent = e,
        f.selectedOption = _.findWhere(f.addresses, {
            id: f.editedEvent.address_id
        })
    }
    function p() {
        n.init(f, "editedEvent", "result"),
        n.submit(f, f.form, function(e) {
            return i.saveEvent(f.statusSaveEvent, e, function(e) {
                f.eventsList = e.events,
                l()
            }, function(e) {
                f.errors.push(e.error)
            })
        })
    }
    function m(e) {
        return e || e.event_id ? (e.statusRemove || (e.statusRemove = {}),
        i.removeEvent(e.statusRemove, {
            event_id: e.event_id
        }, function(e) {
            f.eventsList = e.data.events,
            l()
        })) : void 0
    }
    var f = this;
    f.statusEvents = {},
    f.statusOccasion = {},
    f.statusSaveEvent = {},
    f.statusRemoveEvent = {},
    f.eventsList = [],
    f.occasionTypes = [],
    f.addresses = [],
    f.$onInit = o,
    f.showForm = c,
    f.hideForm = l,
    f.setForm = a,
    f.showNewEventForm = d,
    f.showEditEventForm = u,
    f.saveEvent = p,
    f.removeEvent = m
}
]),
function() {
    function e(e, t, n) {
        var i, o;
        n.isActive() && (t.push({
            urlkey: "gift-registry",
            label: "Gift registry",
            title: "My Events",
            order: 40
        }),
        t.push({
            urlkey: "event",
            title: "Gift Registry Details",
            order: 90
        })),
        e.$on("checkout.component.init", function(e, t, n) {
            i = t,
            o = n,
            o.$watch(function() {
                return i && i.checkoutData ? i.checkoutData.address.shipping.customer_address_id : void 0
            }, function(e) {
                e && e == i.checkoutData.giftEvent.addressId && (i.checkoutData.billing.to_shipping = 0)
            })
        })
    }
    angular.module("tcoStore").run(e),
    e.$inject = ["$rootScope", "accountNavigation", "giftRegistry"]
}(),
function() {
    function e(e, t, n, i, o) {
        function s() {
            return !!o["gift-registry-enabled"]
        }
        function a(e, t, i, o) {
            return S.length ? void (i && i(S)) : n.send(e, {
                path: "custom/tcoadjustwaregiftreg/listOccasionTypes",
                data: t
            }, function(e) {
                e && e.occasion_types && (S = e.occasion_types),
                i && i(S)
            }, o)
        }
        function r(e, t, i, o) {
            return $.length ? void (i && i($)) : n.send(e, {
                path: "custom/tcoadjustwaregiftreg/listEvents",
                data: t
            }, function(e) {
                p(e),
                i && i($)
            }, o)
        }
        function c(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/saveEvent",
                data: t
            }, function(e) {
                p(e),
                i && i(e)
            }, o)
        }
        function l(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/removeEvent",
                data: t
            }, function(e) {
                p(e),
                i && i(e)
            }, o)
        }
        function d(e, t, i, o) {
            var s = m(t.id);
            if (s)
                return void (i && i({
                    event: s
                }));
            var a = {};
            return a = isNaN(t.id) ? {
                password: t.password,
                sharing_code: t.id
            } : {
                password: t.password,
                event_id: t.id
            },
            n.send(e, {
                path: "custom/tcoadjustwaregiftreg/getEventDetails",
                data: a
            }, function(e) {
                e && e.event && (s = e.event,
                u(s)),
                i && i(e)
            }, o)
        }
        function u(e) {
            if (e && e.items) {
                var t = _.pluck(e.items, "product_id");
                t && i.loadCollection(t, {
                    verbosity: 2
                }).then(function() {
                    _.each(e.items, function(e) {
                        e.productModel = i.get(e.product_id),
                        e.qty = 1,
                        e.status = {}
                    })
                })
            }
        }
        function p(e) {
            if (e && e.events) {
                var t = []
                  , n = [];
                for (var i in $) {
                    var o = !1;
                    for (var s in e.events)
                        if ($[i].event_id == e.events[s].event_id) {
                            o = !0,
                            angular.copy(e.events[s], $[i]),
                            n.push(e.events[s].event_id);
                            break
                        }
                    o || t.push(i)
                }
                for (var s in e.events)
                    -1 == n.indexOf(e.events[s].event_id) && $.push(e.events[s]);
                _.each($, function(e) {
                    u(e)
                })
            }
        }
        function m(e) {
            return _.find($, function(t) {
                return t.event_id === e || t.sharing_code === e
            })
        }
        function f(e) {
            return t.giftreg_passwords ? t.giftreg_passwords[e] : !1
        }
        function g(e, n) {
            t.giftreg_passwords || (t.giftreg_passwords = {}),
            t.giftreg_passwords[e] = n
        }
        function v(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/giftListSearch",
                data: t
            }, i, o)
        }
        function h(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/addToRegistry",
                data: t
            }, function(e) {
                p(e),
                i && i(e)
            }, o)
        }
        function b(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/removeFromRegistry",
                data: t
            }, function(e) {
                p(e),
                i && i(e)
            }, o)
        }
        function w(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/addGiftToCart",
                data: t
            }, i, o)
        }
        function y(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/shareGiftList",
                data: t
            }, i, o)
        }
        function k(e, t, i, o) {
            return n.send(e, {
                path: "custom/tcoadjustwaregiftreg/updateGiftListItems",
                data: t
            }, function(e) {
                p(e),
                i && i(e)
            }, o)
        }
        var S = []
          , $ = []
          , x = {
            isActive: s,
            getEvents: r,
            saveEvent: c,
            removeEvent: l,
            getOccasionTypes: a,
            getEventDetails: d,
            addToRegistry: h,
            removeFromRegistry: b,
            getRememberedPassword: f,
            rememberPassword: g,
            updateItems: k,
            addGiftToCart: w,
            shareGiftList: y,
            search: v
        };
        return e.$on("customerLoggedOut", function() {
            $ = []
        }),
        x
    }
    angular.module("tcoStore").service("giftRegistry", e),
    e.$inject = ["$rootScope", "$sessionStorage", "request", "product", "website"]
}(),
function() {
    function e(e) {
        function t(t, n, i) {
            function o() {
                a = !1,
                t.$apply(function() {
                    var n = t.$eval(i.googleRecaptcha, {
                        token: s
                    });
                    n && e.reset()
                })
            }
            var s, a = !1, r = !1, c = document.createElement("span");
            c.className = "g-recaptcha",
            n[0].parentNode.insertBefore(c, n[0]),
            n.bind("click", function() {
                function t(e) {
                    s = e,
                    a && o()
                }
                a = !0;
                try {
                    s = grecaptcha.getResponse()
                } catch (n) {
                    s = null
                }
                s ? o() : r || (r = !0,
                e.run(c, t, t))
            })
        }
        return {
            restrict: "A",
            link: t,
            scope: !1
        }
    }
    angular.module("tcoStore").directive("googleRecaptcha", e),
    e.$inject = ["googleRecaptcha"]
}(),
function() {
    function e(e, t, n) {
        function i(e, t, i) {
            function o() {
                grecaptcha.render(e, {
                    sitekey: n.googleRecaptchaKey,
                    callback: t
                })
            }
            r ? o() : c ? i() : a.then(o)["catch"](i)
        }
        function o() {
            grecaptcha.reset()
        }
        function s(i) {
            return n.googleRecaptchaKey ? void (a = e(function(e, n) {
                function i() {
                    r = !0,
                    c = !1,
                    console.log("succcess"),
                    e()
                }
                function o() {
                    r || (console.log("error"),
                    c = !0,
                    n())
                }
                window.googleRecaptchaApionScriptLoad = i,
                t(o, 1e4);
                var s = document.createElement("script");
                s.type = "text/javascript",
                s.src = "https://www.google.com/recaptcha/api.js?onload=googleRecaptchaApionScriptLoad&render=explicit",
                document.head.appendChild(s)
            })) : (console.error("Recaptcha key is not set"),
            void (c = !0))
        }
        var a, r = !1, c = !1;
        return s(),
        {
            run: i,
            reset: o
        }
    }
    angular.module("tcoStore").service("googleRecaptcha", e),
    e.$inject = ["$q", "$timeout", "config"]
}(),
function() {
    function e(e) {
        function t(e) {
            return e ? _.isObject(e) ? e : (s[e] || (s[e] = {}),
            s[e]) : {}
        }
        function n(e) {
            return t[e].promise
        }
        function i(n, i, o, s) {
            function a(e) {
                try {
                    e.error ? r(e) : (o && o(e),
                    c.busy = !1,
                    c.result = "SUCCESS")
                } catch (t) {
                    r(t)
                }
            }
            function r(e) {
                if (!c.promise.cancelled) {
                    s && (e = s(e));
                    var t;
                    try {
                        if (!_.isString(e.error) || !e.error)
                            throw 1;
                        t = e.error
                    } catch (n) {
                        t = "ERROR"
                    }
                    c.result = t,
                    c.busy = !1
                }
            }
            var c = t(n);
            return c.busy && c.promise && (c.promise.cancelled = !0,
            c.promise.cancel()),
            c.busy = !0,
            c.result = null,
            _.isFunction(i) ? c.promise = i() : c.promise = e.post(i.path, i.data),
            c.promise.success(a),
            c.promise.error(r),
            c.promise
        }
        function o(e) {
            if (-1 == a.indexOf(e)) {
                a.push(e);
                var t = window.document.createElement("script");
                return t.src = e,
                window.document.head.appendChild(t),
                t
            }
        }
        var s = {}
          , a = []
          , r = {
            getStatus: t,
            getPromise: n,
            send: i,
            loadJs: o
        };
        return r
    }
    window.tcoStore.service("request", e),
    e.$inject = ["http"]
}(),
function() {
    function e(e, t) {
        function n() {
            if (_.isUndefined(r.productId))
                return !1;
            if (!t.hasModelsData(r.productId))
                return 5 > l && !r.setwatch && (l++,
                window.setTimeout(a, 100 * l)),
                !1;
            var e = t.get(r.productId).data;
            return e.isOut && !e.not_manage ? !0 : !1
        }
        function i() {
            return !n()
        }
        function o() {
            l = 0,
            a()
        }
        function s() {
            if (a(),
            r.setwatch) {
                var t = window.setInterval(a, 2e3);
                e.$on("$destroy", function() {
                    window.clearInterval(t)
                })
            }
        }
        function a() {
            var t = c[r.test];
            if (!t)
                return void console.error("Invalid test for ifStockStatus: ", r.test);
            var n = t();
            if (n != r.canShow) {
                var i = void 0 !== r.canShow;
                r.canShow = n,
                i && e.$applyAsync()
            }
        }
        var r = this;
        r.canShow = !1;
        var c = {
            isOut: n,
            isIn: i
        };
        this.$onChanges = function(e) {
            e.productId && a()
        }
        ,
        r.onChanges = o;
        var l = 0;
        s()
    }
    tcoStore.component("ifStockStatus", {
        controller: e,
        template: '<span ng-if="$ctrl.canShow"><ng-transclude/></ng-transclude></span>',
        transclude: !0,
        bindings: {
            test: "@",
            setwatch: "<",
            productId: "<"
        }
    }),
    e.$inject = ["$scope", "stock"]
}(),
window.angular.module("tcoStore").filter("wideImageSort", wideImageSortFilter),
wideImageSortFilter.$inject = ["product"],
function() {
    function e() {
        o = document.createElement("div"),
        o.style.height = "100vh",
        o.style.position = "absolute",
        document.body.appendChild(o)
    }
    function t(e) {
        a.push(e),
        r()
    }
    function n() {
        o || e();
        var t = parseInt(getComputedStyle(o).getPropertyValue("height"), 10);
        s = t - window.innerHeight;
        for (var n; n = a.shift(); )
            n(s)
    }
    function i(e) {
        function n(e, n, i) {
            e.$on("resize", function() {
                t(function(e) {
                    n.css("margin-bottom", e + "px")
                })
            })
        }
        return {
            link: n,
            restrict: "A"
        }
    }
    angular.module("tcoStore").directive("vhFix", i);
    var o, s = 0, a = [], r = _.debounce(n, 100);
    i.$inject = ["tools"]
}(),
function() {
    function e(e, t) {
        function n(e) {
            var t, n;
            return t = _.compact(_.map(_.extend(s, e), function(e, t) {
                return e ? t + "=" + e : void 0
            })),
            t = t.join("&"),
            n = document.createElement("script"),
            n.type = "text/javascript",
            n.src = "//maps.googleapis.com/maps/api/js?" + t,
            document.head.appendChild(n)
        }
        function i() {
            return angular.isDefined(window.google) && angular.isDefined(window.google.maps)
        }
        function o(t) {
            var o = e.defer();
            return i() ? (o.resolve(window.google.maps),
            o.promise) : (window.onGoogleMapsReady = function() {
                o.resolve(window.google.maps)
            }
            ,
            a || (a = !0,
            n(t)),
            o.promise)
        }
        var s = {
            callback: "onGoogleMapsReady",
            key: t.gmap_key,
            libraries: "places"
        }
          , a = !1;
        return {
            init: o,
            ready: i
        }
    }
    angular.module("tcoStore").service("googleMapApi", e),
    e.$inject = ["$q", "config"]
}(),
function() {
    function e(e, t) {
        function n() {
            if (e.gmap_key && i.store.lat && i.store.lon) {
                var n = {
                    key: e.gmap_key,
                    q: _.compact([t.name, i.store.address, i.store.postcode, i.store.city, i.store.region]).join(", "),
                    center: [i.store.lat, i.store.lon].join(","),
                    zoom: i.zoom || 12
                }
                  , o = encodeURI(_.map(_.keys(n), function(e) {
                    return e + "=" + n[e]
                }).join("&"));
                o && o.length && (i.paramsString = o,
                i.ready = !0)
            }
        }
        var i = this;
        i.ready = !1,
        i.$onInit = n
    }
    angular.module("tcoStore").component("googleMapEmbed", {
        bindings: {
            store: "<",
            zoom: "<"
        },
        controller: e,
        controllerAs: "vm",
        template: "<iframe ng-if='vm.ready' class='fill' frameborder='0' style='border:0' ng-src=\"{{('https://www.google.com/maps/embed/v1/place?' + vm.paramsString) | trusted}}\" allowfullscreen></iframe>"
    }),
    e.$inject = ["config", "website"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            n.init(),
            o()
        }
        function o() {
            if (!n.ready())
                return void window.setTimeout(o, 1e3);
            var i = _.extend(c, r.options);
            t.init(e[0], i).then(function(e) {
                l = e,
                a()
            })
        }
        function s(e) {
            e.markers && l && a()
        }
        function a() {
            t.setMarkers(l, r.markers),
            r.fitBounds && t.zoomToIncludeMarkers(l, r.markers)
        }
        var r = this
          , c = {
            center: {
                lat: 51.5069119,
                lon: -.093252
            },
            zoom: 12,
            zoomToIncludeMarkers: !0
        }
          , l = null;
        r.$onInit = i,
        r.$onChanges = s
    }
    angular.module("tcoStore").component("googleMap", {
        bindings: {
            options: "<",
            markers: "<",
            fitBounds: "="
        },
        transclude: !0,
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["$element", "googleMap", "googleMapApi"]
}(),
function() {
    function e(e, t) {
        function n(e) {
            angular.element(e).empty();
            var t = document.createElement("div");
            return t.style.width = "100%",
            t.style.height = "100%",
            e.appendChild(t),
            new window.google.maps.Map(t,{})
        }
        function i(e) {
            return tco.empty(e.lat) || tco.empty(e.lon) ? e.position instanceof google.maps.LatLng ? e.position : new window.google.maps.LatLng(0,0) : new window.google.maps.LatLng(e.lat,e.lon)
        }
        function o(e, t) {
            if (!tco.empty(e) && !tco.empty(t)) {
                var n = new window.google.maps.LatLngBounds;
                for (var o in t) {
                    var s = i(t[o]);
                    n.extend(s)
                }
                e.fitBounds(n)
            }
        }
        function s(e, t) {
            if (e) {
                tco.empty(e.markers) || (e.markers = []);
                for (var n in t)
                    a(e, t[n])
            }
        }
        function a(e, t) {
            var n, o = {
                map: e,
                animation: google.maps.Animation.DROP,
                draggable: !1
            };
            t.position = i(t);
            var s = _.extend(o, t);
            return n = new window.google.maps.Marker(s),
            window.google.maps.event.addListener(n, "click", function() {
                void 0 !== c && c.close(),
                c.setContent(t.info),
                c.open(e, n)
            }),
            n
        }
        function r(o, s) {
            var a, r = e.defer();
            return t.init().then(function() {
                a = n(o);
                var e = _.extend(l, s);
                e.center = i(e.center),
                a.setOptions(e),
                window.google.maps.event.trigger(a, "resize"),
                c = new window.google.maps.InfoWindow,
                r.resolve(a)
            }),
            r.promise
        }
        var c, l = {
            center: {
                lat: 0,
                lon: 0
            },
            zoom: 7,
            mapTypeId: "roadmap",
            zoomToIncludeMarkers: !1,
            maximumZoom: !1,
            markers: []
        };
        return {
            init: r,
            setMarkers: s,
            zoomToIncludeMarkers: o
        }
    }
    angular.module("tcoStore").service("googleMap", e),
    e.$inject = ["$q", "googleMapApi"]
}(),
function() {
    function e(e, t) {
        function n() {
            a.query || s(),
            t.findAddress(status, {
                query: a.query,
                country: a.country
            }, function(e) {
                a.hints = e.predict
            })
        }
        function i(e) {
            a.data.city = e.City,
            a.data.street_1 = e.Line1,
            a.data.street_2 = e.Line2,
            a.data.country = e.CountryName,
            a.data.postcode = e.PostalCode,
            o(e),
            a.manual = !0,
            s()
        }
        function o(e) {
            if (a.regions) {
                var t = _.find(a.regions, function(t) {
                    return t.code == e.ProvinceCode || t.code == e.ProvinceName || t.name == e.AdminAreaName || t.name == e.ProvinceName
                });
                t ? a.data.region_id = t.code : console.log("Region not found :", e)
            } else
                a.data.region = e.ProvinceName
        }
        function s() {
            a.hints = []
        }
        var a = this;
        a.$onInit = function() {
            a.data.street_1 && (a.manual = !0)
        }
        ,
        a.searchDebounced = _.debounce(n, 250),
        a.select = function(e) {
            "Address" == e.Type ? t.getDetailedAddress(status, e.Id, function(e) {
                i(e.predict[0])
            }) : t.findAddress(status, {
                query: a.query,
                country: a.country,
                container: e.Id
            }, function(e) {
                a.hints = e.predict
            })
        }
        ,
        a.close = function() {
            s()
        }
    }
    angular.module("tcoStore").component("pcaAutocomplete", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/views/checkout/form/pca/pca-autocomplete.html",
        bindings: {
            data: "<",
            manual: "=",
            country: "<",
            regions: "<"
        }
    }),
    e.$inject = ["$scope", "pca"]
}(),
function() {
    function e(e) {
        function t(t, n, i, o) {
            return e.send(t, {
                path: "custom/pcapredict/getlist",
                data: n
            }, i, o)
        }
        function n(t, n, i, o) {
            return e.send(t, {
                path: "custom/pcapredict/view",
                data: {
                    address: n
                }
            }, i, o)
        }
        var i = {
            findAddress: t,
            getDetailedAddress: n
        };
        return i
    }
    angular.module("tcoStore").service("pca", e),
    e.$inject = ["request"]
}(),
function() {
    function e(e, t, n, i) {
        function o(e) {
            var n = t.GetCardType(e);
            if (e)
                try {
                    if (!n || !u.ccTypes[n])
                        throw 1;
                    u.cardNotMatched = 0,
                    u.data.cc_type = n
                } catch (i) {
                    u.cardNotMatched = 1
                }
            else
                u.cardNotMatched = 0
        }
        function s() {
            u.months = [{
                value: "01",
                label: "01 - January"
            }, {
                value: "02",
                label: "02 - February"
            }, {
                value: "03",
                label: "03 - March"
            }, {
                value: "04",
                label: "04 - April"
            }, {
                value: "05",
                label: "05 - May"
            }, {
                value: "06",
                label: "06 - June"
            }, {
                value: "07",
                label: "07 - July"
            }, {
                value: "08",
                label: "08 - August"
            }, {
                value: "09",
                label: "09 - September"
            }, {
                value: "10",
                label: "10 - October"
            }, {
                value: "11",
                label: "11 - November"
            }, {
                value: "12",
                label: "12 - December"
            }];
            var e, t = [], n = (new Date).getFullYear();
            for (e = 0; 10 > e; e++)
                t.push({
                    value: (n + e).toString().slice(2),
                    label: n + e
                });
            u.years = t
        }
        function a(e) {
            if (e.method && (u.ccTypes = c(),
            u.tokens = l(),
            !window.SagePayConfig && u.method)) {
                var t = window.document.getElementsByTagName("script")[0]
                  , n = window.document.createElement("script");
                n.src = r("js/sagepay.js"),
                t.parentNode.insertBefore(n, t)
            }
        }
        function r(e) {
            return "https://pi-" + (u.method.isTest ? "test" : "live") + ".sagepay.com/api/v1/" + e
        }
        function c() {
            try {
                return u.method.ccTypes || u.method.cc.types
            } catch (e) {
                return []
            }
        }
        function l() {
            try {
                return u.method.tokens
            } catch (e) {
                return []
            }
        }
        function d(e, t, n) {
            if ("sagepaynit" == u.paymentData.method) {
                if (n["continue"] = !1,
                !u.data.holderName) {
                    var o = t.getCheckoutData();
                    billingAddress = o.address.billing,
                    u.data.holderName = billingAddress ? billingAddress.firstname + " " + billingAddress.lastname : "N/A"
                }
                i.send(t.submissionStatus, {
                    path: "custom/tcosagepay/generateMerchantKey"
                }, function(e) {
                    function i(e) {
                        console.log("error result ", e),
                        t.submissionStatus.result = _.compact(_.map(e ? e.errors : ["ERROR"], function(e) {
                            return e.clientMessage || e.message
                        })).join(". "),
                        t.submissionStatus.busy = !1
                    }
                    var o = e.spMerchantKey;
                    if (u.data.token) {
                        var s = _.findWhere(u.tokens, {
                            id: u.data.token
                        }).token;
                        sagepayOwnForm({
                            merchantSessionKey: o
                        }).activateReusableCardIdentifier({
                            reusableCardIdentifier: s,
                            securityCode: u.data.token_cvv.replace(/\D/g, ""),
                            merchantSessionKey: o,
                            onActivated: function(e) {
                                e.success ? (u.paymentData.nit_card_identifier = s,
                                u.paymentData.sagepay_token_cc_id = void 0,
                                t.submissionStatus.busy = !1,
                                n.callback()) : i(e)
                            }
                        })
                    } else {
                        var a = u.data.number.replace(/\D/g, "");
                        sagepayOwnForm({
                            merchantSessionKey: e.spMerchantKey
                        }).tokeniseCardDetails({
                            cardDetails: {
                                cardholderName: u.data.holderName,
                                cardNumber: a,
                                expiryDate: u.data.expiryMonth + u.data.expiryYear,
                                securityCode: u.data.cvc.replace(/\D/g, "")
                            },
                            merchantSessionKey: o,
                            onTokenised: function(e) {
                                e.success ? (u.paymentData.nit_card_identifier = e.cardIdentifier,
                                u.paymentData.cc_type = u.data.cc_type,
                                u.paymentData.cc_exp_year = parseInt(u.data.expiryYear, 10) + 2e3,
                                u.paymentData.cc_exp_month = parseInt(u.data.expiryMonth, 10),
                                u.paymentData.cc_last_4 = ("" + a).slice(-4),
                                u.paymentData.remembertoken = !0,
                                t.submissionStatus.busy = !1,
                                n.callback()) : i(e)
                            }
                        })
                    }
                })
            }
        }
        var u = this;
        u.data = {},
        u.$onInit = s(),
        u.$onChanges = a,
        u.customer = n,
        e.$watch(function() {
            return u.data.number
        }, _.debounce(o, 500)),
        o(),
        e.$on("checkoutSubmitBefore", d)
    }
    angular.module("tcoStore").component("sagepayPiForm", {
        controller: e,
        controllerAs: "vm",
        templateUrl: "/3rdparty/sagepay/sagepay-pi-form.html",
        bindings: {
            form: "<",
            method: "<",
            paymentData: "<"
        }
    }),
    e.$inject = ["$scope", "tools", "customer", "request"]
}(),
function() {
    function e(e, t, n, i) {
        function o() {
            p(!1),
            a(),
            l().forEach(function(t) {
                v.data[t] = e.isAllowed(t)
            }),
            i.$on("privacySettings.show", c),
            v.acceptOnClick && e.needConfirmation() && document.addEventListener("click", s, !1)
        }
        function s() {
            h++,
            h > 1 ? (p(!1, !0),
            document.removeEventListener("click", s)) : e.needConfirmation() && f()
        }
        function a() {
            p(e.needConfirmation(), !0)
        }
        function r() {
            p(!1)
        }
        function c() {
            p(!0)
        }
        function l() {
            return e.getAreas()
        }
        function d(t) {
            return e.isRequired(t)
        }
        function u() {
            f()
        }
        function p(e, n) {
            void 0 === e && (e = !t.hasClass("ng-hide")),
            n && v.remove && !e ? t.remove() : t.toggleClass("ng-hide", !e)
        }
        function m() {
            l().forEach(function(t) {
                e.setPermission(t, !!v.data[t])
            }),
            v.acceptOnClick || r()
        }
        function f() {
            l().forEach(function(e) {
                v.data[e] = 1
            }),
            m()
        }
        function g() {
            l().forEach(function(e) {
                "core" === e ? v.data.core = 1 : v.data[e] = 0
            }),
            m()
        }
        var v = this
          , h = 0;
        v.data = {},
        v.$onInit = o,
        v.website = n,
        v.showIfNeeded = a,
        v.hide = r,
        v.getAreas = l,
        v.isRequired = d,
        v.toggle = p,
        v.save = m,
        v.closeFrame = u,
        v.allowAll = f,
        v.allowOnlyCore = g,
        v.needConfirmation = e.needConfirmation
    }
    tcoStore.component("privacySettings", {
        templateUrl: "/ui/page/privacy-settings.html",
        controller: e,
        controllerAs: "vm",
        bindings: {
            remove: "<",
            acceptOnClick: "<"
        }
    }),
    e.$inject = ["privacyService", "$element", "website", "$scope"]
}(),
function() {
    function e() {
        function e(e, t, n) {
            function i() {
                var e = {}
                  , t = ["S", "M", "L", "X"];
                _.each(n.sizeClass.split(","), function(n) {
                    if (n) {
                        var i, o = n.split(":", 2), s = o[0].toUpperCase().replace(" ", "").replace("A", t.join());
                        if (i = "!" == s[0] ? _.difference(t, s.substr(1).split("")) : s.split(""),
                        o[1]) {
                            var a = _.compact(o[1].split(" "));
                            _.each(i, function(t) {
                                e[t] = _.union(a, e[t])
                            })
                        }
                    }
                });
                var i = {};
                for (var o in e)
                    _.each(_.unique(e[o]), function(e) {
                        e && (i[e] || (i[e] = []),
                        i[e].push(o))
                    });
                a = i
            }
            function o() {
                i(),
                e.$on("resize", r),
                s()
            }
            function s() {
                var n;
                try {
                    n = e.$root.size
                } catch (i) {
                    n = "X"
                }
                for (var o in a)
                    t.toggleClass(o, a[o].indexOf(n) > -1)
            }
            var a, r = _.debounce(s, 100);
            o()
        }
        var t = {
            link: e,
            restrict: "A",
            scope: !1
        };
        return t
    }
    tcoStore.directive("sizeClass", e)
}(),
zippyFactory("zippy"),
staticBlockComponentFactory("staticBlock", {
    template: '<ng-include src="::vm.template" ></ng-include>',
    bindings: {
        custom: "<",
        template: "@"
    }
}),
zippyFactory("meganav", {
    hideOn: ["resize", "$stateChangeStart", "$routeChangeStart"]
}),
window.tcoStore.directive("action", ["$timeout", function(e) {
    return {
        restrict: "E",
        scope: {
            icon: "@",
            busy: "=",
            isDisabled: "=isDisabled",
            code: "="
        },
        transclude: !0,
        replace: !0,
        template: '<span class=" button " ng-class="{busy:busy, success : success && !busy, error : error && !busy, \'has-icon\' : icon, disabled : isDisabled}" role="button" tabindex="0"><span class="icon icon-{{icon}} c-base" ng-if="icon" ></span><span class="c-busy"><span class="bounce1"></span><span class="bounce2"></span></span><span class="icon icon-success c-success"></span><span class="icon icon-failure c-error"></span><ng-transclude class="c-body" /></span>',
        link: function(t, n) {
            var i, o = function(n, o) {
                !_.isUndefined(o) && o && (t.error = t.success = !1,
                t[n] = !0,
                e.cancel(i),
                i = e(function() {
                    t[n] = !1
                }, 2e3))
            };
            t.$watch("code", function(e) {
                e ? e.match(/SUCCESS/) ? o("success", !0) : o("error", !0) : o("error", !1)
            })
        }
    }
}
]),
window.tcoStore.directive("actionSingleton", function() {
    return {
        restrict: "E",
        scope: {
            icon: "@",
            action: "@",
            actionClass: "@",
            resultClass: "@",
            successMessage: "@",
            onSuccess: "&",
            onError: "&",
            trigger: "="
        },
        transclude: !0,
        template: ['<action class="{{actionClass}}" code="code" busy="busy" ng-click="_submit()" ng-touch="_submit()" icon="{{icon}}"><ng-transclude /></action>', '<result class="{{resultClass}}" code="code" success="{{successMessage}}"></result>'].join(""),
        controller: ["$scope", function(e) {
            function t() {
                try {
                    e.onError({
                        code: e.code
                    })
                } catch (t) {}
            }
            function n(t) {
                try {
                    e.onSuccess({
                        result: t
                    })
                } catch (n) {}
            }
            e.code = "",
            e.busy = "",
            e._submit = _.throttle(function() {
                if (e.busy)
                    return !1;
                e.code = "";
                var i = e.$parent.$eval(e.action);
                if (i) {
                    if (_.isString(i))
                        return void (e.code = i);
                    e.busy = !0,
                    i.success(function(i) {
                        !_.isObject(i) || _.isArray(i) ? (e.code = "ERROR",
                        t()) : i.error ? (e.code = i.error,
                        t()) : (e.code = "SUCCESS",
                        n(i)),
                        e.busy = !1
                    }),
                    i.error(function(n) {
                        var i;
                        try {
                            if (!_.isString(n.error))
                                throw 1;
                            i = n.error
                        } catch (o) {
                            i = "ERROR"
                        }
                        e.code = i,
                        e.busy = !1,
                        t()
                    })
                }
            }, 200),
            e.$watch("trigger", function(t) {
                t && (e._submit(),
                e.trigger = null)
            })
        }
        ]
    }
}),
window.tcoStore.directive("checkbox", function() {
    var e = 0
      , t = {
        model: "=",
        varName: "@",
        required: "=",
        form: "=",
        value: "=",
        falseValue: "=",
        type: "@"
    }
      , n = '<div ><label ng-if="!arrayType" class=" checkbox " for="_{{::name}}" ng-class="{checked:checked, prepared : prepared}"><span class="icon" ng-class="{\'icon-checkbox-checked\' : checked, \'icon-checkbox-unchecked\' : !checked}" ></span><ng-transclude class="c-body" /></label><span ng-if="arrayType" class=" checkbox " ng-click="toggle()" ng-touch="toggle()" for="_{{::name}}" ng-class="{checked:checked, prepared : prepared}"><span class="icon" ng-class="{\'icon-checkbox-checked\' : checked, \'icon-checkbox-unchecked\' : !checked}" ></span><ng-transclude class="c-body" /></span><input ng-if="!error&&!arrayType" type="checkbox" id="_{{::name}}" name="{{::name}}" ng-required="required" class="ng-hide" ng-true-value="{{::valueTrue}}" ng-false-value="{{::valueFalse}}" ng-model="model[varName]"/><span ng-if="!error&&!arrayType"  field-notice="{{::name}}" form="form"></span></div>'
      , i = ["$scope", function(t) {
        if (t.name = "checkbox" + e++,
        _.isUndefined(t.model) || _.isUndefined(t.varName))
            return console.error("invalid checkbox[" + t.name + "], missing model:", t.model, " or varName: ", t.varName),
            void (t.error = !0);
        t.arrayType = !_.isUndefined(t.type) && "array" == t.type,
        t.valueTrue = _.isUndefined(t.value) ? 1 : t.value,
        t.valueFalse = _.isUndefined(t.falseValue) ? 0 : t.falseValue;
        var n = function() {
            var e = t.model[t.varName];
            t.arrayType ? (_.isUndefined(e) && (e = t.model[t.varName] = []),
            t.checked = e.indexOf(t.valueTrue) > -1) : t.checked = e === t.valueTrue,
            window.setTimeout(function() {
                t.prepared = 1
            }, 100)
        };
        t.toggle = _.throttle(function() {
            return t.arrayType && (t.checked ? t.model[t.varName] = _.without(t.model[t.varName], t.valueTrue) : t.model[t.varName].push(t.valueTrue)),
            !0
        }, 300),
        t.$watch(function() {
            return t.model[t.varName]
        }, n, !0)
    }
    ];
    return {
        restrict: "E",
        scope: t,
        transclude: !0,
        replace: !0,
        template: n,
        controller: i
    }
}),
window.tcoStore.directive("radio", function() {
    var e = 0
      , t = {
        model: "=",
        required: "=?",
        disabled: "=?",
        name: "@",
        numeric: "=?",
        value: "=",
        noToggle: "@"
    }
      , n = '<div><label class=" radio " ng-class="{disabled: disabled, checked:checked}" ng-click="toggle()" ng-touch="toggle()" ><span class="icon" ng-class="{\'icon-radio-checked\' : checked, \'icon-radio-unchecked\' : !checked}" ></span><ng-transclude class="c-body" /></label><input type="radio" name="{{::name || defaultName}}" ng-model="model" ng-required="required" class="ng-hide" ng-value="valueTrue" ng-disabled="disabled" /></div>'
      , i = function(t, n) {
        t.defaultName = "radio" + e++,
        t.valueTrue = _.isUndefined(t.value) ? 1 : t.value;
        var i = function() {
            if (tco.empty(t.disabled)) {
                var e, n;
                tco.empty(t.numeric) ? (e = t.valueTrue,
                n = t.model) : (e = parseInt(t.valueTrue, 10),
                n = parseInt(t.model, 10)),
                t.checked = n === e || !e && !n
            }
        };
        t.toggle = _.throttle(function() {
            if (tco.empty(t.disabled)) {
                var e = t.noToggle ? !0 : !t.checked;
                t.model = e ? t.valueTrue : t.valueFalse
            }
        }, 300),
        t.$watch("model", i, !0)
    };
    return {
        restrict: "E",
        scope: t,
        transclude: !0,
        replace: !0,
        template: n,
        link: i
    }
}),
window.tcoStore.directive("result", ["$timeout", "localConfig", function(e, t) {
    var n = tco.pathVal(t, "resultCloseDelay") || 1e4;
    return {
        restrict: "E",
        scope: {
            code: "=",
            success: "@"
        },
        transclude: !0,
        template: '<div ng-cloak class="ng-hide btn-result" ng-class="{\'notice-error\' : isError, \'notice-success\' : isSuccess}" ng-show="canShow()" ng-bind-html="code | notice : success"></div>',
        link: function(t, i) {
            t.currentCode = null,
            t.canShow = function() {
                if (t.currentCode) {
                    if (t.isSuccess && "false" != t.success && " " != t.success)
                        return !0;
                    if (t.isError)
                        return !0
                }
                return !1
            }
            ;
            var o;
            t.$watch("code", function(i) {
                e.cancel(o),
                i ? (t.currentCode = i,
                o = e(function() {
                    t.currentCode = null
                }, n)) : t.currentCode = null
            }),
            t.$watch("currentCode", function(e) {
                t.isSuccess = e && (e.match(/SUCCESS/) ? !0 : !1),
                t.isError = e && !t.isSuccess
            })
        }
    }
}
]),
window.tcoStore.directive("selection", function() {
    var e = {
        model: "=",
        varName: "@",
        required: "=",
        options: "=",
        placeholder: "@",
        value: "@",
        label: "@"
    }
      , t = '<div class=" selection selection-items-length--{{items.length}} " ng-class="{open : open}"  off-click="open = false"><input type="hidden" name="{{::name}}" ng-required="required" value="{{current.value}}"/><span class=" selection__current" ng-click="toggle()" ng-touch="toggle()" ng-bind="current ? current.label : placeholder"></span><div class="selection__options" ><div class="selection__options-item" ng-repeat="item in items" ng-bind="item.label" ng-click="pick(item)" ng-touch="pick(item)" ng-class="{selected : item.value == current.value, disabled : item.isDisabled}"></div></div></div>'
      , n = ["$scope", function(e) {
        e.open = !1,
        e.toggle = function() {
            e.open = !e.open
        }
        ;
        var t = function() {
            var t = e.model[e.varName];
            e.current = _.findWhere(e.items, {
                value: t
            })
        };
        e.$watch("model." + e.varName, t, !0),
        e.pick = function(t) {
            t.isDisabled || (e.model[e.varName] = t.value,
            e.open = !1)
        }
        ,
        e.$watch("options", function(n) {
            var i, o, s = [], a = n.length;
            for (i = 0; a > i; i++)
                o = {},
                o.label = n[i][tco.pathVal(e, "label") || "label"],
                o.value = n[i][tco.pathVal(e, "value") || "value"],
                o.isDisabled = n[i][tco.pathVal(e, "isDisabled") || "isDisabled"],
                s.push(o);
            dispose(e.items),
            e.items = s,
            t()
        })
    }
    ];
    return {
        restrict: "E",
        scope: e,
        transclude: !0,
        replace: !0,
        template: t,
        controller: n
    }
}),
window.tcoStore.directive("carousel", function() {
    var e = "carousel-backward"
      , t = "no-transition"
      , n = "active"
      , i = "previous"
      , o = "next"
      , s = function(n, i) {
        i.addClass("carousel"),
        n.holdTransition = function() {
            i.addClass(t)
        }
        ,
        n.unholdTransition = function() {
            i.removeClass(t)
        }
        ,
        n.setBackward = function() {
            i.addClass(e)
        }
        ,
        n.setForward = function() {
            i.removeClass(e)
        }
    }
      , a = ["$scope", "$rootScope", "$interval", "$filter", function(e, s, a, r) {
        function c() {
            var t;
            t = _.isUndefined(e.media) ? [] : angular.copy(e.limit ? _.first(e.media, e.limit) : e.media),
            _.isUndefined(e.labels) || (t = r("mediaLabelFilter")(t, e.labels));
            var n = _.pluck(t, "image")
              , i = _.pluck(e.images, "image");
            if (_.isEqual(n, i))
                delete t;
            else {
                delete e.images;
                for (var o = 0; o < t.length; o++)
                    t[o].index = o;
                e.images = t,
                total = e.images.length,
                e.hasImages = total > 0,
                e.single = 1 == total,
                e.goTo(0, !0)
            }
        }
        var l = _.isUndefined(e.loop) ? !0 : parseInt(e.loop, 10)
          , d = [];
        e.currentSlide = 0;
        var u = !1
          , p = null
          , m = !1;
        _.isUndefined(e.templateUrl) && (e.templateUrl = "/views/widget/carousel.html"),
        e.parentScope = e.$parent,
        this.addSlide = function(e) {
            d.push(e),
            0 === (e.index = d.length - 1) && e.elem.addClass(t).addClass(n).removeClass(t)
        }
        ,
        this.removeSlide = function(e) {
            d = _.without(d, e)
        }
        ;
        var f = function() {
            _.isUndefined(e.images) || _.isUndefined(e.images[e.currentSlide]) || s.$broadcast("carouselImageSelected", e.carouselId, e.images[e.currentSlide])
        };
        f(),
        e.goTo = function(t, s) {
            if (e.$root.$broadcast("carouselGoTo", e.carouselId, t, s),
            d.length < 2 || 1 === d.length)
                return void (e.currentSlide = 0);
            m = !0;
            var a, r = e.currentSlide < t, c = d.length - 1;
            if (t > c) {
                if (!l)
                    return;
                t = 0
            } else if (0 > t) {
                if (!l)
                    return;
                t = c
            }
            e.holdTransition();
            var a;
            for (a = d.length - 1; a >= 0; a--)
                d[a].elem.removeClass(i).removeClass(o);
            r ? e.setForward() : e.setBackward(),
            window.setTimeout(function() {
                try {
                    e.unholdTransition(),
                    e.currentSlide == t || _.isUndefined(d[e.currentSlide]) || d[e.currentSlide].elem.removeClass(n),
                    d[t].elem.addClass(n),
                    e.currentSlide = t;
                    var s = t + 1 >= d.length ? 0 : t + 1;
                    d[s].elem.addClass(o);
                    var a = 0 > t - 1 ? d.length - 1 : t - 1;
                    d[a].elem.addClass(i),
                    e.isFirst = 0 === e.currentSlide,
                    e.isLast = e.currentSlide === c,
                    e.$phase || e.$root.$phase || e.$apply(),
                    f()
                } catch (r) {}
            }, 300)
        }
        ,
        this.goTo = e.goTo,
        e.next = function() {
            e.goTo(e.currentSlide + 1)
        }
        ,
        e.prev = function() {
            e.goTo(e.currentSlide - 1)
        }
        ,
        e.pause = function() {
            u = !0
        }
        ,
        this.pause = e.pause,
        e.unpause = function() {
            u = !1
        }
        ;
        var g = function() {
            m || u || e.next(),
            m = !1
        }
          , v = function() {
            a.cancel(p)
        };
        e.$watch("interval", function() {
            v(),
            !_.isUndefined(e.interval) && e.interval && (p = a(g, e.interval))
        }),
        e.$on("$destroy", v);
        var h = _.debounce(c, 50);
        e.$watch("media", h),
        e.$watch("labels", h),
        e.$watch("main", h),
        e.$watch(function() {
            return d.length
        }, _.debounce(function(t) {
            (!e.currentSlide || t <= e.currentSlide) && e.goTo(0, !0)
        }, 100))
    }
    ];
    return {
        restrict: "A",
        scope: {
            loop: "@",
            interval: "@",
            templateUrl: "@template",
            slides: "=",
            media: "<",
            alt: "<",
            product: "<",
            labels: "<",
            limit: "<",
            custom: "=?",
            goTo: "=?",
            carouselId: "@"
        },
        template: '<div ng-include="templateUrl" ></div>',
        controller: a,
        link: s
    }
}),
window.tcoStore.directive("slide", function() {
    var e = 1
      , t = function(t, n, i, o) {
        var s = {
            id: e,
            elem: n
        };
        o.addSlide(s),
        t.$on("$destroy", function() {
            o.removeSlide(s)
        }),
        e++,
        n.addClass("carousel-slide")
    };
    return {
        require: "^^carousel",
        restrict: "A",
        link: t
    }
}),
window.tcoStore.service("adminService", ["$rootScope", "config", "router", function(e, t, n) {
    function i() {
        return t.isDeveloper
    }
    function o(e) {
        return void 0 === e && (e = n.model),
        e
    }
    function s(e) {
        if (e = o(e))
            switch (e.className) {
            case "product":
                return l + "catalog_product/edit/id/" + e.id + "/";
            case "page":
            case "post":
                return d + "post.php?post=" + e.id + "&action=edit";
            case "postCategory":
                return d + "edit-tags.php?taxonomy=category";
            case "category":
                return l + "catalog_category/"
            }
    }
    function a(e) {
        if (e = o(e)) {
            var t = [];
            if (e.className) {
                t.push(e.className);
                var n = e.data;
                n && (n.id && t.push(n.id),
                n._updated_at && t.push("@" + n._updated_at),
                n.parent && (t.push("parent:"),
                t.push(n.parent)))
            }
            return t.join(" ")
        }
    }
    var r = {
        isAllowed: i,
        getEditLink: s,
        getBasicInfoString: a
    }
      , c = t.api.host.replace(/:\/\/www./, "://").replace(/\/api\/?/, "")
      , l = c.replace(/:\/\//, "://mage.") + "/index.php/tcadmin/"
      , d = c.replace(/:\/\//, "://blog.") + "/wp-admin/";
    return r
}
]),
window.tcoStore.directive("adminToolbar", ["adminService", function(e) {
    function t(t, n) {
        e.isAllowed() || n.remove()
    }
    var n = ["$scope", function(t) {
        function n() {
            t.editLink = e.getEditLink(),
            t.basicInfo = e.getBasicInfoString()
        }
        if (e.isAllowed()) {
            var i = "calc(100% - 2em)";
            t.styles = {
                "z-index": 500,
                "font-family": "'Lato', 'Helvetica Neue', Arial, sans-serif",
                "border-bottom": "2px solid #dd425d",
                position: "fixed",
                display: "flex",
                "font-size": "16px",
                "font-weight": "bold",
                background: "white",
                transition: "left 0.5s ease",
                color: "#333",
                left: i,
                width: "100%",
                top: 0,
                padding: "0.5em"
            },
            t.isHidden = !0,
            t.toggle = _.throttle(function() {
                t.styles.left = t.isHidden ? 0 : i,
                t.isHidden = !t.isHidden
            }, 400),
            t.$on("routerDataPatched", n),
            t.$on("$routeChangeSuccess", n),
            t.$on("$routeChangeError", n)
        }
    }
    ];
    return {
        restrict: "AE",
        scope: !0,
        template: '        <div ng-style="styles">            <span ng-click="toggle()" style="cursor:pointer;" ng-bind="isHidden?\'<<\':\'hide&nbsp;>>\'"></span>            <span style="margin:0 2em;">Tom&Co</span>            <div style="text-align:center; width:100%;">                <span style="margin:0 2em; font-weight:300;" ng-bind="basicInfo"></span>            </div>            <a style="maring:0 2em" ng-href="{{editLink}}" target="_blank" ng-if="editLink">Edit</a>            <a style="margin:0 2em" ng-href="{{editLink}}" target="_blank" ng-if="editLink">Reindex</a>        </div>',
        controller: n,
        link: t
    }
}
]),
function() {
    function e(e, t) {
        function n(e) {
            var n = t.GetCardType(e);
            try {
                if (!n || !a.method.cc.types[n])
                    throw 1;
                a.cardNotMatched = 0,
                a.cc_type = n
            } catch (i) {
                a.cardNotMatched = 1
            }
        }
        function o() {
            a.months = [{
                value: 1,
                label: "01 - January"
            }, {
                value: 2,
                label: "02 - February"
            }, {
                value: 3,
                label: "03 - March"
            }, {
                value: 4,
                label: "04 - April"
            }, {
                value: 5,
                label: "05 - May"
            }, {
                value: 6,
                label: "06 - June"
            }, {
                value: 7,
                label: "07 - July"
            }, {
                value: 8,
                label: "08 - August"
            }, {
                value: 9,
                label: "09 - September"
            }, {
                value: 10,
                label: "10 - October"
            }, {
                value: 11,
                label: "11 - November"
            }, {
                value: 12,
                label: "12 - December"
            }];
            var e, t = [], n = (new Date).getFullYear();
            for (e = 0; 10 > e; e++)
                t.push(n + e);
            a.years = t;
            var i = window.document.getElementsByTagName("script")[0]
              , o = window.document.createElement("script");
            o.src = "/lib/adyen.encrypt_0_1_18.js",
            i.parentNode.insertBefore(o, i)
        }
        function s() {
            var e = adyen.encrypt.createEncryption(a.method.key, {})
              , t = {};
            for (i in a.data)
                t[i] = a.data[i].toString();
            a.paymentData.encrypted_data = e.encrypt(t)
        }
        var a = this
          , r = new Date;
        a.data = {
            generationtime: r.toISOString()
        },
        o(),
        e.$watch(function() {
            return a.data.number
        }, n),
        e.$root.$on("checkoutSubmitBefore", s)
    }
    tcoStore.component("adyenCcForm", {
        controller: e,
        templateUrl: "/views/checkout/form/payment-methods/adyen-cc.html",
        bindings: {
            method: "=",
            paymentData: "="
        }
    }),
    e.$inject = ["$scope", "tools"]
}(),
window.tcoStore.directive("sticky", function() {
    var e = function(e, t, n, i) {
        function o() {
            m(),
            f()
        }
        function s() {
            var e = c.getBoundingClientRect()
              , i = r.getBoundingClientRect()
              , o = l.getBoundingClientRect()
              , s = Math.round
              , m = o.height - i.height + o.top;
            c.setAttribute("style", "display: block; height: " + i.height + "px");
            var f = 0;
            if (a) {
                var g = a.getBoundingClientRect();
                f = g.height
            }
            var v = f
              , h = 0;
            if (d) {
                var b = d.getBoundingClientRect();
                h = o.bottom - b.top,
                m -= h
            }
            var w = void 0 === n.top ? s((f || e.top - o.top) + p) : n.top
              , y = s(e.left)
              , _ = s(e.width)
              , k = []
              , S = e.top < v && m >= 0;
            if (S && (k.push("position:fixed"),
            n.transition && k.push("transition:" + n.transition + "s ease"),
            k.push("top:" + Math.min(w, m) + "px"),
            k.push("left:" + y + "px"),
            k.push("width:" + _ + "px")),
            n.scroll) {
                var $ = window.innerHeight || document.documentElement.clientHeight
                  , x = Math.max(0, $ - b.top)
                  , C = (window.innerHeight || document.documentElement.clientHeight) - (S ? w : i.top) - x;
                k.push("max-height:" + Math.round(C) + "px"),
                k.push("overflow-y:auto")
            }
            var D = k.join(";");
            u != D && (u = D,
            r.setAttribute("style", D),
            t.toggleClass("is-sticky", S))
        }
        t.wrap('<sticky-container style="display:block"></sticky-container>');
        var a, r = t[0], c = r.parentNode, l = document.body;
        n.offsetSectionId && (a = document.getElementById(n.offsetSectionId));
        var d;
        n.bottomSectionId && (d = document.getElementById(n.bottomSectionId));
        var u, p = n.shift ? parseInt(n.shift, 10) : 0, m = _.throttle(s, 50), f = _.throttle(s, 100);
        window.addEventListener("resize", o),
        window.addEventListener("scroll", o),
        window.addEventListener("touchmove", o),
        o(),
        window.setTimeout(o, 500),
        e.$on("$destroy", function() {
            window.removeEventListener("resize", o),
            window.removeEventListener("scroll", o),
            window.removeEventListener("touchmove", o)
        }),
        e.$on("stickyCheckRequest", o)
    };
    return {
        restrict: "EA",
        link: e
    }
}),
window.tcoStore.directive("rating", function() {
    return {
        restrict: "EA",
        scope: {
            rate: "=",
            max: "=",
            classFull: "@",
            classEmpty: "@",
            classHalf: "@"
        },
        template: "<div><span ng-repeat=\"star in stars track by $index\" class=\"rating-star {{$index<rateFull ? classFull||'full' : ($index<rateHalf ? classHalf||'half' : classEmpty||'')}}\"></span></div>",
        replace: !0,
        controller: ["$scope", function(e) {
            _.defaults(e, {
                max: 5,
                rate: 0
            }),
            e.$watch("rate", function() {
                e.rateHalf = Math.ceil(e.rate - .249),
                e.rateFull = Math.floor(e.rate + .25)
            }),
            e.$watch("max", function() {
                e.stars = _.range(e.max)
            })
        }
        ]
    }
}),
function() {
    function e(e, t, n, i, o, s) {
        function a() {
            e.$on("checkout2.init", function() {
                b.checkoutData = t.getCheckoutData()
            }),
            t.init(),
            c(),
            u(),
            f(),
            g(),
            v(),
            e.$on("basketDataUpdate", t.reSave),
            e.$on("checkoutDataUpdate", t.reCheckCheckout),
            e.$on("$destroy", t.onDestroy),
            e.$root.$broadcast("checkout.component.init", b, e)
        }
        function r() {
            function i() {
                h.hold = !0;
                var e = t.submit();
                return e && e.error(function() {
                    h.hold = !1
                }),
                e
            }
            if (!n.isCheckoutValid)
                return _.each(n.steps, function(e) {
                    e.form.submitted = !0
                }),
                void s.scrollToError();
            var o = {
                "continue": !0,
                callback: i
            };
            return e.$root.$broadcast("checkoutSubmitBefore", t, o),
            o["continue"] ? o.callback() : void 0
        }
        function c() {
            e.$on("checkoutDataUpdate", d),
            e.$watch(l, d),
            d()
        }
        function l() {
            try {
                return b.checkoutData.shipping.method
            } catch (e) {
                return void 0
            }
        }
        function d() {
            try {
                b.shippingMethod = _.findWhere(o.checkout.data.shipping.methods, {
                    code: l()
                })
            } catch (e) {
                return void 0
            }
        }
        function u() {
            e.$on("checkoutDataUpdate", m),
            e.$watch(p, m),
            m()
        }
        function p() {
            try {
                return b.checkoutData.payment.method
            } catch (e) {
                return void 0
            }
        }
        function m() {
            try {
                b.paymentMethod = _.findWhere(o.checkout.data.payment.methods, {
                    code: p()
                })
            } catch (e) {
                return void 0
            }
        }
        function f() {
            function n(e) {
                var t = b.checkoutData.address.billing;
                if (e) {
                    var n = t.customer_address_id;
                    (n > 0 || !n) && (t.customer_address_id = -1)
                } else
                    -1 == t.customer_address_id && (t.customer_address_id = 0)
            }
            e.$watch(function() {
                return b.checkoutData.address.billing.customer_address_id
            }, function(e) {
                var t = b.checkoutData.billing;
                (e > 0 || 0 === e) && t.to_shipping && (t.to_shipping = 0),
                (null === e || void 0 === e) && n(t.to_shipping)
            }, !0),
            e.$watch(function() {
                return b.checkoutData.billing.to_shipping
            }, n, !0),
            e.$watch(function() {
                return t.hasDeliveryAddress()
            }, function(e) {
                if (!e) {
                    var t = b.checkoutData.billing;
                    t.to_shipping && (t.to_shipping = 0)
                }
            })
        }
        function g() {
            function t() {
                var e;
                try {
                    e = _.pluck(o.address.list, "id")
                } catch (t) {
                    e = []
                }
                _.each(["shipping", "billing"], function(t) {
                    var n = b.checkoutData.address[t];
                    if (n) {
                        var i = n.customer_address_id;
                        if (i && -1 == e.indexOf(i)) {
                            for (var s in n)
                                n[s] = null;
                            _.extend(n, o.checkout.data.quote.address[t])
                        }
                    }
                })
            }
            e.$on("addressDataUpdate", t),
            t()
        }
        function v() {
            _.each(t.config.saveTriggers, function(n) {
                e.$watch(function() {
                    try {
                        return _.reduce(n.split("."), function(e, t) {
                            return e[t]
                        }, b.checkoutData)
                    } catch (e) {
                        return void 0
                    }
                }, function(e, n) {
                    (e || n) && e != n && t.reSaveDebounced()
                })
            })
        }
        var h = i.makeSure("hasItemsInBasket", e)
          , b = this;
        b.stepService = n,
        b.customer = o,
        b.checkout = t,
        e.$on("checkoutUnhold", t.unhold),
        e.$on("$destroy", t.cancelSave),
        b.submit = r,
        b.status = t.status,
        b.submissionStatus = t.submissionStatus,
        a()
    }
    tcoStore.controller("CheckoutController", e),
    e.$inject = ["$scope", "checkout2", "checkout2Steps", "check", "customer", "tools"]
}(),
function() {
    var e = {
        saveTriggers: ["address.shipping.country_id", "address.shipping.postcode", "address.shipping.customer_address_id", "shipping.method"],
        checkout2saveOnStepChange: !1,
        collectionMethods: ["storepickup_storepickup"],
        steps: ["account", "delivery", "payment"]
    };
    tcoStore.constant("checkout2config", e)
}(),
function() {
    var e = {
        account: 0,
        register: 0,
        newsletter: 0,
        address: {
            billing: {
                to_shipping: 1
            },
            shipping: {}
        },
        billing: {},
        shipping: {},
        payment: {},
        gift: {},
        dispatchdeliverydate: {},
        multishipping: !1
    };
    tcoStore.constant("checkout2defaults", e)
}(),
function() {
    function e(e, t, n, i, o, s, a, r, c, l) {
        function d(e) {
            W = e
        }
        function u() {
            return W
        }
        function p() {
            window.angular.element(document.body).removeClass("page-checkout"),
            m(),
            d(),
            X = !1
        }
        function m() {
            Y.busy && z.cancel()
        }
        function f() {
            return N
        }
        function g() {
            window.angular.element(document.body).addClass("page-checkout"),
            v(Y),
            v(G),
            j = !1,
            Q = !1;
            var n = {};
            n = _.defaults(n, e.defaultCheckoutData),
            n = _.defaults(n, t);
            var o = angular.copy(n);
            N = _.defaults(i.checkout.data.quote || {}, o),
            delete o,
            delete n,
            X = !0,
            c.$broadcast("checkout2.init"),
            c.$on("customerLoggedOut", function() {
                d()
            })
        }
        function v(e) {
            e.busy = !1,
            e.result = null
        }
        function h() {
            if (X && !Q) {
                var e;
                try {
                    e = i.checkout.data.quote.quote_id
                } catch (t) {
                    e = void 0
                }
                return e != N.quote_id ? (g(),
                !0) : !1
            }
        }
        function b(e) {
            if (X && !j && !Q && !K.getEngine() && !G.busy) {
                var t = angular.toJson(N);
                return !e && z && H == t ? z : (H = null,
                m(),
                Y.result = null,
                z = i.checkout.save(N, Y),
                z.success(function() {
                    H = t
                }),
                z)
            }
        }
        function w() {
            return m(),
            b(!0)
        }
        function y() {
            return !X || j || Q || K.getEngine() || Y.busy || G.busy ? void 0 : (C(),
            G.result = null,
            F = i.checkout.order(N, G),
            F.success(k),
            F.error(S),
            F)
        }
        function k(e) {
            if (e.external_redirect)
                return void (window.location.href = e.external_redirect);
            if (e.external_post) {
                var t = e.external_post.modal;
                return void (t ? o.open({
                    template: '<iframe name="checkout_modal_iframe" src="about:blank" ></iframe><meta ng-init="start()"/>',
                    controller: ["$scope", "http", function(t, n) {
                        t.start = function() {
                            setTimeout(function() {
                                n.postLikeForm(e.external_post.action, e.external_post.data, {
                                    target: "checkout_modal_iframe"
                                })
                            }, 800)
                        }
                    }
                    ],
                    className: "modal-" + t,
                    plain: !0,
                    showClose: !1,
                    closeByDocument: !1
                }) : l.postLikeForm(e.external_post.action, e.external_post.data))
            }
            s.url("/checkout/success"),
            M()
        }
        function S(e) {
            try {
                if ("REDIRECT_CART" == e.error)
                    return s.url(a.getStandardRoutePath("/basket")),
                    void M()
            } catch (t) {}
            D(),
            h()
        }
        function $() {
            m(),
            window.clearTimeout.cancel(B),
            B = window.setTimeout(x, 5e3),
            j = !0
        }
        function x() {
            j = !1
        }
        function C() {
            window.clearTimeout(V),
            Q = !0
        }
        function D() {
            window.clearTimeout(V),
            Q = !1
        }
        function M() {
            window.clearTimeout(V),
            V = window.setTimeout(D, 5e3)
        }
        function I() {
            return J.collectionMethods || []
        }
        function U() {
            var e = I();
            return e.length ? _.intersection(e, _.pluck(i.checkout.data.shipping.methods, "code")).length > 0 : !1
        }
        function O() {
            if (!N.shipping.method)
                return !1;
            var e = I();
            return e.indexOf(N.shipping.method) > -1
        }
        function T() {
            try {
                return i.checkout.data.quote.isVirtual
            } catch (e) {
                return !1
            }
        }
        function P() {
            return !T() && !O()
        }
        function A(e) {
            void 0 === e && (e = !r.guestCheckout),
            r.guestCheckout = e
        }
        function q() {
            return _.findWhere(L(), {
                code: E()
            })
        }
        function E() {
            try {
                return N.shipping.method
            } catch (e) {
                return void 0
            }
        }
        function L() {
            try {
                return i.checkout.data.shipping.methods
            } catch (e) {
                return []
            }
        }
        function R() {
            try {
                return i.data.email || N.account.email || N.email || N.address.billing.email
            } catch (e) {
                return void 0
            }
        }
        var N, z, F, j, B, V, H, W, Y = {}, G = {}, Q = !1, X = !1, J = _.extend(_.extend({}, n), e.checkout2), K = {
            init: g,
            onDestroy: p,
            getCheckoutData: f,
            cancelSave: m,
            status: Y,
            submissionStatus: G,
            hold: $,
            unhold: x,
            save: b,
            reSave: w,
            reSaveDebounced: _.debounce(w, 1e3),
            submit: y,
            isCollectionMethodPicked: O,
            isVirtual: T,
            hasDeliveryAddress: P,
            hasCollectionMethods: U,
            toggleGuestCheckout: A,
            getShippingMethod: q,
            getShippingMethodCode: E,
            getShippingMethods: L,
            reCheckCheckout: h,
            getEmail: R,
            config: J,
            setEngine: d,
            getEngine: u
        };
        return K
    }
    tcoStore.service("checkout2", e),
    e.$inject = ["localConfig", "checkout2defaults", "checkout2config", "customer", "ngDialog", "$location", "tcoStoreRoutes", "$sessionStorage", "$rootScope", "http"]
}(),
function() {
    var e = ["$scope", "checkout2", function(e, t) {
        function n() {
            i.condition = t.isVirtual()
        }
        var i = this;
        e.$on("checkoutDataUpdate", n),
        n()
    }
    ];
    tco.createIfDirective("ifVirtual", e, !1),
    tco.createIfDirective("ifNotVirtual", e, !0)
}(),
function() {
    function e(e, t, n) {
        function i() {
            return c.addresses && c.addresses.length ? !0 : "billing" == c.type && n.hasDeliveryAddress() ? !0 : !1
        }
        function o() {
            return c.data.customer_address_id && (c.addresses && c.addresses.length || "billing" == c.type && n.hasDeliveryAddress()) ? !1 : !0
        }
        function s() {
            return "billing" != c.type ? !1 : "billing" != c.type ? !1 : n.hasDeliveryAddress() ? !0 : !1
        }
        function a() {
            e.$on("checkout2.init", function() {
                c.checkoutData = n.getCheckoutData()
            }),
            c.checkoutData = n.getCheckoutData(),
            e.$on("addressDataUpdate", r),
            r()
        }
        function r() {
            c.addresses = t.address.list
        }
        var c = this;
        e.$on("addressDataUpdate", a),
        c.shouldShowList = i,
        c.shouldShowForm = o,
        c.shouldShowToShipping = s,
        a()
    }
    tcoStore.component("checkout2Address", {
        controller: e,
        templateUrl: "/views/checkout/form/address.html",
        bindings: {
            data: "=",
            form: "=",
            type: "@",
            custom: "=?"
        }
    }),
    e.$inject = ["$scope", "customer", "checkout2"]
}(),
function() {
    function e(e, t) {
        function n() {
            try {
                return t.checkout.data.quote.shipping.method
            } catch (e) {
                return null
            }
        }
        function i() {
            o.checkoutTotals = t.checkout.data.totals,
            o.basketTotals = t.basket.data.totals,
            o.anyTotals = o.checkoutTotals || o.basketTotals,
            o.hasShipping = n() ? !0 : !1
        }
        var o = this
          , s = _.debounce(i, 20);
        o.customer = t,
        e.$on("checkoutDataUpdate", s),
        e.$on("basketDataUpdate", s),
        s()
    }
    tcoStore.component("checkout2Totals", {
        controller: e,
        templateUrl: "/views/checkout/form/totals.html",
        bindings: {
            custom: "=?"
        }
    }),
    e.$inject = ["$scope", "customer"]
}(),
function() {
    function e(e, t, n, i) {
        function o() {
            return n.steps[c.stepName].vm
        }
        function s() {
            o().goTo()
        }
        function a() {
            c.backendSource || (e.$on("checkout2.init", function() {
                c.checkoutData = t.getCheckoutData()
            }),
            c.checkoutData = t.getCheckoutData()),
            e.$on("checkoutDataUpdate", r),
            e.$watch(t.getShippingMethodCode, r),
            r()
        }
        function r() {
            c.shippingMethod = t.getShippingMethod(),
            c.backendSource && (c.checkoutData = i.checkout.data.quote)
        }
        var c = this;
        c.goTo = s,
        c.change = s,
        c.$onInit = a
    }
    tcoStore.component("checkout2DeliveryStatus", {
        controller: e,
        templateUrl: "/views/checkout/status/delivery.html",
        bindings: {
            stepName: "@",
            backendSource: "@"
        },
        controllerAs: "vm"
    }),
    e.$inject = ["$scope", "checkout2", "checkout2Steps", "customer"]
}(),
function() {
    function e(e, t, n, i) {
        function o() {
            return n.steps[c.stepName].vm
        }
        function s() {
            o().goTo()
        }
        function a() {
            return s(),
            e.data.logged ? e.logoutWithCheckout({
                preserve_quote: !0
            }) : (t.toggleGuestCheckout(!1),
            void s())
        }
        function r() {
            i.$on("checkout2.init", function() {
                c.checkoutData = t.getCheckoutData()
            }),
            c.checkoutData = t.getCheckoutData()
        }
        var c = this;
        test = this,
        c.goTo = s,
        c.change = a,
        c.getEmail = t.getEmail,
        r()
    }
    tcoStore.component("checkout2LoginStatus", {
        controller: e,
        templateUrl: "/views/checkout/status/login.html",
        bindings: {
            stepName: "@"
        },
        controllerAs: "vm"
    }),
    e.$inject = ["customer", "checkout2", "checkout2Steps", "$scope"]
}(),
function() {
    function e(e, t, n, i, o, s, a, r) {
        function c() {
            if (y()) {
                if (I.form.submitted = !1,
                o.config.checkout2saveOnStepChange) {
                    var e = o.save();
                    return e && (U = !0,
                    e.success(function() {
                        U = !1,
                        v()
                    }),
                    e.error(function() {
                        U = !1,
                        g()
                    })),
                    e
                }
                v()
            } else
                I.form.submitted = !0,
                g(),
                r.scrollToError()
        }
        function l(e, n) {
            i.goToStep(e, n),
            d(t.checkout2currentStep)
        }
        function d(e) {
            i.tracked[e] && I.trackOnce || (s.trackCheckoutStep(i.identifyStepNumber(e), e, n),
            i.tracked[e] = !0)
        }
        function u() {
            i.tracked = {}
        }
        function p() {
            l(I.stepName, !1)
        }
        function m() {
            var e;
            if (1 == I.autoStep ? e = 0 : _.isNumber(I.autoStep) && (e = I.autoStep),
            void 0 !== e) {
                var t = _.findIndex(i.stepsArray, function(e) {
                    return e.vm == I
                });
                t > -1 && (I.stepNumber = e + 1 + t)
            }
        }
        function f(e) {
            e ? a(c, e) : c()
        }
        function g() {
            l(I.stepName, !1)
        }
        function v() {
            l(I.stepName, !0)
        }
        function h() {
            return U
        }
        function b() {
            I.form.submitted = !1,
            g()
        }
        function w() {
            return !O.$confirmed || M() && y() || (O.$confirmed = !1),
            O.$confirmed
        }
        function y() {
            return I.form && I.form.$valid
        }
        function k() {
            return i.isStepCurrent(I.stepName)
        }
        function S(e) {
            I.valid = e,
            e && (t.checkout2currentStep == I.stepName || I.trackOnLoad) && d(I.stepName),
            i.onStepsChange()
        }
        function $(e) {
            I.form = e,
            O.form = e,
            x()
        }
        function x() {
            i.register(I.stepName, O),
            i.onStepsChange(),
            !M() && k() && l(I.stepName)
        }
        function C() {
            i.unregister(I.stepName),
            i.onStepsChange()
        }
        function D() {
            return O.previousValid
        }
        function M() {
            return O.previousConfirmed
        }
        var I = this
          , U = !1
          , O = {
            isValid: y,
            isConfirmed: w,
            previousValid: null,
            previousConfirmed: null,
            number: i.identifyStepNumber(I.stepName),
            next: f,
            edit: b,
            $confirmed: !1,
            vm: I
        };
        I.setForm = $,
        I.previousValid = D,
        I.isConfirmed = w,
        I.isValid = y,
        I.previousConfirmed = M,
        I.next = f,
        I.edit = b,
        I.isBusy = h,
        I.isCurrent = k,
        I.goTo = p,
        I.checkout2Steps = i,
        e.$watch(y, S),
        this.$onDestroy = C,
        e.$on("checkout2-steps.service.registerChange", m),
        e.$on("checkout2.init", u)
    }
    tcoStore.component("checkout2Step", {
        controller: e,
        templateUrl: "/views/checkout/form/step.html",
        transclude: !0,
        bindings: {
            stepTitle: "@",
            stepNumber: "@",
            autoStep: "<",
            stepName: "@",
            trackOnce: "<",
            trackOnLoad: "<"
        }
    }),
    e.$inject = ["$scope", "$sessionStorage", "customer", "checkout2Steps", "checkout2", "gtm", "$timeout", "tools"]
}(),
function() {
    function e(e, t, n, i, o) {
        function s(e, t) {
            g[e] = t,
            b(),
            v()
        }
        function a(e) {
            delete w.tracked[e],
            delete g[e],
            b()
        }
        function r(e) {
            var t = g[e];
            return t ? t.isValid() : !1
        }
        function c(e) {
            return e == f
        }
        function l(e) {
            var t = 1 + i.config.steps.indexOf(e);
            if (!t)
                throw "Missing checkout step `" + e + "` in checkout2 config";
            return t
        }
        function d() {
            var e = !0
              , n = !0
              , i = null;
            _.each(w.stepsArray, function(t) {
                e ? (t.previousValid = !0,
                e = t.isValid()) : t.previousValid = !1,
                n ? (t.previousConfirmed = !0,
                n = t.isConfirmed(),
                i || n || (i = t.vm.stepName)) : t.previousConfirmed = !1
            }),
            w.isCheckoutValid = e,
            w.isCheckoutConfirmed = n,
            t.hash(i),
            o.checkout2currentStep = i
        }
        function u() {
            w.stepsArray = _.compact(_.map(i.config.steps, function(e) {
                return g[e]
            })),
            n.$broadcast("checkout2-steps.service.registerChange")
        }
        function p(e, t) {
            if (g[e]) {
                var i, o;
                _.each(w.stepsArray, function(n) {
                    var s = n.vm.stepName;
                    return t || (i = s == e),
                    !i && (t && (i = s == e),
                    n.isValid()) ? void (n.$confirmed = !0) : (o || (o = s),
                    void (n.$confirmed = !1))
                }),
                d(),
                !o && e && t && (o = "summary"),
                f != o && (f = o,
                n.$broadcast("checkout2stepChange", f, t))
            }
        }
        function m() {
            if (p(t.hash() || o.checkout2currentStep),
            !f)
                try {
                    p(_.first(w.stepsArray).vm.stepName)
                } catch (e) {}
            w.initiated = !0
        }
        var f, g = {}, v = _.debounce(m, 100), h = _.debounce(d, 100), b = _.debounce(u, 100), w = {
            register: s,
            unregister: a,
            identifyStepNumber: l,
            onStepsChange: h,
            isCheckoutValid: null,
            goToStep: p,
            isValid: r,
            isStepCurrent: c,
            steps: g,
            tracked: {},
            initiated: !1,
            stepsArray: []
        };
        return w
    }
    tcoStore.service("checkout2Steps", e),
    e.$inject = ["localConfig", "$location", "$rootScope", "checkout2", "$sessionStorage"]
}(),
function() {
    function e(e) {
        function t() {
            return e.isCheckoutValid
        }
        function n(t) {
            try {
                return t ? e.steps[t].previousConfirmed : e.isCheckoutConfirmed
            } catch (n) {
                return !1
            }
        }
        var i = this;
        i.stepService = e,
        i.isCheckoutValid = t,
        i.isCheckoutConfirmed = n
    }
    tcoStore.component("checkout2Summary", {
        controller: e,
        templateUrl: "/views/checkout/form/summary.html",
        transclude: !0
    }),
    e.$inject = ["checkout2Steps"]
}(),
window.tcoStore.run(["$rootScope", "recentlyViewedService", function(e, t) {
    e.$on("$routeChangeSuccess", t.checkRoute),
    e.$on("routerDataPatched", t.checkRoute),
    e.getRecentlyViewedItems = t.getRecentlyViewedItems
}
]),
window.tcoStore.service("recentlyViewedService", ["$localStorage", "router", "localConfig", function(e, t, n) {
    function i() {
        var t = e.recentlyViewed;
        return t && _.isArray(t) ? l.model.data = e.recentlyViewed : []
    }
    function o(t) {
        var t = t.splice(0, d);
        e.recentlyViewed = l.model.data = t
    }
    function s(e) {
        if (e) {
            var t = _.without(i(), e);
            t.unshift(e),
            o(t)
        }
    }
    function a() {
        try {
            if ("product" == t.model.className) {
                var e = t.modelData.id
                  , n = t.modelData.parent;
                if (n)
                    switch (c) {
                    case "child":
                        return;
                    case "top":
                        e = n
                    }
                s(e)
            }
        } catch (i) {}
    }
    function r() {
        return l.model.data
    }
    var c = n.recentlyViewedMode || "top"
      , l = {
        checkRoute: a,
        getRecentlyViewedItems: r,
        model: {
            data: void 0
        }
    }
      , d = n.recentlyViewedLimit || 15;
    return i(),
    l
}
]);
var mod;
mod = angular.module("infinite-scroll", []),
mod.directive("infiniteScroll", ["$rootScope", "$window", function(e, t) {
    return {
        scope: {
            infiniteScroll: "&",
            infiniteScrollContainer: "=",
            infiniteScrollDistance: "=",
            infiniteScrollDisabled: "=",
            infiniteScrollUseDocumentBottom: "=",
            infiniteScrollListenForEvent: "@"
        },
        link: function(n, i, o) {
            var s, a, r, c, l, d, u, p, m, f, g, v, h, b, w, y, k;
            k = angular.element(t),
            h = null,
            b = null,
            a = null,
            r = null,
            f = !1,
            y = !1,
            w = null;
            var S = 100;
            m = function(e) {
                return e = e[0] || e,
                isNaN(e.offsetHeight) ? e.document.documentElement.clientHeight : e.offsetHeight
            }
            ,
            g = function(e) {
                return e[0].getBoundingClientRect && !e.css("none") ? e[0].getBoundingClientRect().top + v(e) : void 0
            }
            ,
            v = function(e) {
                return e = e[0] || e,
                isNaN(window.pageYOffset) ? e.document.documentElement.scrollTop : e.ownerDocument.defaultView.pageYOffset
            }
            ,
            p = function(t) {
                var o, s, c, l, d;
                return r === k ? (o = m(r) + v(r[0].document.documentElement),
                c = g(i) + m(i)) : (o = m(r),
                s = 0,
                void 0 !== g(r) && (s = g(r)),
                c = g(i) - s + m(i)),
                y && (c = m((i[0].ownerDocument || i[0].document).documentElement)),
                l = c - o,
                d = l <= m(r) * h + 1,
                d ? (a = !0,
                b ? n.$$phase || e.$$phase ? n.infiniteScroll() : n.$applyAsync(n.infiniteScroll) : void 0) : a = !1
            }
            ,
            null != S && (p = _.throttle(p, S)),
            n.$on("$destroy", function() {
                return r.unbind("scroll", p),
                null != w ? (w(),
                w = null) : void 0
            }),
            d = function(e) {
                return h = parseFloat(e) || 0
            }
            ,
            n.$watch("infiniteScrollDistance", d),
            d(n.infiniteScrollDistance),
            l = function(e) {
                return b = !e,
                b && a ? (a = !1,
                p()) : void 0
            }
            ,
            n.$watch("infiniteScrollDisabled", l),
            l(n.infiniteScrollDisabled),
            u = function(e) {
                return y = e
            }
            ,
            n.$watch("infiniteScrollUseDocumentBottom", u),
            u(n.infiniteScrollUseDocumentBottom),
            s = function(e) {
                return null != r && r.unbind("scroll", p),
                r = e,
                null != e ? r.bind("scroll", p) : void 0
            }
            ,
            s(k),
            n.infiniteScrollListenForEvent && (w = e.$on(n.infiniteScrollListenForEvent, p)),
            c = function(e) {
                if (null != e && 0 !== e.length) {
                    if (e instanceof HTMLElement ? e = angular.element(e) : "function" == typeof e.append ? e = angular.element(e[e.length - 1]) : "string" == typeof e && (e = angular.element(document.querySelector(e))),
                    null != e)
                        return s(e);
                    throw new Exception("invalid infinite-scroll-container attribute.")
                }
            }
            ,
            n.$watch("infiniteScrollContainer", c),
            c(n.infiniteScrollContainer || []),
            null != o.infiniteScrollParent && s(angular.element(i.parent())),
            null != o.infiniteScrollImmediateCheck && (f = n.$eval(o.infiniteScrollImmediateCheck)),
            window.setTimeout(function() {
                return f ? p() : void 0
            }, 0)
        }
    }
}
]),
window.tcoStore.directive("notifications", ["$timeout", "transport", "localConfig", function(e, t, n) {
    var i = ["$scope", function(i) {
        i.model = t.getModel("_notifications", {
            queue: []
        }, {
            storage: "static"
        }),
        i.notifications = [];
        var o = 0;
        i.$watch("model.queue.length", function(t) {
            if (t) {
                i.shouldShow = !0;
                var s = {
                    notice: i.model.queue.shift(),
                    id: o
                };
                s.close = function(t) {
                    try {
                        t && i.$root["goto"](t)
                    } catch (n) {}
                    1 == i.notifications.length && (i.shouldShow = !1),
                    e(function() {
                        i.notifications = _.filter(i.notifications, function(e) {
                            return e.id !== s.id
                        }),
                        dispose(s)
                    }, 500)
                }
                ,
                i.notifications.push(s),
                e(s.close, tco.empty(n.notificationHideDelay) ? 4e3 : n.notificationHideDelay),
                o++
            }
        }, !0)
    }
    ];
    return {
        restrict: "E",
        scope: !0,
        templateUrl: "/page/notifications.html",
        controller: i
    }
}
]),
window.tcoStore.directive("offCanvas", function() {
    return {
        restrict: "E",
        scope: {
            template: "@",
            name: "@",
            side: "@",
            always: "@",
            noSwipe: "@",
            animate: "@",
            closeDelay: "@",
            scrollOnOpen: "@",
            scrollTopOnClose: "@",
            custom: "=?"
        },
        template: '<div class="off-canvas off-canvas-{{::side}} ng-hide" ng-class="::{\'ng-hide-animate\' : animate}" ng-include="template" ng-show="status.isOpenDelayed" ng-if="always||status.isOpen||status.isInitiated" ng-swipe-right="swipeRight(true)" ng-swipe-left="swipeLeft(true)"></div>',
        link: function(e, t) {
            e.scrollIntoView = function() {
                setTimeout(function() {
                    t[0].scrollIntoView({
                        behavior: "smooth",
                        block: "start"
                    })
                }, 200)
            }
        },
        controller: ["$scope", "transport", "$timeout", function(e, t, n) {
            _.defaults(e, {
                name: "offcanvas",
                side: "left",
                always: "false",
                closeDelay: 500
            });
            var i = t.getModel("_offCanvas", void 0, {
                storage: "static"
            });
            _.isUndefined(i[e.name]) && (i[e.name] = {
                isOpen: !1,
                initiated: !1
            }),
            e.status = i[e.name],
            e.status.side = e.side,
            e.status.name = e.name;
            e.$watch("status.isOpen", function(t) {
                if (t)
                    e.status.isInitiated = !0,
                    e.status.isOpenDelayed = !0,
                    e.scrollOnOpen && e.scrollIntoView();
                else {
                    var i = e.closeDelay ? parseInt(e.closeDelay, 10) : 0;
                    i ? n(function() {
                        e.status.isOpenDelayed = !1
                    }, i) : e.status.isOpenDelayed = !1
                }
            }, !0);
            e.close = function() {
                e.scrollTopOnClose && window.scrollTo(0, 0),
                e.status.isOpen = !1
            }
            ;
            var o = function(t, n) {
                n && e.noSwipe || e.side == t && e.close()
            };
            e.swipeLeft = function(e) {
                return o("left", e)
            }
            ,
            e.swipeRight = function(e) {
                return o("right", e)
            }
            ,
            e.$on("$destroy", function() {
                e.status.isOpen = !1
            }),
            e.$on("closeOffCanvasRequest", function() {
                e.close()
            }),
            e.$watch(function() {
                return window.innerWidth
            }, function() {
                e.status.isOpen = !1
            })
        }
        ]
    }
}),
window.tcoStore.directive("offCanvasContainer", ["transport", "$rootScope", function(e, t) {
    return {
        restrict: "A",
        scope: !0,
        link: function(n, i) {
            var o = e.getModel("_offCanvas", void 0, {
                storage: "static"
            })
              , s = ["off-canvas-open", "off-canvas-open-left", "off-canvas-open-right"];
            n.$watch(function() {
                var e;
                for (e in o)
                    if (o[e].isOpen)
                        return e;
                return !1
            }, function(e) {
                var t = [];
                if (e) {
                    t.push("off-canvas-open"),
                    t.push("off-canvas-open-" + o[e].side);
                    var n = "off-canvas-current_" + o[e].name;
                    t.push(n),
                    s.indexOf(n) < 0 && s.push(n)
                }
                i.removeClass(_.difference(s, t).join(" ")),
                t.length > 0 && i.addClass(t.join(" "))
            }),
            n.closeAllOffCanvas = function() {
                var e;
                for (e in o)
                    o[e].isOpen = !1
            }
            ,
            t.$on("$routeChangeStart", n.closeAllOffCanvas)
        }
    }
}
]),
window.tcoStore.directive("offCanvasToggle", function() {
    return {
        restrict: "A",
        scope: {
            offCanvasToggle: "@"
        },
        transclude: !0,
        replace: !0,
        template: '<span  ng-click="toggle()" ng-touch="toggle()" ng-class="{open : status.isOpen}" ng-transclude></span>',
        controller: ["$scope", "transport", function(e, t) {
            var n = "offcanvas"
              , i = t.getModel("_offCanvas", void 0, {
                storage: "static"
            })
              , o = e.$watch(function() {
                var t = e.offCanvasToggle || n;
                _.isUndefined(i[t]) || (e.status = i[t],
                _.isFunction(o) && o())
            });
            e.toggle = _.throttle(function() {
                var t, n = !e.status.isOpen;
                if (n)
                    for (t in i)
                        i[t].isOpen = !1;
                e.status.isOpen = n
            }, 500)
        }
        ]
    }
}),
tcoStore.directive("dateInput", function() {
    var e = 0
      , t = ["$scope", "$filter", function(t, n) {
        function i() {
            t.callendarModel = {},
            t.calendarOptions = _.extend({
                onInit: function(e) {
                    if (calendarApi = e,
                    t.model[t.varName]) {
                        var n = new Date(t.model[t.varName]);
                        e.selectDate(e.dateObjectToDate(n)),
                        delete n
                    }
                },
                dateClick: function(e, n) {
                    n.selectDate(e),
                    t.close()
                },
                onDateChange: function(e) {
                    var i;
                    try {
                        var o = _.first(e.getSelection());
                        if (!o)
                            throw 1;
                        var s = e.stringToDateObject(o);
                        i = s ? n("date")(s, t.calendarOptions.format) : ""
                    } catch (a) {
                        console.error(a),
                        data = ""
                    }
                    t.model[t.varName] = i
                }
            }, t.options)
        }
        t.fieldId = "dateInput" + e++,
        t.$watch("options", i),
        t.open = function() {
            t.isOpen = !0
        }
        ,
        t.close = function() {
            t.isOpen = !1
        }
        ,
        t.toggle = _.throttle(function() {
            t.isOpen = !t.isOpen
        }, 1e3),
        t.doBlur = function(e) {
            try {
                e.target.blur()
            } catch (t) {}
        }
    }
    ]
      , n = {
        model: "=",
        varName: "@",
        name: "@",
        options: "=?",
        required: "=",
        yearsSelect: "<",
        placeholder: "@"
    };
    return {
        restrict: "E",
        scope: n,
        templateUrl: "/views/widget/date-input.html",
        controller: t
    }
}),
tcoStore.directive("simpleCalendar", function() {
    return {
        restrict: "E",
        scope: {
            options: "=?",
            events: "=?",
            model: "=?",
            template: "@?",
            yearsSelect: "<"
        },
        template: "<ng-include src=\"template || '/views/widget/simple-calendar.html'\" >",
        controller: ["$scope", function(e) {
            function t(e) {
                var t = e.split("-");
                return new Date(parseInt(t[0], 10),parseInt(t[1], 10) - 1,parseInt(t[2], 10))
            }
            function n(e) {
                return [e.year, e.month + 1, e.day].join("-")
            }
            function o(e) {
                return new Date(e.year,e.month,e.day)
            }
            function s(e) {
                return {
                    year: e.getFullYear(),
                    month: e.getMonth(),
                    day: e.getDate()
                }
            }
            function a(e) {
                return n(s(e))
            }
            function r(e, t) {
                try {
                    var i = n(e);
                    return k[t ? "soft" : "hard"][i] || 0
                } catch (o) {
                    return 0
                }
            }
            function c() {
                _.each(e.weeks, function(e) {
                    _.each(e, function(e) {
                        e && (e.selected = r(e, !1),
                        e.softSelected = r(e, !0),
                        e.isDefault = m(e))
                    })
                }),
                _.isFunction(y.onSelectionChange) && y.onSelectionChange(S)
            }
            function l(t) {
                t && e.events && e.events.forEach(function(e) {
                    var n = new Date(e.date);
                    t.year === n.getFullYear() && t.month === n.getMonth() && t.day === n.getDate() && (t.event = e),
                    delete n
                })
            }
            function d(e) {
                if (!b && !w)
                    return !0;
                var t = new Date(e.year,e.month,e.day);
                return b && b >= t ? (delete t,
                !1) : w && t > w ? (delete t,
                !1) : y.onDateCheck ? y.onDateCheck(t) : (delete t,
                !0)
            }
            function u() {
                var t = []
                  , n = null
                  , i = new Date(e.selectedYear,v.indexOf(e.selectedMonth) + 1,0)
                  , o = i.getDate();
                delete i;
                for (var s = 1; o + 1 > s; s += 1) {
                    var i = new Date(e.selectedYear,v.indexOf(e.selectedMonth),s)
                      , a = i.getDay();
                    delete i,
                    y.startMonday && (a--,
                    0 > a && (a = 6)),
                    n = n || [null, null, null, null, null, null, null],
                    n[a] = {
                        year: e.selectedYear,
                        month: v.indexOf(e.selectedMonth),
                        day: s
                    },
                    d(n[a]) ? e.events && l(n[a]) : n[a].disabled = !0,
                    (6 === a || s === o) && (t.push(n),
                    n = void 0)
                }
                e.weeks = t,
                c()
            }
            function p() {
                y.defaultDate ? y._defaultDate = new Date(y.defaultDate) : y._defaultDate = new Date,
                e.selectedYear = y._defaultDate.getFullYear(),
                e.selectedMonth = v[y._defaultDate.getMonth()],
                e.selectedDay = y._defaultDate.getDate(),
                u()
            }
            function m(e) {
                return e ? e.year === y._defaultDate.getFullYear() && e.month === y._defaultDate.getMonth() && e.day === y._defaultDate.getDate() : void 0
            }
            function f() {
                if (e.options.maxDate) {
                    var t = new Date(e.options.maxDate);
                    e.maxYear = t.getFullYear(),
                    e.maxMonth = t.getMonth()
                }
                if (e.options.minDate) {
                    var n = new Date(e.options.minDate);
                    e.minYear = n.getFullYear(),
                    e.minMonth = n.getMonth()
                }
            }
            function g(t) {
                e.firstMonthToShow = 0,
                e.lastMonthToShow = 11,
                e.maxYear == t && (e.lastMonthToShow = e.maxMonth),
                e.minYear == t && (e.firstMonthToShow = e.minMonth)
            }
            var v = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
              , h = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            e.shortMonths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            e.selectingByYears = {};
            var p, u, d, l, b, w, y = e.options;
            e.$watch("options", function() {
                y = e.options || {},
                b = y.minDate ? _.isDate(y.minDate) ? y.minDate : new Date(y.minDate - 828e5) : null,
                w = y.maxDate ? _.isDate(y.maxDate) ? y.maxDate : new Date(y.maxDate) : null,
                y.dayNamesLength = y.dayNamesLength || 1,
                e.startRange || (e.startRange = null),
                e.endRange || (e.endRange = null),
                p(),
                f()
            }),
            e.model || (e.model = {});
            var k = {
                soft: {},
                hard: e.model
            }
              , S = {
                resetSelection: function(t) {
                    var n = k[t ? "soft" : "hard"];
                    for (var i in n)
                        n[i] = 0;
                    t || (e.startRange = null,
                    e.endRange = null),
                    c()
                },
                selectDateRange: function(t, n, i) {
                    if (_.isEqual(t, n))
                        return S.selectDate(t, i);
                    var s = o(t)
                      , r = o(n);
                    if (s > r) {
                        var l = s;
                        s = r,
                        r = l,
                        l = t,
                        t = n,
                        n = l
                    }
                    S.resetSelection(i);
                    var d = k[i ? "soft" : "hard"];
                    do
                        d[a(s)] = 1,
                        s.setDate(s.getDate() + 1);
                    while (r >= s);c(),
                    e.testVal = t,
                    e.startRange = t,
                    e.endRange = n,
                    delete s,
                    delete r
                },
                selectDate: function(t, n) {
                    S.resetSelection(n),
                    S.toggleDate(t, 1, n),
                    e.startRange = e.endRange = t
                },
                unselectDate: function(e, t) {
                    S.toggleDate(e, 0, t)
                },
                toggleDate: function(e, t, i) {
                    var o = n(e)
                      , s = k[i ? "soft" : "hard"];
                    _.isUndefined(t) && (t = _.isUndefined(s[o]) || !s[o] ? 1 : 0),
                    s[o] = e.selected = t,
                    _.isFunction(y.onDateChange) && y.onDateChange(S)
                },
                getDate: function() {
                    return date.selected
                },
                getSelection: function() {
                    var e = k.hard
                      , t = [];
                    for (i in e)
                        e[i] && t.push(i);
                    return t
                },
                setSelection: function(e, t) {
                    return e && e.length ? void (t ? S.selectDateRange(s(_.min(e)), s(_.max(e))) : (S.resetSelection(),
                    _.each(e, function(e) {
                        _.isDate(e) && (e = a(e)),
                        k.hard[e] = 1
                    }))) : void S.resetSelection()
                },
                dateToDateObject: o,
                stringToDateObject: t,
                dateObjectToDate: s
            };
            e.resetSelection = S.resetSelection,
            e.onClick = function(t) {
                if (t && !t.disabled)
                    if (e.pickingStartRange)
                        e.pickingStartRange = !1,
                        e.startRange = t,
                        e.endRange || (e.endRange = t,
                        e.pickEndRange()),
                        S.selectDateRange(e.startRange, e.endRange);
                    else {
                        if (e.pickingEndRange)
                            return e.pickingEndRange = !1,
                            e.endRange = t,
                            e.startRange || (e.startRange = e.endRange,
                            e.pickStartRange()),
                            S.selectDateRange(e.startRange, e.endRange);
                        y.dateClick && y.dateClick(t, S)
                    }
            }
            ,
            e.onMouseover = function(e) {
                e && !e.disabled && y.dateMouseover && y.dateMouseover(e, S)
            }
            ,
            e.onMouseout = function(e) {
                e && !e.disabled && y.dateMouseout && y.dateMouseout(e, S)
            }
            ,
            e.allowedPrevMonth = function() {
                var t = null
                  , n = null;
                if (!b)
                    return !0;
                var i = v.indexOf(e.selectedMonth);
                return t = 0 === i ? e.selectedYear - 1 : e.selectedYear,
                n = 0 === i ? 11 : i - 1,
                t < b.getFullYear() ? !1 : t === b.getFullYear() && n < b.getMonth() ? !1 : !0
            }
            ,
            e.allowedNextMonth = function() {
                var t = null
                  , n = null;
                if (!w)
                    return !0;
                var i = v.indexOf(e.selectedMonth);
                return t = 11 === i ? e.selectedYear + 1 : e.selectedYear,
                n = 11 === i ? 0 : i + 1,
                t > w.getFullYear() ? !1 : t === w.getFullYear() && n > w.getMonth() ? !1 : !0
            }
            ,
            e.weekDays = function(e) {
                function t(e) {
                    return y.startMonday ? (e[7] = e[0],
                    e = e.slice(1)) : e
                }
                return t(h.map(function(t) {
                    return t.slice(0, e)
                }))
            }
            ,
            e.prevMonth = function() {
                if (e.allowedPrevMonth()) {
                    var t = v.indexOf(e.selectedMonth);
                    0 === t ? (e.selectedYear -= 1,
                    e.selectedMonth = v[11]) : e.selectedMonth = v[t - 1],
                    u()
                }
            }
            ,
            e.nextMonth = function() {
                if (e.allowedNextMonth()) {
                    var t = v.indexOf(e.selectedMonth);
                    11 === t ? (e.selectedYear += 1,
                    e.selectedMonth = v[0]) : e.selectedMonth = v[t + 1],
                    u()
                }
            }
            ,
            e.$watch("options.defaultDate", p),
            e.$watch("events", u),
            e.pickingStartRange = !1,
            e.pickingEndRange = !1,
            e.pickStartRange = function() {
                (e.pickingStartRange = !e.pickingStartRange) && (e.pickingEndRange = !1)
            }
            ,
            e.pickEndRange = function() {
                (e.pickingEndRange = !e.pickingEndRange) && (e.pickingStartRange = !1)
            }
            ,
            e.options && _.isFunction(e.options.onInit) && e.options.onInit(S),
            e.setYearsToShow = function(t) {
                var n, i, o = [];
                if (e.maxYear && e.minYear) {
                    for (var s = [], a = e.minYear; a <= e.maxYear; a++)
                        s.push(a);
                    var r = s.length
                      , c = s.indexOf(t)
                      , l = s.indexOf(t + 11);
                    -1 == c && -1 == l ? t < s[0] ? (n = s[0],
                    i = s[11]) : (i = s[r - 1],
                    n = i - 11) : -1 == c ? (n = s[0],
                    i = s[11]) : -1 == l ? (i = s[r - 1],
                    n = i - 11) : (n = s[c],
                    i = s[l])
                } else
                    e.maxYear ? (i = e.maxYear < t + 11 ? e.maxYear : t + 11,
                    n = i - 11) : e.minYear ? (n = e.minYear > t ? e.minYear : t,
                    i = n + 11) : (n = t,
                    i = t + 11);
                for (var a = n; i >= a; a++)
                    o.push(a);
                e.yearsToShow = o
            }
            ,
            e.selectMode = function(t) {
                e.activeMode = t,
                "year" == t && e.setYearsToShow(e.selectedYear)
            }
            ,
            e.selectYear = function(t) {
                e.selectingByYears.year = t,
                g(t),
                e.activeMode = "month"
            }
            ,
            e.checkIfValidMonth = function(t) {
                return t >= e.firstMonthToShow && t <= e.lastMonthToShow ? !0 : !1
            }
            ,
            e.selectMonth = function(t) {
                e.selectingByYears.month = v[t],
                e.activeMode = "",
                e.selectedYear = e.selectingByYears.year,
                e.selectedMonth = e.selectingByYears.month,
                u()
            }
            ,
            e.resetSelectingByYears = function() {
                e.activeMode = !1
            }
            ,
            e.prevYear = function() {
                e.selectingByYears.year--,
                g(e.selectingByYears.year)
            }
            ,
            e.nextYear = function() {
                e.selectingByYears.year++,
                g(e.selectingByYears.year)
            }
        }
        ]
    }
}),
function() {
    function e(e, t, n, i, o, s, a, r) {
        function c() {
            if (!i.prerender)
                if (l()) {
                    if (g.delay ? n(m, 1e3 * parseInt(g.delay, 10)) : m(),
                    g.views) {
                        var e = parseInt(g.views, 10);
                        e > 0 && (v = o.$on("$routeChangeSuccess", function() {
                            ++h > e && (v(),
                            v = null,
                            m())
                        }))
                    }
                } else
                    r.$broadcast(g.name + "-hidden")
        }
        function l() {
            return !e[f()] && !t[f()]
        }
        function d() {
            e[f()] = 1,
            p(),
            r.$broadcast(g.name + "-hidden", !0)
        }
        function u() {
            g.isVisible && g.hideWhenPageChange && p()
        }
        function p() {
            t[f()] = 1,
            g.isVisible = !1,
            v && v()
        }
        function m() {
            l() && (g.isVisible = !0)
        }
        function f() {
            return "_oneTime_" + g.name
        }
        var g = this;
        g.isVisible = !1;
        var v, h = 0;
        g.website = s,
        g.customer = a,
        g.forget = d,
        g.hide = p,
        g.$onInit = c,
        o.$on("$routeChangeStart", u)
    }
    angular.module("tcoStore").component("oneTimeShow", {
        controller: e,
        controllerAs: "vm",
        template: '<ng-include src="vm.template" ></ng-include>',
        bindings: {
            name: "@",
            template: "@",
            delay: "@",
            views: "@",
            hideWhenPageChange: "<"
        }
    }),
    e.$inject = ["$localStorage", "$sessionStorage", "$timeout", "browser", "$scope", "website", "customer", "$rootScope"]
}(),
function() {
    "use strict";
    var e = (1 === angular.version.major && 0 === angular.version.minor,
    function(e, t) {
        try {
            var n = "pixel" + t
              , i = "client" + t
              , o = e[0]
              , s = o.style;
            if (!_.isUndefined(s[n]) && s[n])
                return s[n];
            if (!_.isUndefined(o[i]))
                return o[i];
            if ("width" == t)
                return o.offsetWidth;
            if ("height" == t)
                return o.offsetHeight
        } catch (a) {}
        return 0
    }
    );
    angular.module("ui-rangeSlider", []).directive("rangeSlider", ["$document", "$filter", "$log", function(t, n, i) {
        var o = " dummy-"
          , s = {
            orientation: "horizontal",
            step: 0,
            decimalPlaces: 0,
            showValues: !0,
            preventEqualMinMax: !1,
            attachHandleValues: !1
        }
          , a = window.navigator.pointerEnabled ? {
            start: "pointerdown",
            move: "pointermove",
            end: "pointerup",
            over: "pointerdown",
            out: "mouseout"
        } : window.navigator.msPointerEnabled ? {
            start: "MSPointerDown",
            move: "MSPointerMove",
            end: "MSPointerUp",
            over: "MSPointerDown",
            out: "mouseout"
        } : {
            start: "mousedown touchstart",
            move: "mousemove touchmove",
            end: "mouseup touchend",
            over: "mouseover touchstart",
            out: "mouseout"
        }
          , r = a.start + o
          , c = a.move + o
          , l = a.end + o
          , d = a.over + o
          , u = a.out + o
          , p = function(e) {
            return [tco.pathVal(e, "clientX") || tco.pathVal(e, "touches.0.clientX") || tco.pathVal(e, "originalEvent.clientX") || tco.pathVal(e, "originalEvent.touches.0.clientX") || "x", tco.pathVal(e, "clientY") || tco.pathVal(e, "touches.0.clientY") || tco.pathVal(e, "originalEvent.clientY") || tco.pathVal(e, "originalEvent.touches.0.clientY") || "y"]
        }
          , m = function(e) {
            return 0 > e ? 0 : e > 100 ? 100 : e
        }
          , f = function(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        }
          , g = {
            min: "=",
            max: "=",
            targetFilteredModel: "=model",
            onHandleDown: "&",
            onHandleUp: "&",
            orientation: "@",
            step: "=",
            decimalPlaces: "@",
            showValues: "@",
            pinHandle: "@",
            preventEqualMinMax: "@",
            attachHandleValues: "@"
        };
        return {
            restrict: "A",
            replace: !0,
            templateUrl: "/views/widget/price-slider.html",
            scope: g,
            link: function(n, a, g, v) {
                function h(e) {
                    "min" === e ? (angular.element(x[0]).css("display", "none"),
                    angular.element(x[1]).css("display", "block")) : "max" === e ? (angular.element(x[0]).css("display", "block"),
                    angular.element(x[1]).css("display", "none")) : (angular.element(x[0]).css("display", "block"),
                    angular.element(x[1]).css("display", "block"))
                }
                function b() {
                    n.min = Math.floor(n.min),
                    n.max = Math.ceil(n.max),
                    n.min > n.max && k("min must be less than or equal to max"),
                    angular.isDefined(n.min) && angular.isDefined(n.max) && (f(n.min) || k("min must be a number"),
                    f(n.max) || k("max must be a number"),
                    T = n.max - n.min,
                    O = [n.min, n.max],
                    w())
                }
                function w() {
                    if (_.isUndefined(n.filteredModel) && (n.filteredModel = {}),
                    n.filteredModel.min > n.filteredModel.max && (S("modelMin must be less than or equal to modelMax"),
                    n.filteredModel.min = n.filteredModel.max),
                    (angular.isDefined(n.filteredModel.min) || "min" === n.pinHandle) && (angular.isDefined(n.filteredModel.max) || "max" === n.pinHandle)) {
                        n.min = Math.floor(n.min),
                        n.max = Math.ceil(n.max),
                        f(n.filteredModel.min) ? n.filteredModel.min = Math.floor(n.filteredModel.min) : ("min" !== n.pinHandle && S("modelMin must be a number"),
                        n.filteredModel.min = n.min),
                        f(n.filteredModel.max) ? n.filteredModel.max = Math.ceil(n.filteredModel.max) : ("max" !== n.pinHandle && S("modelMax must be a number"),
                        n.filteredModel.max = n.max);
                        var e, t, i = m((n.filteredModel.min - n.min) / T * 100), o = m((n.filteredModel.max - n.min) / T * 100);
                        n.attachHandleValues && (e = i,
                        t = o),
                        n.filteredModel.min = Math.max(n.min, n.filteredModel.min),
                        n.filteredModel.max = Math.min(n.max, n.filteredModel.max),
                        n.min === n.max && n.filteredModel.min == n.filteredModel.max ? (angular.element(x[0]).css(M, "0%"),
                        angular.element(x[1]).css(M, "100%"),
                        n.attachHandleValues && (angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),
                        angular.element(C[0]).css(M, "0%"),
                        angular.element(C[1]).css(M, "100%")),
                        angular.element(D).css(M, "0%").css(I, "0%")) : (angular.element(x[0]).css(M, i + "%"),
                        angular.element(x[1]).css(M, o + "%"),
                        n.attachHandleValues && (angular.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),
                        angular.element(C[0]).css(M, e + "%"),
                        angular.element(C[1]).css(M, t + "%"),
                        angular.element(C[1]).css(I, "auto")),
                        angular.element(D).css(M, i + "%").css(I, 100 - o + "%"),
                        i > 95 && angular.element(x[0]).css("z-index", 3))
                    }
                }
                function y(i) {
                    var s = x[i];
                    s.on(r + "X", function(a) {
                        var r = (0 === i ? "ngrs-handle-min" : "ngrs-handle-max") + "-down"
                          , d = (0 === i ? n.filteredModel.min : n.filteredModel.max) - n.min
                          , u = d / T * 100
                          , f = p(a)
                          , g = f
                          , v = !1;
                        angular.isFunction(n.onHandleDown) && n.onHandleDown(),
                        angular.element(document.body).on("selectstart" + o, function() {
                            return !1
                        }),
                        P = !0,
                        s.addClass("ngrs-down"),
                        $.addClass("ngrs-focus " + r),
                        angular.element(document.body).addClass("ngrs-touching"),
                        t.on(c, function(t) {
                            t.preventDefault();
                            var o, a, r = p(t), c = parseInt(n.step, 10) / T * 100, l = ((0 === i ? n.filteredModel.max : n.filteredModel.min) - n.min) / T * 100;
                            "x" !== r[0] && (r[0] -= f[0],
                            r[1] -= f[1],
                            o = [g[0] !== r[0], g[1] !== r[1]],
                            a = u + 100 * r[U] / (U ? e(angular.element(D), "height") : e(angular.element(D), "width")),
                            a = m(a),
                            n.preventEqualMinMax && (0 === c && (c = 1 / T * 100),
                            0 === i ? l -= c : 1 === i && (l += c)),
                            0 === i ? a = a > l ? l : a : 1 === i && (a = l > a ? l : a),
                            parseInt(n.step, 10) > 0 && 100 > a && a > 0 && (a = Math.round(a / c) * c),
                            a > 95 && 0 === i ? s.css("z-index", 3) : s.css("z-index", ""),
                            o[U] && a != v && (n.filteredModel[i ? "max" : "min"] = Math.round(a * T / 100 + n.min),
                            v = a),
                            g = r)
                        }).on(l, function() {
                            angular.isFunction(n.onHandleUp) && n.onHandleUp(),
                            n.targetFilteredModel.min = n.filteredModel.min,
                            n.targetFilteredModel.max = n.filteredModel.max,
                            t.off(c),
                            t.off(l),
                            angular.element(document.body).removeClass("ngrs-touching"),
                            P = !1,
                            s.removeClass("ngrs-down"),
                            s.removeClass("ngrs-over"),
                            $.removeClass("ngrs-focus " + r)
                        })
                    }).on(d, function() {
                        s.addClass("ngrs-over")
                    }).on(u, function() {
                        P || s.removeClass("ngrs-over")
                    })
                }
                function k(e) {
                    throw new Error("RangeSlider: " + e)
                }
                function S(e) {
                    i.warn(e)
                }
                n.$watch("targetFilteredModel", function() {
                    n.filteredModel = {
                        min: n.targetFilteredModel.min,
                        max: n.targetFilteredModel.max
                    }
                }, !0);
                var $ = angular.element(a)
                  , x = [angular.element(document.querySelectorAll(".ngrs-handle-min")), angular.element(document.querySelectorAll(".ngrs-handle-max"))]
                  , C = [angular.element(document.querySelectorAll(".ngrs-value-min")), angular.element(document.querySelectorAll(".ngrs-value-max"))]
                  , D = angular.element(document.querySelectorAll(".ngrs-join"))
                  , M = "left"
                  , I = "right"
                  , U = 0
                  , O = [0, 0]
                  , T = 0
                  , P = !1;
                g.$observe("orientation", function(e) {
                    angular.isDefined(e) || (n.orientation = s.orientation);
                    for (var t, i = n.orientation.split(" "), o = 0, a = i.length; a > o; o++)
                        i[o] = "ngrs-" + i[o];
                    t = i.join(" "),
                    $.addClass(t),
                    ("vertical" === n.orientation || "vertical left" === n.orientation || "vertical right" === n.orientation) && (M = "top",
                    I = "bottom",
                    U = 1)
                }),
                g.$observe("step", function(e) {
                    angular.isDefined(e) || (n.step = s.step)
                }),
                g.$observe("decimalPlaces", function(e) {
                    angular.isDefined(e) || (n.decimalPlaces = s.decimalPlaces)
                }),
                g.$observe("showValues", function(e) {
                    angular.isDefined(e) ? "false" === e ? n.showValues = !1 : n.showValues = !0 : n.showValues = s.showValues
                }),
                g.$observe("pinHandle", function(e) {
                    angular.isDefined(e) && ("min" === e || "max" === e) ? n.pinHandle = e : n.pinHandle = null,
                    n.$watch("pinHandle", h)
                }),
                g.$observe("preventEqualMinMax", function(e) {
                    angular.isDefined(e) ? "false" === e ? n.preventEqualMinMax = !1 : n.preventEqualMinMax = !0 : n.preventEqualMinMax = s.preventEqualMinMax
                }),
                g.$observe("attachHandleValues", function(e) {
                    angular.isDefined(e) ? "false" === e ? n.attachHandleValues = !1 : n.attachHandleValues = !0 : n.attachHandleValues = s.attachHandleValues
                }),
                n.$watch("min", b),
                n.$watch("max", b),
                n.$watch("filteredModel", w, !0),
                n.$on("$destroy", function() {
                    $.off(o),
                    angular.element(document.body).off(o),
                    t.off(o);
                    for (var e = 0, n = x.length; n > e; e++)
                        x[e].off(o),
                        x[e].off(o + "X")
                }),
                $.on("selectstart" + o, function(e) {
                    return !1
                }).on("click", function(e) {
                    e.stopPropagation()
                }),
                y(0),
                y(1)
            }
        }
    }
    ]),
    window.requestAnimFrame = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(e) {
            window.setTimeout(e, 1e3 / 60)
        }
    }()
}();
var mainApp = angular.module("mainApp", ["ngSanitize", "ngRoute", "ngTouch", "tcoStore", "checklist-model", "ngDialog", "ngCookies", "infinite-scroll", "offClick", "ui-rangeSlider"]);
angular.module("mainApp").run(["$templateCache", function(e) {
    e.put("/modal/newsletter.html", '<button class="modal-close" ng-click="close()"><i class="icon-cross"></i></button><newsletter-form class></newsletter-form>'),
    e.put("/page/cookies-info.html", '<div class="w-12 page-content-section" ng-class="::[vm.custom.component.text_align, {\'m-t\': vm.custom.component.margin_top}]" ng-bind-html="::(vm.custom.component.custom && vm.custom.modelData.body ? vm.custom.modelData.body : vm.custom.component.content)"></div><div class="center-s m-b"><span ng-click="showPrivacySettings()" class="button--primary button m-b-2 m-b-4-s" ng-bind=":: \'Change settings\' | ms"></span></div>'),
    e.put("/page/footer.html", '<footer class="footer" id="page-footer"><div class="bg-col-12"><div class="wrap p-t p-b pos-relative center flex-x flex-l flex-justify-center flex-bottom"><div class="w-3" if-size="XL"></div><div class="w-5 w-9-m w-12-s p-t-6 p-b-6"><h5 class="introducing col-11" ng-bind="::website.footer.newsletter_introducing"></h5><h3 class="m-t-3 h2 col-w" ng-bind="::website.footer.newsletter_header"></h3><p class="m-t-2 p-r p-l p3 col-w" ng-bind="::website.footer.newsletter_text"></p><form class="newsletter-form" name="footer_newsletter_form" ng-controller="NewsletterController" ng-submit="submit()" novalidate ng-init="data.source = \'footer_GDPR\'"><input-wrap form="footer_newsletter_form" name="privacy_policy"><div class="block flex flex-justify-center"><checkbox class="label fs-4 m-t-3" model="data" required="true" var-name="privacy_policy"><span class="col-w" ng-bind-html="::website.general.privacy_policy_text"></span></checkbox></div></input-wrap><span ng-show="footer_newsletter_form.submitted && !data.privacy_policy" class="input-validation-msg lh-2 fs-3-x fs-3-l" ng-bind="::website.general.privacy_policy_mandatory"></span><div class="m-t"><div class="w-5 w-12-s pos-relative"><input type="hidden" ng-model="data.source" name="source" ng-init="data.source = \'Footer\'"> <input class="input b-a-0 placeholder center" type="email" name="email" id="email" ng-attr-placeholder="{{::website.footer.newsletter_placeholder}}" ng-init="setForm(footer_newsletter_form)" ng-model="data.email" ng-enter="submit()" required></div><div class="w-3 w-12-s m-t-2-s"><action class="w-12 button-2" busy="footer_newsletter_form.busy" ng-click="submit()">Submit</action></div><div class="center footer-newsletter-form"><p field-notice="email" form="footer_newsletter_form"></p><result class="center" code="code" success="{{::website.footer.newsletter_success_message}}"></result></div></div></form><div class="m-t-2"><span class="inline-block p-r-2 p-l-2 col-w fs-6" opt-href="{{::item.link}}" target="_blank" ng-repeat="item in ::website.footer.social_services"><i ng-class="::\'icon-\' + item.service"></i></span></div></div><div class="w-3 w-12-m w-12-s p-b-8 m-b-6-x m-b-6-l left-x left-l pos-relative" style="top: 3px;"><div id="feefologohere"></div></div></div></div><div class="wrap p-t center"><div class="p-t"><img src="/images/logo-small.svg" height="48"></div><div class="p-t p-b italic"><if-trade-store><span ng-repeat="item in ::website.footer.menu" ng-if="::item.show_in_trade_store || item.show_only_in_trade_store"><span class="inline-block p-t-2-s p-r-1 p-b-2-s p-l-1 fs-4-s"><span opt-href="{{::item.link}}" ng-attr-target="{{::item.new_window ? \'_blank\' : undefined}}" class="inline-block link-underline-h no-wrap" ng-bind="::item.text"></span></span><bar class="col-11" ng-if="::!$last"></bar></span></if-trade-store><if-not-trade-store><span ng-repeat="item in ::website.footer.menu" ng-if="::!item.show_only_in_trade_store"><span class="inline-block p-t-2-s p-r-1 p-b-2-s p-l-1 fs-4-s"><span opt-href="{{::item.link}}" ng-attr-target="{{::item.new_window ? \'_blank\' : undefined}}" class="inline-block link-underline-h no-wrap" ng-bind="::item.text"></span></span><bar class="col-11" ng-if="::!$last"></bar></span></if-not-trade-store></div><div class="footer__copyright" if-size="MS"><span class="left"><a class="fs-3 italic" ms-href="/terms">Terms</a></span> <a class="fs-3 italic" ms-href="/privacy">Privacy</a></div><div class="m-t p-b-3 col-13 footer__copyright"><span class="left" if-size="XL"><a class="fs-4 italic" ms-href="/terms">Terms</a></span> <span class="fs-2 fs-1-s font-2"><span class="uppercase">Copyright &copy; India Jane 2017</span></span> <span class="right" if-size="XL"><a class="fs-4 italic" ms-href="/privacy">Privacy</a></span></div><span class="uppercase fs-2 fs-1-s p-b block col-13">Made by <a class="button-inline link-underline-12 uppercase" target="_blank" href="https://www.tomandco.co.uk/" title="A London based Magento e-commerce agency">Tom&amp;Co</a>&nbsp; <a class="button-inline link-underline-12 uppercase" target="_blank" href="https://www.tomandco.co.uk/" title="A London based Magento e-commerce agency">Magento E-commerce</a></span></div><div class="pos-fixed w-12 left-0 right-0 bottom-0 z-10"><one-time-show name="newsletter-pop-up" template="/views/widget/pop-up.html" delay="{{::website.general.newsletter_show_delay}}" hide-delay="{{::website.general.newsletter_close_delay}}"></one-time-show><privacy-settings></privacy-settings></div></footer>'),
    e.put("/page/header.html", '<header class="pos-relative header" id="page-header" ng-controller="LocalPageHeaderController as vm"><div ng-class="vm.isWholesalePageNotLogged() ? \'header__padding--small\' : \'header__padding\'"><div class="z-9 header__block" id="header__block" toggle-class-on-scroll="is-sticky" offset-section-id="bottom_header"><div class="b-b"><div class="bg-col-w header__block__inner"><div class="wrap-x wrap-l flex-column flex-justify-between"><div class="flex flex-middle flex-justify-between p-b-1"><div class="w-4 w-2-s"><a class="inline-block p-a" ms-href="/basket" if-size="MS"><span class="pos-relative" ng-if="!vm.isWholesalePageNotLogged()"><i class="icon-basket fs-8 fs-12-m col-11 pos-relative"></i><span class="fs-2 fs-6-m col-12 bottom-1 left-0 pos-absolute block center w-12" ng-bind="customer_basket_qty"></span></span></a><div if-not-in-wholesale><ul if-size="!MS"><li class="inline-block p-r"><a class="fs-3 link" ms-href="/our-stores"><i class="fs-9 icon-location-gold"></i> Our Stores</a></li><li class="inline-block"><bar></bar></li><li class="inline-block p-r p-l"><span class="fs-3 link" ng-click="vm.toggleMinisearch()"><i class="m-r-2 fs-6 icon-search"></i> Search</span></li><li class="inline-block"><bar></bar></li></ul></div></div><div class="w-4 w-8-s p-t-3 p-t-2-m p-t-2-s p-b-2-m p-b-2-s center"><a ms-href="/" class="inline-block z-5 header__logo"></a></div><div class="w-4 w-2-s pos-relative right"><div if-not-in-wholesale><ul if-size="!SM"><li class="inline-block b-r p-r" ng-repeat="link in website.general.header_links track by $index"><a class="fs-3 link" ms-href="{{::link.link}}" ng-bind="::link.text"></a><bar></bar></li><li class="inline-block p-r" ng-switch="!!customer_logged"><a class="fs-3 link" ms-href="/account" ng-switch-when="true">My Account</a> <a class="fs-3 link" ms-href="/account/login" ng-switch-when="false">Sign in</a></li><li class="inline-block"><bar></bar></li><li class="inline-block" ng-if="!!customer_logged"><a class="fs-3 link" ms-href="/account/wishlist">Wishlist <span>({{customer.wishlist.data.items.length}})</span></a></li><li class="inline-block" ng-if="!!customer_logged && !vm.isWholesalePageNotLogged()"><bar></bar></li><li class="inline-block p-l" ng-if="!vm.isWholesalePageNotLogged()"><span class="fs-3 link minibasket-toggle" ng-click="toggleMinibasket()">Your bag <span>({{customer_basket_qty}})</span></span></li></ul></div><span class="inline-block p-t p-r p-b-3 p-l fs-7 cursor-pointer" off-canvas-toggle="menu" if-size="MS"><div class="col-11 icon-nav"><span></span> <span></span> <span></span> <span></span></div></span><minibasket show-on-add="true" if-size="!SM"></minibasket></div></div></div></div><div class="bg-col-w-90" ng-if="!vm.isWholesalePageNotLogged()"><div class="wrap-x wrap-l flex-column flex-justify-between"><div class="m-t-1 flex flex-justify-center" if-size="XL"><span class="inline-block lh-1 p-t-2 p-r p-r-3-l p-b-2 p-l p-l-3-l meganav__link" ng-class="::{\'uppercase\': item.uppercase, \'col-2\': item.highlight}" opt-href="{{::item.link}}" opt-href-class="inline-block" active-menu-item="{{::item.link}}" ng-repeat="item in ::website.meganav.menu" meganav-class="is-active" meganav-hover-active="{{::item.columns ? 1 : 0}}" meganav-hover="main.{{::$index}}" ng-bind="::item.text"></span></div></div></div></div><div class="pos-absolute left-0 right-0 w-12 z-4 meganav" if-size="XL"><div class="hide-up-container"><div class="ng-hide-animate ng-hide hide-up" meganav-group-class="!ng-hide" meganav-group-name="main"><div class="w-12 m-r--100 bg-col-w ng-hide ng-hide-animate hide-fade meganav__submenu" ng-repeat="item in ::website.meganav.menu" ng-if="::item.columns.length" meganav="main.{{::$index}}" meganav-hover="main.{{::$index}}"><div class="wrap"><div class="flex p-b"><div class="m-b-0" ng-class="::[ column.width != \'auto\' ? \'c-\' + column.width + \'-set\' : \'flex-grow c-3-set\', {\'m-r-0\': $last} ]" ng-repeat="column in ::item.columns"><div ng-repeat="component in ::column.components" ng-switch="::component.acf_fc_layout"><div class="flex" ng-switch-when="menu"><div ng-repeat="column in ::component.columns" ng-class="::[ column.column_width != \'auto\' ? \'w-\' + column.column_width : \'flex-grow w-3\' ]"><p class="p-t-5 p-b b-b b-col-17 col-11 fs-1 ls-3 font-2 fw-bold uppercase" opt-href="{{::column.link}}" ng-bind="::(column.header || \'&nbsp;\')"></p><ul class="m-t-2"><li ng-repeat="link in ::column.links"><span class="block p-t-2 p-b-2 fs-4 fs-3-l link" opt-href="{{::link.link}}" ng-bind="::link.text"></span></li></ul></div></div><div ng-switch-when="image"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase" opt-href="{{::component.link}}" ng-bind="::(component.title ||\'&nbsp;\')"></p><div opt-href="{{::component.link}}"><div ng-class="::\'ratio-\' + component.ratio"><img class="fill" tco-image="::component.image" ng-attr-alt="{{::component.title}}" always="1" fit-in="{{::component.fit_in || 0}}"></div><div class="m-t p3" ng-if="::component.text" ng-bind-html="::component.text"></div></div></div></div></div></div></div><div class="p-a-2 bg-col-11" ng-if="::website.meganav.sections"><div class="wrap"><div class="m-b-0 p-t-1 font-2 fs-2 ls-3 col-w uppercase" ng-class="::[ {\'left\': $first, \'center\': $middle, \'m-r-0 right\': $last}, \'c-\' + (12 / website.meganav.sections.length) + \'-set\' ]" opt-href="{{::section.link}}" ng-repeat="section in ::website.meganav.sections track by $index" ng-bind-html="::section.text"></div></div></div></div></div></div></div><div class="pos-absolute left-0 right-0 w-12 z-3 minisearch" ng-controller="MiniSearchController" if-size="XL"><div class="hide-up-container"><div class="bg-col-15 ng-hide-animate ng-hide hide-up" ng-show="vm.visibleMinisearch"><div class="wrap pos-relative p-t-2 p-b-2"><form class="form-small" ng-submit="submit()" novalidate autocomplete="off" name="header_search_form"><input class="p-r-0 p-l-0 input-t b-a-0 placeholder-large normal" type="text" ng-attr-placeholder="{{::website.general.header_search_placeholder}}" id="minisearch-input" ng-model="data.search" required name="search" minlength="3" ng-init="setForm(header_search_form)" ng-blur="reset(); showMiniSearch = 0;"></form><div class="m-t-2 fs-3 italic" ng-bind="::website.general.header_search_hint"></div><div class="pos-absolute top-0 right-0 bottom-0 flex flex-middle p-l cursor-pointer" ng-click="vm.closeMinisearch()"><i class="col-11 icon-close"></i></div></div></div></div><minisearch-hint class="pos-absolute right-0 left-0 w-12 z-3" search="data.search"></minisearch-hint></div></div></div><div class="p-a-2 bg-col-14" if-trade-store><div class="wrap"><div class="m-b-0 p-t-1 font-2 fs-2 ls-3 uppercase center">You are now working in the <span class="col-11 uppercase">Trade Store</span></div></div></div><div id="bottom_header"></div></header>'),
    e.put("/page/notifications.html", '<div class="pos-fixed left-0 top-0 right-0 z-100 w-12"><div class="hide-up-container"><div class="center bg-col-w b-b b-w-2 p-a form-height1 center ng-hide-animate ng-hide hide-up" ng-show="shouldShow && notifications.length"><div class="p-b" ng-repeat="item in notifications | limitTo:1" ng-if="item.notice.type == \'addToCart\'"><p class="fs-8 lh-13" ng-bind="::\'Item added to your cart\' | ms"></p><checkout-button class="m-t-2" busy="form.busy" ng-click="item.close()"><span ng-bind="::\'continue to checkout\' | ms"></span></checkout-button></div></div></div></div>'),
    e.put("/page/social-connect.html", '<div class="flex-m flex-l flex-x"><a class="col-w c-6 c-12-s button m-r-2" ng-href="{{::connect.facebook}}" ng-bind=":: \'Sign in with facebook\' | ms" ng-if="connect.facebook"></a><a class="col-w c-6 c-12-s button m-r-0" ng-href="{{::connect.google}}" ng-bind=":: \'Sign in with Google\' | ms" ng-if="connect.google"></a></div>'),
    e.put("/page/socialButtons.html", '<share-by-email ng-if="::factoryName == \'product\'" product="model.id"></share-by-email><span class="cursor-pointer m-r-1 icon-facebook" ng-click="share(\'facebook\')"></span> <span class="cursor-pointer m-r-1 icon-twitter" ng-click="share(\'twitter\')"></span> <span class="cursor-pointer icon-pinterest" ng-click="share(\'pinterest\')"></span>'),
    e.put("/blocks/addressForm.html", '<form name="form" ng-submit="submit(form)" novalidate><div ng-include="\'/blocks/addressForm/body.html\'" ng-init="setForm(form)"></div><checkbox model="data" class="label" var-name="is_billing">Set as default billing address</checkbox><checkbox model="data" class="label" var-name="is_shipping">Set as default shipping address</checkbox><action ng-click="submit(form)" code="code" busy="form.busy" class="button--primary c-4-x c-4-l c-6-m c-12-s p-l-0 p-r-0 m-r-2-x m-b-0 m-t">Save address</action><result code="code" success="Address saved."></result></form>'),
    e.put("/ui/input-wrap.html", '<div class="pos-relative w-12"><label class="m-b-2 label" ng-if="::$ctrl.label || $ctrl.forceLabel" ng-class="{\'is-required\': $ctrl.required}" ng-bind-html="::$ctrl.label || \'&nbsp;\'"></label><ng-transclude></ng-transclude><span class="pos-absolute top-100 left-0 m-t-1" ng-if="$ctrl.name" field-notice="{{::$ctrl.name}}" form="$ctrl.form" parent-error-class="is-invalid"></span></div>'),
    e.put("/widget/newsletter.html", ""),
    e.put("/views/404.html", '<div class="pos-relative page-not-found vc-outer"><img class="fill" tco-image="::website.general.page_not_found_background"><div class="vc-inner-middle"><div class="wrap right pos-relative"><div class="w-6 w-8-m w-12-s right p-a page-not-found-overlay"><div class="left"><h3 class="h3 fs-9-s lh-1" ng-bind-html="::website.general.page_not_found_heading"></h3><div class="p-t p-b"><p class="text fs-4-s lh-2" ng-bind-html="::website.general.page_not_found_copy"></p><div class="p-t p-b"><p class="fs-4-s lh-2 w-6 inline-block" ng-repeat="url in ::website.general.page_not_found_menu track by $index"><a ms-href="{{::url.link}}" class="link m-b-1" ng-bind-html="::url.text"></a></p></div><a ms-href="/" class="button">Continue Shopping</a></div></div></div></div></div></div>'),
    e.put("/views/500.html", '<div class="p-t p-b center"><div class="h4 m-t m-b fw-bold italic">Something went wrong whilst loading this page.</div><div class="h4 m-t m-b fw-bold italic">Please click retry below</div><span class="button" onclick="window.location.reload();">RETRY</span></div>'),
    e.put("/views/account.html", '<div ng-if="customer.data.logged"><off-canvas template="/page/off-canvas/account-menu.html" close-delay="0" name="account-menu" ng-if="$root.isS||$root.isM" side="left"></off-canvas><div class="wrap center p-b"><div class="w-12 left"><span off-canvas-toggle="account-menu" ng-if="$root.isS||$root.isM" class="float-left inline-block cursor-pointer va-m icon-burgermenu fs-22-m fs-18-s m-l-2-m m-l-1-s"></span><div class="center m-t-4 m-b-4 m-b-s p-b-s"><h1 class="h3 inline-block b-w-2 b-b b-b-0-l b-b-0-x b-col-grey-20 p-l p-r" ng-bind="current.title"></h1></div><div class="c-3 left" ng-if="!$root.isS&&!$root.isM"><a ng-repeat="item in accountNavigation | orderBy : \'order\'" ms-href="{{::\'/account/\' + item.urlkey}}" class="p-t-2 p-b-2 block" ng-class="{\'fw-bold\': item.active}" ng-if="::item.label" ng-bind="::item.label"></a><a ng-click="logout()" class="w-6 m-t-2 block fw-bold button button-primary" ng-bind="::\'Logout\' | ms"></a></div><div class="c-9-x p-l-0-s c-9-l m-r-0 b-l p-l-2 b-w-2 b-col-grey-20 account__outlet b-l-0-m b-l-0-s"><div ng-include src="current.template"></div></div></div></div></div>'),
    e.put("/views/basket.html", '<div class="wrap page-basket p-t-6 p-b-6"><div class="center"><h1 class="h2 p-b-3-s">Shopping Bag</h1></div><div class="m-t center" ng-if="!basketData.qty"><p class="m-b">There is nothing in your basket.</p><a ms-href="{{::lastCategoryPath || \'/shop\'}}" class="button-1">Continue shopping</a></div><div ng-if="basketData.qty"><basket-notifications class="w-12 m-t"></basket-notifications><div class="m-t b-a ls-1 fs-4 bg-col-14" if-size="!S"><div class="w-6"><p class="p-a-3">Product</p></div><div class="w-2 center"><p class="p-a-3">Unit Price</p></div><div class="w-2 center"><p class="p-a-3">Quantity</p></div><div class="w-2 right"><p class="p-a-3">Total</p></div></div><div basket-list-item ng-repeat="item in basketData.items" item="item" custom="{first: $first}"></div><div class="m-t m-t-0-s"><div class="w-8 w-6-m w-12-s"><a class="link" ms-href="{{::lastCategoryPath || \'/shop\'}}" if-size="!S"><i class="icon-arrow-left fs-3"></i> Continue shopping</a><div class="m-t" if-size="!S"><p ng-bind="::website.general.heading"></p><div class="inline-block m-t-2" ng-class="{\'m-r-2\' : !$last}" ng-repeat="logo in ::website.general.card_logo"><img tco-image="::logo.image" height="40"></div></div></div><div class="right w-4 w-6-m w-12-s"><div class="b-b p-b-3" ng-include="\'/views/basket/totals.html\'"></div><div class="m-t"><checkout-button busy="form.busy"></checkout-button></div><div class="m-t-6" coupon-code-form></div></div></div></div><div class="m-t-1 m-b-1 text" ng-bind="::website.general.additional_information"></div><a class="link m-t block" ms-href="{{::lastCategoryPath || \'/shop\'}}" if-size="S"><i class="icon-arrow-left fs-3"></i> Continue shopping</a><div class="m-t-8" ng-if="basketData.qty"><product-related products="basketData.related" limit="4" ee-list-name="You may also like"><h3 class="m-b h3 center">YOU MAY ALSO LIKE</h3></product-related></div></div>'),
    e.put("/3rdparty/sagepay/sagepay-pi-form.html", '<input-wrap class="block m-t" form="form" ng-repeat="item in vm.tokens track by item.id"><radio model="vm.data.token" required name="token" form="form" value="::item.id" numeric="true"><span ng-bind="::(item.card_type + \' \' + item.last_four + \' \' + (item.expiry_date | date:formatDate))"></span></radio></input-wrap><input-wrap class="block m-t" form="form" ng-if="vm.tokens.length"><radio model="vm.data.token" required name="token" form="form" value="0" numeric="true"><span ng-bind=":: \'Other card\'"></span></radio></input-wrap><div ng-form="piForm" novalidate autocomplete="off"><input-wrap class="pos-relative block m-t w-4 w-6-m w-12-s" label="{{:: \'CV2\'}}" required="true" name="token_cvv" form="form" ng-if="vm.tokens.length && vm.data.token"><cvv-info></cvv-info><input class="input" type="text" id="sd-token_cvv" name="token_cvv" ng-model="vm.data.token_cvv" required ng-minlength="3" ng-maxlength="4" autocomplete="off"></input-wrap><div ng-if="!vm.tokens.length || !vm.data.token"><div size-class="XM:flex"><input-wrap label="Card number" required="true" form="piForm" name="number" can-show="vm.form.submitted" class="c-5 c-8-l c-12-set-s m-b-0 m-b-4-s"><div ng-class="!vm.cardNotMatched && vm.data.cc_type ? \' card-type card-type--\' + (vm.data.cc_type | lowercase) : \'\'"><input class="input" type="text" name="number" ng-model="vm.data.number" required autocomplete="off"></div></input-wrap><input-wrap class="c-3 c-7-l c-12-set-s m-b-0 m-r-0-l" label="Card type" required="true" form="piForm" name="cc_type" can-show="vm.form.submitted" ng-if="vm.cardNotMatched"><select class="select" name="cc_type" ng-model="vm.data.cc_type" required ng-options="value as label for (value, label) in vm.ccTypes"><option value>select your card type</option></select></input-wrap><div class="c-4 c-8-l c-12-set-s m-t-4-l m-b-0 m-b-4-s" ng-class="{\'m-t-4-l\' : vm.cardNotMatched}"><label class="m-b-2 block label fs-6-x required no-wrap">Expiration date</label><input-wrap class="c-8 m-b-0" required="true" form="piForm" name="expiryMonth" can-show="vm.form.submitted"><select class="select" name="expiryMonth" ng-model="vm.data.expiryMonth" ng-options="o.value as o.label for o in vm.months" required><option value>month</option></select></input-wrap><input-wrap class="c-4 m-r-0 m-b-0" required="true" form="piForm" name="expiryYear" can-show="vm.form.submitted"><select class="select" name="expiryYear" ng-model="vm.data.expiryYear" ng-options="o.value as o.label for o in vm.years" required><option value>year</option></select></input-wrap></div><input-wrap label="Security code (CVV)" required="true" form="piForm" name="cvc" can-show="vm.form.submitted" class="c-3 c-8-l c-12-set-s m-b-0 m-r-0 m-t-4-l"><input class="input" type="text" id="sd-cc-csv" name="cvc" ng-model="vm.data.cvc" required ng-minlength="3" ng-maxlength="4" autocomplete="off"></input-wrap></div><div class="pos-relative"><cvv-info class="pos-absolute right-1 top-1"></cvv-info></div></div></div>'),
    e.put("/page/off-canvas/account-menu.html", '<div class="p-a" ng-if="$root.isLoggedIn"><div ng-controller="AccountController" class="off-canvas__nav-menu"><a ms-href="/account/{{::item.urlkey}}" ng-repeat="item in accountNavigation | orderBy : \'order\'" class="block p-t-1 p-b-1 lh-14 b-b b-col-grey-30" ng-class="{\'fw-bold\': item.active}" ng-if="::item.label" ng-bind="::item.label"></a> <a ng-click="logout()" class="block p-t-1 p-b-1 lh-14 b-b b-col-grey-30 col-orange">Logout</a></div></div>'),
    e.put("/page/off-canvas/account-nav.html", '<div ng-if="$root.isLoggedIn" off-click="close()" off-click-filter="\'.account-nav-toggle\'"><div class="h3 m-b">My Account:</div><div ng-controller="AccountController"><a href="/account/{{ :: item.urlkey }}" ng-repeat="item in accountNavigation | orderBy : \'order\'" class="link-inherit no-link-hover off-canvas__nav-menu-item open-tab block w-12 no-after m-b-05" ng-class="{ \'fw-bold\' : item.active }" ng-if=":: item.label">{{ :: item.label }}</a><a ng-click="logout()" class="link-inherit no-link-hover off-canvas__nav-menu-item open-tab block w-12 no-after">Logout</a></div></div>'),
    e.put("/page/off-canvas/blog-nav.html", '<div class="pos-relative off-canvas__menu" off-click="close()" off-click-filter="\'.off-canvas__menu,.off-canvas-toggle\'"><post-category-nav template="/views/blog/category/list-off-canvas.html"></post-category-nav></div>'),
    e.put("/page/off-canvas/category-filters.html", '<div class="off-canvas__category" off-click="close()" off-click-filter="\'[off-canvas-toggle]\'" off-click-if="status.isOpen"><span class="pos-absolute top-2 right-2" ng-click="close()" ng-touch="close()"><i class="icon-close"></i></span><product-list-filters collection="::custom.category.products" ng-if="custom.category" template-family="off-canvas" allowed="::custom.allowed" filters="::custom.category.filters" category-filter="::category.id"></product-list-filters></div>'),
    e.put("/page/off-canvas/menu.html", '<div class="fill bg-col-w off-canvas__menu" off-click="close()" off-click-filter="\'[off-canvas-toggle]\'" off-click-if="status.isOpen" ng-controller="LocalOffCanvasController as vm"><div class="fill flex-column ng-hide-animate main-level" ng-hide="vm.isNextLevel"><div class="b-b search" ng-if="!vm.isNextLevel" ng-include="\'/page/off-canvas/search.html\'"></div><div class="flex-column flex-grow flex-justify-between"><div class="flex-grow p-a overflow-y-scroll" if-not-in-wholesale><div ng-if="!vm.isWholesalePageNotLogged()"><p class="p-t p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase" ng-bind=":: \'Shop by category\' | ms"></p><ul class="p-l-2"><li ng-repeat="item in ::vm.website.meganav.menu"><a class="block flex flex-middle flex-justify-between p-t-3 p-b-3 link-16" ms-href="{{::item.link}}" ng-click="vm.nextLevel($event, item)" ng-touch="vm.nextLevel($event, item)"><span class="inline-block font-va-fix" ng-bind="::item.text"></span> <i class="float-right col-11 fs-4 icon-right-dir" ng-if="::item.columns"></i></a></li></ul></div><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase" ng-bind=":: \'Account\' | ms"></p><ul class="p-l-2" ng-switch="!!vm.customer_logged"><li><a class="block p-t-3 p-b-3 link-16" ms-href="/basket" ng-bind=":: \'Your Bag\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account" ng-switch-when="true" ng-bind=":: \'My Account\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/edit" ng-switch-when="true" ng-bind=":: \'Account information\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/address-book" ng-switch-when="true" ng-bind=":: \'Address book\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/my-orders" ng-switch-when="true" ng-bind=":: \'My orders\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/gift-registry" ng-switch-when="true" ng-bind=":: \'Gift registry\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/wishlist" ng-switch-when="true" ng-bind=":: \'Wishlist\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/trade-information" ng-switch-when="true" ng-bind=":: \'Trade Information\' | ms"></a></li><li if-trade-store><a ms-href="/product-catalogue" class="block p-t-3 p-b-3 link-16" ng-switch-when="true" ng-bind=":: \'Trade Product Catalogue\' | ms"></a></li><li><a ng-click="vm.logout()" class="block p-t-3 p-b-3 link-16" ng-switch-when="true" ng-bind=":: \'Logout\' | ms"></a></li><li><a class="block p-t-3 p-b-3 link-16" ms-href="/account/login" ng-switch-when="false" ng-bind=":: \'Sign in\' | ms"></a></li><li class="p-t"><a class="link-16" ms-href="/our-stores">Our Stores <i class="fs-9 m-l-1 icon-location-gold"></i></a></li></ul></div><ul class="p-t p-b-3 b-t" vh-fix><li class="inline-block p-r p-l col-11" opt-href="{{::item.link}}" target="_blank" ng-repeat="item in ::vm.website.footer.social_services"><i ng-class="::\'icon-\' + item.service"></i></li></ul></div></div><div class="fill flex-column bg-col-w ng-hide ng-hide-animate next-level" ng-show="vm.isNextLevel"><div class="b-b search" ng-include="\'/page/off-canvas/search.html\'" ng-show="vm.isSearch"></div><div class="b-b search go-back" ng-if="!vm.isSearch"><div class="flex flex-middle flex-justify-between p-l search"><div class="inline-block fs-6 link" ng-click="vm.goBack()" ng-touch="vm.goBack()"><i class="fs-3 icon-left-dir"></i>&nbsp; <span class="inline-block p-t-2">Go back</span></div><div class="flex flex-middle p-r p-l cursor-pointer" ng-click="vm.searchToggle(); $root.focusOn(\'off-canvas-search-input\')" ng-touch="vm.searchToggle(); $root.focusOn(\'off-canvas-search-input\')"><i class="fs-7 col-11 icon-search"></i></div></div></div><div class="flex-grow overflow-y-scroll" vh-fix><div class="ratio-2-1" opt-href="{{vm.menu.link}}" ng-if="vm.menu.image_mobile"><img class="fill" tco-image="vm.menu.image_mobile" ng-attr-alt="vm.menu.text"><div class="pos-absolute right-0 bottom-0 left-0 p-a p-b-3 bg-col-w-75" ng-bind="vm.menu.text_mobile" ng-if="vm.menu.text_mobile"></div></div><div class="p-r p-l"><div ng-repeat="column in vm.menu.columns"><div ng-repeat="component in ::column.components" ng-switch="::component.acf_fc_layout"><div ng-switch-when="menu"><div ng-repeat="column in ::component.columns"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase" opt-href="{{::column.link}}" ng-bind="::(column.header || \'&nbsp;\')"></p><ul class="p-l-2"><li ng-repeat="link in ::column.links"><span class="block p-t-3 p-b-3 link-16" opt-href="{{::link.link}}" ng-bind="::link.text"></span></li></ul></div></div></div></div></div></div></div></div>'),
    e.put("/page/off-canvas/search.html", '<div class="flex flex-middle bg-col-15 search" ng-controller="MiniSearchController"><div class="flex flex-middle p-a p-r-2" ng-if="vm.isSearch"><i class="fs-7 col-11 icon-search" ng-click="submit()"></i></div><div class="flex-grow p-l" ng-class="{\'p-l\': !vm.isSearch}"><form ng-submit="submit()" novalidate autocomplete="off" name="off_canvas_search_form"><input class="input-15 placeholder-large" type="text" placeholder="Search" id="off-canvas-search-input" ng-model="data.search" ng-init="setForm(off_canvas_search_form);" name="search"></form></div><div class="flex flex-middle p-a cursor-pointer"><div ng-if="vm.isNextLevel"><i class="fs-7 col-11 icon-search" ng-if="!vm.isSearch" ng-click="vm.searchToggle(); $root.focusOn(\'off-canvas-search-input-search\')" ng-touch="vm.searchToggle()"></i> <i class="col-11 icon-close" ng-click="vm.searchToggle()" ng-touch="vm.searchToggle()" ng-if="vm.isSearch"></i></div><i class="fs-7 col-11 icon-search" ng-if="!vm.isNextLevel" ng-click="data.search ? submit() : $root.focusOn(\'off-canvas-search-input\')" ng-touch="data.search ? submit() : $root.focusOn(\'off-canvas-search-input\')"></i></div><minisearch-hint template="/page/header/minisearch-hint-off-canvas.html" search="data.search"></minisearch-hint></div>'),
    e.put("/blocks/addressForm/body.html", '<div class="w-12"><div class="c-6 c-12-set-s m-r-0-s"><input-wrap class="block p-b-4-s" label="First Name" required="true" name="{{::prefix}}firstname" form="form"><input class="input" type="text" id="{{::prefix}}firstname" name="{{::prefix}}firstname" ng-model="data.firstname" required></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap class="block p-b-4-s" label="Last Name" required="true" name="{{::prefix}}lastname" form="form"><input class="input" type="text" id="{{::prefix}}lastname" name="{{::prefix}}lastname" ng-model="data.lastname" required></input-wrap></div></div><div class="w-12"><div class="c-6 c-12-set-s m-r-0-s"><input-wrap class="block p-b-4-s" label="Contact Phone" required="true" name="{{::prefix}}telephone" form="form"><input class="input" type="tel" if-size="XL" id="{{::prefix}}telephone" name="{{::prefix}}telephone" ng-model="data.telephone" required><input class="input" type="text" if-size="MS" pattern="[0-9]*" inputmode="numeric" name="{{::prefix}}telephone" ng-model="data.telephone" required></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap class="block p-b-4-s" label="Country" required="true" name="{{::prefix}}country" form="form"><select class="select" name="{{::prefix}}country" id="{{::prefix}}country" ng-model="data.country_id" ng-options="o.code as o.name for o in countries" required ng-change="reset()"></select></input-wrap></div></div><div class="pos-relative w-12 m-b"><pca-autocomplete data="data" manual="data.manual" country="data.country_id"></pca-autocomplete></div><div ng-if="data.manual"><div class="w-12"><div class="c-6 c-12-set-s m-r-0-s"><input-wrap class="block p-b-4-s" label="Address Line 1" required="true" name="{{::prefix}}street_1" form="form"><input class="input" type="text" id="{{::prefix}}street" name="{{::prefix}}street_1" ng-model="data.street_1" required></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap class="block p-b-4-s" label="Address Line 2" force-label="$root.isS ? false : true" name="{{::prefix}}street_2" form="form"><input class="input" type="text" id="{{::prefix}}street-2" name="{{::prefix}}street_2" ng-model="data.street_2"></input-wrap></div></div><div class="w-12"><div class="c-6 c-12-set-s m-r-0-s"><input-wrap class="block p-b-4-s" label="City" required="true" name="{{::prefix}}city" form="form"><input class="input" type="text" id="{{::prefix}}city" name="{{::prefix}}city" ng-model="data.city" required></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap class="block p-b-4-s" label="Region" required="region.region_required || country.regions" name="{{::prefix}}region" form="form"><input class="input" type="text" name="{{::prefix}}region" id="{{::prefix}}region" ng-model="data.region" ng-if="!country.regions" ng-required="region.region_required && !country.regions"><select class="select" name="{{::prefix}}region_id" id="{{::prefix}}region" ng-model="data.region_id" ng-options="o.code||o.name as o.name for o in country.regions" required ng-if="country.regions"><option value>Region</option></select><span class="input-validation-msg" ng-show="form.submitted && (form.region.$invalid || form.region_id.$invalid || country.regions && !data.region_id)" ng-if="region.region_required || country.regions">This is a required field value!</span></input-wrap></div></div><div class="w-12"><div class="c-6 c-12-set-s m-r-0-s"><input-wrap class="block p-b-4-s" label="Postcode" required="!country.postcode_optional" name="{{::prefix}}postcode" form="form"><input class="input" type="text" id="{{::prefix}}postcode" name="{{::prefix}}postcode" ng-model="data.postcode" ng-required="!country.postcode_optional"></input-wrap></div><div class="c-6 c-12-set-s m-r-0-s"></div></div></div>'),
    e.put("/page/header/minibasket.html", '<div class="pos-relative top-6 right-0 z-5 ng-hide ng-hide-animate minibasket" ng-class="{\'main-overlay-open\': visible}" ng-show="visible"><main-overlay ng-if="visible"></main-overlay><sticky top="10"><div class="pos-absolute top-0 right-0 p-a-3 b-a bg-col-w left minibasket__wraper" off-click="toggle(false)" off-click-filter="\'.minibasket-toggle\'" off-click-if="visible"><p ng-if="!basketData.qty" class="center p-t p-b">You don\'t have anything<br>in your basket yet.</p><div ng-if="basketData.qty" ng-controller="LocalCheckoutButtonController as vm"><p class="p-b-2 b-b m-b fs-8">Shopping Bag</p><div ng-class="{\'minibasket__products overflow-hidden overflow-y-scroll custom-scrollbar p-r-2\': basketData.items.length > 2}"><minibasket-list-item ng-repeat="item in basketData.items | orderBy:\'-added_at\'" item="item" class="block b-col-9" ng-class="{\'b-b m-b\': !$last}"></minibasket-list-item></div><div class="p-t-3 p-b-3" ng-include="\'/views/basket/totals.html\'"></div><div class="b-t p-b-2 right input-validation-msg" ng-if="!vm.minOrderValue"><span class="p-r-1" ng-bind="::\'The minimum order is\' | ms"></span><if-not-trade-store><span price="::vm.website.min_order_value"></span></if-not-trade-store><if-trade-store><span price="::vm.website.min_order_value/1.2"></span></if-trade-store></div><div ng-if="basketData.qty"><a ms-href="/basket" class="button button-1 c-6 m-b-0">View Bag</a><span class="button button-2 c-6 m-b-0 m-r-0 is-disabled" ng-if="vm.isDisabled">Checkout</span><a ms-href="/checkout" class="button button-2 c-6 m-b-0 m-r-0" ng-if="!vm.isDisabled">Checkout</a></div><div class="p-t fs-4"><span class="link" ng-click="toggle(false)" if-size="!S"><i class="icon-arrow-left fs-3"></i> Continue shopping</span></div></div></div></sticky></div>'),
    e.put("/page/header/minisearch-hint-off-canvas.html", '<div class="bg-col-w ng-hide-animate ng-hide minisearch-off-canvas z-5" ng-show="hasStandardResults && visible" off-click="hide()" off-click-filter="\'.mini-search-results__inner,.mini-search-form__input-wrapper\'" off-click-if="visible"><div class="p-r p-l mini-search-results__inner"><div class="m-b" ng-if="products.length"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase">Products</p><listing class="m-t-2 block" collection="products" total-limit="6" models-name-prependix="minisearch" template="/views/catalog/product/list-minisearch-off-canvas.html" enable-lazy-load="0" empty="There are no results matching your search."></listing></div><div class="m-b" ng-if="categories.length"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase">Categories</p><ul class="m-t-2"><li ng-repeat="item in categories track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div><div class="m-b" ng-if="pages.length"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase">Pages</p><ul class="m-t-2"><li ng-repeat="item in pages track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div><div ng-if="posts.length"><p class="p-t-5 p-b col-11 fs-1 ls-3 font-2 fw-bold uppercase">The Edit</p><ul class="m-t-2"><li ng-repeat="item in posts track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div></div></div>'),
    e.put("/page/header/minisearch-hint.html", '<div class="hide-up-container"><div class="bg-col-w ng-hide-animate ng-hide hide-up" ng-show="hasStandardResults && visible && !$root.isMeganavOpen && ($root.isX || $root.isL)" off-click="hide()" off-click-filter="\'.mini-search-results__inner,.mini-search-form__input-wrapper\'" off-click-if="visible"><div class="wrap p-t p-b"><div class="mini-search-results__inner"><div class="c-3-set"><div class="m-b" ng-if="categories.length"><p class="p-t-1 p-b-1 col-11 fs-3 ls-3 font-2 fw-bold uppercase">Categories</p><ul class="m-t-2"><li ng-repeat="item in categories track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 p-l-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div><div class="m-b" ng-if="pages.length"><p class="p-t-1 p-b-1 col-11 fs-3 ls-3 font-2 fw-bold uppercase">Pages</p><ul class="m-t-2"><li ng-repeat="item in pages track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 p-l-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div><div ng-if="posts.length"><p class="p-t-1 p-b-1 col-11 fs-3 ls-3 font-2 fw-bold uppercase">The Edit</p><ul class="m-t-2"><li ng-repeat="item in posts track by item.id | limitTo:6"><span class="block p-t-2 p-b-2 p-l-2 fs-4 fs-3-l link" opt-href="{{::item.url}}" ng-bind="::item.name"></span></li></ul></div></div><div class="c-9-set m-r-0" ng-if="products.length"><p class="fs-4 inline-block normal m-r-3">Products</p><button class="fs-4 button-inline underline" ng-if="result.breadcrumbs[0].url" ng-click="browseAll()">Browse All</button><listing class="m-t-3 block" collection="products" total-limit="5" models-name-prependix="minisearch" template="/views/catalog/product/list-minisearch.html" enable-lazy-load="0" empty="There are no results matching your search."></listing></div></div></div><div ng-controller="WebsiteController"><div class="p-a-2 bg-col-11" ng-if="::website.meganav.sections"><div class="wrap"><div class="m-b-0 p-t-1 font-2 fs-2 ls-3 col-w uppercase" ng-class="::[ {\'left\': $first, \'center\': $middle, \'m-r-0 right\': $last}, \'c-\' + (12 / website.meganav.sections.length) + \'-set\' ]" opt-href="{{::section.link}}" ng-repeat="section in ::website.meganav.sections track by $index" ng-bind-html="::section.text"></div></div></div></div></div></div>'),
    e.put("/blocks/blog/custom-form.html", '<form name="form" ng-submit="submit()" novalidate class="inputs-on-white"><meta ng-init="setForm(form)"><div ng-repeat="field in ::formData.fields" ng-switch="::field.type" ng-class="::field.data[\'class\']"><label class="label p-t p-b-1" ng-class=":: { \'m-t m-b fw-bold\' : field.type == \'desc\', \'is-required\' : field.required}" ng-bind="field.label"></label><input ng-switch-when="text" class="input" type="text" name="{{::field.name}}" ng-model="data[field.name]" ng-required="::field.required"><input ng-switch-when="email" class="input" type="email" name="{{::field.name}}" ng-model="data[field.name]" ng-required="::field.required"><textarea ng-switch-when="textarea" class="textarea" name="question" ng-required="::field.required" ng-model="data[field.name]"></textarea><select ng-switch-when="dropdown" name="{{::field.name}}" class="select" ng-model="data[field.name]" ng-options="label as label for label in field.options" ng-required="::field.required"></select><span field-notice="{{::field.name}}" form="form" ng-if="::field.type!=\'desc\'"></span></div><action busy="form.busy" class="button-red w-12 m-t" code="result" ng-click="submit(form)">Send</action><result code="result" success="{{::successMessage || \'Your message has been sent, thank you!\'}}"></result></form>'),
    e.put("/views/account/address-book.html", '<div ng-controller="AddressBookController" ng-switch="!!addressData.list.length"><div ng-switch-when="true"><ng-include src="\'/views/account/address-book/defaults.html\'"></ng-include></div><div ng-if=":: additionalAddresses.length"><div class="fw-bold m-b m-t-8-m m-t-8-s">Additional addresses</div><div class="address-book__item c-6 c-12-s" ng-class="{\'m-r-0\':$odd}" ng-repeat="item in additionalAddresses"><div tco-address address="item"></div><p class="p-l-1 m-t-1"><a class="button-inline link underline" ms-href="/account/address-edit/{{::item.id}}">Edit</a><bar></bar><action-singleton action-class="button-inline link underline" result-class="float-left" action="remove(item.id)">Remove</action-singleton></p></div></div><p ng-switch-when="false">You have no address entries in your address&nbsp;book.</p><a ms-href="/account/address-edit" class="button button--primary fw-bold c-4-x c-4-l c-6-m c-12-s p-l-0 p-r-0 m-r-2-x m-b-0 m-t">Add new address</a></div>'),
    e.put("/views/account/address-edit.html", '<div ng-controller="AddressEditController"><div tco-address-form address="address" success-callback="close" class="inputs-on-white"></div></div>'),
    e.put("/views/account/card-details.html", '<div ng-controller="AccountCardDetailsController" ng-switch="!!cards.length"><div ng-switch-when="true"><div class="tab-header b-b bg-5 color-bg-primary fw-bold no-after"><div class="w-12"><span class="w-3">Card number</span><span class="w-3">Card type</span><span class="w-3">Expiry date</span><span class="w-3 right">Added at</span></div></div><div class="tab-header b-b no-after" ng-repeat="card in cards"><div class="w-12"><span class="w-3">{{card.last_four}}</span><span class="w-3">{{card.card_type}}</span><span class="w-3 right" ng-bind-html=":: card.expiry_date | formatdate"></span> --><span class="w-3 right" ng-bind-html=":: card.created_at | formatdate"></span></div></div></div><div ng-switch-when="false"><p>You don\'t have any saved cards.</p></div></div>'),
    e.put("/views/account/dashboard.html", '<h2 class="h4 no-underline">Account details</h2><p class="m-t-1 m-b-1 lh-1">{{customer.data.firstname}} {{customer.data.lastname}} - {{customer.data.email}}</p><a class="link lh-1" href="/account/edit">Edit</a><bar></bar><a class="link lh-1" href="/account/edit">Change password</a><ng-include class="block m-t" src="\'/views/account/address-book/defaults.html\'"></ng-include>'),
    e.put("/views/account/edit.html", '<form class="inputs-on-white" ng-controller="AccountEditController" name="form_account_data" ng-submit="submit(form_account_data)" novalidate><h2 class="h4 no-underline p-b">Account data</h2><div class="m-b m-b-6-m m-b-6-s w-9 w-12-m w-12-s"><label class="label fs-6 is-required">First name</label> <input class="input" type="text" name="firstname" ng-model="data.firstname" required> <span field-notice="firstname" form="form_account_data"></span></div><div class="m-b m-b-6-m m-b-6-s w-9 w-12-m w-12-s"><label class="label fs-6 is-required">Last name</label> <input class="input" type="text" name="lastname" ng-model="data.lastname" required> <span field-notice="lastname" form="form_account_data"></span></div><div class="m-b m-b-6-m m-b-6-s w-9 w-12-m w-12-s"><label class="label fs-6 is-required">Email</label> <input class="input" type="email" name="email" ng-model="data.email" required> <span field-notice="email" form="form_account_data"></span></div><h2 class="h4 no-underline p-b">Change password</h2><div class="m-b m-b-6-m m-b-6-s w-9 w-12-m w-12-s"><label class="label fs-6">New password</label> <input class="input" type="password" name="password" ng-model="data.password"> <span field-notice="password" form="form_account_data"></span></div><div class="m-b m-b-6-m m-b-6-s w-9 w-12-m w-12-s"><label class="label fs-6">Password confirmation</label> <input class="input" type="password" name="confirmation" ng-model="data.confirmation" pw-check="data.password"> <span class="lh-3 error" ng-show="form_account_data.submitted && form_account_data.confirmation.$error.unique">Passwords do not match</span></div><div class="m-t m-b"><action type="submit" class="button--primary fw-bold c-4-x c-4-l c-6-m c-12-s m-b-0 p-l-0 p-r-0 m-r-2-x m-b-0" ng-click="submit(form_account_data)" code="code" busy="form_account_data.busy">Save</action><result class="block" code="code" success="Your data has been saved."></result></div></form>'),
    e.put("/views/account/event.html", '<div><gift-registry-details event-id="$parent.urlParts[2]"></gift-registry-details></div>'),
    e.put("/views/account/gift-registry.html", '<div ng-controller="GiftRegistryController as vm"><div class="p-b" ng-if="vm.statusEvents.busy">Loading...</div><div ng-if="!vm.statusEvents.busy && !vm.viewForm"><div class="fs-4-s" ng-if="vm.eventsList.length"><div class="b-b b-col-11 p-a p-l-1-s p-r-1-s flex flex-justify-between flex-middle"><span class="w-1">ID</span><span class="w-2">Date</span><span class="w-2">Status</span><span class="w-2">Occasion</span><span class="w-5"></span></div><div class="b-b p-a p-l-1-s p-r-1-s flex flex-justify-between flex-middle form-small" ng-repeat="event in vm.eventsList | orderBy:\'date\' track by event.event_id"><div class="w-1" ng-bind="::event.event_id"></div><div class="w-2" ng-bind-html="::event.date | formatdate"></div><div class="w-2" ng-bind="::event.status"></div><div class="w-2" ng-bind-html="::event.title"></div><div class="w-5 fs-4-l fs-4-m flex" size-class="S:flex-column flex-bottom, !S:flex-justify-center"><action class="button-inline" ng-click="vm.showEditEventForm(event)">Edit Info</action><bar if-size="!S"></bar><a ms-href="/gifts/manage-items/{{::event.sharing_code}}" class="button-inline">Manage Items</a><bar if-size="!S"></bar><div if-size="M"></div><a ms-href="/gifts/share/{{::event.sharing_code}}" class="button-inline">Share</a><bar if-size="!S"></bar><a ms-href="/gifts/view/{{::event.sharing_code}}" class="button-inline">Preview</a></div></div></div><div><span class="block" ng-if="!vm.eventsList.length">You have no events yet.</span><span class="button button--primary fw-bold c-4-x c-4-l c-6-m c-12-s p-l-0 p-r-0 m-r-2-x m-b-0 m-t" ng-click="vm.showNewEventForm()">Create new event</span></div></div><div ng-if="vm.viewForm"><h2 class="h4 m-b-1 fw-bold" ng-if="!vm.editedEvent.event_id">Create new Event</h2><h2 class="h4 m-b-1 fw-bold" ng-if="vm.editedEvent.event_id">Update Event Information</h2><div class="flex flex-middle m-t"><div class="c-4"><span class="link" ng-click="vm.hideForm()"><i class="icon-arrow-left col-11"></i> All My Events</span></div></div><h3 class="fs-7 m-b h5">Event details</h3><form name="form" ng-submit="vm.saveEvent()" novalidate><meta ng-init="vm.setForm(form)"><input type="hidden" name="edit_id" ng-value="{{::vm.editedEvent.event_id}}" ng-if="vm.editedEvent.event_id"><div><div class="c-6-set c-12-set-s m-r-0-s"><input-wrap label="Occasion" required="true" name="type_id" form="form"><select class="select" ng-options="item.type_id as item.name for item in ::vm.occasionTypes" id="type_id" name="type_id" ng-model="vm.editedEvent.type_id" required></select></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap label="Date" required="true" name="date" form="form"><date-input options="options" model="vm.editedEvent" var-name="date" name="date"></date-input></input-wrap></div></div><div><div class="c-6-set c-12-set-s m-r-0-s"><input-wrap label="Registrant First Name" required="true" name="fname" form="form"><input class="input" type="text" id="fname" name="fname" ng-model="vm.editedEvent.fname" required></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap label="Registrant Last Name" required="true" name="lname" form="form"><input class="input" type="text" name="lname" id="lname" ng-model="vm.editedEvent.lname" required></input-wrap></div></div><div><div class="c-6-set c-12-set-s m-r-0-s"><input-wrap label="Co-Registrant First Name" name="fname2" form="form"><input class="input" type="text" id="fname2" name="fname2" ng-model="vm.editedEvent.fname2"></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap label="Co-Registrant Last Name" name="lname2" form="form"><input class="input" type="text" name="lname2" id="lname2" ng-model="vm.editedEvent.lname2"></input-wrap></div></div><h3 class="fs-7 m-b h5">Shipping address</h3><div class="m-b"><p class="m-b">You can select shipping address from your address book now or fill it later. Please note - if you do not provide shipping address, gift buyers will have to enter shipping information themself.</p><input-wrap label="Address" required="true" name="address_id" form="form"><select class="select" ng-options="item.id as item.label for item in vm.addresses" ng-model="vm.editedEvent.address_id"></select></input-wrap></div><h3 class="fs-7 m-b h5">Privacy settings</h3><div><div class="c-6-set c-12-set-s m-r-0-s"><input-wrap label="Password" name="password" form="form"><input class="input" type="password" name="password" ng-model="vm.editedEvent.password"></input-wrap></div><div class="c-6-set c-12-set-s m-r-0"><input-wrap label="Confirm Password" name="confirmation" form="form"><input class="input" type="password" name="confirmation" pw-check="vm.editedEvent.password" ng-model="vm.editedEvent.confirmation"></input-wrap></div></div><div class="m-t"><input-wrap name="search_allowed" form="form"><checkbox model="vm.editedEvent" var-name="search_allowed" name="search_allowed" class="checkbox m-b">Show in Search Results</checkbox></input-wrap></div><div class="flex flex-middle m-t"><div class="c-4"><span class="link" ng-click="vm.hideForm()"><i class="icon-arrow-left col-11"></i> All My Events</span></div><div class="c-8-set m-r-0 right"><action class="button-2 w-6 w-12-s" code="vm.statusSaveEvent.result" busy="vm.statusSaveEvent.busy" ng-click="vm.saveEvent()">Save Event</action><result class="float-left" code="vm.statusSaveEvent.result" success=""></result></div></div></form></div></div>'),
    e.put("/views/account/login.html", '<div class="wrap center p-b"><div class="w-6-x w-8-l m-t-8 m-b-8 left"><h1 ng-bind="::\'Sign in or create account\' | ms" class="h3 m-t m-b"></h1><form class="inputs-on-white" name="login_form" novalidate ng-controller="LoginController" ng-init="data.newsletter_source = \'account_GDPR\'"><label ng-bind="::\'Email Address\' | ms" class="fs-6 label"></label> <input class="input" type="email" name="email" placeholder="Enter email address" ng-change="check(login_form)" ng-model-options="{updateOn: \'blur\'}" ng-model="data.email" required ng-enter="check(login_form)"> <span field-notice="email" form="login_form"></span><div ng-if="checked" ng-switch="!!hasAccount"><div ng-switch-when="true"><p class="m-t-2 m-b fs-4">Welcome back {{hasAccount}}, please enter your password.</p><label ng-bind="::\'Password\' | ms" class="fs-6 label m-t-05"></label> <input class="input" type="password" name="password" ng-model="data.password" required ng-enter="autoAction(login_form)"> <span field-notice="password" form="login_form"></span></div><div ng-switch-when="false"><if-trade-store><p class="m-t col-1">Please <a class="button-inline underline" ms-href="/trade-registration">contact us</a> for trade account</p></if-trade-store><if-not-trade-store><label ng-bind="::\'First name\' | ms" class="fs-6 m-t label"></label> <input class="input" type="text" name="firstname" ng-model="data.firstname" required> <span field-notice="firstname" form="login_form"></span> <label ng-bind="::\'Last name\' | ms" class="fs-6 m-t label"></label> <input class="input" type="text" name="lastname" ng-model="data.lastname" required> <span field-notice="lastname" form="login_form"></span> <label ng-bind="::\'Password\' | ms" class="fs-6 m-t label"></label> <input class="input" type="password" name="password" ng-model="data.password" required> <span field-notice="password" form="login_form"></span><checkbox name="newsletter" class="label m-t-3" model="data" var-name="newsletter"><span ng-bind-html="::website.general.privacy_policy_text_2"></span></checkbox></if-not-trade-store></div></div><div class="m-t-2" ng-switch="checked && !hasAccount"><span ng-switch-when="false"><action type="submit" class="button--primary c-4-x c-4-l c-6-m c-12-s m-b-0 p-l-0 p-r-0 m-r-2-x m-b-0" ng-click="checked ? autoAction(login_form) : check(login_form)" code="code" google-recaptcha="autoAction(login_form, token)" busy="login_form.busy||checkBusy">Continue</action></span> <span ng-switch-when="true"><action type="submit" class="button--primary c-4-x c-4-l c-6-m c-12-s m-b-0 p-l-0 p-r-0 m-r-2-x m-b-0" code="code" google-recaptcha="autoAction(login_form, token)" if-not-trade-store busy="login_form.busy||checkBusy">{{ hasAccount ? \'Sign in\' : \'Create account\' }}</action></span><action class="button--secondary c-4-x c-4-l c-6-m c-12-s m-r-0 m-t-1-s m-b-0 p-l-0 p-r-0" ng-if="hasAccount" ng-bind="::\'Reset my password\' | ms" ng-click="quickPassword()" code="resetAction.result" busy="resetAction.busy"></action></div><result code="code" success=""></result><result code="resetAction.result" class="block m-t-1" success="We\'ve sent you an email with a link to reset your password."></result><p ng-bind="::\'Or log in with your social profile\' | ms" class="m-t-4 center m-t-14 fs-10"></p><social-connect class="block m-t-4"></social-connect></form></div></div>'),
    e.put("/views/account/my-orders.html", '<div ng-controller="OrderListController" ng-switch="!!orders.length"><div ng-if="ordersModel.busy" ng-bind="::\'Loading...\' | ms"></div><div ng-if="!ordersModel.busy"><div ng-switch-when="true"><div class="fw-bold b-b b-w-2 p-b-1 m-b-1 lh-1" if-size="!S"><span class="w-2 w-3-m"><span ng-bind="::\'Order\' | ms"></span> #</span><span class="w-2 w-3-m" ng-bind="::\'Date\' | ms"></span><span class="w-4" ng-if="!$root.isM" ng-bind="::\'Delivery to\' | ms"></span><span class="w-4 w-3-m" ng-bind="::\'Order total\' | ms"></span></div><div class="b-b b-w-2 m-b-1 p-t p-b-1 lh-1" ng-repeat="order in orders | orderBy:\'-date\'"><div class="w-2 w-3-m w-12-s"><span if-size="S"><span ng-bind="::\'Order\' | ms"></span> #:</span> <a class="link" ms-href="/account/order/{{::order.number}}" ng-bind="::order.number"></a></div><div class="w-2 w-3-m w-12-s"><span if-size="S" ng-bind="::\'Date\' | ms"></span> <span ng-bind-html="::order.date | formatdate"></span></div><div class="w-4" ng-if="!$root.isS && !$root.isM" ng-bind="::(order.shipping.firstname + \' \' + order.shipping.lastname)"></div><div class="w-2 w-3-m w-12-s"><span if-size="S" ng-bind="::\'Order total\' | ms"></span> <span price="::order.totals.grand_total"></span></div><div class="w-2 w-3-m w-12-s p-t-4-s" size-class="S:left,!S:right"><a class="link" ms-href="/account/order/{{::order.number}}" ng-bind="::\'view order\' | ms"></a><bar></bar><action-singleton action="reorder(order, custom, \'/basket\', true)" action-class="button-inline" result-class="w-12 m-t-0 right" success-message=""><span ng-bind="::\'reorder\' | ms"></span></action-singleton></div></div></div><div ng-switch-when="false"><p ng-bind="::\'You have no orders yet.\' | ms"></p><a href="/" class="button--primary button m-t" ng-bind="::\'Start Shopping\' | ms"></a></div></div></div>'),
    e.put("/views/account/order.html", '<div ng-controller="OrderViewController"><div class="m-t"><a class="link-underline" ms-href="/account/my-orders" ng-bind="::\'Back to My Orders\' | ms"></a></div><h2 class="m-t-8 fs-7"><span ng-bind="::\'Order\' | ms"></span>: # <span ng-bind="::order.number"></span> <span ng-bind-html="::order.date | formatdate"></span></h2><div class="m-t m-b"><div class="c-6-set c-12-s c-12-m p-b-4-m p-b-4-s"><h6 class="fw-bold" ng-bind="::\'Shipping address\' | ms"></h6><div class="m-t-1" tco-address address="order.shipping"></div></div><div class="c-6-set c-12-s c-12-m p-b-4-m p-b-4-s"><h6 class="fw-bold" ng-bind="::\'Billing address\' | ms"></h6><div class="m-t-1" tco-address address="order.billing"></div></div><div class="c-6-set c-12-s c-12-m p-b-4-m p-b-4-s"><h6 class="fw-bold" ng-bind="::\'Shipping method\' | ms"></h6><div class="m-t-1" ng-bind-html="order.shipping_method.description"></div></div><div class="c-6-set c-12-s c-12-m p-b-4-m p-b-4-s"><h6 class="fw-bold" ng-bind="::\'Payment\' | ms"></h6><div class="m-t-1" ng-bind-html="order.payment_method.description"></div></div></div><div class="fw-bold b-b b-w-2 p-b-1 m-b-1 lh-1" if-size="!S"><div class="w-6" ng-if="!$root.isS" ng-bind="::\'Name\' | ms"></div><div class="w-2 w-4-s" ng-bind="::\'Price\' | ms"></div><div class="w-2 w-4-s" ng-bind="::\'Qty\' | ms"></div><div class="w-2 w-4-s right" ng-bind="::\'Total\' | ms"></div></div><div class="b-b b-w-2 p-b-1 m-b-1 lh-1" ng-repeat="item in ::order.items" order-item item="item"></div><div class="right lh-2 m-t"><p><span ng-bind="::\'Total\' | ms"></span>: <span price="::order.totals.subtotal"></span></p><p class="m-t-1"><span ng-bind="::\'Shipping\' | ms"></span>: <span price="::order.totals.delivery"></span></p><p class="m-t-1" ng-if="::order.totals.discount"><span ng-bind="::\'Discount\' | ms"></span>: <span price="::order.totals.discount"></span></p><p class="m-t-2 fw-bold"><span ng-bind="::\'Order total\' | ms"></span>: <span price="::order.totals.grand_total"></span></p></div></div>'),
    e.put("/views/account/resetpassword.html", '<div class="wrap center"><span class="wrap wrap-all p-b"><h1 class="h1 m-b w-12 center m-t">Reset password</h1><form class="w-5 pos-c p-b" name="reset_password_form" novalidate ng-controller="LoginController" ng-submit="resetpassword(reset_password_form)"><input-wrap label="Your new password" class="m-t block" required="true" name="password" form="reset_password_form"><input class="input" type="password" name="password" required ng-model="data.password" ng-enter="resetpassword(reset_password_form)"></input-wrap><div class="m-t-2 w-6 center"><action type="submit" class="black-button" ng-click="resetpassword(reset_password_form)" code="code" busy="reset_password_form.busy">Save password</action></div><result code="code" class="m-t-05 block" success="New password saved, redirecting..."></result></form></span></div>'),
    e.put("/views/account/wishlist.html", '<div ng-controller="WishlistController" ng-switch="!!wishlist.loaded" ng-class="{\'cursor-wait\': !wishlist.loaded}"><div ng-switch-when="false">Loading...</div><div ng-switch-when="true"><h2 class="h4 no-underline">My Wishlist</h2><div class="m-t" ng-switch="!!wishlistData.items.length"><div ng-switch-when="true" class="flex flex-wrap"><product-list-item class="c-4-set-x c-4-set-l c-4-set-m c-6-set-s m-b-2" ng-repeat="item in wishlistData.items" custom="{wishlistItem: item, isWishlist: true}" product-id="item.product"></product-list-item><div class="summary right m-t-8 w-12"><span class="h5 fs-6 fw-bold">TOTAL:</span> <span class="h5 fs-6 col-grey" price="wishlistData.totalPrice" price-precission="2"></span><br><span class="text p-t-1 fs-4 col-grey"><span ng-bind="\'(\' + wishlistData.qty"></span> <span ng-bind="wishlistData.qty == 1 ? \'item\' : \'items\'"></span> in this list)</span></div></div><div ng-switch-when="false"><span class="block col-gray">You have no items in your wishlist yet.</span> <span class="block m-t-2"><a href="/" class="button-inline fs-4">Start shopping</a></span></div></div></div></div>'),
    e.put("/views/basket/checkout-button.html", '<div><div class="pos-relative" ng-controller="LocalCheckoutButtonController as vm"><action class="button w-12" ng-click="$root.toggleOnBehalfCheckout(false); checkout()" is-disabled="vm.isDisabled" busy="busy"><span ng-bind="::\'Proceed to Checkout\' | ms"></span></action><if-trade-store><span class="pos-absolute right-0 m-t-1 input-validation-msg" ng-if="!vm.minOrderValue"><span class="p-r-1" ng-bind="::\'The minimum order is\' | ms"></span><if-not-trade-store><span price="::vm.website.min_order_value"></span></if-not-trade-store><if-trade-store><span price="::vm.website.min_order_value/1.2"></span></if-trade-store></span></if-trade-store><span class="pos-absolute right-0 m-t-1 input-validation-msg" ng-if="hasOutOfStockItems && vm.minOrderValue" ng-bind="::\'Some products are out of stock\' | ms"></span></div></div>'),
    e.put("/views/basket/coupon-form.html", '<ng-form name="couponForm" novalidate ng-submit="submit()"><meta ng-init="setForm(couponForm)"><div ng-click="showCoupon = 1" ng-show="!showCoupon"><span class="link">Apply an offer code</span></div><div class="right" ng-show="showCoupon"><div class="p-b-2"><p class="c-8 m-b-0 left">Promotional code</p><p class="c-4-set m-r-0 m-b-0 link" ng-click="showCoupon = 0">Cancel</p></div><div class="w-12"><div class="c-8 m-b-0"><input class="w-12 input" type="text" name="coupon" ng-model="data.coupon" required placeholder="enter code here"></div><div class="c-4-set m-r-0 m-b-0"><action class="button-2 w-12" ng-click="submit()" busy="couponForm.busy">Apply</action></div></div></div><span field-notice="coupon" form="couponForm"></span><result code="result" success="false"></result><div class="m-t-2" ng-if="coupon"><p class="m-b-2">Coupon <span>{{coupon}}</span> has been applied</p><action-singleton action-class="button-inline no-arrow m-r-0" action="remove(coupon)">Remove</action-singleton></div></ng-form>'),
    e.put("/views/basket/notifications.html", '<div ng-repeat="item in vm.notifications"><div class="p-a b-a bg-col-14" ng-if="item.type == \'addGiftProductToCart\'"><p>Return to the <a class="link-underline" ms-href="/gifts/view/{{::item.request.event_id}}">Gift Registry</a>.</p></div></div>'),
    e.put("/views/basket/totals.html", '<if-not-trade-store><div class="flex flex-justify-between" ng-if="basketData.totals.discount"><span>Total items price:</span> <span price="basketData.totals.subtotal" price-precission="2"></span></div><div class="flex flex-justify-between m-t-2" ng-if="basketData.totals.discount"><span>Discount:</span> <span price="basketData.totals.discount" price-precission="2"></span></div><div class="flex flex-justify-between m-t-2 fw-bold">Total: <span price="basketData.totals.subtotal+(basketData.totals.discount||0)" price-precission="2"></span></div></if-not-trade-store><if-trade-store><div class="flex flex-justify-between"><span>Subtotal:</span> <span price="basketData.totals.subtotal" price-precission="2"></span></div><div class="flex flex-justify-between m-t-2" ng-if="basketData.totals.tax"><span>VAT:</span> <span price="basketData.totals.tax" price-precission="2"></span></div><div class="flex flex-justify-between m-t-2" ng-if="basketData.totals.discount"><span>Discount:</span> <span price="basketData.totals.discount/1.2" price-precission="2"></span></div><div class="flex flex-justify-between m-t-2 fw-bold">Total: <span price="basketData.totals.subtotal+(basketData.totals.discount||0) + basketData.totals.tax" price-precission="2"></span></div></if-trade-store>'),
    e.put("/ui/page/privacy-settings.html", '<div class="bg-col-14 privacy-settings pos-relative z-6"><button class="pos-absolute top-2 right-4" if-size="!S" ng-click="vm.closeFrame();"><i class="fs-10 icon-cancel"></i></button><div class="wrap p-t-2 p-t-6-m p-b-6-m p-b-2 p-r-0-s"><h6 class="introducing col-11 left" if-size="!S" ng-bind="::\'Privacy settings\' | ms"></h6><div class="p-t-1 p-b-1" if-size="S"><span class="fs-4 lh-1" ng-bind-html="::vm.website.general.privacy_settings_text_mobile" ng-if="::vm.website.general.privacy_settings_text_mobile"></span></div><div class="flex m-t-1"><div class="flex-grow w-8 w-7-m p-r p-b p-r-0-s" if-size="!S"><p ng-if="::vm.website.general.privacy_settings_text" ng-bind-html="::vm.website.general.privacy_settings_text" class="lh-1 fs-4 col-grey p-t-1"></p></div><div class="flex w-4 w-5-m w-12-s p-l-8-m" size-class="M: flex-column"><action class="button--secondary-b fs-4 w-6-s privacy-settings-button" ng-click="vm.allowOnlyCore()"><span ng-bind="::\'Only strictly necessary cookies\' | ms"></span></action><action class="button-2 fs-4 m-l m-t-4-m m-l-0-m w-6-s privacy-settings-button" ng-click="vm.allowAll()"><span ng-bind="::\'Accept all cookies\' | ms"></span></action><button if-size="S" class="p-r-1 p-l-1" ng-click="vm.allowOnlyCore();"><i class="fs-10 icon-cancel"></i></button></div></div></div></div>'),
    e.put("/views/blog/navigation.html", '<div class="wrap center" if-size="!S"><ul><li class="inline-block fs-10" ng-repeat="category in ::vm.collection | orderBy:\'parent\'"><a class="block p-a p-b-2 p-b-4-m p-l-8-m p-r-8-m" ms-href="{{::category.url}}" ng-if="::!category.children.length" ng-bind-html="::category.name"></a></li></ul><div class="w-12 m-b-6" ng-if="::!$parent.$parent.$last"></div></div><div class="m-t p-r p-l center uppercase fs-10" if-size="S"><div class="p-b-1 fs-4 pos-relative z-6 inline-block" ng-click="showCategories = !showCategories">Filter By</div><div class="m-t" ng-show="showCategories"><a class="p-t-2 p-b-2 block" ng-repeat="category in ::vm.collection | orderBy:\'priority\'" ms-href="{{::category.url}}" ng-if="::!category.children.length" ng-bind-html="::category.name">></a></div></div>'),
    e.put("/views/checkout/form.html", '<div class="p-t-8 p-t-4-s p-b"><form class="wrap center left-l"><div class="w-7-x w-8-l w-12 left"><h1 class="h2 fs-10-m center">Secure checkout</h1><ul class="flex flex-middle flex-justify-between m-t p-r-2 p-l-2 fs-7-x fs-7-l fs-5-s b-b"><li class="p-t-2 p-b-2" ng-class="!$ctrl.stepService.isStepCurrent(\'account\') ? \'col-10\' : \'col-11\'"><i class="fs-3 icon-ok m-r-1" ng-show="$ctrl.stepService.steps.account.vm.isConfirmed()"></i>1. Email</li><li class="p-t-2 p-b-2" ng-class="!$ctrl.stepService.isStepCurrent(\'delivery\') ? \'col-10\' : \'col-11\'"><a ng-click="$ctrl.stepService.goToStep(\'delivery\')"><i class="fs-3 icon-ok m-r-1" ng-show="$ctrl.stepService.steps.delivery.vm.isConfirmed()"></i>2. Delivery</a></li><li class="p-t-2 p-b-2" ng-class="!$ctrl.stepService.isStepCurrent(\'payment\') ? \'col-10\' : \'col-11\'">3. Payment</li></ul><checkout2-step step-name="account" step-number="1"><div class="center"><div class="pos-center w-8 w-12-s left"><div checkout-login data="$ctrl.checkoutData" form="$ctrl.stepService.steps.account.form" on-can-checkout="$ctrl.stepService.steps.account.vm.next(200)" auto="1"></div></div></div></checkout2-step><checkout2-step step-name="delivery" step-number="2" step-title="Delivery"><checkout2-login-status step-name="account"></checkout2-login-status><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">Delivery address</h3><meta ng-if="($ctrl.checkoutData.shipping.method == \'storepickup_storepickup\')" ng-init="$ctrl.checkoutData.shipping.method=null"><checkout2-address data="$ctrl.checkoutData.address.shipping" form="$ctrl.stepService.steps.delivery.form" type="shipping"></checkout2-address><div ng-if="$ctrl.checkoutData.shipping.method != \'storepickup_storepickup\'"><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">Shipping <small class="fs-1 fw-thin col-grey" ng-show="$ctrl.status.busy">processing...</small></h3><div class="p-b" data="$ctrl.checkoutData.shipping" form="$ctrl.stepService.steps.delivery.form" shipping-methods></div></div><if-not-trade-store><div class="m-t right"><span class="w-12-s button" ng-click="$ctrl.stepService.steps.delivery.vm.next()">Continue to payment</span></div></if-not-trade-store><if-trade-store><div class="m-t right" ng-controller="LocalCheckoutButtonController as vm"><span class="w-12-s button" ng-if="!vm.isDisabled" ng-click="$ctrl.stepService.steps.delivery.vm.next()">Continue to payment</span><div ng-if="vm.isDisabled"><p class="input-validation-msg" ng-if="vm.hasOutOfStockItems">Some product in basket doesn\'t have minimum quantity.</p><p class="input-validation-msg" ng-if="!vm.minOrderValue">The minimum order is <span price="::vm.website.min_order_value/1.2"></span>.</p><a class="m-t-2 button" ms-href="/basket">Go back to basket</a></div></div></if-trade-store></checkout2-step><checkout2-step step-name="payment" step-number="3" step-title="Payment"><checkout2-login-status step-name="account"></checkout2-login-status><checkout2-delivery-status step-name="delivery" backend-source="true"></checkout2-delivery-status><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">Payment method</h3><div class="m-t-2 m-b" data="$ctrl.checkoutData.payment" form="$ctrl.stepService.steps.payment.form" payment-methods></div><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">Billing address</h3><div class="m-t p-b b-b m-b"><checkout2-address data="$ctrl.checkoutData.address.billing" form="$ctrl.stepService.steps.payment.form" type="billing"></checkout2-address></div><div class="w-12 right"><checkout2-totals class="w-6"></checkout2-totals></div><div class="m-t right"><div class="w-6 w-12-s"><action busy="$ctrl.submissionStatus.busy" class="w-12 button" code="$ctrl.submissionStatus.result" ng-click="$ctrl.submit()">Place Order</action><result class="m-t-1 block" code="$ctrl.submissionStatus.result" ng-if="!($ctrl.submissionStatus.result == \'REDIRECT_CART\')" success="Data saved... redirecting..."></result></div></div></checkout2-step></div><aside class="pos-absolute top-5 right-2 left checkout-basket__wrapper" if-size="XL"><sticky bottom-section-id="checkout-sticky-cutout" class="block bg-col-w checkout-basket" offset-section-id="page-header" shift="0"><ng-include src="::\'/views/checkout/form/basket.html\'"></ng-include></sticky></aside><div id="checkout-sticky-cutout"></div></form></div>'),
    e.put("/views/checkout/paypal.html", '<div class="center"><div class="h4 m-t m-b">Processing...</div></div>'),
    e.put("/views/checkout/success.html", '<div class="wrap"><div ng-if="!busy" class="p-t-6 p-b-6"><h1 class="h2 fs-10-m center">Order Confirmation</h1><div class="m-t-8 center"><p class="fs-6">Thank you for making your purchase!</p><p class="m-t">Your order has been&nbsp;placed</p><p class="m-t">Your order number is #<span ng-bind="::successData.number"></span></p><p class="m-t block">You will receive an email confirmation with details of your purchase and order number.</p><p class="m-t-2">If you need to talk to us about your order, please call us on 020 8799 7166 or email us on info@indiajane.co.uk</p><success-registration class="block m-t-8 m-b-8" ng-if="successData.customer.can_register" success-data="successData"></success-registration><a ms-href="/" class="button--primary button fw-bold w-12-s m-t-2">Back to store</a></div></div><p ng-if="busy" class="center">Loading...</p></div>'),
    e.put("/views/content/default.html", '<div class="pos-relative" ng-class="::[row.margin, \'bg-col-\' + row.background]" ng-repeat="row in ::page.rows track by $index" ng-attr-id="section-{{::$index}}" ng-if="::!row.hide"><div ng-class="($root.isS ? row.width_mobile == \'default\' ? row.width : row.width_mobile : row.width)"><div ng-class="::{\'flex-column flex-middle\': row.padding}"><div class="flex flex-wrap flex-justify-center" ng-class="::[{\'w-10-x\': row.padding}, row.alignment]"><div class="c-12-set-s m-b-0-s" ng-class="::[ column.width == \'12\' ? \'w-12\' : \'c-\' + column.width + \'-set\', {\'m-r-0\': $last} ]" ng-repeat="column in ::row.columns track by $index" ng-if="::!column.hide"><div ng-repeat="component in ::column.components track by $index" ng-switch="::component.acf_fc_layout"><div ng-switch-when="breadcrumbs"><breadcrumbs class="p-t-3 p-b-3 block"></breadcrumbs></div><page-title ng-switch-when="page_title" component="::component" page="::page"></page-title><custom-forms ng-switch-when="custom_form" component="::component" page="::page"></custom-forms><page-content ng-switch-when="page_content" component="::component" page="::page"></page-content><hero-image ng-switch-when="hero_image" frames="::component.slides" interval="4000" fade="::component.fade" loop="true" pause-on-hover="true" component="::component"></hero-image><posts-block ng-switch-when="posts_block" component="::component"></posts-block><image-block ng-switch-when="image" component="::component"></image-block><text-block ng-switch-when="text" component="::component"></text-block><cookies-info ng-switch-when="cookies_info" component="::component"></cookies-info><page-navigation ng-switch-when="page-navigation" component="::component"></page-navigation><text-media ng-switch-when="text_media" component="::component"></text-media><seo-content ng-switch-when="seo_content" component="::component"></seo-content><contact-info ng-switch-when="contact-info" component="::component"></contact-info><selected-products ng-switch-when="configurable_product_carousel" component="::component"></selected-products><faq-accordion ng-switch-when="faq-accordion" component="::component"></faq-accordion><delivery-table ng-switch-when="delivery_table" component="::component"></delivery-table><instagram ng-switch-when="instagram" frames="::component.images" frames-in-slide="$root.isS ? 2 : 4" frames-in-step="$root.isS ? 2 : 4" interval="4000" loop="true" pause-on-hover="true" component="::component"></instagram><instagram-feed ng-switch-when="instagram_feed" component="::component"></instagram-feed><our-stores ng-switch-when="our_stores" component="::component" stores="::page.stores"></our-stores><visit-stores ng-switch-when="visit_stores" frames="::component.stores" frames-in-slide="1" frames-in-step="1" fade="true" interval="50000" loop="true" pause-on-hover="true" component="::component"></visit-stores><mosaic ng-switch-when="mosaic" component="::component"></mosaic><trade-store-catalogue ng-switch-when="trade_store_catalogue" component="::component" page="::page" category-id="::component.category_id"></trade-store-catalogue><div ng-switch-default>{{::component}}</div></div></div></div></div></div></div>'),
    e.put("/views/content/gifts.html", "gifts.html"),
    e.put("/views/content/store.html", '<div class="wrap flex"><div class="w-12 m-t"><div class="w-6 w-12-s m-b m-b-0-s p-r p-r-0-s"><h1 class="w-12 m-t-4 m-b h1" ng-bind-html="::page.name"></h1><div class="m-b lh-2"><span class="fw-bold fs-7 block m-b-2">Address</span> <span ng-bind="::(page.address + \',\')" ng-if="::page.address" class="block"></span> <span ng-bind="::(page.city + \',\')" ng-if="::page.city" class="block"></span> <span ng-bind="::(page.region + \',\')" ng-if="::page.region" class="block"></span> <span ng-bind="::page.postcode" ng-if="::page.postcode" class="block"></span></div><div class="m-b lh-2"><span class="fw-bold fs-7 block m-b-2">Contact</span> <span ng-if="::page.phone" class="block">Tel: <a class="link" ng-href="{{:: \'tel:\' + page.phone}}" ng-bind=":: page.phone"></a></span> <span ng-if="::page.email" class="block">Email: <a class="link" ng-href="{{:: \'mailto:\' + page.email}}" ng-bind=":: page.email"></a></span></div><div class="m-b lh-2"><span class="fw-bold fs-7 block m-b-2">How to get there</span><div class="ratio-2-1 w-8 w-10-m w-12-s m-b-4-m"><store-locator-map store="::page" zoom="12"></store-locator-map></div></div><div class="m-b lh-2"><span class="fw-bold fs-12 fs-10-m fs-8-s block m-b">Store opening hours</span><div ng-repeat="item in ::page.open track by $index" class="w-8 w-12-s"><div class="w-6" ng-bind-html="::item.time | date:\'EEEE d\' | ordinal:true"></div><div class="w-6"><p ng-bind="::(item.hours) ? item.hours : \'CLOSED\'"></p></div></div></div><div class="m-b lh-2"><span class="fw-bold fs-7 block m-b-2">About the store</span> <span ng-if="::page.description" ng-bind-html="::page.description"></span></div></div><div class="w-6 w-12-s m-b-8-s" ng-if="::page.images"><div class="ratio-2-1 w-12 m-t" ng-repeat="image in ::page.images"><img class="fill" tco-image="::image"></div></div></div></div>'),
    e.put("/views/content/style-guide.html", '<div class="p-a b-b bg-col-b col-w"><strong>Typography</strong></div><div class="w-12 b-b"><div class="c-1 p-t p-r p-l">Font Name</div><div class="c-3 p-t p-r p-l">Code</div><div class="c-2 p-t p-r p-l">Thin</div><div class="c-2 p-t p-r p-l">Regular</div><div class="c-2 m-r-0 p-t p-r p-l">Bold</div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Default</div><div class="c-3 p-t p-r p-l">&lt;span class="font-default"&gt;&lt;/span&gt;</div><div class="c-2 p-t p-r p-l"><span class="fw-thin">Thin</span></div><div class="c-2 p-t p-r p-l"><span>Regular</span></div><div class="c-2 m-r-0 p-t p-r p-l"><span class="fw-bold">Bold</span></div></div><div class="p-a b-b bg-col-b col-w"><strong>Headings</strong></div><div class="w-12 flex p-a"><div class="c-2 p-t p-r p-l"><h1 class="h1">H1</h1></div><div class="c-2 p-t p-r p-l"><h2 class="h2">H2</h2></div><div class="c-2 p-t p-r p-l"><h3 class="h3">H3</h3></div><div class="c-2 p-t p-r p-l"><h4 class="h4">H4</h4></div><div class="c-2 p-t p-r p-l"><h5 class="h5">H5</h5></div><div class="c-2 m-r-0 p-t p-r p-l"><h6 class="h6">H6</h6></div></div><div class="p-a b-b bg-col-b col-w"><strong>Buttons</strong></div><div class="w-12 b-b"><div class="c-1 p-t p-r p-l">Name</div><div class="c-3 p-t p-r p-l">Code</div><div class="c-2 p-t p-r p-l">Default</div><div class="c-2 p-t p-r p-l">Active, Hover</div><div class="c-2 p-t p-r p-l">Busy</div><div class="c-2 m-r-0 p-t p-r p-l">Disabled</div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Default</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action&gt;Button&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action>Button</action></div><div class="c-2 p-t p-r p-l"><action class="active is-active">Button</action></div><div class="c-2 p-t p-r p-l"><action class="busy is-busy" busy="true">Button</action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="disabled is-disabled" disabled="true">Button</action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">.button-1</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-1"&gt;Button 1&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action class="button-1">Button 1</action></div><div class="c-2 p-t p-r p-l"><action class="button-1 active is-active">Button 1</action></div><div class="c-2 p-t p-r p-l"><action class="button-1 busy is-busy" busy="true">Button 1</action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="button-1 disabled is-disabled" disabled="true">Button 1</action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">.button-2</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-2"&gt;Button 2&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action class="button-2">Button 2</action></div><div class="c-2 p-t p-r p-l"><action class="button-2 active is-active">Button 2</action></div><div class="c-2 p-t p-r p-l"><action class="button-2 busy is-busy" busy="true">Button 2</action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="button-2 disabled is-disabled" disabled="true">Button 2</action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">.button-inline</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-inline"&gt;Button&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action class="button-inline"><span data-text="Button">Button</span></action></div><div class="c-2 p-t p-r p-l"><action class="button-inline active is-active"><span data-text="Button">Button</span></action></div><div class="c-2 p-t p-r p-l"><action class="button-inline busy is-busy" busy="true"><span data-text="Button">Button</span></action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="button-inline disabled is-disabled" disabled="true"><span data-text="Button">Button</span></action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">.button-inline .underline</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-inline underline"&gt;Button underline&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action class="button-inline underline">Button underline</action></div><div class="c-2 p-t p-r p-l"><action class="button-inline active is-active underline">Button underline</action></div><div class="c-2 p-t p-r p-l"><action class="button-inline busy is-busy underline" busy="true">Button underline</action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="button-inline disabled is-disabled underline" disabled="true">Button underline</action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">.button-inline .underline .arrow</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-inline underline arrow"&gt;Button underline arrow&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><action class="button-inline underline arrow">Button underline arrow</action></div><div class="c-2 p-t p-r p-l"><action class="button-inline active is-active underline arrow">Button underline arrow</action></div><div class="c-2 p-t p-r p-l"><action class="button-inline busy is-busy underline arrow" busy="true">Button underline arrow</action></div><div class="c-2 m-r-0 p-t p-r p-l"><action class="button-inline disabled is-disabled underline arrow" disabled="true">Button underline arrow</action></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Inline busy dot</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;action class="button-inline is-dot"&gt;Button&lt;/action&gt;\n        </code></div><div class="c-2 p-t p-r p-l"></div><div class="c-2 p-t p-r p-l"></div><div class="c-2 p-t p-r p-l"><action class="button-inline is-dot busy is-busy" busy="true">Button</action></div></div><div class="p-a b-b bg-col-b col-w"><strong>Links</strong></div><div class="w-12 b-b"><div class="c-1 p-t p-r p-l">Name</div><div class="c-3 p-t p-r p-l">Code</div><div class="c-2 p-t p-r p-l">Default</div><div class="c-2 p-t p-r p-l">Active, Hover</div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Default</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;a class="link"&gt;Text Link&lt;/a&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><a class="link">Text Link</a></div><div class="c-2 p-t p-r p-l"><a class="link is-active">Text Link</a></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Underline on hover</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;a class="link-underline-h"&gt;Text Link&lt;/a&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><a class="link-underline-h">Text Link</a></div><div class="c-2 p-t p-r p-l"><a class="link-underline-h is-active">Text Link</a></div></div><div class="w-12"><div class="c-1 p-t p-r p-l">Underline</div><div class="c-3 p-t p-r p-l"><code class="w-12 italic fs-4">\n            &lt;a class="link-underline"&gt;Text Link&lt;/a&gt;\n        </code></div><div class="c-2 p-t p-r p-l"><a class="link-underline">Text Link</a></div><div class="c-2 p-t p-r p-l"><a class="link-underline is-active">Text Link</a></div></div>'),
    e.put("/views/gift-registry/add-product.html", '<div class="pos-relative"><action class="button-inline underline m-l-2" code="vm.status.result" busy="vm.status.busy" ng-click="vm.addToRegistry()"><span class="fs-4">Add to Gift Registry</span></action><result class="pos-absolute top-100 right-0 left-0 m-t-2" code="vm.status.result" success="Product was added to Gift Registry"></result></div><div class="pos-relative z-1 left" ng-if="vm.events.length"><div class="pos-absolute right-0 left-0 m-t-2 gift-registry-list-wrapper"><div class="hide-up-container"><div class="ng-hide-animate ng-hide hide-up bg-col-w b-a p-a-2" ng-show="vm.showListSelector"><p class="m-b fs-4">Please choose which registry you want to add this product to.</p><div class="gift-registry-list"><ul><li ng-repeat="event in vm.events track by event.event_id"><span class="block p-t-1 p-b-1 link fs-4" ng-click="vm.addProduct(event.event_id)" ng-bind="::(event.title + \', \' + event.date)"></span></li></ul></div></div></div></div></div>'),
    e.put("/views/gift-registry/manage-items.html", '<div class="wrap p-t-8"><div class="center m-b m-b-8-m"><span ng-if="vm.status.busy">Loading...</span><div ng-if="::vm.event.event_id"><span class="inline-block m-b" ng-bind="::(vm.event.fname + \' \' + vm.event.lname)"></span><h3 class="h3" ng-bind="::vm.event.title"></h3><span class="inline-block" ng-bind="::vm.event.date"></span><div class="w-12 m-t center"><a class="button-inline" ms-href="/account/gift-registry">Edit My Registry</a><bar></bar><a ms-href="/gifts/share/{{::vm.event.sharing_code}}" class="button-inline">Share</a><bar></bar><a ms-href="/gifts/view/{{::vm.event.sharing_code}}" class="button-inline">Preview</a></div></div></div><div class="center p-b" ng-if="vm.requestPassword"><form class="w-5-x w-6 w-12-s" ng-submit="vm.usePassword()"><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">This Registry is Password Protected</h3><input-wrap label="Password" name="password" required="true" form="form"><input class="input" type="password" name="password" ng-model="vm.password" required ng-change="vm.errorMessage=\'\'"></input-wrap><action class="w-12 m-t button-2" ng-click="vm.usePassword()">Confirm</action><result code="vm.errorMessage"></result></form></div><div class="center m-t-8" ng-if="!vm.status.busy && !vm.requestPassword && !vm.event.items.length">Sorry, no products in this registry yet.</div><div ng-if="!vm.requestPassword && vm.event.items.length" class="center m-b-8"><div class="b-b b-col-11 p-a flex flex-justify-between flex-middle" if-size="!SM"><div class="w-4 left">Products</div><div class="w-1">Price</div><div class="w-4">Details</div><div class="w-1">Desired</div><div class="w-2">Received</div><div class="w-2"></div></div><div class="b-b p-a p-l-2-s p-r-2-s" ng-repeat="item in vm.event.items track by item.sku_product_id" ng-if="item.productModel.data"><div class="flex-x flex-l flex-justify-between flex-middle"><div class="flex flex-justify-between flex-middle m-b-3" if-size="SM"><h3 class="h5 left">Product</h3><action class="button-inline" busy="item.status.busy" ng-click="vm.removeFromRegistry(item)"><span class="fs-4">Remove</span></action></div><div class="w-4 w-12-m w-12-s fs-4 left m-b-2-m m-b-2-s" ng-bind="::item.productModel.data.name"></div><div class="w-1 w-12-m w-12-s fs-4 left-m left-s" price="::item.productModel.data.price"></div><h4 class="h6 left m-t" if-size="SM">Details</h4><div class="w-4 w-12-m w-12-s t-a-l"><select class="select m-b-2" ng-model="item.priority" ng-options="i*1 as month for (i, month) in ::[\'Nice to have\', \'Like to have\', \'Love to have\']"></select><label class="block p-t-4-m p-t-4-s p-b-2-m p-b-2-s left-m left-s">Comments:</label> <textarea class="textarea b-w-2 m-b-2 p-t-2" id="gift-message" ng-trim="false" name="gift-message" ng-model="item.descr" maxlength="200" rows="4"></textarea></div><div class="w-1 w-12-m w-12-s m-t-4-m m-t-2-s m-b-3-m m-b-2-s"><qty model="item.num_wants"></qty></div><div class="w-2 w-12-s m-t-2-m m-t-2-s lh-1">Purchased: <span ng-bind="item.num_total"></span></div><div class="w-2" if-size="!SM"><action class="button-2 w-12" busy="item.status.busy" ng-click="vm.removeFromRegistry(item)">Remove</action></div></div><div class="input-validation-msg error right w-7" ng-if="item.status.error" ng-bind="item.status.error"></div></div></div><div class="m-t p-b p-r p-r-0-s right center-s" ng-if="!vm.requestPassword && vm.event.items.length"><action class="p-r-8 p-l-8 button-2" code="vm.statusUpdate.result" busy="vm.statusUpdate.busy" ng-click="vm.updateItems()">Update Gift Registry</action><result class="w-12 right" code="vm.statusUpdate.result" success="Your items have been updated successfully!"></result></div></div>'),
    e.put("/views/gift-registry/search.html", '<div class="wrap"><h3 class="m-t-8 m-b m-b-8-m h3 center">Gift Lists Search</h3><h2 class="h4 m-b-1 fw-bold">Event Details</h2><form name="form" ng-submit="vm.search()" novalidate><meta ng-init="vm.setForm(form)"><div class="m-b flex flex-bottom" size-class="S: flex-wrap"><div class="c-3 c-12-set-s m-r-0-s"><input-wrap label="First name" name="fname" form="form"><input class="input" type="text" id="fname" name="fname" ng-model="vm.data.fname"></input-wrap></div><div class="c-3 c-12-set-s m-r-0-s"><input-wrap label="Last name" name="lname" required="true" form="form"><input class="input" type="text" id="lname" name="lname" ng-model="vm.data.lname" required></input-wrap></div><div class="c-3 c-12-set-s m-r-0-s"><input-wrap label="Event month" name="password" form="form"><select class="select" id="month" name="month" ng-model="vm.selectedMonth" ng-options="i*1 as month for (i, month) in ::vm.monthOptions"></select></input-wrap></div><div class="c-3-set c-12-set-s m-r-0"><action class="button-2 w-12" busy="vm.status.busy" ng-click="vm.search()">Find Registry</action></div></div></form><div class="p-t p-b center" ng-if="vm.status.busy">Loading...</div><div class="center m-b-8" ng-if="vm.status.result"><p class="p-t p-b" ng-if="!vm.events.length">Sorry, no gift registries have been found. Please check your search criterias.</p><div class="w-12 w-10-x" ng-if="vm.events.length"><div class="b-b b-col-11 p-a flex flex-justify-between flex-middle" if-size="!S"><div class="w-4 w-12-s left">Name</div><div class="w-4 w-12-s">Registry name</div><div class="w-4 w-12-s">Event date</div><div class="w-3 w-12-s right center-s"></div></div><div class="b-b p-a flex flex-justify-between flex-middle" ng-repeat="event in vm.events track by event.event_id"><div class="w-4 w-12-s left" ng-bind="::event.fname + \' \' + event.lname" if-size="!S"></div><div class="w-4 w-12-s" ng-bind="::event.title" if-size="!S"></div><div class="w-4 w-12-s" ng-bind="::event.date" if-size="!S"></div><div class="w-8-s left lh-1" if-size="S"><span ng-bind="::event.fname + \' \' + event.lname"></span><br><span ng-bind="::event.title"></span><br>Date: <span ng-bind="::event.date"></span></div><div class="w-3 w-4-s right"><a class="button-inline" ms-href="/gifts/view/{{::event.sharing_code}}">View</a></div></div></div></div></div>'),
    e.put("/views/gift-registry/share.html", '<div class="wrap"><div class="center m-t m-b"><h1 class="h3 inline-block p-l p-r">Share Your Gift Registry</h1><span ng-if="vm.status.busy">Loading...</span> <span ng-if="!vm.status.busy && (!vm.isCurrentUserTheOwner() || !vm.event.event_id)">Ouch! It\'s not something you can share...</span><div ng-if="!vm.status.busy && vm.isCurrentUserTheOwner()"><div class="w-12 m-t center"><a class="button-inline" ms-href="/account/gift-registry">Edit My Registry</a><bar></bar><a ms-href="/gifts/manage-items/{{::vm.event.sharing_code}}" class="button-inline">Manage Items</a><bar></bar><a ms-href="/gifts/view/{{::vm.event.sharing_code}}" class="button-inline">Preview</a></div><form name="form" ng-submit="vm.submit()" novalidate><meta ng-init="vm.setForm(form)"><h5 class="m-b h5">Sharing Information</h5><div class="m-b flex flex-bottom"><div class="c-6-set"><input-wrap label="Email Address" required="true" name="email" form="form"><input class="input" type="email" name="email" ng-model="vm.data.email" required></input-wrap></div></div><div><input-wrap label="Message" name="message" form="form"><textarea class="textarea p-t-2" name="message" ng-model="vm.data.message">\n                        </textarea></input-wrap></div><div class="m-t p-b right"><action class="w-2 button-2" code="vm.statusShare.result" busy="vm.statusShare.busy" ng-click="vm.submit()">Share</action><result class="w-12 right" code="vm.statusShare.result" success="Your Gift Registry has been successfully shared"></result><a class="m-t-5 button-2 button w-2" ms-href="/account/gift-registry" ng-if="vm.statusShare.result == \'SUCCESS\'">Go back to the registry</a></div></form></div></div></div>'),
    e.put("/views/gift-registry/view.html", '<div class="wrap p-t-8"><div class="center m-b m-b-8-m"><span ng-if="vm.status.busy">Loading...</span><div ng-if="::vm.event.event_id"><span class="inline-block m-b" ng-bind="::(vm.event.fname + \' \' + vm.event.lname)"></span><h3 class="h3" ng-bind="::vm.event.title"></h3><span class="inline-block" ng-bind="::vm.event.date"></span><ul class="w-12 m-t left" ng-if="vm.isCurrentUserTheOwner()"><li class="inline-block"><a class="link" ms-href="/account/gift-registry">Edit My Registry</a></li></ul></div></div><div class="center p-b" ng-if="vm.requestPassword"><form class="w-5-x w-6 w-12-s" ng-submit="vm.usePassword()"><h3 class="fs-9 p-t-2 p-b-2 b-b m-b">This Registry is Password Protected</h3><input-wrap label="Password" name="password" required="true" form="form"><input class="input" type="password" name="password" ng-model="vm.password" required ng-change="vm.errorMessage=\'\'"></input-wrap><action class="w-12 m-t button-2" ng-click="vm.usePassword()">Confirm</action><result code="vm.errorMessage"></result></form></div><div class="center m-t-8" ng-if="!vm.status.busy && !vm.requestPassword && !vm.event.items.length">Sorry, no products in this registry yet.</div><div ng-if="!vm.requestPassword && vm.event.items.length" class="center m-b-8"><div class="b-b b-col-11 p-a flex flex-justify-between flex-middle" if-size="!S"><div class="w-4 left">Product</div><div class="w-1">Price</div><div class="w-2">Details</div><div class="w-1">Desired</div><div class="w-2">Received</div><div class="w-2">Qty</div><div class="w-2"></div></div><div class="b-b p-a p-l-0-s p-r-0-s" ng-repeat="item in vm.event.items track by item.sku_product_id" ng-if="item.productModel.data"><div class="flex flex-justify-between flex-middle" if-size="!S"><div class="w-1 left"><div class="ratio-1-1"><img class="fill" opt-href="{{::item.productModel.data.url}}" fit-in="1" tco-image="::item.productModel.data.image"></div></div><div class="w-3 left" ng-bind="::item.productModel.data.name"></div><div class="w-1" price="::item.productModel.data.price"></div><div class="w-2"><span ng-bind="[\'Nice to have\', \'Like to have\', \'Love to have\'][item.priority]"></span></div><div class="w-1"><span ng-bind="item.num_wants"></span></div><div class="w-2 lh-1">Ordered: <span ng-bind="item.num_total"></span><br>In Basket: <span ng-bind="vm.getInCartQty(item.product_id)"></span></div><div class="w-2"><qty model="item.qty"></qty></div><div class="w-2"><action class="button-2 w-12" busy="item.status.busy" code="item.status.result" ng-click="vm.addToCart(item)">Add to bag</action></div></div><div class="input-validation-msg error right w-7" ng-if="item.status.error" ng-bind="item.status.error"></div><div class="w-12 lh-1" if-size="S"><div class="w-4"><div class="ratio-1-1"><img class="fill" opt-href="{{::item.productModel.data.url}}" fit-in="1" tco-image="::item.productModel.data.image"></div></div><div class="w-8 left"><span class="w-12" ng-bind="::item.productModel.data.name"></span><div><span>Price:</span> <span price="::item.productModel.data.price"></span></div><div class="fs-4"><span ng-bind="[\'Nice to have\', \'Like to have\', \'Love to have\'][item.priority]"></span> <span ng-bind="item.num_wants"></span><br>Ordered: <span ng-bind="item.num_total"></span><br>In Basket: <span ng-bind="vm.getInCartQty(item.product_id)"></span></div></div><div class="w-12 flex flex-justify-between flex-middle p-t-2"><qty class="w-4" model="item.qty"></qty><action class="button-2 w-8" busy="item.status.busy" code="item.status.result" ng-click="vm.addToCart(item)">Add to bag</action></div></div></div></div></div>'),
    e.put("/views/page/back-to-top.html", '<div class="fs-30 ng-hide-animate ng-hide back-to-top bottom-8 right-0 pos-fixed overflow-hidden" ng-show="visible" ng-click="backToTop()"><span class="icon-arrow-up m-r-4 cursor-pointer col-red"></span></div>'),
    e.put("/views/page/breadcrumbs.html", '<div class="fs-3 fs-1-s lh-4 lh-2-s italic center-m center-s" ng-if="::breadcrumbs.length > 0"><span ng-repeat="crumb in ::breadcrumbs track by $index"><a class="link" ms-href="{{::crumb.url}}" ng-if="::!$last"><span ng-bind="::crumb.label"></span></a><span ng-if="::$last" class="link" ng-bind="::crumb.label"></span><span ng-if="::!$last" class="m-l-1 m-r-1">/</span></span></div>'),
    e.put("/views/widget/address.html", '<div><div class="lh-1 p-a-1" ng-if="address.id">{{address.firstname}} {{address.lastname}}<br>{{address.street_1}} {{address.street_2}}<br>{{address.postcode}}, {{address.city}}<br>{{ address.country_id|countryName }} phone: {{address.telephone}}</div><div ng-if="!address.id">No data provided</div></div>'),
    e.put("/views/widget/currency-selector.html", '<span class="pos-relative z-1 cursor-pointer" ng-click="toggleCurrency()" off-click="toggleCurrency(0)"><span ng-bind="customer_currency"></span><div class="pos-absolute left left-0"><div class="hide-up-container p-b-1 pos-relatice left-0"><div class="ng-hide-animate ng-hide hide-up" ng-show="isCurrencySwitchVisible"><span ng-repeat="currency in ::content_currencies_list" ng-bind="::currency.code" ng-click="setCurrency(currency.code)"></span></div></div></div></span>'),
    e.put("/views/widget/date-input.html", '<div off-click="close()"><div class="pos-relative date-input-wrap"><input class="input" type="text" name="{{name}}" ng-value="model[varName] | formatdate" ng-model="model[varName]" required ng-click="toggle()" ng-focus="doBlur($event)"></div><div class="z-5"><div class="pos-absolute z-5 w-12"><div class="hide-up-container"><simple-calendar class="ng-hide-animate ng-hide hide-up w-12 pos-relative p-t-2 p-r-2 p-b-2 p-l-2 b-a b-col-tertiary bg-col-w" ng-show="isOpen" options="calendarOptions" model="callendarModel"></simple-calendar></div></div></div></div>'),
    e.put("/views/widget/filter-category.html", '<div ng-if="::categories.length"><div class="flex flex-middle flex-justify-between m-t-1 p-t-1 p-t-4-m p-t-3-s p-b-1 p-b-4-m p-b-3-s p-l-3-m p-l-2-s p-r-3-m p-r-2-s cursor-pointer" ng-class="filterData.is_open ? \'is-open\' : \'b-b b-col-17\'" ng-click="toggle(!filterData.is_open, true)" ng-touch="toggle(!filterData.is_open, true)"><label class="p-t-1 block cursor-pointer fs-6 fs-5-m fs-5-s col-16">Category</label> <i class="col-11" ng-class="filterData.is_open ? \'icon-minus\' : \'icon-plus\'"></i></div><div class="hide-up-container"><div class="ng-hide-animate hide-up hide-up-100 p-t-1 p-b-1 p-l-3-m p-l-2-s p-r-3-m p-r-2-s b-b b-col-17" ng-show="filterData.is_open"><div class="p-b-2"><div ng-repeat="item in ::categories"><a class="block flex flex-middle p-t-1 p-b-1 p-l-1 lh-3 font-1 italic fs-4 checkbox filters__item" ms-href="{{::item.url}}" hover-intent="link" ng-class="{\'is-active\': item.active}"><i class="icon" ng-class="{\'icon-checkbox-checked\' : item.active}"></i> <span class="c-body pos-relative top-1px" ng-bind="::item.name"></span></a></div></div></div></div></div>'),
    e.put("/views/widget/filter-dropdown.html", '<div ng-if="hasOptionsDependent"><div class="flex flex-middle flex-justify-between m-t-1 p-t-1 p-t-4-m p-t-3-s p-b-1 p-b-4-m p-b-3-s p-l-3-m p-l-2-s p-r-3-m p-r-2-s cursor-pointer" ng-class="filterData.is_open ? \'is-open\' : \'b-b b-col-17\'" ng-click="toggle(!filterData.is_open, true)" ng-touch="toggle(!filterData.is_open, true)"><label class="p-t-1 block cursor-pointer fs-6 fs-5-m fs-5-s col-16" ng-bind="::filterData.label"></label> <i class="col-11" ng-class="filterData.is_open ? \'icon-minus\' : \'icon-plus\'"></i></div><div class="hide-up-container"><div class="ng-hide-animate hide-up hide-up-100 p-t-1 p-b-1 p-l-3-m p-l-2-s p-r-3-m p-r-2-s b-b b-col-17" ng-show="filterData.is_open" ng-switch="::filterData.code"><div ng-switch-when="color"><div class="c-2-set m-b-2" ng-repeat="option in options track by option.value"><checkbox class="m-b-1 filter-checkbox" model="filtersModel.selection" var-name="{{::filterData.code}}" value="option.value" type="array" ng-class="option.checked"><span class="block ratio-1-1 b-a cursor-pointer" ng-class="$parent.checked ? \'b-col-b\' : \'b-col-17\'"><span ng-class="$parent.checked ? \'fill-1px\' : \'fill\'" ng-attr-title="{{::option.label}}" ng-style="::{\'background-color\': option.label}"></span></span></checkbox></div></div><div ng-switch-default><p class="block p-t-1 p-b-1 p-l-1 lh-3 font-1 italic fs-4 checkbox filters__item" ng-repeat="option in options track by option.value"><checkbox model="filtersModel.selection" var-name="{{::filterData.code}}" value="option.value" type="array"><span class="pos-relative top-1px" ng-bind="::option.label"></span></checkbox></p></div></div></div></div>'),
    e.put("/views/widget/filter-price.html", '<div ng-if="max"><div class="flex flex-middle flex-justify-between m-t-1 p-t-1 p-t-4-m p-t-3-s p-b-1 p-b-4-m p-b-3-s p-l-3-m p-l-2-s p-r-3-m p-r-2-s cursor-pointer" ng-class="hasVisibleOptions ? \'is-open\' : \'b-b b-col-17\'" ng-click="toggle(!hasVisibleOptions, true)" ng-touch="toggle(!hasVisibleOptions, true)"><label class="p-t-1 block cursor-pointer fs-6 fs-5-m fs-5-s col-16" ng-bind="::filterData.label"></label> <i class="col-11" ng-class="hasVisibleOptions ? \'icon-minus\' : \'icon-plus\'"></i></div><div class="hide-up-container"><div ng-show="hasVisibleOptions" ng-switch="::filterData.code" class="ng-hide-animate hide-up hide-up-100 p-t-1 p-b-1 p-l-3-m p-l-2-s p-r-3-m p-r-2-s b-b b-col-17"><div range-slider min="min" max="max" model="modelSelection" custom="{isPrice: filterData.code == \'price\'}" prevent-equal-min-max="true" step="1" show-values="1" ng-if="modelSelection"></div></div></div></div>'),
    e.put("/views/widget/pop-up.html", '<div class="pop-up pos-relative z-5 ng-hide-animate ng-hide" ng-show="vm.isVisible" ng-controller="NewsletterController"><span class="pos-absolute top-2 right-0-s cursor-pointer z-5" size-class="S:right-1, !S:right-3" ng-click="vm.forget()" ng-touch="vm.forget()"><i class="fs-10 icon-cancel"></i></span><div class="wrap pos-relative p-b p-t center"><div class="pos-absolute w-3 left-0 bottom-2 left pop-up--image overflow-hidden" if-size="!SML"><div class="ratio-2-1" ng-if="::vm.website.general.newsletter_image"><img class="fill" tco-image="::vm.website.general.newsletter_image"></div></div><h3 class="h3 center" ng-bind="::vm.website.general.newsletter_heading" ng-if="::vm.website.general.newsletter_heading"></h3><p class="w-6 w-12-m w-12-s center p2 m-b-1" ng-bind-html="::vm.website.general.newsletter_subheader" ng-if="::vm.website.general.newsletter_subheader"></p><form ng-submit="submit()" name="newsletter_form" novalidate ng-init="data.source = \'popup_GDPR\'"><meta ng-init="data.source = \'popup\'"><input-wrap form="newsletter_form" name="privacy_policy"><div class="block flex flex-justify-center"><checkbox class="label checkbox fs-3-m fs-3-s" model="data" required="true" var-name="privacy_policy"><span ng-bind-html="::website.general.privacy_policy_text"></span></checkbox></div></input-wrap><span ng-show="newsletter_form.submitted && !data.privacy_policy" class="input-validation-msg lh-2 fs-3-x fs-3-l" ng-bind="::website.general.privacy_policy_mandatory"></span><div class="w-12 center"><div class="w-4 w-6-m w-10-s left pos-relative form-height1"><input class="w-12 fs-4 m-b-0 input b-r-0 b-l-0 b-t-0 center" ng-init="setForm(newsletter_form)" type="email" name="email" required placeholder="{{::vm.website.general.newsletter_placeholder}}" ng-model="data.email" ng-enter="submit()"><div ng-show="newsletter_form.email.$dirty || newsletter_form.email.$valid"><action class="button--primary w-12 m-b-1 m-t fade-in" code="code" busy="newsletter_form.busy" ng-click="submit(newsletter_form)">Submit</action></div><div class="center"><result class="m-t-1 fs-3 fw-thin" code="code" success="{{::vm.website.general.newsletter_success_message}}"></result><span class="m-t-1" field-notice="email" form="newsletter_form" parent-error-class="is-invalid"></span></div></div></div></form></div></div>'),
    e.put("/views/widget/price-slider.html", '<div class="range-slider ngrs-range-slider flex flex-wrap a-middle m-t-2 m-t-3-s m-b-3-s m-t-3-m m-b-3-m"><div class="flex-grow left fs-4 m-b-1" ng-if="showValues"><span ng-bind-html="filteredModel.min | price"></span></div><div class="flex-grow right fs-4 m-b-1" ng-if="showValues"><span ng-bind-html="filteredModel.max | price"></span></div><div class="w-12 range-slider-runner p-l-2 p-r-2"><div class="ngrs-runner"><div class="ngrs-handle ngrs-handle-min"><i></i></div><div class="ngrs-handle ngrs-handle-max"><i></i></div><div class="ngrs-join"></div></div></div></div>'),
    e.put("/views/widget/simple-calendar.html", '<div class="bg-col-w"><div class="center m-l-2 m-r-2 p-t-2 p-b-2"><div class="w-2" ng-click="prevMonth()"><span class="cursor-pointer" ng-show="allowedPrevMonth()"><i class="fs-7 col-11 icon-arrow-left"></i></span></div><span class="w-8 fs-6"><span ng-bind="selectedMonth"></span> <span ng-bind="selectedYear"></span></span><div class="w-2" ng-click="nextMonth()"><span class="cursor-pointer" ng-show="allowedNextMonth()"><i class="fs-7 col-11 icon-arrow-right"></i></span></div></div><div class="fs-4 uppercase week"><div ng-repeat="day in weekDays(2) track by $index" class="lh-3 center day" ng-bind="day"></div></div><div ng-repeat="week in weeks track by $index" class="week"><span class="lh-3 center day" ng-class="{ \'bg-col-4\': data.isDefault, \'bg-col-11 col-w\': date.selected, \'bg-col-14\': date.disabled || !date, \'cursor-pointer\': date && !date.disabled }" ng-repeat="date in week track by $index" ng-click="onClick(date)" ng-bind="date.day"></span></div></div>'),
    e.put("/page/header/meganav/item.html", '<div ng-class="{active : isActive}"><a ms-href="{{::item.link}}" ng-if="::!item.submenu.length" hover-intent="link" ng-bind="::item.text"></a> <span class="cursor-pointer" ng-if="::item.submenu.length" ng-click="show()" ng-touch="touch()" ng-class="{\'is-open\' : visible}" ng-bind="::item.text | uppercase"></span></div>'),
    e.put("/page/header/meganav/submenu.html", '<div class="meganav-item__dropdown color-ternary"><div off-click="hide()" off-click-filter="\'.meganav__link\'"><div class="meganav-item__dropdown-inner ng-hide ng-hide-animate animation-top" ng-show="visible"><div class="bg-gradient b-t"><a class="meganav-item__dropdown-item m-r-05 center inline-block link-inherit no-link-hover lh-15" ng-class="{\'m-r-0\' : $last}" ng-repeat="subitem in item.submenu" href="{{::subitem.link}}" hover-intent="link-inherit"><img class="meganav-item__dropdown-item-image empty busy" tco-image="::subitem.image" fit-in="1" tco-width="0" fill-color="transparent" ng-if="subitem.image"><div class="block">{{::subitem.text}}</div></a></div></div></div></div>'),
    e.put("/blocks/checkout/sagepay/sagepaydirectpro.html", '<h3 class="fs-9 p-t-2 p-b-2 b-b">Payment card details</h3><div class="m-t"><input-wrap class="block m-t p-b-4-s" form="form" ng-repeat="item in method.tokens"><radio model="data.sagepay_token_cc_id" form="form" value="::item.id"><span class="flex flex-justify-between flex-middle"><span size-class="!S: flex flex-middle"><span class="fw-bolder w-12-s" size-class="S:block">{{::item.card_type}} ending {{::item.last_four}}</span></span><span class="w-12-s" size-class="S:block">Exp: {{::item.expiry_date | date : \'MM/yyyy\'}}</span></span></radio></input-wrap><input-wrap class="block m-t" form="form" ng-if="method.tokens.length"><radio model="data.sagepay_token_cc_id" form="form" value="0">Other card</radio></input-wrap><div ng-if="!method.tokens.length || !data.sagepay_token_cc_id"><div class="w-12 m-t"><div class="c-6 c-12-set-s"><input-wrap label="Card number" required="true" name="cc_number" form="form"><input class="input" type="text" name="cc_number" ng-model="data.cc_number" required autocomplete="off"></input-wrap></div><div class="c-4 c-8-set-s"><input-wrap label="Expiration date" required="true"><div class="w-12"><div class="c-6 c-7-set-s m-b-0"><select class="select" name="cc_exp_month" ng-model="data.cc_exp_month" ng-options="o.value as o.label for o in ::months" required><option value>month</option></select><span field-notice="cc_exp_month" form="form" parent-error-class="is-invalid"></span></div><div class="c-6 c-5-set-s m-r-0 m-b-0"><select class="select" name="cc_exp_year" ng-model="data.cc_exp_year" ng-options="o as o for o in ::years" required><option value>year</option></select><span field-notice="cc_exp_year" form="form" parent-error-class="is-invalid"></span></div></div></input-wrap></div><div class="c-2-set c-4-set-s m-r-0"><input-wrap class="pos-relative" label="CVV2" required="true" name="cc_csv" form="form"><input class="input" type="text" if-size="XL" id="{{prefix}}telephone" name="cc_csv" ng-model="data.cc_cid" required ng-minlength="3" ng-maxlength="4" autocomplete="off"><input class="input" type="text" if-size="MS" pattern="[0-9]*" inputmode="numeric" name="cc_csv" ng-model="data.cc_cid" required ng-minlength="3" ng-maxlength="4" autocomplete="off"></input-wrap></div></div><div class="w-12"><div class="c-6 c-12-set-s" ng-if="cardNotMatched"><input-wrap label="Credit card type" required="true" name="cc_type" form="form"><select class="select" name="cc_type" ng-model="data.cc_type" ng-options="value as label for (value, label) in method.cc.types"><option value>select your card type</option></select></input-wrap></div><div class="c-6 c-12-set-s" ng-if="data.cc_type == \'SOLO\' || data.cc_type == \'SWITCH\'"><input-wrap label="Card start date" required="true"><div class="w-12"><div class="c-6 m-b-0"><select class="select" name="cc_start_month" ng-model="data.cc_start_month" ng-options="o.value as o.label for o in ::months" required><option value>month</option></select><span field-notice="cc_start_month" form="form" parent-error-class="is-invalid"></span></div><div class="c-6 m-r-0 m-b-0"><select class="select" name="cc_start_year" ng-model="data.cc_start_year" ng-options="o as o for o in ::years" required><option value>year</option></select><span field-notice="cc_start_year" form="form" parent-error-class="is-invalid"></span></div></div></input-wrap></div></div><input-wrap class="block m-t" label="Name on card" required="true" name="cc_name" form="form"><input class="input" type="text" name="cc_name" ng-model="data.cc_owner" required autocomplete="off"></input-wrap><input-wrap class="block m-t" label="Issue number" required="true" form="form" ng-if="data.cc_type == \'SOLO\' || data.cc_type == \'SWITCH\'"><input class="input" type="text" name="cc_issue" ng-model="data.cc_ss_issue" required ng-maxlength="5" autocomplete="off"></input-wrap><input-wrap class="block m-t" form="form" ng-if="logged"><checkbox model="data" var-name="remembertoken" form="form" value="1">Save card data</checkbox></input-wrap></div><input-wrap class="pos-relative block m-t" label="CV2" required="true" name="token_cvv" form="form" ng-if="method.tokens.length && data.sagepay_token_cc_id"><div class="pos-absolute right-0 top-0"><span class="underline fs-4 cursor-help" ng-mouseenter="tooltipCsv = true" ng-mouseleave="tooltipCsv = false" ng-touch="tooltipCsv = !tooltipCsv" off-click="tooltipCsv = false">What is this?</span><div class="p-a-1 fs-3 center lh-12 tooltip tooltip--black hide-fade ng-hide ng-hide-animate" ng-class="{\'tooltip--top-center\': $root.isX || $root.isL, \'tooltip--top-left\': $root.isM || $root.isS}" ng-show="tooltipCsv">The Security Code on your credit card or debit card is a 3 digit number on the back of your VISA®, MasterCard® and Discover® branded credit and debit cards. On your American Express® branded credit or debit card it is a 4 digit numeric code on the front of the card.</div></div><input class="input" type="text" id="sd-token_cvv" name="token_cvv" ng-model="data.token_cvv" required ng-minlength="3" ng-maxlength="4" autocomplete="off"></input-wrap></div>'),
    e.put("/views/account/address-book/defaults.html", '<div ng-controller="AddressBookController"><div class="p-l-1 p-l-0-s p-b-8-m p-b-8-s c-6-set c-12-s" ng-if="differentShipping"><div class="fw-bold m-t-1">Default shipping address</div><div class="m-t-1" tco-address address="addressData.shipping"></div><p class="m-t-1" ng-if="addressData.shipping.id"><a class="button-inline link underline" ng-href="/account/address-edit/{{::addressData.shipping.id}}">Edit</a><bar></bar><action-singleton action-class="button-inline link underline" result-class="float-left" action="remove(addressData.shipping.id)">Remove</action-singleton></p></div><div class="p-l-1 p-l-0-s p-b-8-m p-b-8-s c-6-set c-12-s" ng-class=":: {\'c-12\' : !differentShipping}"><div class="fw-bold m-t-1">Default billling <span ng-if="!differentShipping">and shipping</span> address</div><div class="m-t-1" tco-address address="addressData.billing"></div><p class="m-t-1" ng-if="addressData.billing.id"><a class="button-inline link underline" ng-href="/account/address-edit/{{::addressData.billing.id}}">Edit</a><bar></bar><action-singleton action-class="button-inline link underline" result-class="float-left" action="remove(addressData.billing.id)">Remove</action-singleton></p></div></div>'),
    e.put("/views/account/order/item.html", '<div class="w-6 w-12-s p-b-s" ng-switch="!!productModel.data.name"><a ms-href="{{::productModel.data.url}}" class="link" size-class="S:fw-bold" ng-switch-when="true" ng-bind-html="::productModel.data.name"></a><div ng-switch-when="false" ng-bind-html="::item.name"></div></div><div class="w-6 w-12-s"><div class="w-4 w-12-s"><span ng-bind="::\'Price\' | ms" if-size="S"></span> <span class="price" price="::item.price"></span></div><div class="w-4 w-12-s"><span ng-bind="::\'Qty\' | ms" if-size="S"></span> <span ng-bind="::item.qty_ordered"></span></div><div class="w-4 w-12-s" size-class="S:left,!S:right"><span ng-bind="::\'Total\' | ms" if-size="S"></span> <span price="::item.row_total_incl_tax"></span></div></div>'),
    e.put("/views/blog/category/view.html", '<div class="w-12 m-t-8"><post-category-navigation></post-category-navigation><div class="wrap m-t-6 m-b-6 m-t-0-m m-t-0-s"><listing collection=":: category.posts" page-size="12" class="block" enable-lazy-load="1" prevent-auto-scroll="1" static-collection="1" template="/views/blog/post/list.html" models-name-prependix="post-list" factory-name="post"></listing></div></div>'),
    e.put("/views/blog/post/default.html", '<div class="wrap center"><post-category-navigation class="uppercase w-10-x m-t-8"></post-category-navigation><div ng-if="::!post.in_the_press_post_design"><div class="w-12 w-10-x left"><div class="flex flex-middle flex-column-s" ng-class="::{\'flex-direction-row-reverse\': post.reverse && !$root.isS}"><div class="w-6 w-12-s p-a p-l-0-s p-r-0-s p-t-0-s p-b-0-s" ng-class="::post.reverse ? \'p-r-0\' : \'p-l-0\'"><div class="ratio-3-2"><img class="fill" tco-image="::post.image" sharpen="false"></div></div><div class="uppercase pos-relative w-12 flex flex-justify-between m-t" if-size="S"><div class="w-3"><a class="fs-4" ms-href="{{::post.next.url}}" ng-if="::post.next.url"><i class="icon-left p-r"></i>Previous</a></div><div class="w-3"><a class="f-4" ms-href="{{::post.prev.url}}" ng-if="::post.prev.url">Next <i class="icon-right p-l"></i></a></div></div><div class="w-6 w-12-s p-a p-l-0-s p-r-0-s center-s" ng-class="::post.reverse ? \'p-l-0\' : \'p-r-0\'"><h3 class="h3"><small class="block fs-2" ng-bind="::post.date | formatdate"></small> <span class="fs-4-m line line--50" ng-bind="::post.name"></span></h3><p class="m-t m-b text" if-size="!S" ng-bind="::post.teaser"></p></div></div></div><div class="wrap flex flex-middle uppercase font-primary m-t-6-m w-10-x" ng-class="::{\'flex-justify-end\' : !post.next.url}" if-size="!S"><div class="w-2 left"><a class="ls-2 fs-8" ms-href="{{::post.next.url}}" ng-if="::post.next.url"><i class="icon-left p-r"></i>Previous</a></div><div class="w-8 center"><h3 class="h3" ng-bind="::post.subtitle"></h3></div><div class="w-2 right"><a class="ls-2 fs-8" ms-href="{{::post.prev.url}}" ng-if="::post.prev.url">Next <i class="icon-right p-l"></i></a></div></div></div><div class="w-6 w-12-s p-a p-l-0-s p-r-0-s center-s" ng-if="::post.in_the_press_post_design"><h3 class="h3"><span class="fs-4-m line line--50" ng-bind="::post.name"></span> <small class="block fs-2" ng-bind="::post.date | formatdate"></small></h3></div><div class="pos-relative w-10-x left" ng-class="::{\'m-t\': row.margin}" ng-repeat="row in ::post.rows track by $index" ng-if="::!row.hide"><div class="flex flex-justify-center flex-wrap" ng-class="::row.width"><div class="c-12-set-s" ng-class="::[ column.width == \'12\' ? \'w-12\' : \'c-\' + column.width + \'-set\', {\'m-r-0\': $last} ]" ng-repeat="column in ::row.columns track by $index" ng-if="::!column.hide"><div class="block" ng-repeat="component in ::column.components track by $index" ng-switch="::component.acf_fc_layout"><div ng-switch-when="breadcrumbs"><breadcrumbs></breadcrumbs></div><static-block custom="::{component, modelData: post}" template="/views/content/components/{{::component.acf_fc_layout}}.html" ng-switch-default></static-block><image-block ng-switch-when="image" component="::component"></image-block></div></div></div></div><div class="center m-t-6 m-b-6"><h5 class="h5">Share</h5><div><div social-buttons model="post" factory-name="post"></div></div></div></div>'),
    e.put("/views/blog/post/list.html", '<div infinite-scroll="lazyLoad()" infinite-scroll-distance="1" class="blog-list"><p ng-if="!items.length" class="fs-16" ng-bind="::empty"></p><post-list-item ng-repeat="item in items" class="w-12" custom="{reverse : $even ? false : true}" post-id="item"></post-list-item></div>'),
    e.put("/views/catalog/product/list-minisearch-off-canvas.html", '<div infinite-scroll="lazyLoad()" infinite-scroll-distance="1"><product-list-item class="c-6-set" ng-repeat="model in items" product-id="model"></product-list-item></div>'),
    e.put("/views/catalog/product/list-minisearch.html", '<div infinite-scroll="lazyLoad()" infinite-scroll-distance="1"><p ng-if="!items.length" class="p-t-8 p-b-8 fs-8 col-13 center">{{::empty}}</p><div class="grid"><product-list-item ng-class="[\'c-\' + model.colSpan + \'-set\']" ng-repeat="model in items | wideImageSort:[6,4,4,3][$root.sizeId]:undefined:\'col_span\' track by model.id" product-id="model.id"></product-list-item></div></div>'),
    e.put("/views/catalog/product/list-related.html", '<div class="grid" ng-if="items.length"><product-list-item ng-class="[\'c-\' + model.colSpan + \'-set\']" ng-repeat="model in items | wideImageSort:[6,4,4,3][$root.sizeId]:undefined:\'col_span\' track by model.id" product-id="model.id"></product-list-item></div>'),
    e.put("/views/catalog/product/list-upsell.html", '<div class="grid m-r-0 m-l-0" ng-if="items.length"><product-list-item class="w-12" ng-repeat="model in items | wideImageSort:[6,4,4,3][$root.sizeId]:undefined:\'col_span\' track by model.id" product-id="model.id" template-family="upsell"></product-list-item></div>'),
    e.put("/views/catalog/product/list.html", '<div infinite-scroll="lazyLoad()" infinite-scroll-distance="1"><div ng-controller="LocalListingController as vm"><p ng-if="!(items | hideBanner:vm.hideBanner).length" class="p-t-8 p-b-8 fs-8 col-13 center" ng-bind="::empty"></p><div class="grid"><product-list-item ng-class="[\'c-\' + model.colSpan + \'-set\']" ng-repeat="model in items | hideBanner:vm.hideBanner | wideImageSort:[6,3,3,3][$root.sizeId]:undefined:\'col_span\' track by model.id" product-id="model.id"></product-list-item></div></div></div>'),
    e.put("/views/catalog/product/view-preview.html", '<span ng-click="close()" class="pos-absolute right-2 top-2 cursor-pointer"><i class="icon-cancel"></i></span><div ng-if="ready" class="p-a"><div class="c-6 p-t"><product-carousel class="w-12" frames="product.media" landscape="::landscape"></product-carousel></div><div class="c-6 p-t m-r-0"><h1 class="h3 fs-6-s" ng-bind="product.name"></h1><p class="m-t-1 fs-4 fs-2-s lh-3" ng-if="product.brand">Design by <span ng-bind="product.brand | optionLabel:\'brand\'"></span></p><div class="m-t-3 flex flex-bottom"><div class="m-r-2 font-2 fs-7 font-va-fix pos-relative top-1px"><span ng-if="product.is_from_price">from</span> <span class="m-r-1 inline-block col-13 fs-3 line-through-2 price" price="product.org_price" ng-if="product.org_price"></span> <span class="inline-block price" ng-class="{\'col-1\': product.org_price}" price="product.price | customerDiscount:product.org_price"></span></div><div class="col-11 font-2 fw-bold fs-1" if-size="!S"><if-stock-status test="isOut" product-id="::product.id"><span class="uppercase">Out of stock</span></if-stock-status><if-stock-status test="isIn" product-id="::product.id"><span class="uppercase">In stock</span></if-stock-status></div><div class="flex-grow flex flex-middle flex-justify-end cursor-pointer" scroll-to="#reviews" zippy-open="product.tab3" ng-if="::product.reviews.count && !$root.isS" "><rating class="fs-3 col-11" class-empty="icon-star-empty" class-half="icon-star-half" class-full="icon-star-full" rate="(product.reviews.rating || 0) / 20" max="5"></rating><span class="m-l-2 no-wrap inline-block va-m fs-4"><span ng-bind="::product.reviews.count || 0"></span> Reviews</span></div></div><div class="m-t-7 m-b-5 text" ng-bind-html="product.short_description" ng-if="product.short_description && !$root.isS"></div><product-configurable-options product-id="::routerProduct.id" model-data="modelData" data="optionsModel.selection" if-size="!S"></product-configurable-options><product-custom-options product="vm.model" data="::vm.request.options" if-size="!S"></product-custom-options><buy-button class="w-12" product-id="product.id" if-size="!S"></buy-button></div><div if-size="S"><div class="m-t-7 m-b-5 text" ng-bind-html="product.short_description" ng-if="product.short_description"></div><buy-button class="w-12" product-id="product.id"></buy-button></div></div><div ng-if="!ready">Loading...</div>'),
    e.put("/views/catalog/product/view.html", '<div class="wrap p-t-2"><breadcrumbs></breadcrumbs><div class="m-t-2 center" ng-init="landscape = (topLevelProductModel.data.template | optionLabel:\'template\') == \'landscape\'"><div class="p-r p-r-0-s c-12-set-s" ng-class="::landscape ? \'c-8-set\' : \'c-6-set\'"><product-carousel class="w-12" frames="product.media" custom="::{productName: product.name, landscape: landscape}"></product-carousel></div><div class="c-4-set c-6-set-m c-12-set-s m-r-0 p-l p-l-0-s left"><h1 class="h3" ng-bind="product.name"></h1><p class="m-t-1 fs-4 lh-3" ng-if="product.brand">Design by <span ng-bind="product.brand | optionLabel:\'brand\'"></span></p><div class="m-t-3 m-b-4 p-b-3 p-b-7-s flex flex-bottom"><div class="pos-relative flex flex-bottom"><div class="m-r-2 font-2 fs-7 font-va-fix pos-relative top-1px"><span ng-if="product.is_from_price">from</span> <span class="m-r-1 inline-block col-13 fs-3 line-through-2 price" price="product.org_price" ng-if="product.org_price"></span> <span class="inline-block price" ng-class="{\'col-1\': product.org_price}" price="product.price | customerDiscount:product.org_price"></span></div><div class="col-11 font-2 fw-bold fs-1"><if-stock-status test="isOut" product-id="product.id"><span class="uppercase" ng-bind="(product.weight >= 50 ? \'Awaiting stock\' : \'Out of stock\')"></span><div ng-if="product.weight >= 50"><div class="pos-absolute left-0 right-0 p-a-1 p-t-2-s p-b-2-s lh-2" style="top:100%">Please <a class="b-b b-col-11" target="_blank" if-size="!S" ms-href="/contact-us">contact us</a> <a class="b-b b-col-11" if-size="S" ng-href="{{::\'tel:\' + website.phone}}">contact us</a> as we may have stock in one of our stores</div></div></if-stock-status><if-stock-status test="isIn" product-id="product.id"><span class="uppercase">In stock</span></if-stock-status></div></div><div class="flex-grow flex flex-middle flex-justify-end cursor-pointer" scroll-to="#reviews" zippy-open="product.tab3" ng-if="::product.reviews.count"><rating class="fs-3 col-11" class-empty="icon-star-empty" class-half="icon-star-half" class-full="icon-star-full" rate="(product.reviews.rating || 0) / 20" max="5"></rating><span class="m-l-2 no-wrap inline-block va-m fs-4"><span ng-bind="::product.reviews.count || 0"></span> Reviews</span></div></div><div class="m-t-4 m-b-5 text" ng-bind-html="product.short_description" ng-if="product.short_description"></div><product-page-related class="m-b block" ng-if="::product.link.related.length && product.attribute_set_id == 14" product="product"></product-page-related><product-configurable-options product-id="::routerProduct.id" model-data="modelData" data="optionsModel.selection"></product-configurable-options><product-custom-options product="vm.model" data="::vm.request.options"></product-custom-options><extended-buy-button class="w-12" product-id="product.id"></extended-buy-button><pay4later product-price="product.price | customerDiscount:product.org_price"></pay4later><div class="m-t-3 p-b"><div class="w-6 center"><gift-registry-add-product product-id="product.id"></gift-registry-add-product></div><div class="w-6 center"><wishlist-button product-id="product.id" add="Add to Wishlist" added="Remove from Wishlist"></wishlist-button></div></div><div class="m-t-8 m-b-8" ng-if="product.link.upSell.length"><product-related products="product.link.upSell" limit="1" custom="::{family: \'upsell\'}"></product-related></div><div class="m-t m-t-8-s center-s"><p class="fs-4">Share the style</p><social-buttons class="block m-t-2" model="product" factory-name="product"></social-buttons></div></div></div></div><div class="wrap center" ng-if=":: product.quote"><div class="w-7 w-10-m w-12-s p-t p-b-8"><p class="p1 fs-9 fs-7-m fs-6-s" ng-bind=":: product.quote"></p><p class="m-t fw-bold font-2 fs-4 uppercase" ng-bind=":: product.quote_name"></p></div></div><div class="bg-col-14"><div class="wrap flex flex-justify-center p-t-12 p-t-6-m p-t-4-s p-b-12 p-b-6-m p-b-4-s"><div class="w-10"><div class="c-7-set c-12-m c-12-s p-b-8 p-b-0-s"><h5 class="m-t-2 h3" ng-bind="::product.name"></h5><div class="m-t text" ng-bind-html="product.description" ng-if="product.description"></div></div><div class="c-5-set c-12-set-m c-12-set-s m-r-0 p-t p-b-8"><div class="b-b b-b-0-s flex-x flex-l flex-m tabs"><span class="block m-b-2-s m-r-8 m-r-0-s p-t-2-s p-b-2 p-b-1-s lh-2-s cursor-pointer tabs__item" zippy-open="product.tab1" zippy-class="is-active">Details <i class="float-right fs-1 col-1 top-1 right-1 icon-cross" if-size="S"></i></span><div zippy="product.tab1" zippy-default="true" if-size="S"><div class="font-2 fs-3" ng-repeat="item in ::[\'brand\',\'sku\', \'material\', \'dimensions\']" ng-if="product[item] | optionLabel:item"><div class="c-4-set c-6-set-s fw-bold" ng-bind="::item | attributeLabel"></div><div class="c-8-set c-6-set-s m-r-0" ng-bind="product[item] | optionLabel:item"></div></div></div><span class="block m-b-2-s m-l m-l-0-s m-r-8 m-r-0-s p-t-2-s p-b-2 p-b-1-s lh-2-s cursor-pointer tabs__item" zippy-open="product.tab2" zippy-class="is-active">Delivery <i class="float-right fs-1 col-1 top-1 right-1 icon-cross" if-size="S"></i></span><div ng-bind-html="::website.general.custom_block_delivery_returns" zippy="product.tab2" if-size="S"></div><span class="block m-b-2-s m-l m-r-8 p-t-2-s p-b-2 p-b-1-s lh-2-s cursor-pointer tabs__item" zippy-open="product.tab3" zippy-class="is-active" ng-if="::product.reviews.count">Reviews <i class="float-right fs-1 col-1 top-1 right-1 icon-cross" if-size="S"></i></span><div id="reviews" zippy="product.tab3" ng-if="product.reviews.count && $root.isS"><product-reviews class="w-12 p-t" product="::product"></product-reviews></div></div><div class="m-t" if-size="!S"><div zippy="product.tab1" zippy-default="true"><div class="font-2 fs-3 p-t-2 p-b-2" ng-repeat="item in ::[\'manufacturer\', \'sku\', \'material\', \'dimensions\']" ng-if="product[item] | optionLabel:item"><div class="w-4 w-6-s m-r-0 p-r-2 fw-bold" ng-bind="::item | attributeLabel"></div><div class="w-8 w-6-s m-r-0" ng-bind="product[item] | optionLabel:item"></div></div></div><div ng-bind-html="::website.general.custom_block_delivery_returns" zippy="product.tab2"></div><div id="reviews" zippy="product.tab3" ng-if="::product.reviews.count"><product-reviews product="::product"></product-reviews></div></div></div></div></div></div><div class="wrap"><product-related class="block m-t-8 m-b-8" products="product.link.related.length ? productModel.data.link.related : topLevelProductModel.data.link.related" limit="4" ee-list-name="More from this collection" custom="::{family: \'related\'}"><div><h5 class="m-t m-b-6 h3 center">Suggested&hellip;</h5></div></product-related></div><div class="bg-col-18"><div class="wrap flex flex-justify-center p-t-12 p-t-10-s p-b-12 p-b-8-s col-w"><div class="w-10 p-t-8-x p-b-8-x" ng-repeat="column in ::website.general.custom_block_text_columns track by $index"><div ng-repeat="component in ::column.components track by $index" ng-switch="::component.acf_fc_layout"><div class="center-s" ng-switch-when="text"><div class="c-6-set c-12-set-s p-r"><heading class="w-12 m-b m-b-3-s introducing" ng-class="::\'col-\' + component.introducing_color" size="::component.introducing_size || \'h6\'" ng-if="::component.introducing"><span ng-class="::component.introducing_size" ng-bind="::component.introducing"></span></heading><heading class="w-12" size="::line.size || \'h3\'" ng-repeat="line in ::component.text_lines track by $index"><span ng-class="::[\'col-\' + line.color, line.size]" ng-bind="::line.text"></span></heading><div class="m-t-3 m-b-6" if-size="S"><div ng-class="::\'ratio-\' + component.ratio" ng-if="::component.image"><img class="fill" opt-href="{{::component.cta_link}}" tco-image="::component.image"></div></div><div class="m-t text" ng-bind-html="::component.content" ng-if="::component.content"></div><div class="m-t-8" ng-if="::component.cta_text"><span class="underline arrow fs-6" opt-href="{{::component.cta_link}}" ng-class="::component.cta_style" ng-bind="::component.cta_text"></span></div></div><div class="c-6-set c-12-set-s" if-size="!S"><div ng-class="::\'ratio-\' + component.ratio" ng-if="::component.image"><img class="fill" opt-href="{{::component.cta_link}}" tco-image="::component.image"></div></div></div></div></div></div></div><div class="wrap p-t"><div class="m-t-12 p-t-8" ng-if="::website.general.buying_from_header"><p class="h3 center" ng-bind="::website.general.buying_from_header"></p><div class="m-t-8 m-b-8 p-b-8"><div class="c-3-set c-6-set-s" ng-repeat="section in ::website.general.buying_from_sections track by $index"><p class="min-h-3-m min-h-3-s p1 col-11" ng-bind="::section.title"></p><p class="m-t p3" ng-bind-html="::section.text"></p></div></div></div></div>'),
    e.put("/views/checkout/form/address.html", '<div><div ng-if="$ctrl.shouldShowList() || $ctrl.checkoutData.giftEvent.addressId" ng-init="$ctrl.checkoutData.billing.to_shipping = 1"><checkbox model="$ctrl.checkoutData.billing" ng-if="$ctrl.shouldShowToShipping() && (!$ctrl.checkoutData.address.shipping.customer_address_id || $ctrl.checkoutData.address.shipping.customer_address_id != $ctrl.checkoutData.giftEvent.addressId)" var-name="to_shipping" form="$ctrl.stepService.steps.billing.form">Same as delivery address</checkbox><div class="w-12 m-t flex flex-wrap" size-class="S: flex-column"><div class="c-6-set c-12-set-s m-b-2 p-a b-a m-b-4-s b-col-grey-light-1 flex-x flex-l flex-m flex-middle" ng-if="$ctrl.checkoutData.giftEvent.addressId && $ctrl.type == \'shipping\'"><radio model="$ctrl.data.customer_address_id" value="$ctrl.checkoutData.giftEvent.addressId" class="w-12"><span class="block m-l-1">Ship to the owner of the gift registry</span></radio></div><div class="c-6-set c-12-set-s m-b-2 p-a b-a m-b-4-s b-col-grey-light-1" ng-repeat="item in $ctrl.addresses track by $index" ng-if="!$ctrl.checkoutData.billing.to_shipping || $ctrl.type == \'shipping\'"><radio model="$ctrl.data.customer_address_id" value="::item.id"><div class="p-l-1" tco-address address="item"></div></radio></div><div class="c-6-set c-12-set-s m-b-2 p-a b-a m-b-4-s b-col-grey-light-1 flex-x flex-l flex-m flex-middle" ng-if="!$ctrl.checkoutData.billing.to_shipping || $ctrl.type == \'shipping\'"><radio model="$ctrl.data.customer_address_id" value="0" class="w-12"><span class="block m-l-1">Add new address</span></radio></div></div></div><div ng-if="!$ctrl.data.customer_address_id" tco-address-form use-body-template="1" address="$ctrl.data" source-form="$ctrl.form"></div></div>'),
    e.put("/views/checkout/form/basket.html", '<div class="b-a p-a"><h6 class="b-b p-b-2">My Shopping Bag <span class="fs-1">(<a class="link" ms-href="/basket">edit</a>)</span></h6><div><div ng-class="{\'p-r-1 overflow-hidden overflow-y-scroll checkout-basket__max-height\': $ctrl.customer.basket.data.items.length > 2}"><div ng-class="{\'b-b b-col-grey-light-1\': !$last}" checkout-list-item item="item" ng-repeat="item in $ctrl.customer.basket.data.items" template-family="checkout"></div></div><checkout2-totals class="block" custom="{sticky: true}"></checkout2-totals></div></div>'),
    e.put("/views/checkout/form/delivery-date.html", '<div ng-if="currentConfig"><label class="label"><span ng-if="currentConfig.isDeliveryDateMode">Delivery</span> <span ng-if="!currentConfig.isDeliveryDateMode">Dispatch</span> date:</label><date-input options="options" model="model" var-name="date" name="deliverydate"></date-input><p class="p-b p-t" ng-if="dispatchDate"><span class="fw-bold">Dispatch:</span> <span ng-bind-html="dispatchDate | formatdate"></span></p><p ng-if="deliveryDate"><span class="fw-bold">Delivery:</span> <span ng-bind-html="deliveryDate | formatdate"></span></p></div>'),
    e.put("/views/checkout/form/gift-message.html", '<checkbox ng-if="::data" class="m-t m-b" model="data" var-name="price_tag" form="form">Gift invoice (price excluded)</checkbox><label class="label">Gift message ({{ 200 - (data.message.length||0) }} characters left)</label> <textarea class="textarea" ng-trim="false" name="gift-message" ng-model="data.message" maxlength="200" rows="4" placeholder="Enter gift message here"></textarea>'),
    e.put("/views/checkout/form/login.html", '<ng-form name="checkout_login_form" novalidate ng-submit="submit()"><input-wrap class="block m-t label--big" label="Your email" required="true" name="email" form="checkout_login_form"><input class="input is-disabled" ng-if="logged" disabled value="{{customerEmail}}"> <input class="input" ng-if="!logged" type="email" name="email" ng-change="check(checkout_login_form)" ng-model-options="{updateOn: \'blur\'}" ng-model="data.email" required ng-enter="blur"><div class="m-t-3" ng-if="logged">Not you?&nbsp;<action-singleton action-class="button-inline" result-class="float-left" action="softLogout()">Click here</action-singleton>&nbsp;to logout (items in your basket will be kept).</div><div class="m-t-3" ng-if="!logged && guestCheckout && checked && hasAccount">You are using guest checkout.&nbsp;<action-singleton action-class="button-inline" action="continueAsGuest(false)">Click here</action-singleton>&nbsp;if you want to leave it and sign in.</div></input-wrap><div class="m-t-3 p-b" ng-if="!logged"><div ng-if="checked && hasAccount && !guestCheckout"><p class="fs-4">Welcome back <span ng-bind="hasAccount"></span>, please enter your password</p><input-wrap class="block m-t p-b" label="Password" required="true" name="password" form="checkout_login_form"><input class="input" type="password" name="password" ng-model="data.password" ng-required="hasAccount" ng-enter="autoAction(checkout_login_form)"></input-wrap><div class="right"><action class="button-inline" ng-if="hasAccount" ng-click="quickPassword()" code="resetAction.result" busy="resetAction.busy"><span>Forgotten password?</span></action></div></div><div class="w-12 m-t-5" ng-if="(checked && hasAccount && !guestCheckout) || !checked"><result ng-class="resetAction.result ? \'block\' : \'\'" code="resetAction.result" success="We\'ve sent you an email with a link to reset your password."></result><result ng-class="code ? \'block\' : \'\'" code="code" success=""></result><action class="c-6-set c-12-set-s p-r-0 p-l-0 button {{checked ? \' m-t\' : \' c-12-set\'}}" ng-click="checked ? autoAction(checkout_login_form) : check(checkout_login_form)" code="code" busy="checkout_login_form.busy || checkBusy"><span>{{checked ? \'Login\' : \'Continue\'}}</span></action><button class="c-6-set c-12-set-s m-r-0 p-r-0 p-l-0 button-1 {{checked ? \' m-t m-t-0-s\' : \'\'}}" ng-click="continueAsGuest()" ng-if="checked">Continue as guest</button></div><checkbox class="m-b" model="data" var-name="newsletter" form="form" ng-if="!subscribed"><span class="fs-4" ng-bind-html="::website.general.privacy_policy_text_2"></span></checkbox></div></ng-form>'),
    e.put("/views/checkout/form/payment-methods.html", '<p class="label m-t-0" ng-if="noPayment">No payment information required</p><div ng-if="!noPayment"><div class="pos-relative p-t-2 p-b-2" ng-repeat="method in methods track by method.code" ng-if="method.code != \'customercredits\' || method.credits >= customer.checkout.data.totals.grand_total"><radio model="data.method" name="payment_method" value="::method.code" required="true"><span size-class="!S: flex flex-middle flex-justify-start"><span class="fs-4-s fw-thin" ng-bind-html="::method.title"></span><div class="m-l flex-grow payment-logo payment-logo--credit-cards" ng-if="(method.code == \'sagepaydirectpro\' || method.code == \'adyen_cc\') && !$root.isS"></div><div class="m-l flex-grow payment-logo payment-logo--paypal" ng-if="method.code == \'paypal_express\' && !$root.isS"></div></span></radio><div ng-if="data.method == method.code"><pay4later class="block m-t" checkout-mode="true" payment-data="data" ng-if="data.method == \'pay4later\'"></pay4later><sagepay-pi-form class="block m-t" method="method" payment-data="data" form="form" ng-if="data.method == \'sagepaynit\'"></sagepay-pi-form><sagepay class="block m-t" method="method" data="data" form="form" ng-if="data.method == \'sagepaydirectpro\'"></sagepay><div class="m-t-2" ng-if="data.method == \'customercredits\'">Available Store Credit: <span class="fw-bold" price="method.credits"></span></div></div></div><span field-notice="payment_method" form="form"></span></div>'),
    e.put("/views/checkout/form/shipping-methods.html", '<p class="label m-t-2" ng-if="noShipping">No shipping information required</p><p class="label m-t-0" ng-if="!methods.length && !noShipping && !shipping.message.length">We are unable to provide you with a delivery quote for this delivery address. Please get in touch with our customer service team.</p><div ng-repeat="method in methods track by method.code"><radio class="label m-t-3" model="data.method" name="shipping_method" value=":: method.code" required="true" ng-class="{\'m-t-0\':$first}"><span ng-bind-html="method.title"></span> - <span if-not-trade-store price="method.price"></span> <span if-trade-store price="method.price /1.2"></span></radio><p class="lh-12 m-t-2" ng-bind=":: method.description" ng-if=":: method.description"></p><div><span field-notice="shipping_method" form="form"></span></div></div>'),
    e.put("/views/checkout/form/step.html", '<div ng-form="stepForm" class="m-t-2" ng-show="$ctrl.isCurrent()" ng-attr-id="checkout-step-{{::$ctrl.stepName}}"><div class="ng-hide" ng-show="$ctrl.previousConfirmed()"><meta ng-init="$ctrl.setForm(stepForm)"><ng-transclude></ng-transclude></div></div>'),
    e.put("/views/checkout/form/totals.html", '<div class="m-t-2 m-b-2 flex flex-justify-between"><span>Subtotal</span> <span price="$ctrl.checkoutTotals.subtotal" price-precission="2"></span></div><div class="m-t-2 m-b-2 flex flex-justify-between" ng-show="$ctrl.hasShipping"><span>Delivery cost</span> <span price="$ctrl.checkoutTotals.shipping" price-precission="2"></span></div><if-trade-store><div class="m-t-2 m-b-2 flex flex-justify-between"><span>VAT</span> <span price="$ctrl.checkoutTotals.tax" price-precission="2"></span></div></if-trade-store><div class="m-t-2 m-b-2 flex flex-justify-between" ng-show="$ctrl.checkoutTotals.discount"><span>Discount</span><if-not-trade-store><span price="$ctrl.checkoutTotals.discount" price-precission="2"></span></if-not-trade-store><if-trade-store><span price="$ctrl.checkoutTotals.discount/1.2" price-precission="2"></span></if-trade-store></div><if-not-trade-store><div class="m-t-2 p-t flex flex-justify-between fs-8 b-t" ng-show="$ctrl.hasShipping"><span>Total</span> <span price="$ctrl.checkoutTotals.grand_total" price-precission="2"></span></div></if-not-trade-store><if-trade-store ng-show="$ctrl.hasShipping"><div class="m-t-2 p-t flex flex-justify-between b-t"><span>Grand total <span class="fs-1">(excl. VAT)</span></span> <span price="$ctrl.checkoutTotals.grand_total-$ctrl.checkoutTotals.tax" price-precission="2"></span></div><div class="m-t flex flex-justify-between fs-7"><span>Grand total <span class="fs-1">(incl. VAT)</span></span> <span price="$ctrl.checkoutTotals.grand_total" price-precission="2"></span></div></if-trade-store>'),
    e.put("/views/catalog/category/seocopy.html", '<div class="wrap p-b-8" ng-if="::vm.seocopy.copy.length"><div class="m-t-8" ng-repeat="copy in ::vm.seocopy.copy"><h2 class="h2" ng-bind="::copy.copy_title"></h2><div><div class="p1" ng-bind-html="::copy.copy_text"></div><span class="link-underline inline-block m-t-2" ng-bind="::\'read more\' | ms" ng-click="copy.showMore = !copy.showMore" ng-if="::copy.copy_read_more_text" ng-hide="copy.showMore || $parent.$parent.$parent.$parent.$parent.$parent.$parent.isPrerender"></span></div><div ng-hide="!copy.showMore && !$parent.$parent.$parent.$parent.$parent.$parent.isPrerender"><div class="p1" ng-bind-html="::copy.copy_read_more_text"></div><span class="link-underline inline-block m-t-2" ng-bind="::\'read less\' | ms" ng-click="copy.showMore = !copy.showMore"></span></div></div></div>'),
    e.put("/views/catalog/category/view.html", '<off-canvas scroll-on-open="1" template="/page/off-canvas/category-filters.html" name="category-filters" no-swipe="1" close-delay="0" animate="1" custom="::{category: category}" if-size="MS"></off-canvas><div class="wrap p-t-2" ng-if="!isSearch"><breadcrumbs></breadcrumbs></div><div class="wrap-x wrap-l" ng-class="::category.image ? \'p-t-2\' : \'center\'" ng-if="!isSearch"><div class="w-8-x w-7-l ratio-2-1" ng-if="::category.image"><img class="fill" tco-image="::category.image"></div><div ng-class="::category.image ? \'w-4 w-5-l w-12-m w-12-s p-l-10-x p-l-6-l p-t-8 p-t-4-l center-m center-s\' : \'w-7 w-12-s p-t-2\'"><p class="m-t-2 m-b introducing col-11">Collection</p><h1 class="h2 m-b-2" ng-bind="::category.name"></h1><div class="p1" ng-bind-html="::category.description"></div><p class="center m-t-8 fw-bold fs-6" ng-if="::!category.products.length" ng-bind="\'There are no products in this category, please try one of our most popular categories\' | ms"></p></div></div><div class="wrap center" ng-if="isSearch"><div class="w-12 p-t-2"><p class="m-t-2 m-b introducing col-11" ng-bind="infoModel.count ? \'Search results\' : \'Sorry\'"></p><h1 class="h2 m-b-2" ng-show="!infoModel.count" ng-bind="website.general.title"></h1><h1 class="h2 m-b-2" ng-show="infoModel.count">Showing <span ng-bind="infoModel.count || 0"></span> Results <span ng-if="::category.term">for " <span ng-bind="::category.term" class="capitalize"></span>"</span></h1><div class="p1" ng-bind-html="infoModel.count ? category.description : website.general.text"></div></div></div><div class="wrap p-t-2 p-b-2" ng-controller="LocalCategoryController as localCategoryCtrl"><div class="p-b-2" id="category-filters" ng-if="category.products.length != 0"><sticky class="block" offset-section-id="header__block" bottom-section-id="listing-sticky-cutout"><div class="p-t-2 p-b-2 category__filters"><div class="flex flex-justify-center flex-top pos-relative-s" if-size="SM"><div class="c-6-set c-4-set-m m-b-0"><button class="w-12 button-3 left" off-canvas-toggle="category-filters"><span class="uppercase normal fw-bold fs-2 font-2 ls-3">Refine by:</span> <i class="float-right col-11 icon-plus"></i></button></div><div class="c-6-set c-4-set-m m-b-0"><product-list-sort></product-list-sort></div></div><div class="flex flex-justify-between flex-middle" if-size="XL"><span class="flex flex-middle cursor-pointer link" ng-click="localCategoryCtrl.toggle()"><i class="icon-menu fs-8 col-11 pos-relative top-1px"></i> <span class="font-2 fs-1 p-l-2 ls-2" ng-switch="localCategoryCtrl.isOpen"><span class="uppercase" ng-switch-default>Show filters</span> <span class="uppercase" ng-switch-when="true">Close filters</span></span></span><product-list-sort class="w-2 w-3-m w-5-s"></product-list-sort></div></div></sticky></div><div class="flex category__products" ng-class="{\'is-close\': !localCategoryCtrl.isOpen}"><div class="category__products-filters" if-size="LX"><sticky offset-section-id="header__block" bottom-section-id="listing-sticky-cutout" shift="65" scroll="1"><div class="category__products-filters-inner"><product-list-filters class="block" collection="::category.products" allowed="::category.filters" category-filter="::category.id" custom="::{offCanvas: false}" static-collection="1"></product-list-filters></div></sticky></div><div class="category__products-list"><div ng-if="::category.products.length != 0"><listing collection="::category.products" page-size="10" class="block" enable-lazy-load="1" prevent-auto-scroll="1" static-collection="1" list-type="{{:: isSearch ? \'search\' : \'category\'}}" search-term="{{:: category.term}}" empty="There are no results matching your selection."></listing></div><div class="wrap p-b-8" ng-if="::category.products.length == 0"><div class="w-6 w-12-s p-t-10 p-l-10 p-r-10 p-l-0-s p-r-0-s" ng-repeat="block in ::website.general.blocks"><div class="ratio-2-1"><img class="fill" tco-image="::block.image"></div><div class="m-t-6 w-11" ng-if="::block.title"><h2 class="fs-11 m-b" ng-bind="::block.title"></h2></div><div class="p1" ng-bind-html="::block.text" ng-if="::block.text"></div><div class="m-t" ng-if="::block.link"><span class="underline arrow fs-6 button-inline" opt-href="{{::block.link}}">Explore</span></div></div></div></div></div><div id="listing-sticky-cutout"></div></div><seocopy wp-seo-copy-id="::category.wp_seo_copy"></seocopy>'),
    e.put("/views/checkout/success/registration.html", '<div ng-if="!logged && !(result == \'SUCCESS\')"><form name="form" ng-submit="register()" class="inputs-on-white" novalidate><div class="w-6-x w-6-l w-8-m w-12-s b-t p-t"><h4 class="h3" ng-init="setForm(form)">For a faster checkout...</h4><input-wrap class="w-6 w-8-m w-12-s pos-center m-t" label="Just pop in a new password and we\'ll setup your account" required="true" name="password" form="form"><input class="input" type="password" name="password" ng-model="data.password" required></input-wrap><action ng-click="register()" busy="form.busy" code="result" class="button m-t w-6 w-12-s">Create account</action><result code="result" success=""></result></div></form></div><div ng-if="result == \'SUCCESS\'"><p class="m-t fs-8">Great! Your account is set now.</p><a ms-href="/account" class="button buttoni-inline m-t-2"><span class="c-body">Click here to go to dashboard</span></a></div>'),
    e.put("/views/content/components/contact-info.html", '<div class="w-12 m-b m-t-6"><div class="left" ng-if="::vm.component.content.length" ng-repeat="item in ::vm.component.content"><h4 class="h4 m-b" ng-if="::item.title" ng-bind="::item.title"></h4><span class="block m-b lh-3" ng-if="::item.address" ng-bind-html="::item.address"></span><div ng-if="item.emails" class="m-b p1 button-inline" ng-repeat="email in ::item.emails"><a class="m-b-2" ng-href="mailto:{{::email.email}}" ng-bind="::email.email"></a></div><div ng-if="::item.phone_numbers" class="p1 m-b button-inline" ng-repeat="tel in ::item.phone_numbers"><a ng-href="tel:{{::tel.phone}}" ng-bind="::tel.phone"></a></div></div><div class="left m-b" ng-if="::vm.component.contact_section.length" ng-repeat="item in ::vm.component.contact_section"><h4 class="h4 m-b" ng-if="::item.section_title" ng-bind="::item.section_title"></h4><div class="p-t-2 p-b-2 p-t-3-s p-b-3-s" ng-repeat="contact in ::item.contacts"><span ng-if="::contact.title" class="fw-bold" ng-bind="::contact.title + \' - \'"></span> <a ng-if="::contact.email" class="button-inline p1" ng-href="mailto:{{::contact.email}}" ng-bind="::contact.email"></a> <a ng-if="::contact.phone" class="block link p1" ng-href="tel:{{::contact.phone}}" ng-bind=":: contact.phone"></a></div></div></div>'),
    e.put("/views/content/components/custom-form.html", '<div class="wrap p-b-6"><div class="w-12-s pos-center" ng-class="::vm.component.form_width"><custom-form ng-repeat="form in ::vm.page.forms" form-data="form" success-message="{{::row.custom}}" perform-actions="1" class="w-12 left"></custom-form></div></div>'),
    e.put("/views/content/components/delivery_table.html", '<div class="w-12"><h3 ng-if="::vm.component.title" class="m-t-8 m-b m-b-8-m h3 center"><span class="line" ng-bind="::vm.component.title"></span></h3><p class="inline-block w-12 m-b center p2" ng-if="::vm.component.subtitle" ng-bind="::vm.component.subtitle"></p><p class="inline-block w-12 m-t m-b m-t-4-s fw-bold fs-6 lh-3" ng-if="::vm.component.table_name" ng-bind="::vm.component.table_name"></p><div class="w-12 left ls-2 fs-4 fw-bold" if-size="!S"><div class="c-4 p-t-2 p-r p-b-1 p-l bg-col-14 col-12">Delivery Type</div><div class="c-4 p-t-2 p-r p-b-1 p-l bg-col-14 col-12">Delivery Time</div><div class="c-4-set m-r-0 p-t-1 p-r p-b-2 p-l bg-col-14 col-12">Price</div></div><div class="w-12 left" ng-repeat="item in ::vm.component.rows track by $index" ng-class="{\'m-b-4-s\' :$last}"><div class="flex" if-size="!S"><div class="c-4 p-r p-b p-l b-b b-col-14 lh-1 fs-4-m p3" ng-bind-html="::item.type"></div><div class="c-4 p-r p-b p-l b-b b-col-14 lh-1 fs-4-m p3" ng-bind-html="::item.time"></div><div class="c-4-set m-r-0 p-r p-b p-l b-b b-col-14 lh-1 fs-4-m p3" ng-bind-html="::item.price"></div></div><div class="w-12 p-t p-b b-b b-col-14 center" ng-class="{\'b-t\': $first, \'bg-col-14\': $index%2 == 0}" if-size="S"><div class="lh-2"><p class="ls-2 fw-bold">Delivery Type</p><p class="m-t-2 fs-4 ls-1" ng-bind-html="::item.type"></p></div><div class="m-t lh-2"><p class="ls-2 fs-4 fw-bold">Delivery Time</p><p class="m-t-2 fs-4" ng-bind-html="::item.time"></p></div><div class="m-t lh-2"><p class="ls-2 fs-4 fw-bold">Price</p><p class="m-t-2 fs-4" ng-bind-html="::item.price"></p></div></div></div></div>'),
    e.put("/views/content/components/faq-accordion.html", '<h3 class="p-b-6 p-t-6 h4 b-b b-t" ng-bind="::vm.component.header"></h3><div class="w-5 w-12-s m-t-6 m-b p-r-4 p-r-0-s"><div class="b-b b-col-ebb" ng-repeat="group in ::vm.component.questions track by $index"><div class="w-12 p-b-2 p-t-4 p-b-4-s p-t-4-s p-l-2-s cursor-pointer flex flex-middle" zippy-toggle="tab.{{::$index}}" zippy-class="is-active"><h4 class="left fs-6 fw-bold w-11 arrow button-inline" ng-bind="::group.category"></h4><i class="fs-4 icon-cross transition"></i></div><div class="hide-up-container"><div class="p-t-1 p-b-1 ng-hide-animate hide-up" zippy="tab.{{::$index}}" zippy-default="{{::$first}}"><div class="w-12 m-t-1 m-t-2-s m-b-3" ng-repeat="item in ::group.questions_and_answers track by $index"><button class="fs-5 fs-4-s left p-b-1 m-b-2-s p-l-2-s p-r-2-s left" ng-click="$root.scrollTo(\'#\' + \'q-\' + $parent.$index + \'-\' + $index)" ng-bind-html="::item.question" zippy-select="zippy-second.{{::$index}}" zippy-toggle="zippy-second.{{::$index}}" zippy-class="fw-bold"></button><div class="hide-up-container"><div class="fs-4 lh-2 p-l-2 p-r-2 ng-hide-animate hide-up" if-size="S" zippy="zippy-second.{{::$index}}" ng-bind-html="::item.answer"></div></div></div></div></div></div></div><div class="w-7 w-12-s m-t-6 p-t-4" if-size="!S"><div zippy="tab.{{::$index}}" zippy-default="{{::$first}}" ng-repeat="group in ::vm.component.questions track by $index"><h4 class="h6 p-b-3 introducing col-11" ng-bind="::group.category"></h4><div class="w-12" ng-repeat="item in ::group.questions_and_answers"><div class="m-t-1 m-b-2 fs-5 flex" ng-attr-id="q-{{::$parent.$index}}-{{::$index}}"><div class="inline-block fw-bold" ng-bind-html="::item.question"></div></div><div class="p-t-1 p-l-1 m-b-2 p2 lh-2 flex" ng-class="{\'m-b-8 m-b-4-s\' : $last}"><div class="inline-block" ng-bind-html="::item.answer"></div></div></div></div></div>'),
    e.put("/views/content/components/hero-image.html", '<div class="ng-hide carousel carousel-hero-image" ng-show="vm.ready" ng-swipe-right="vm.prev()" ng-swipe-left="vm.next()" ng-class="::{\'is-single\': !vm.manySteps, \'is-fade\': vm.fade}"><div class="carousel__outer"><div class="carousel__prev" ng-click="vm.prev()" ng-if="::vm.manySteps"></div><div class="carousel__inner" ng-class="::vm.component.fade ? \'ratio-\' + vm.component.ratio + \' ratio-\' + vm.component.ratio_mobile + \'-s\' : \'\'" ng-style="vm.innerStyle"><div class="pos-relative carousel__frame" ng-repeat="frame in vm.framesList" ng-class="[{\'is-current\': $index == vm.currentShift}, !vm.component.fade ? \'ratio-\' + vm.component.ratio + \' ratio-\' + vm.component.ratio_mobile + \'-s\' : \'\']" ng-style="vm.frameStyle"><img class="fill" ng-if="frame.initiated || ($index == vm.currentShift)" ng-init="frame.initiated=1" tco-image="($root.isS || $root.isM) && frame.image_mobile ? frame.image_mobile : frame.image"><div class="fill z-2"><div class="vc-outer"><div ng-class="$root.isS || $root.isM ? \'vc-inner-bottom\' : \'vc-inner-\' + frame.vertical_align"><div class="wrap" ng-class="::frame.horizontal_align"><div class="w-7-x p-a p-t-6-s p-b-8-m p-b-6-s"><heading class="block m-b-2 introducing" ng-class="::\'col-\' + frame.introducing_color" size="::frame.introducing_size || \'h4\'" ng-if="::frame.introducing"><span ng-bind="::frame.introducing"></span></heading><heading class="w-12 h1" size="::line.size || \'h3\'" ng-repeat="line in ::frame.text_lines track by $index"><span class="col-w" ng-class="::\'col-\' + line.color" ng-bind="::line.text"></span></heading><div class="m-t-2 m-t-3-s" ng-if="::frame.cta_text"><span class="underline arrow fs-6" opt-href="{{::frame.cta_link}}" ng-class="::frame.cta_style" ng-bind="::frame.cta_text"></span></div></div></div></div></div></div></div></div><div class="carousel__next" ng-click="vm.next()" ng-if="::vm.manySteps"></div></div></div>'),
    e.put("/views/content/components/hotspots.html", '<div class="pos-relative" ng-class="::\'ratio-\' + vm.custom.component.ratio"><img class="fill" tco-image="::vm.custom.component.image" fit-in="{{::vm.custom.component.image_fit_in || 0}}"><div class="pos-absolute z-9" ng-style="::{top: spot.posy + \'%\', left:spot.posx + \'%\'}" ng-repeat="spot in ::vm.custom.component.hot_spots"><p class="bg-col-w p-a-1 b-rad-50"><i class="icon-plus"></i></p><product-preview-button product-id="::spot.product_id" class="bg-col-transparent fill flex flex-justify-center flex-middle"></product-preview-button></div></div>'),
    e.put("/views/content/components/image-block.html", "<div opt-href=\"{{::vm.component.link}}\"><div ng-class=\"::vm.component.ratio == 'default' ? 'w-12' : 'ratio-' + vm.component.ratio\"><img ng-class=\"::vm.component.ratio == 'default' ? 'w-12' : 'fill'\" tco-image=\"::vm.component.image\" tco-height=\"0\" fit-in=\"{{::vm.component.fit_in || 0}}\"></div></div>"),
    e.put("/views/content/components/instagram-feed.html", '<div class="w-12 center m-t-8"><p class="fw-bold ls-2 fs-3 ls-6 col-11 m-b-2" ng-bind="::vm.component.instagram_title | uppercase"></p><h3 class="h3 m-b" ng-bind="::vm.component.instagram_text"></h3></div><div class="flex flex-middle" size-class="S:wrap flex-column"><div class="w-12 p-t p-b m-b-6"><div class="w-3 w-6-s" ng-repeat="insta in vm.posts | limitTo: $root.isS ? 2 : 4 track by insta.id"><div class="ratio-1-1 m-a-1"><a class="fill block" ng-href="{{::insta.link}}" target="_blank"><img tco-image="::insta.image" class="fill"></a></div></div></div></div>'),
    e.put("/views/content/components/instagram.html", '<div class="p-t-6 p-b-8 center"><div class="w-8 w-9-l w-10-m w-12-s"><heading class="block m-b-2 introducing" ng-class="::\'col-\' + vm.component.introducing_color" size="::vm.component.introducing_size || \'h4\'" ng-if="::vm.component.introducing"><span ng-bind="::vm.component.introducing"></span></heading><heading class="w-12 h3" ng-class="::\'col-\' + line.color" size="::line.size || \'h3\'" ng-repeat="line in ::vm.component.text_lines track by $index"><span ng-bind="::line.text"></span></heading><div class="m-t-6 ng-hide carousel carousel-instagram p-l-2-s p-r-2-s" ng-show="vm.ready" ng-swipe-right="vm.prev()" ng-swipe-left="vm.next()" ng-class="::{\'is-single\': !vm.manySteps}"><div class="carousel__outer"><div class="carousel__inner" ng-style="vm.innerStyle"><div class="p-r-1 p-l-1 carousel__frame" ng-repeat="frame in vm.framesList" ng-class="{\'is-current\': $index == vm.currentShift}" ng-style="vm.frameStyle"><div class="ratio-1-1"><img class="fill" tco-image="::frame.image"></div></div></div></div></div></div></div>'),
    e.put("/views/content/components/mosaic-homepage.html", '<div class="p-t-10 p-b-10 p-b-0-s center"><div class="w-10 w-11-l w-12-m w-12-s p-l-2-s p-r-2-s"><heading class="block m-b introducing" ng-class="::\'col-\' + vm.component.introducing_color" size="::vm.component.introducing_size || \'h4\'" ng-if="::vm.component.introducing"><span ng-bind="::vm.component.introducing"></span></heading><heading class="w-12 h2" ng-class="::\'col-\' + line.color" size="::line.size || \'h3\'" ng-repeat="line in ::vm.component.text_lines track by $index"><span ng-bind="::line.text"></span></heading><div class="m-t m-b-8-s"><div class="w-9 w-12-s p1 lh-4" ng-bind-html="vm.component.text"></div></div><div class="flex flex-wrap"><div class="c-6-set c-12-set-s m-b-10-x m-b-10-l m-b-8-m m-b-4-s p-t-10 p-t-4-m p-t-0-s" ng-class="$even ? \'p-r-8 p-r-4-m p-r-0-s\' : \'p-l-8 p-l-4-m p-l-0-s\'" ng-repeat="item in ::vm.component.items | hideOnSize:\'hide_on\' track by $index" ng-switch="::item.acf_fc_layout"><div class="flex-column flex-grow flex-justify-between" ng-switch-when="image"><div ng-class="::\'ratio-\' + item.ratio + \' ratio-\' + item.ratio_mobile + \'-s\'"><img class="fill" tco-image="$root.isS && item.image_mobile ? item.image_mobile : item.image"></div><div class="flex-column flex-grow p-t-10 p-t-7-s p-b p-b-6-s left center-s" ng-if="::item.additional_text"><heading class="h4" size="::item.title_size || \'h4\'" ng-if="::item.title"><span ng-bind="::item.title"></span></heading><div class="w-8 w-9-l w-9-m w-12-s m-t p1" ng-bind-html="::item.text"></div><div class="m-t" ng-if="::item.cta_text"><span class="underline arrow fs-6" opt-href="{{::item.cta_link}}" ng-class="::item.cta_style" ng-bind="::item.cta_text"></span></div></div></div><div class="flex-column flex-grow pos-relative" ng-switch-when="text"><img class="fill z-1" tco-image="$root.isS && item.image_mobile ? item.image_mobile : item.image" fit-in="1"><div class="fill-x fill-l fill-m flex-column flex-justify-center pos-relative-s z-2"><div class="m-l-8 m-l-0-s p-t-7-s p-b-6-s p-l-8 p-l-0-s left center-s"><heading class="h4" size="::item.title_size || \'h4\'" ng-if="::item.title"><span ng-bind="::item.title"></span></heading><div class="w-10 w-9-m w-12-s m-t p1" ng-bind-html="::item.text"></div><div class="m-t" ng-if="::item.cta_text"><span class="underline arrow fs-6" opt-href="{{::item.cta_link}}" ng-class="::item.cta_style" ng-bind="::item.cta_text"></span></div></div></div></div></div></div></div></div>'),
    e.put("/views/content/components/mosaic.html", '<div ng-switch="::vm.component.layout"><mosaic-homepage ng-switch-when="mosaic-homepage" component="::vm.component"></mosaic-homepage></div>'),
    e.put("/views/content/components/our-stores.html", '<div class="wrap p-t p-b"><div class="center"><div class="w-12 fw-thin"><h1 class="center h2 m-b-2 font-2">Stores</h1><div class="w-12 m-t m-b"><div class="ratio-3-1 ratio-1-1-s"><google-map class="fill" options="::vm.map" markers="::vm.markers"></google-map></div></div><div class="w-12 left p-b p-t" ng-repeat="store in ::vm.stores | orderBy:\'position\'"><div class="w-8 w-12-m w-12-s"><a class="fs-6 p-b font-2 fw-bold block" ng-bind="::store.name" ms-href="{{::store.url}}"></a><div class="w-6 w-12-m w-12-s lh-3"><address><p ng-bind-html="::store.address|nl2br"></p><p ng-if="::store.city" ng-bind="::store.city"></p><p ng-if="::store.region" ng-bind="::store.region"></p><p ng-if="::store.postcode" ng-bind="::store.postcode"></p></address><div><strong>T:</strong> <a class="col-11" ng-href="tel:{{::store.phone.replace(\' \',\'\')}}" ng-bind="::store.phone"></a></div><div ng-if="::store.email"><strong>Email:</strong> <a class="col-11" ng-href="mailto:{{::store.email}}" ng-bind="::store.email | lowercase"></a></div></div><div class="w-12 m-t m-b fs-6" if-size="MS"><p><a class="col-11" target="_blank" ng-href="https://www.google.com/maps/dir/Current+Location/{{::store.lat}},{{::store.lon}}">Directions</a></p></div><div class="w-6 w-12-s w-12-m"><div class="w-12 w-12-s lh-1 right-x right-l"><div ng-repeat="item in ::store.open | weekdaysOpen track by $index"><div class="c-6-set m-b-0" ng-if="::item.dow" ng-bind="::item.dow | daysOfWeek"></div><div class="m-b-0 center-l center-x right-s right-m" ng-class="::((!!item.dow) ? \'c-6-set\' : \'w-12\')"><p ng-bind="::(item.hours) ? item.hours : \'CLOSED\'"></p></div></div></div></div></div><div class="w-4" if-size="!SM"><div class="w-12 ratio-2-1"><img class="fill" tco-image="::store.image"> <a ms-href="{{::store.url}}" class="fill"></a></div></div></div></div></div></div>'),
    e.put("/views/content/components/page-content.html", '<div class="w-12 text" ng-bind-html="::(vm.component.custom && vm.page.body ? vm.page.body : vm.component.content)"></div>'),
    e.put("/views/content/components/page-navigation.html", '<nav class="text"><ul><li ng-repeat="cta in ::vm.component.links" class="left"><a ng-click="$root.scrollTo(\'#\' + cta.link,{offset : 250})" ng-bind="::cta.text"></a></li></ul></nav>'),
    e.put("/views/content/components/page-title.html", '<heading size="::vm.component.size || \'h4\'"><span class="w-12 m-b" ng-class="::vm.component.size || \'h4\'" ng-bind="::(vm.component.custom && vm.page.name ? vm.page.name : vm.component.title)"></span></heading>'),
    e.put("/views/content/components/posts-block-carousel.html", '<div class="ng-hide carousel carousel-posts" ng-show="vm.ready" ng-swipe-right="vm.prev()" ng-swipe-left="vm.next()" ng-class="::{\'is-single\': !vm.manySteps}"><div class="carousel__pager ratio-5-3" if-size="S"><div class="carousel__pager-inner"><span class="carousel__pager-item" ng-repeat="index in vm.steps track by $index" ng-if="vm.manySteps" ng-class="{\'is-active\': vm.activeStepIndex == index}" ng-click="vm.goToStep(index)"></span></div></div><div class="carousel__outer"><div class="carousel__inner" ng-style="vm.innerStyle"><div class="c-6-set c-12-s m-r-0-s carousel__frame" ng-class="$first ? \'p-r-8 p-r-0-l p-r-4-m p-r-0-s p-l-6-l\' : \'p-l-8 p-l-0-l p-l-4-m p-l-0-s p-r-6-l\'" ng-repeat="frame in ::vm.framesList track by $index"><post-list-item template="/views/content/components/posts-block-post.html" post-id="::frame"></post-list-item></div></div></div></div>'),
    e.put("/views/content/components/posts-block-post.html", '<div class="left center-s" opt-href="{{::post.url}}"><div class="ratio-5-3"><img class="fill" tco-image="::post.image"></div><h3 class="m-t m-t-6-s h4" ng-bind="::post.name"></h3><div class="m-t-2 p2"><span class="fs-4" ng-bind-html="::post.excerpt"></span> <a class="button-inline underline m-t-2-s" ms-href="{{::post.url}}" ng-bind="\'Read More...\' | ms"></a></div></div>'),
    e.put("/views/content/components/posts-block.html", '<div class="p-t-8 p-b-8 p-b-6-s center"><div class="w-11-x w-12"><heading class="block m-t-2 m-b introducing" ng-class="::\'col-\' + vm.component.introducing_color" size="::vm.component.introducing_size || \'h4\'" ng-if="::vm.component.introducing"><span ng-bind="::vm.component.introducing"></span></heading><heading class="w-12 h3" ng-class="::\'col-\' + line.color" size="::line.size || \'h3\'" ng-repeat="line in ::vm.component.text_lines track by $index"><span ng-bind="::line.text"></span></heading><div class="m-t"><bar class="col-11"></bar></div><div class="m-t center"><div class="w-1 w-2-l w-2-m w-4-s ratio-3-2 opacity-05"><img class="fill" tco-image="\'/front/bg-posts-block.png\'" fit-in="1" trim="1"></div></div><div class="m-t" ng-if="vm.ready"><posts-block-carousel frames="::vm.component.posts" frames-in-slide="$root.isS ? 1 : 2" frames-in-step="$root.isS ? 1 : 2" loop="true" pause-on-hover="true"></posts-block-carousel></div></div></div>'),
    e.put("/views/content/components/selected-products.html", '<div class="w-12 m-b m-t center"><h4 ng-bind="::vm.component.header" class="fs-4 m-b-2 introducing col-11"></h4><h3 ng-bind="::vm.component.title" ng-if="::vm.component.title" class="h3"></h3><div class="m-t-2"><bar class="col-11"></bar></div><div class="m-t center"><div class="w-1 w-2-l w-2-m w-4-s ratio-3-2 opacity-05"><img class="fill" tco-image="\'/front/bg-posts-block.png\'" fit-in="1" trim="1"></div></div><div class="m-t p-t p-l-2 p-r-2 c-3-set c-6-set-m" ng-repeat="product in ::vm.allProducts" if-size="!S"><div opt-href="{{::product.url}}" class="pos-relative p-t p-b"><div class="ratio-1-1"><img class="fill" tco-image="::product.image" fit-in="1"></div></div><a ms-href="{{::product.url}}" class="block left fs-7 fs-4-s lh-1 m-b-1" ng-bind="::product.name"></a><div class="left font-2"><span class="fs-4 fs-3-s m-r-1 lh-3" ng-if="::product.is_from_price">from</span> <span class="m-r-1 inline-block line-through-2 col-13 price price--products-list fs-3" price="::product.org_price" ng-if="::product.org_price"></span> <span class="inline-block fs-4 fs-3-s lh-3 price price--products-list" ng-class="::{\'col-19\' : product.org_price}" price="::product.price | customerDiscount:product.org_price"></span></div></div><product-carousel class="w-12" if-size="S" frames="::vm.allProducts"></product-carousel></div>'),
    e.put("/views/content/components/seo-content.html", '<div class="p-t-8 p-b-8" ng-class="::!vm.component.image ? \'p-r p-l box-shadow--top center\' : \'w-12\'" size-class="S:flex-column flex-direction-column-reverse"><div class="c-6-set c-12-set-s right" ng-if="::vm.component.image"><div class="w-11 w-12-s ratio-4-3"><img class="fill" tco-image="::vm.custom.component.image"></div></div><div ng-class="::vm.component.image ? \'c-6-set c-12-set-s\' : \'center\'"><h1 class="h1" ng-if="::vm.component.title"><span ng-bind="::vm.component.title"></span></h1><div class="col-silver-chalice w-11-l w-12-m w-12-s p1" ng-class="::[ {\'m-t-3\': vm.component.title}, vm.component.image ? \'w-11\' : \'w-8\' ]" ng-bind-html="::vm.component.text" ng-if="::vm.component.text"></div></div></div>'),
    e.put("/views/content/components/text-block.html", '<div opt-href="{{::vm.component.link}}"><h3 ng-if="::vm.component.title" class="m-t-8 m-b m-b-8-m h3 center"><span class="line" ng-bind="::vm.component.title"></span></h3><div class="left m-t m-b text text-heading" ng-if="::vm.component.text" ng-bind-html="::vm.component.text | trustedHtml"></div></div>'),
    e.put("/views/content/components/text-media.html", '<div class="pos-relative p-t-8 p-b line-vertical-bottom-12"><div class="w-10 w-11-l w-12-m w-12-s pos-center m-t-2 m-b-8 flex flex-column-s flex-middle"><div class="c-6-set c-12-set-s m-r-0-s m-b-0-s" ng-repeat="column in ::vm.component.columns track by $index"><div ng-repeat="component in ::column.components track by $index" ng-switch="::component.acf_fc_layout"><div class="p-b-4-s center-s p-r p-r-0-s" ng-switch-when="text"><heading class="block m-b introducing" ng-class="::\'col-\' + component.introducing_color" size="::component.introducing_size || \'h4\'" ng-if="::component.introducing"><span ng-bind="::component.introducing"></span></heading><heading class="w-12 h3" size="::line.size || \'h3\'" ng-repeat="line in ::component.text_lines track by $index"><span ng-class="::\'col-\' + line.color" ng-bind="::line.text"></span></heading><div class="m-t-1" ng-class="::\'ratio-\' + component.ratio_mobile + \'-s\'" if-size="S"><img class="fill" opt-href="{{::component.cta_link}}" tco-image="::component.image_mobile"></div><div class="m-t text" ng-bind-html="::component.text" ng-if="::component.text"></div><div class="m-t" ng-if="::component.cta_text"><span class="underline arrow fs-6" opt-href="{{::component.cta_link}}" ng-class="::component.cta_style" ng-bind="::component.cta_text"></span></div></div><div ng-switch-when="image"><div ng-class="::\'ratio-\' + component.ratio" if-size="!S"><img class="fill" opt-href="{{::component.cta_link}}" tco-image="::component.image"></div></div></div></div></div></div>'),
    e.put("/views/content/components/text.html", '<div opt-href="{{::vm.custom.component.link}}"><h2 class="h2" ng-if="::vm.custom.component.title" ng-bind="::vm.custom.component.title"></h2><div class="m-t text" ng-if="::vm.custom.component.text" ng-bind-html="::vm.custom.component.text"></div></div>'),
    e.put("/views/content/components/trade-store-catalogue.html", '<div class="trade-catalogue p-b-8"><div class="center"><div if-size="SM" class="p-b-6"><p class="fw-thin fs-6 font-1">This is only available to view on desktop.</p></div><div class="p-t-8 p-b-8" if-size="XL"><div if-trade-store><heading class="block m-b introducing" ng-class="::\'col-\' + vm.component.introducing_color" size="::vm.component.introducing_size || \'h4\'" ng-if="::vm.component.introducing"><span ng-bind="::vm.component.introducing"></span></heading><heading class="w-12 h2" ng-class="::\'col-\' + line.color" size="::line.size || \'h3\'" ng-repeat="line in ::vm.component.text_lines track by $index"><span ng-bind="::line.text"></span></heading><div id="offset-trade-catalogue-sticky"></div><div class="m-t p-b p-b-8-s"><div class="w-9 w-12-s p1 lh-4" ng-bind-html="vm.component.text"></div></div><a class="button-inline underline arrow" ms-href="{{::vm.component.cta_link | pathToMedia}}" target="_blank" ng-bind="::vm.component.cta_text" ng-if="::vm.component.cta_link"></a></div><div if-not-trade-store><p class="fw-thin fs-6 font-1 m-b-6">Trade product catalogue is only available in trade store.</p><span class="p-b-2 uppercase fs-3 fw-thin link" ng-click="vm.switchToTradeStore()">Switch to Trade Store</span></div></div></div><div if-size="LX"><div class="wrap p-b" if-trade-store><div ng-if="!vm.allProducts.length" class="center fw-thin fs-6 font-1 p-t-6"><p ng-if="vm.loadingProductStatus.busy">Loading...</p><p ng-if="vm.loadingProductStatus.result" ng-bind="vm.loadingProductStatus.result"></p></div><div ng-if="vm.allProducts.length || vm.filter"><sticky offset-section-id="offset-trade-catalogue-sticky" bottom-section-id="bottom-trade-catalogue-sticky" top="97" class="bg-col-w z-5"><div class="p-t p-b flex b-b sticky-container"><div class="w-6 flex flex-middle"><div class="w-6 font-1 fs-6 pos-relative"><input class="p-t-2 p-r-2 p-b-1 p-l-8 bg-col-15 b-b b-col-13 placeholder" type="text" ng-model="vm.filter" placeholder="Search by SKU or Product Name" ng-change="vm.searchProducts()"> <span class="icon-search pos-absolute top-2 left-2"></span></div><div class="w-6 flex flex-middle p-l"><p class="w-6 italic">Showing&nbsp; <span ng-bind="vm.allProducts.length"></span>&nbsp;Results</p></div></div><div class="pos-relative w-6 p-t p-b b-l"><div class="flex flex-middle flex-justify-end"><div class="w-2 fs-8"><span class="fs-3">Qty:</span>&nbsp; <span ng-bind="vm.selectedQty || 0"></span></div><div class="w-4 p-r pos-relative fs-8" ng-class="{\'busy\': vm.probeActionStatus.busy}"><div><span class="fs-3" ng-bind="\'Total:\'"></span>&nbsp; <span price="vm.currentPrice || 0" price-precission="2"></span></div><result class="w-12 pos-absolute left-0" code="vm.probeActionStatus.result" success="false"></result><span class="c-busy flex-middle flex-justify-center"><span class="bounce1"></span> <span class="bounce2"></span></span></div><div class="w-3 flex flex-wrap flex-justify-center"><action class="w-12 p-r-0 p-l-0" is-disabled="!vm.selectedQty || vm.errors" busy="vm.buyActionStatus.busy" ng-click="vm.addToBasket()" code="vm.buyActionStatus.result"><span ng-bind="\'Add to bag\'" ng-attr-data-text="Add to bag"></span></action></div></div><result class="pos-absolute bottom-0 right-0 w-12 m-t-0 right" code="vm.buyActionStatus.result" success="false"></result></div></div><div class="left fs-3 fw-bold font-2 bg-col-20"><span class="w-2 p-b p-t p-l uppercase">SKU</span><span class="w-4 p-b p-t uppercase">Product Name</span><span class="w-6"><span class="w-3 pos-relative p-b p-t uppercase">RRP</span><span class="w-3 pos-relative p-b p-t uppercase">Trade Price <span class="pos-absolute bottom-1 left-0 fs-2 fw-regular uppercase">(Exl. VAT)</span></span><span class="w-3 center p-b p-t uppercase">Qty</span><span class="w-3 right pos-relative p-b p-t p-r uppercase">Total <span class="pos-absolute bottom-1 right-4 fs-2 fw-regular uppercase">(Exl. VAT)</span></span></span></div></sticky><div infinite-scroll="vm.updateList()" infinite-scroll-distance="1"><div ng-repeat="product in vm.allProductsArray | limitTo: vm.limit track by product.parent.id" ng-if="!vm.filter"><div class="b-b b-col-7 p-t p-b flex flex-middle"><div class="w-2 p-l fs-4" ng-switch="!!product.children.length"><span class="cursor-pointer" ng-click="vm.open(product.parent.id)" ng-switch-when="true"><span ng-if="!vm.ifOpen(product.parent.id)" class="italic link">View</span> <span ng-if="vm.ifOpen(product.parent.id)" class="italic link">Hide</span></span> <a ms-href="{{::product.parent.url}}" ng-bind="product.parent.sku" ng-switch-when="false"></a></div><div class="w-4"><a ng-bind="::product.parent.name" ms-href="{{::product.parent.url}}"></a></div><div class="w-6 flex flex-middle"><div class="w-3"><span ng-if="::product.parent.is_from_price && vm.isConfigurable(product.parent)" class="fs-3">from&nbsp;</span> <span price="::product.parent.rrp_price || product.rrp_price" price-precission="2"></span></div><div class="w-3"><span ng-if="::product.parent.is_from_price && vm.isConfigurable(product.parent)" class="fs-3">from&nbsp;</span><product-price product="::product.parent" precission="2"></product-price></div><div class="w-3" ng-switch="!!product.children"><div class="center form-small" ng-switch-when="false"><div class="flex flex-middle flex-justify-center" ng-class="{\'is-invalid\': vm.isInvalid(product.parent)}"><span class="w-2"><span class="cursor-pointer font-2" ng-click="vm.remove(product.parent)">-</span></span><input class="w-2 p-l-0 center input no-spinner" type="number" ng-attr-min="{{::product.parent.min_trade_qty || 0}}" placeholder="0" ng-model="vm.tradeOrderModel[product.parent.id].qty" ng-change="vm.updateTotal(product.parent)"><span class="w-2 cursor-pointer font-2" ng-click="vm.add(product.parent)">+</span></div><div class="m-t-1 fs-1 font-2 center" ng-class="{\'col-19\': vm.isInvalid(product.parent)}" ng-if="::product.parent.min_trade_qty">(Min. <span ng-bind="::product.parent.min_trade_qty"></span> order quantity)</div></div><div ng-switch-when="true" class="center"><span ng-bind="vm.allProductsGrouped[product.parent.id].childrenQty || \'0\'"></span></div></div><div class="w-3 p-r right"><span ng-if="vm.tradeOrderModel[product.parent.id] && !product.children.length"><span price="vm.tradeOrderModel[product.parent.id].total" price-precission="2"></span></span> <span ng-if="product.children.length"><span price="vm.allProductsGrouped[product.parent.id].childrenTotal" price-precission="2"></span></span></div></div></div><div ng-if="vm.ifOpen(product.parent.id)"><div ng-repeat="simple in ::product.children track by simple.id" class="font-1 b-b p-t p-b flex flex-middle" ng-class="$last ? \'b-col-2\': \'b-col-7\'"><div class="w-2 uppercase font-default fs-4"><span ng-bind="::simple.sku"></span></div><div class="w-4"></div><div class="w-6 flex flex-middle"><div class="w-3"><span price="::simple.rrp_price" price-precission="2"></span></div><div class="w-3"><product-price product="::simple" precission="2"></product-price></div><div class="w-3"><div class="flex flex-middle flex-justify-center center form-small"><span class="w-2"><span class="cursor-pointer font-2" ng-click="vm.remove(simple)">-</span></span><input class="w-2 p-l-0 center input no-spinner" type="number" ng-attr-min="{{::simple.min_trade_qty || 0}}" placeholder="0" ng-model="vm.tradeOrderModel[simple.id].qty" ng-change="vm.updateTotal(simple)"><span class="w-2 cursor-pointer font-2" ng-click="vm.add(simple)">+</span></div></div><div class="w-3 right"><span ng-if="vm.tradeOrderModel[simple.id]"><span price="vm.tradeOrderModel[simple.id].total" price-precission="2"></span></span></div></div></div></div></div><div ng-repeat="product in vm.allProducts | limitTo: vm.limit track by product.id" ng-if="vm.filter"><div class="b-b b-col-7 p-t p-b flex flex-middle font-1"><div class="w-2 uppercase font-default fs-4"><a ms-href="{{::product.url}}" ng-bind="product.sku"></a></div><div class="w-4"><a ng-bind="::product.name" ms-href="{{::product.url}}"></a></div><div class="w-6 flex flex-middle"><div class="w-3"><span ng-if="::product.is_from_price && vm.isConfigurable(product)" class="fs-3">from&nbsp;</span> <span price="::product.rrp_price" price-precission="2"></span></div><div class="w-3"><span ng-if="::product.is_from_price && vm.isConfigurable(product)" class="fs-3">from&nbsp;</span><product-price product="::product" precission="2"></product-price></div><div class="w-3" ng-switch="!!(vm.isConfigurable(product))"><div class="center" ng-switch-when="false"><div class="flex flex-middle flex-justify-center form-small" ng-class="{\'is-invalid\': vm.isInvalid(product)}"><span class="w-2"><span class="cursor-pointer" ng-click="vm.remove(product)">-</span></span><input class="w-2 p-l-0 center input no-spinner" type="number" ng-attr-min="{{::product.min_trade_qty || 0}}" placeholder="0" ng-model="vm.tradeOrderModel[product.id].qty" ng-change="vm.updateTotal(product)"><span class="w-2 cursor-pointer" ng-click="vm.add(product)">+</span></div><div class="m-t-1 fs-1 font-2 center" ng-class="{\'col-19\': vm.isInvalid(product)}" ng-if="::product.min_trade_qty">(Min. <span ng-bind="::product.min_trade_qty"></span> order quantity)</div></div><div ng-switch-when="true" class="center"><span ng-bind="vm.allProductsGrouped[product.id].childrenQty"></span></div></div><div class="w-3 right"><span ng-if="vm.tradeOrderModel[product.id] && !(vm.isConfigurable(product))"><span price="vm.tradeOrderModel[product.id].total" price-precission="2"></span></span> <span ng-if="vm.isConfigurable(product)"><span price="vm.allProductsGrouped[product.id].childrenTotal" price-precission="2"></span></span></div></div></div></div></div></div></div></div><div id="bottom-trade-catalogue-sticky"></div></div>'),
    e.put("/views/content/components/visit-stores.html", '<div class="p-t-8 p-b center"><heading class="block m-t-2 m-b introducing" ng-class="::\'col-\' + vm.component.introducing_color" size="::vm.component.introducing_size || \'h4\'" ng-if="::vm.component.introducing"><span ng-bind="::vm.component.introducing"></span></heading><heading class="w-12 h3" ng-class="::\'col-\' + line.color" size="::line.size || \'h3\'" ng-repeat="line in ::vm.component.text_lines track by $index"><span ng-bind="::line.text"></span></heading><div class="m-t-6 ng-hide carousel carousel-our-stores" ng-show="vm.ready" ng-swipe-right="vm.prev()" ng-swipe-left="vm.next()" ng-class="::{\'is-single\': !vm.manySteps, \'is-fade\': vm.fade}"><div class="carousel__outer"><div class="carousel__inner" ng-style="vm.innerStyle"><div class="carousel__frame" ng-repeat="frame in vm.framesList" ng-class="{\'is-current\': $index == vm.currentShift}" ng-style="vm.frameStyle"><div ng-class="::\'ratio-\' + vm.component.ratio_images"><img class="fill" ng-if="frame.initiated || ($index == vm.currentShift)" ng-init="frame.initiated=1" tco-image="::frame.image"><div class="carousel__pager"><span class="carousel__pager-item" ng-repeat="index in vm.steps track by $index" ng-if="vm.manySteps" ng-class="{\'is-active\': vm.activeStepIndex == index}" ng-click="vm.goToStep(index)"></span></div></div><ul class="w-12 flex flex-justify-center fs-6-x m-t-6" if-size="!SM"><li ng-repeat="index in vm.steps track by $index" ng-bind="::vm.component.stores[$index].name" class="m-l-3 m-r-3 cursor-pointer" ng-class="{\'is-current-store\': vm.activeStepIndex == index}" ng-click="vm.goToStep(index)" ng-if="vm.manySteps"></li></ul><div class="p-a center"><h5 class="h4" if-size="SM" ng-bind="::frame.name"></h5><div class="m-t-2 p2 w-8-x w-8-l" ng-bind-html="::frame.description"></div><div class="m-t" ng-if="::frame.cta_link"><span class="underline arrow fs-6 ng-binding button-inline" ng-class="::frame.cta_style" opt-href="{{::frame.cta_link}}" ng-bind="::frame.cta_text">Visit the Store</span></div></div></div></div></div></div></div>'),
    e.put("/views/checkout/status/delivery.html", '<h3 class="fs-9 p-t-2 p-b-2 b-b m-b">Delivery summary <span class="fs-1">(<span class="link" ng-click="vm.change()">change</span>)</span></h3><div class="w-12"><div class="c-6 c-12-s"><p class="fw-bold">Delivery address</p><p class="m-t-1 lh-2" tco-address address="vm.checkoutData.address.shipping | normalizeAddress"></p></div><div class="c-6-set c-12-s m-r-0"><p class="fw-bold">Delivery method</p><p class="m-t-1 lh-2">{{vm.shippingMethod.title}}&nbsp;<span class="fw-bold" price="vm.shippingMethod.price"></span></p></div></div>'),
    e.put("/views/checkout/status/login.html", '<p class="p-t-4 p-b-4 fs-4 lh-2-s">You\'re ordering as <span class="fw-bold" ng-bind="vm.getEmail()"></span> (<span class="link underline" ng-click="vm.change()">change</span>)</p>'),
    e.put("/views/blog/post/list/item.html", '<div class="w-12"><div class="flex flex-middle flex-column-s" ng-class=":: {\'flex-direction-row-reverse\': post.reverse && !$root.isS}"><div class="w-6 w-12-s p-a p-l-0-s p-r-0-s" ng-class="::post.reverse ? \'p-r-0\' : \'p-l-0\'"><a ms-href="{{::post.url}}"><div class="ratio-3-2"><img class="fill" tco-image="::post.image" sharpen="false"></div></a></div><div class="w-6 w-12-s p-a p-l-0-s p-r-0-s center-s" ng-class="::post.reverse ? \'p-l-0\' : \'p-r-0\'"><a ms-href="{{::post.url}}"><h3 class="h3"><small class="block fs-2" ng-bind="::post.date | formatdate"></small> <span class="fs-4-m" ng-bind="::post.name"></span></h3></a><p class="m-t lh-3 fs-4-m" ng-if="::post.teaser" ng-bind="::post.teaser"></p><div class="m-t-8 m-t-4-s" ng-if="::post.url"><a ms-href="{{::post.url}}"><span class="fs-6 fs-5-m link-underline inline-block lh-1">Read more</span></a></div></div></div></div>'),
    e.put("/views/catalog/product/list/filters-off-canvas.html", '<div class="p-a"><p class="p-b ls-3 font-2 fs-3 fw-bold col-16 uppercase">Refine by:</p><div ng-repeat="item in items track by item.source"><filter-dropdown ng-if="::!item.range && item.type == \'attribute\'" filter-data="item"></filter-dropdown><filter-price filter-data="item" ng-if="::item.range && item.type == \'attribute\'"></filter-price><filter-category filter-data="item" category-id="categoryFilter" ng-if="::categoryFilter && item.type == \'category\'"></filter-category></div><action class="w-12 m-t button-1" ng-click="clearAllFilters()" ng-touch="clearAllFilters()" ng-if="items.length">Clear All Filters</action></div>'),
    e.put("/views/catalog/product/list/filters.html", '<div class="p-b"><p class="p-b ls-3 font-2 fs-3 fw-bold col-16 uppercase">Refine by:</p><div ng-repeat="item in items track by item.source"><filter-dropdown ng-if="::!item.range && item.type == \'attribute\'" filter-data="item"></filter-dropdown><filter-price filter-data="item" ng-if="::item.range && item.type == \'attribute\'"></filter-price><filter-category filter-data="item" category-id="categoryFilter" ng-if="::categoryFilter && item.type == \'category\'"></filter-category></div><action class="w-12 m-t button-1" ng-click="clearAllFilters()" ng-touch="clearAllFilters()" ng-if="items.length">Clear All Filters</action></div>'),
    e.put("/views/catalog/product/list/item-basket.html", '<div class="w-12 flex b-b" ng-class="{\'b-t-s\': custom.first}"><div class="w-1 w-4-s b-l"><a ms-href="{{editUrl}}"><div class="ratio-1-1 p-a-3"><img class="fill" tco-image="product.image" crop="1"></div></a></div><div class="w-5 w-8-s p-a-3 b-r" size-class="!S: flex flex-middle"><div><a ms-href="{{editUrl}}" class="block link" ng-class="{\'m-b-3 m-b-1-s\': configurableAttributes.length > 0}" ng-bind-html="productModel.data.name | uppercase"></a><div class="fs-3" ng-include="\'/views/catalog/product/list/item-basket/options.html\'"></div></div><div if-size="S"><div class="w-6"><action-singleton action="remove()" action-class="button-inline" success=""><span class="fs-3">Remove</span></action-singleton><div class="m-t-2"><p class="price inline-block col-13 line-through-2 m-b-1" ng-if="hasDiscount" price="orgPrice"></p><p class="block price" price="price"></p></div></div><div class="w-6"><div class="flex flex-middle flex-justify-center" ng-class="{\'is-invalid\': !(productModel.data | isValidTradeStoreProduct:data.qty:isOutOfStock)}"><i ng-click="oneLess()" class="cursor-pointer icon-minus m-r-1"></i><input class="input-small center p-l-0-s w-4 no-spinner" type="number" ng-model="data.qty" ng-pattern="/^[0-9]{1,7}$/"> <i ng-click="oneMore()" class="cursor-pointer icon-plus m-l-1"></i></div><div class="input-validation-msg" ng-if="isOutOfStock"><span ng-if="!stockModel.data.isOut && (maxQty > 0)">Only {{maxQty}} available</span> <span ng-if="stockModel.data.isOut">Out of stock</span></div></div><if-trade-store><div class="input-validation-msg right" ng-class="{\'col-13\': (productModel.data | isValidTradeStoreProduct:data.qty:isOutOfStock)}" ng-if="::productModel.data.min_trade_qty">(Min. <span ng-bind="::productModel.data.min_trade_qty"></span> order quantity)</div></if-trade-store></div></div><div class="w-2 b-r p-a-3 center" if-size="!S" size-class="!S: flex flex-middle flex-justify-center"><div><p class="price inline-block col-13 line-through-2 m-b-1" ng-if="hasDiscount" price="orgPrice"></p><p class="block price" price="price"></p></div></div><div class="w-2 pos-relative b-r center flex flex-middle" if-size="!S"><div><p class="pos-absolute top-0 right-0 left-0 center input-validation-msg" ng-show="action.busy"><span class="fs-2 col-13">please wait ...</span></p><div class="flex flex-middle flex-justify-center" ng-class="{\'is-invalid\': !(productModel.data | isValidTradeStoreProduct:data.qty:isOutOfStock)}"><i ng-click="oneLess()" class="cursor-pointer icon-minus m-r-1"></i><input class="input-small center w-3 p-l-0 no-spinner" ng-disabled="action.busy" type="number" ng-model="data.qty" ng-pattern="/^[0-9]{1,7}$/"> <i ng-click="oneMore()" class="cursor-pointer icon-plus m-l-1"></i></div><if-trade-store><div class="input-validation-msg center" ng-class="{\'col-13\': (productModel.data | isValidTradeStoreProduct:data.qty:isOutOfStock)}" ng-if="::productModel.data.min_trade_qty">(Min. <span ng-bind="::productModel.data.min_trade_qty"></span> order quantity)</div></if-trade-store></div><div class="pos-absolute bottom-1 w-12"><p class="input-validation-msg" ng-show="!data.qty">Invalid qty</p><div class="input-validation-msg" ng-if="isOutOfStock"><span ng-if="!stockModel.data.isOut && (maxQty > 0)">Only {{maxQty}} available</span> <span ng-if="stockModel.data.isOut">Out of stock</span></div></div></div><div class="w-2 pos-relative b-r p-a-3 right flex flex-middle flex-justify-end" if-size="!S"><div><p class="price inline-block col-13 line-through-2 m-b-1" ng-if="hasDiscount" price="rowOrgPrice"></p><p class="block price" price="rowPrice"></p></div><div class="pos-absolute bottom-2 right-2"><action-singleton action="remove()" action-class="button-inline" success=""><span class="fs-3">Remove</span></action-singleton></div></div></div>'),
    e.put("/views/catalog/product/list/item-checkout.html", '<div class="w-12 flex flex-top p-t"><div class="c-5 ratio-1-1"><img class="fill" tco-image="productModel.data.image" tco-height="auto"></div><div class="c-7-set c-12-set-s m-r-0"><h2 ng-bind-html="productModel.data.brand | optionLabel:\'brand\'"></h2><p class="m-t-1" ng-bind="productModel.data.name"></p><p class="m-t-2 fs-3">Qty: <span ng-bind="data.qty"></span></p><if-trade-store><div class="p-t-1 fs-3 font-1" ng-class="(productModel.data | isValidTradeStoreProduct:data.qty:false) ? \'col-13\' : \'col-2\'" ng-if="::productModel.data.min_trade_qty">(Min. <span ng-bind="::productModel.data.min_trade_qty"></span> order quantity)</div></if-trade-store><p class="m-t-1 fs-3">item total: <span class="line-through fs-4 price" price="(data.qty || orgQty) * productPrice" ng-if="productPrice > (item.price - (item.coupon_discount||0)/item.request.qty + 0.01)"></span><span class="m-l-1 price" ng-class="{\'col-orange\': productPrice > (item.price - (item.coupon_discount||0)/item.request.qty + 0.01)}" price="rowPrice-(item.coupon_discount||0)"></span></p></div></div>'),
    e.put("/views/catalog/product/list/item-minibasket.html", '<a ms-href="{{::productModel.data.url}}" class="c-4 minibasket__thumbnail"><div class="ratio-1-1 b-a"><img class="fill" tco-image="::productModel.data.image" fit-in="1" trim="1"></div></a><div class="c-8 m-r-0" ng-if="::productModel.data.id"><a ms-href="{{::productModel.data.url}}" ng-bind="::productModel.data.name" class="w-9"></a><div class="w-3 right"><p class="inline-block col-13 line-through-2 price" price="::product.org_price" ng-if="::product.org_price"></p><p class="price" ng-class=":: {\'col-1\': product.org_price}" price="item.price"></p></div><div class="m-t-1 fs-3" ng-include="\'/views/catalog/product/list/item-basket/options.html\'"></div><div class="flex flex-middle flex-justify-between m-t-2"><p class="fs-3" ng-class="{\'col-2\': isOutOfStock}">Qty: <span ng-bind="qty"></span></p><action-singleton action="remove()" action-class="button-inline" success=""><span class="fs-3">Remove</span></action-singleton></div><div class="left fs-3 m-t-1 col-2" ng-if="isOutOfStock"><span ng-if="!stockModel.data.isOut && (maxQty > 0)">Only {{maxQty}} available</span> <span ng-if="stockModel.data.isOut">Out of stock</span></div><if-trade-store><div class="p-t-1 fs-3 font-1" ng-class="(product | isValidTradeStoreProduct:qty:isOutOfStock) ? \'col-13\' : \'col-2\'" ng-if="::product.min_trade_qty">(Min. <span ng-bind="::product.min_trade_qty"></span> order quantity)</div></if-trade-store></div>'),
    e.put("/views/catalog/product/list/item-upsell.html", '<h4 class="h4" ng-bind="::website.general.upsell_product_title"></h4><div class="w-12 m-t"><div class="w-3 ratio-1-1"><a ms-href="{{::product.url}}" class="fill"><img class="fill" tco-image="::product.image"></a></div><div class="left p-t-2 p-l-2 w-9"><a ms-href="{{::product.url}}"><p ng-bind="::product.name" class="fs-6"></p></a><div class="m-t-2 font-2 fs-5 p-r inline-block"><span ng-if="::product.is_from_price">from</span> <span class="m-r-1 inline-block col-13 fs-3 line-through-2 price" price="::product.org_price" ng-if="::product.org_price"></span> <span class="inline-block price" ng-class=":: {\'col-1\': product.org_price}" price="::product.price"></span></div><div class="col-11 font-2 fw-bold fs-3 inline-block"><if-stock-status test="isOut" product-id="::product.id"><span class="uppercase">Out of stock</span></if-stock-status><if-stock-status test="isIn" product-id="::product.id"><span class="uppercase">In stock</span></if-stock-status></div></div><buy-button custom="true" class="m-t-2 w-12 product__qty" global="0" product-id="::product.id"></buy-button></div>'),
    e.put("/views/catalog/product/list/item.html", '<div class="flex-grow pos-relative" style="height:100%;" ng-switch="::product.isBanner == 1"><div opt-href="{{::product.banner_link}}" class="ratio-product-banner" ng-switch-when="true"><img class="fill" tco-image="::product.image"><div class="pos-absolute bottom-0 left-0 m-l m-b"><p class="m-b introducing col-w" ng-bind="::product.banner_subtitle"></p><h3 class="h3 col-w" ng-bind="::product.name"></h3></div></div><div ng-switch-default ng-mouseenter="isHoverActive = true" ng-mouseleave="isHoverActive = false" class="flex flex-column" style="height:100%;"><div opt-href="{{::product.url}}" class="pos-relative p-t p-b" ng-class="::{\'p-l-2 p-r-2\': product.col_span == 2}"><div ng-class="::product.col_span == 2 ? \'ratio-2-1\' : \'ratio-1-1\'"><div class="pos-absolute left-0 top-0 z-1 m-l-2 col-11 fs-1 ls-6 font-2 fw-bold lh-1" style="transform: translateY(-100%)"><span class="m-r-2 uppercase" ng-if="::product.promotion_label" ng-bind="::product.promotion_label"></span> <span class="col-19 m-r-2 uppercase" ng-if="::product.org_price && !product.promotion_label">Sale</span> <span class="m-r-2 uppercase" ng-if="::(product | isNew) && !product.org_price && !product.promotion_label">New</span> <span class="m-r-2 uppercase" ng-if="::product.product_label && !(product | isNew) && !product.org_price && !product.promotion_label" ng-bind="::product.product_label"></span></div><img class="fill" tco-image="::product.image" fit-in="1" fill-color="transparent"><div class="fill ng-hide-animate ng-hide hide-fade hide-fade--absolute" ng-show="product.secondary_image && isHoverActive"><img class="fill" tco-image="::product.secondary_image" fit-in="1"></div></div><div class="pos-absolute bottom-1 left-0 right-0 center" ng-if="::product.color.length"><div class="inline-block m-r-1 m-l-1 color-icon-animate" ng-repeat="color in ::product.color" ng-bind-html="::color | toColorIcon"></div></div></div><div class="m-t-2 col-16 flex flex-column flex-grow"><h2><a ms-href="{{::product.url}}" class="block fs-6 fs-4-s lh-1 m-b-1" ng-class="::{\'min-h-3\': custom.isWishlist}" ng-bind="::product.name"></a></h2><div class="font-2 flex-x flex-l flex-m"><div class="w-12-s w-3"><span class="fs-4 fs-3-s m-r-1 lh-3" ng-if="::product.is_from_price">from</span> <span class="m-r-1 inline-block line-through-2 col-13 price price--products-list fs-3" price="::product.org_price" ng-if="::product.org_price"></span> <span class="inline-block fs-4 fs-3-s lh-3 price price--products-list" ng-class="::{\'col-19\' : product.org_price}" price="::product.price | customerDiscount:product.org_price"></span></div><div if-trade-store><span class="block fs-3 p-t-2" ng-if="::product.min_trade_qty && !custom.isWishlist">(Min. <span ng-bind="::product.min_trade_qty"></span> order quantity)</span></div><div ng-if=":: custom.isWishlist" class="right m-b-1 m-t-2-s col-11 fs-2 ls-6 font-1 fw-bold lh-1 w-9 w-12-s"><wishlist-button product-id="::product.id" added="Remove from Wishlist"></wishlist-button></div></div><div class="flex-grow flex-bottom flex" if-trade-store><span class="block fs-3 p-t-2" ng-if="::product.min_trade_qty && custom.isWishlist">(Min. <span ng-bind="::product.min_trade_qty"></span> order quantity)</span></div></div></div></div>'),
    e.put("/views/catalog/product/list/sort.html", '<div class="pos-relative listing-sort"><div class="p-t-2-x p-t-2-l p-b-2-x p-b-2-l right-x right-l listing-sort__label" ng-click="!vm.mobile && vm.toggle()" ng-touch="!vm.mobile && vm.toggle()" off-click="vm.close()" off-click-if="vm.isOpen" off-click-filter="\'.listing-sort__options\'"><div class="cursor-pointer link"><span class="p-r-1 uppercase font-2 fs-1 fs-2-m fs-2-s ls-2 ls-3-m ls-3-s fw-bold-m fw-bold-s normal-m normal-s">Sort&nbsp;by<span if-size="MS">:</span></span> <span class="fs-1 fs-2-m italic" ng-bind="vm.selectedItem.label" if-size="!S"></span> <i class="col-11 fs-1 transition float-right-m float-right-s icon-down-dir" ng-class="{\'rotate\': vm.isOpen}"></i></div></div><select class="listing-sort__select" ng-model="vm.selectedItem" ng-change="vm.update()" ng-options="option.label for option in vm.options" ng-if="vm.mobile"></select><div class="pos-absolute left-0 right-0 w-12 m-t-1-x m-t-1-l z-10" ng-if="!vm.mobile"><div class="hide-up-container"><div class="ng-hide-animate ng-hide hide-up listing-sort__options" ng-show="vm.isOpen"><ul class="pos-relative p-t-1 p-b-1 b-a b-col-17 bg-col-w col-b cursor-pointer"><li class="flex flex-middle listing-sort__item" ng-class="{\'is-active\': vm.selectedItem == option}" ng-repeat="option in vm.options"><span class="flex-grow inline-block p-t-1 p-b-1 p-l-5 lh-3 font-2 fs-4 listing-sort__item-option" ng-click="vm.selectItem(option)" ng-touch="vm.selectItem(option)" ng-bind="::option.label"></span> <i class="p-l p-r icon-cancel fs-2 cursor-pointer" ng-click="vm.reset()" ng-touch="vm.reset()" ng-if="vm.selectedItem == option"></i></li></ul></div></div></div></div>'),
    e.put("/views/catalog/product/view/buybutton.html", '<div class="flex"><div class="w-2 pos-relative" ng-mouseenter="showArrows = true" ng-mouseleave="showArrows = false"><input type="number" class="w-12 p-l-0 m-b-0 center input no-spinner" min="1" ng-model="data.qty"><span class="pos-absolute top-0 bottom-0 right-0 w-3 flex-column col-11 cursor-pointer" ng-if="showArrows"><span class="flex flex-grow flex-middle flex-justify-center" ng-click="oneMore()"><i class="icon-up-dir"></i></span> <span class="flex flex-grow flex-middle flex-justify-center" ng-click="oneLess()"><i class="icon-down-dir"></i></span></span></div><action class="p-l-8 p-r-8 fs-6 button w-10 b-l-0" busy="action.busy" ng-click="buy()" ng-touch="buy()" code="action.result" is-disabled="isOutOfStock"><span ng-bind="isOutOfStock ? (productModel.data.weight >= 50 ? \'Awaiting stock\' : \'Out of stock\') : \'Add to Basket\'"></span></action></div><if-trade-store><div class="p-t-2 fs-3" ng-if="productModel.data.min_trade_qty" ng-bind="\'(Min. \' + productModel.data.min_trade_qty + \' order quantity)\'"></div></if-trade-store><result class="block" success="false" code="action.result"></result>'),
    e.put("/views/catalog/product/view/carousel.html", '<div class="ng-hide carousel carousel--product" ng-show="vm.ready" ng-swipe-right="vm.prev()" ng-swipe-left="vm.next()" ng-class="{\'is-single\': !vm.manySteps}"><div class="carousel__outer"><div class="carousel__prev" ng-click="vm.prev()" ng-if="vm.manySteps"></div><div class="carousel__inner" ng-style="vm.innerStyle"><div class="carousel__frame" ng-repeat="frame in vm.framesList track by $index" ng-style="vm.frameStyle"><div ng-class="::vm.custom.landscape ? \'ratio-2-1 ratio-3-2-s\' : \'ratio-1-1\'"><img class="fill cursor-zoom" tco-image="frame.image" ng-attr-alt="{{frame.labels[0]}}" fit-in="1" model="frame" zoom="1.5" zoom-area="1" zoom-auto-height="1" zoom-enabled="true" zoom-trigger="click" zoom-fit-in="1" ng-dblclick="toggleMobileZoom()" double-tap="toggleMobileZoom()" ng-if="!vars.mobileZoomed"><div class="touch-zoomed-in-container" ng-if="vars.mobileZoomed" center-scroll ng-class="{\'touch\': $root.isTouchy}"><div class="touch-zoomed-in-inner"><img class="touch-zoomed-img" tco-image="::frame.image" ng-attr-alt="{{frame.labels[0]}}" double-tap="toggleMobileZoom(false)" zoom="2"></div></div></div></div></div><div class="carousel__next" ng-click="vm.next()" ng-if="vm.manySteps"></div></div><div class="m-t-2 grid-2"><div ng-class="vm.custom.landscape ? \'c-1-8-set c-2-8-set-s\' : \'c-2-set c-3-set-s\'" ng-repeat="frame in vm.framesList track by $index" ng-if="vm.manySteps"><div class="b-a cursor-pointer" ng-class="[{\'b-col-13\': vm.activeStepIndex == $index, \'b-col-w\': vm.activeStepIndex != $index}, vm.custom.landscape ? \'ratio-2-1\' : \'ratio-1-1\']" ng-click="vm.goToStep($index)"><img class="fill" tco-image="frame.image" ng-attr-alt="{{frame.labels[0]}}" fit-in="1"></div></div></div></div>'),
    e.put("/views/catalog/product/view/extended-buybutton.html", '<div ng-if="!vm.upsellId"><buy-button class="w-12" product-id="vm.productId"></buy-button></div><div ng-if="vm.upsellId"><buy-button class="w-12" product-id="[vm.productId,vm.upsellId]"></buy-button></div>'),
    e.put("/views/catalog/product/view/options-configurable.html", '<div ng-if="::attributes"><div class="m-b" ng-repeat="attribute in ::attributes track by attribute.code" ng-switch="::attribute.code"><div class="flex flex-middle p-t-2 p-r-2 p-b-1 p-l-2 b-b bg-col-14 cursor-pointer product-options" zippy-toggle="attribute.{{::attribute.code}}" zippy-class="is-active"><div class="flex-grow"><div class="fs-2 font-2 product-options-label" ng-bind="::attribute.code | attributeLabel"></div><div class="fw-bold font-2 fs-4 lh-1" ng-bind="data[attribute.code] | optionLabel:attribute.code"></div></div><i class="icon-down-dir product-options-icon"></i></div><div class="hide-up-container"><div class="ng-hide-animate ng-hide hide-up" zippy="attribute.{{::attribute.code}}"><div class="p-r-2 p-l-2 b-a"><h5 class="p-t p-b-3 font-2 fw-bold fs-2 ls-2 uppercase"><span class="uppercase col-11">Choose</span>&nbsp;<span class="uppercase col-11" ng-bind="::attribute.code | attributeLabel"></span></h5><label class="c-2-set m-b-2" ng-class="option.value == data[attribute.code] ? \'b-col-b\' : \'b-col-8\'" ng-repeat="option in ::attribute.options track by option.value" ng-if="::option.product" zippy-close="attribute.{{::attribute.code}}" ng-switch-when="color"><input type="radio" class="ng-hide" value="{{::option.value}}" ng-model="data[attribute.code]"> <span class="block b-a ratio-1-1 cursor-pointer" ng-class="option.value == data[attribute.code] ? \'b-col-b\' : \'b-col-17\'"><span ng-class="option.value == data[attribute.code] ? \'fill-1px\' : \'fill\'" ng-attr-title="{{::option.label}}" ng-style="::{\'background-color\': (option.value | optionLabel:attribute.code) || \'#FFFFFF\'}"></span></span></label> <label class="c-2-set m-b-2" ng-class="option.value == data[attribute.code] ? \'b-col-b\' : \'b-col-8\'" ng-repeat="option in ::attribute.options track by option.value" ng-if="::option.product" zippy-close="attribute.{{::attribute.code}}" ng-switch-when="size"><input type="radio" class="ng-hide" value="{{::option.value}}" ng-model="data[attribute.code]"> <span class="block ratio-1-1 b-a cursor-pointer" ng-class="option.value == data[attribute.code] ? \'b-col-b\' : \'b-col-17\'"><span class="flex flex-middle flex-justify-center font-2 fs-4 top-1px" ng-class="option.value == data[attribute.code] ? \'fill-1px\' : \'fill\'" ng-attr-title="{{::option.label}}" ng-bind="::option.label"></span></span></label><label class="w-12" ng-class="option.value == data[attribute.code] ? \'b-col-b\' : \'b-col-8\'" ng-repeat="option in ::attribute.options track by option.value" ng-if="::option.product" zippy-close="attribute.{{::attribute.code}}" ng-switch-default><input type="radio" class="ng-hide" value="{{::option.value}}" ng-model="data[attribute.code]"> <span class="cursor-pointer" ng-class="option.value == data[attribute.code] ? \'fw-bold\' : \'\'" ng-bind="::option.label"></span></label></div></div></div></div></div>'),
    e.put("/views/catalog/product/view/pay4later.html", '<div ng-if="vm.active"><span class="w-12 button fs-6 p-l-8 p-r-8 m-b-8" ng-click="vm.showDetails = !vm.showDetails" ng-if="!vm.checkoutMode"><span ng-if="vm.cheapestOption"><span class="fs-4" ng-bind="\'From\' | ms"></span>&nbsp; <span class="fs-4 price" price="::vm.cheapestOption | number : 2"></span> &nbsp;<span class="fs-4" ng-bind="\'per Month\' | ms"></span></span> <span ng-if="!vm.cheapestOption" class="fs-4" ng-bind="::\'Finance available, click to calculate\' | ms"></span></span><div ng-if="vm.showDetails || vm.checkoutMode"><input-wrap label="{{::\'Please choose your deposit percentage\' | ms}}:" required="true" name="deposit" form="form"><select class="select m-b" name="deposit" id="deposit" ng-model="vm.deposit" ng-options="t as t+\'%\' for t in ::vm.config.deposit.types" ng-change="vm.calculate()" required><option value ng-bind="::\'Select\' | ms"></option></select></input-wrap><input-wrap label="{{::\'Please choose your payment plan\' | ms}}:" required="true" name="package" form="form"><select class="select m-b" name="package" id="package" ng-model="vm.package" ng-options="p.value as p.label for p in ::vm.config.package.types" ng-change="vm.calculate()" required><option value ng-bind="::\'Select\' | ms"></option></select></input-wrap><span class="col-2 p-b-2" ng-if="vm.wrongAmount"><t ng-bind="::\'Credit amount\' | ms"></t><t ng-bind="\' \' + vm.data.l_amount + \' \'"></t><t ng-bind="::\'should be over\' | ms"></t><span price="::vm.config.financeAmount.minimum"></span><t ng-bind="::\' \' + (\'and below\' | ms)"></t><span price="::vm.config.financeAmount.maximum"></span>.</span><div class="lh-2 fs-4" ng-if="vm.data.p_name"><div class="w-6 m-t-2" ng-bind="::\'Product Name\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.p_name"></div><div class="w-6 m-t-2" ng-bind="::\'Value of Goods\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.goods_val"></div><div class="w-6 m-t-2" ng-bind="::\'Percentage of Deposit\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.d_pc"></div><div class="w-6 m-t-2" ng-bind="::\'Amount of Deposit\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.d_amount"></div><div class="w-6 m-t-2" ng-bind="::\'Amount of Loan\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.l_amount"></div><div class="w-6 m-t-2" ng-bind="::\'Term of Agreement\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.term"></div><div class="w-6 m-t-2" ng-bind="::\'APR\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.apr"></div><div class="w-6 m-t-2" ng-bind="::\'Monthly Instalment\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.m_inst"></div><div class="w-6 m-t-2" ng-bind="::\'Loan Repayment\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.l_repay"></div><div class="w-6 m-t-2" ng-bind="::\'Total Amount Payable\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.total"></div><div class="w-6 m-t-2" ng-bind="::\'Cost of Loan\' | ms"></div><div class="w-6 m-t-2" ng-bind="vm.data.l_cost"></div></div></div></div>'),
    e.put("/views/catalog/product/view/product-page-related.html", '<div off-click="vm.close()" off-click-if="vm.isOpen" class="pos-relative"><div class="w-12 bg-col-17 p-a-2 p-l cursor pointer pos-relative" ng-click="vm.toggle(!vm.isOpen, true)"><span class="fw-thin fs-3 font-2">Shade Options:</span> <span class="font-2 fs-3 fw-bold" ng-bind="vm.selectedItem.name ? vm.selectedItem.name : \'Please select\'"></span> <span class="pos-absolute top-0 right-3 bottom-0 flex flex-middle"><i class="fs-6 col-grey-light" ng-class="{\'icon-down-dir\' : !vm.isOpen, \'icon-up-dir\' : vm.isOpen}"></i></span></div><div class="pos-absolute z-5 left-0 right-0 top-100 upsell" style="overflow-x:hidden;" ng-class="{\'overflow-y-scroll\' : vm.products.length > 4, \'b-b b-w-2 b-col-11\' : vm.isOpen}"><div class="ng-hide hide-up-100 ng-hide-animate b-r b-l bg-col-w" style="overflow-x:hidden;" ng-show="vm.isOpen"><div class="upsell--item cursor-pointer" ng-repeat="item in vm.products"><div class="p-a-2 flex flex-middle w-12" ng-click="vm.selectItem(item)"><div class="w-2"><div class="ratio-1-1"><img class="fill" tco-image="::item.image" always="1"></div></div><div class="w-10 p-l-3"><div class="no-wrap" style="overflow-x:auto;overflow-y:hidden;"><span ng-bind="::item.name" class="block yes-wrap lh-2"></span></div><span ng-if="::item.org_price" price="::item.price" class="line-through fs-2 col-13 font-2"></span> <span price="::item.price" class="fs-3 font-2"></span></div></div></div></div></div></div>'),
    e.put("/views/catalog/product/view/related.html", '<div ng-if="loaded"><listing collection="products" models-name-prependix="product" template="{{::\'/views/catalog/product/list-\' + (custom.family || \'related\') + \'.html\'}}" total-limit="{{limit}}" custom="custom" enable-lazy-load="0" ee-list-name="{{::eeListName}}"><span ng-bind-html="::parentTraclusion"></span></listing></div>'),
    e.put("/views/catalog/product/view/reviews.html", '<p ng-if="!reviewsModel.loaded">Loading...</p><div ng-if="reviewsModel.loaded"><div class="b-col-grey" ng-class="::{\'b-b m-b p-b\': !$last}" ng-repeat="review in ::reviewsModel.collection track by review.id"><p class="fs-4"><rating class="inline-block m-r col-11" class-empty="icon-star-empty" class-half="icon-star-half" class-full="icon-star-full" rate="::(review.rating || 0) / 20" max="5"></rating><span class="fs-4" ng-bind="::review.date | formatdate"></span><span class="fs-4">, by</span> <span class="fs-4" ng-bind="::review.author"></span></p><p class="m-t-2 p2" ng-bind="::review.content"></p></div></div>'),
    e.put("/views/catalog/product/view/share-by-email-form.html", '<div class="p-a-6 p-l-4-s p-r-4-s p-t-8-s pos-relative"><div class="pos-absolute right-0 top-0"><div class="icon-close bg-col-17 cursor-pointer p-a" ng-click="close()"></div></div><h6 class="h3 m-t-2 m-b center">Share with a friend</h6><form ng-submit="submit()" name="form" novalidate><meta ng-init="setForm(form)"><input-wrap class="m-t m-b-1 block" name="sender_name" label="Your name" required="true" form="form"><input class="input" type="text" name="sender_name" ng-model="data.sender_name" required></input-wrap><input-wrap class="m-t m-b-1 block" name="sender_email" label="Your email" required="true" form="form"><input class="input" type="text" name="sender_email" ng-model="data.sender_email" i required></input-wrap><input-wrap class="m-t m-b-1 block" name="friend_name" label="Friend\'s name" required="true" form="form"><input class="input" type="text" name="friend_name" ng-model="data.friend_name" required></input-wrap><input-wrap class="m-t m-b-1 block" name="friend_email" label="Friend\'s email" required="true" form="form"><input class="input" type="text" name="friend_email" ng-model="data.friend_email" required></input-wrap><checkbox name="newsletter" ng-if=":: !alreadySubscribed" class="label m-t" model="data" var-name="newsletter">Sign up to our newsletter</checkbox><label class="label m-t m-b-1 is-required">Personal message</label> <textarea class="textarea" ng-model="data.message" maxlength="1000" name="message" required></textarea><p field-notice="message" form="form"></p><div class="m-t-2"><action class="m-t-2 p-l-8 p-r-8" busy="form.busy" ng-click="submit()">Send</action><result class="block" code="result" success="Thank you, your message has been sent!"></result></div></form></div>'),
    e.put("/views/catalog/product/view/share-by-email.html", '<span class="cursor-pointer icon-mail inline-block fs-7 m-r-1 pos-relative top-2px" ng-click="vm.showDialog()"></span>'),
    e.put("/views/catalog/product/view/wishlist-button.html", '<action class="button-inline underline" busy="busyModel.busy" code="result" ng-click="toggleWishlist()"><span class="fs-4" ng-bind="buttonCopy"></span></action>'),
    e.put("/views/checkout/form/address/body.html", '<div ng-if="addresses.length || (type == \'billing\')"><radio ng-repeat="item in addresses" model="data.customer_address_id" value=":: item.id" class="label" ng-class="::{\'m-t-0\':$first && (type != \'billing\')}">{{:: item | onelineAddress}}</radio><radio model="data.customer_address_id" value="0" class="label">Other Address</radio></div><div ng-if="!data.customer_address_id || !addresses.length && type != \'billing\'" tco-address-form address="data" form="form"></div>'),
    e.put("/views/checkout/form/pca/pca-autocomplete.html", '<div class="w-12 p-r-0-s m-b-4-s pos-relative" off-click="vm.close()"><input-wrap label="Search for your address" form="addressForm" name="query"><input class="input input--secondary pos-relative z-2 bg-col-w" type="text" name="query" autocomplete="nope" placeholder="Start typing your address or postcode" ng-model="vm.query" ng-change="vm.searchDebounced()"><div class="pos-relative z-1"><div class="pos-absolute top--4 right-0 left-0"><div class="hide-up-container"><div class="ng-hide-animate ng-hide hide-up pca-dropdown-animate b-radius-b bg-col-w b-a b-t-0 b-col-secondary p-a-1 p-t-5" ng-show="vm.hints.length"><div class="pca-dropdown p-a-1"><div class="w-12 cursor-pointer p-t-2 p-b-2 b-b b-col-secondary" ng-repeat="hint in vm.hints" ng-class="{\'b-b-0 p-b-0\': $last, \'p-t-0\': $first }" ng-click="vm.select(hint)"><span ng-bind="::hint.Text"></span> <span class="fs-4" ng-bind="::hint.Description"></span></div></div></div></div></div></div></input-wrap><div class="m-t-2" ng-if="!vm.manual"><span class="lh-3 b-b link cursor-pointer" ng-click="vm.manual = true">Enter Address Manually</span></div></div>'),
    e.put("/views/catalog/product/list/item-basket/options.html", '<p ng-repeat="code in configurableAttributes" ng-if="product[code]"><span ng-bind="::code | attributeLabel"></span>: <span ng-bind="product[code] | optionLabel:code"></span></p>')
}
]),
function() {
    function e(e) {
        return e.createFactory("customPost", {
            apiPath: "custom/tco_local/"
        })
    }
    angular.module("tcoStore").factory("customPost", e),
    e.$inject = ["core"]
}(),
function() {
    function e(e) {
        return e.createFactory("seocopy", {
            apiPath: "custom/tco_local/"
        })
    }
    angular.module("tcoStore").factory("seocopy", e),
    e.$inject = ["core"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            if (n.data.logged && t.isTradeStore())
                return !1;
            var i = e.path();
            return i && i.match(/^\/wholesale/)
        }
        var o = {
            isWholesalePageNotLogged: i
        };
        return o
    }
    angular.module("tcoStore").service("wholesale", e),
    e.$inject = ["$location", "tradeStore", "customer"]
}(),
function() {
    function e(e) {
        var t = this;
        t.collection = _.pluck(e.getResource(), "data")
    }
    var t = {
        templateUrl: "/views/blog/navigation.html",
        controller: e,
        controllerAs: "vm"
    };
    angular.module("tcoStore").component("postCategoryNavigation", t),
    e.$inject = ["postCategory"]
}(),
function() {
    function e(e, t, n, i) {
        function o(e, t, n, i) {
            return a(!1, e, t, n, i)
        }
        function s(e, t, n, i) {
            return a(!0, e, t, n, i)
        }
        function a(t, n, o, s, a) {
            var c = {
                products: r(o)
            };
            return i.send(n, {
                path: t ? "basket/probe" : "basket/add",
                data: c
            }, function(n) {
                return s && (n = s(n)),
                t || e.$broadcast("basket.add.success", {
                    request: c,
                    response: n
                }),
                n
            }, a)
        }
        function r(e) {
            switch (typeof e) {
            case "number":
                return [{
                    id: e,
                    qty: 1
                }];
            case "string":
                return r(parseInt(e, 10));
            case "object":
                return void 0 !== e.length ? e : [e]
            }
            return e
        }
        return {
            add: o,
            probe: s
        }
    }
    angular.module("tcoStore").service("basket", e),
    e.$inject = ["$rootScope", "customer", "http", "request"]
}(),
function() {
    function e(e, t) {
        function n() {
            e.$on("upsell.selected", function(e, t) {
                i.upsellId = t
            })
        }
        var i = this;
        i.$onInit = n,
        i.upsellId
    }
    window.tcoStore.component("extendedBuyButton", {
        templateUrl: "/views/catalog/product/view/extended-buybutton.html",
        transclude: !0,
        bindings: {
            productId: "<"
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["$scope", "product"]
}(),
angular.module("tcoStore").controller("LocalCheckoutButtonController", LocalCheckoutButtonController),
LocalCheckoutButtonController.$inject = ["$scope", "website", "customer", "product", "stock", "tradeStore"],
function() {
    function e(e, t) {
        e.$on("checkout2stepChange", function(n, i, o) {
            function s() {
                var t = document.getElementById("checkout-step-" + i);
                if (t) {
                    var n = document.getElementById("page-header").getBoundingClientRect().height
                      , o = document.getElementById("app").getBoundingClientRect().top;
                    e.scrollTo(t, {
                        offset: 5 + n - (o + document.scrollingElement.scrollTop)
                    })
                }
            }
            i && (t(s, 100),
            t(s, 800))
        })
    }
    mainApp.run(e),
    e.$inject = ["$rootScope", "$timeout"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            return _.findWhere(e.currency.list, {
                code: t.getCurrency()
            })
        }
        function o(e, t) {
            if (!_.isNumber(e))
                return void 0;
            var n = i()
              , o = n ? e * n.rate : e
              , s = 0 > o ? -1 : 1;
            o = Math.abs(o),
            void 0 === t && (t = c.precission),
            _.isString(t) && "auto" == t && (t = o % 1 > 0 ? 2 : 0),
            o = Math.round(100 * o) / 100;
            var a = Math.floor(o)
              , r = (o - a).toFixed(t).substr(2);
            return c.thousandSeparator && (a = ("" + floorValue).replace(/\B(?=(\d{3})+(?!\d))/g, c.thousandSeparator)),
            {
                value: s * a,
                cent: r,
                precission: t,
                symbol: n.symbol
            }
        }
        function s(e, t) {
            var n = o(e, t);
            return n ? (n.value < 0 ? "-" : "") + n.symbol + Math.abs(n.value) + (n.precission ? c.decimalSeparator + n.cent : "") : void 0
        }
        function a(e, t) {
            var n = o(e, t);
            if (!n)
                return void 0;
            var i = '<span class="price-symbol">' + n.symbol + '</span><span class="price-value">' + Math.abs(n.value) + "</span>";
            return 0 > e && (i = "-" + i),
            n.precission && (i += '<span class="price-separator">' + c.decimalSeparator + '</span><span class="price-cent">' + n.cent + "</span>"),
            i
        }
        function r(e, n) {
            var i = t.data.group_id
              , o = n ? "org_price" : "price"
              , s = e["group_" + o] && e["group_" + o][i];
            return 0 === s ? s : s || e[o]
        }
        n && !n.price && (n.price = {});
        var c = _.defaults(n.price, {
            precission: "auto",
            thousandSeparator: "",
            decimalSeparator: 1.1.toFixed(1).replace(/1/g, ""),
            useHtml: !1
        });
        return {
            config: c,
            getCurrency: i,
            toJson: o,
            toString: c.useHtml ? a : s,
            toPlainString: s,
            toHtmlString: a,
            getProductPrice: r
        }
    }
    angular.module("tcoStore").service("price", e),
    e.$inject = ["website", "customer", "localConfig"]
}(),
angular.module("tcoStore").run(["noticeText", "ngDialog", "browser", "$localStorage", "website", "$rootScope", "$timeout", "accountNavigation", function(e, t, n, i, o, s, a, r) {
    window.alert = function(e) {
        t.open({
            template: '<div class="p-t-8 p-l p-r p-b-8 center"><p class="fs-7">' + e + '</p><p class="fs-2"><span class="button button--primary m-t-8" ng-click="closeThisDialog()">OK</span></p></div>',
            plain: !0,
            className: "alert"
        })
    }
    ,
    1 != o.store && (r.push({
        urlkey: "trade-information",
        label: "Trade Information",
        title: "Trade Information",
        page: "/trade-information",
        order: 60
    }),
    r.push({
        urlkey: "product-catalogue",
        label: "Trade Product Catalogue",
        page: "/product-catalogue",
        order: 90
    }))
}
]),
angular.module("tcoStore").constant("localMetaData", []),
angular.module("tcoStore").constant("localConfig", {
    searchHint: !1,
    loginOnCheckout: !0,
    doNotSaveSearch: !0,
    account: {
        afterLogoutPath: "/"
    },
    enableWebsocket: !1,
    useCoreBreakpoints: !0,
    defaultPricePrecission: 2,
    contentViewDelay: 2e3,
    checkoutSteps: ["account", "delivery", "deliverymethod", "billing", "payment"],
    checkoutAutoSaveWatches: ["data.shipping.method", "data.address.shipping.country_id", "data.address.shipping.customer_address_id", "data.address.shipping.postcode"]
}),
function() {
    function e(e, t, n) {
        n.setUpRoutingTable(e, t),
        e.when("/_style-guide", {
            templateUrl: "/views/content/style-guide.html",
            controller: ["$location", "config", function(e, t) {
                t.isDeveloper ? alert("Example style guide") : (alert("Developer mode not enabled"),
                e.url("/"))
            }
            ]
        })
    }
    angular.module("tcoStore").config(e),
    e.$inject = ["$routeProvider", "$locationProvider", "tcoStoreRoutesProvider"]
}(),
function() {
    function e() {
        function e() {
            (!n.maxQty || n.model < n.maxQty) && n.model++
        }
        function t() {
            n.model > n.minQty && n.model--
        }
        var n = this;
        _.isUndefined(n.minQty) && (n.minQty = 1),
        n.model || (n.model = n.minQty),
        n.oneMore = e,
        n.oneLess = t
    }
    angular.module("tcoStore").component("qty", {
        controller: e,
        controllerAs: "vm",
        template: '<div class="flex flex-middle flex-justify-center qty-selector">                        <i ng-click="vm.oneLess()" class="cursor-pointer icon-minus m-r-1"></i>                        <input class="input-small center w-3 p-l-0 p-t-1 no-spinner" type="number" ng-model="vm.model" ng-pattern="/^[0-9]{1,7}$/">                        <i ng-click="vm.oneMore()" class="cursor-pointer icon-plus m-l-1"></i>          </div>',
        bindings: {
            model: "=",
            minQty: "<",
            maxQty: "<"
        }
    }),
    e.$inject = []
}(),
function() {
    function e(e) {
        function t(t, n, i) {
            t.$on("$routeChangeSuccess", function() {
                0 == e.path().indexOf(i.activeMenuItem) ? n.addClass("active-item") : n.removeClass("active-item")
            })
        }
        return {
            link: t,
            restrict: "A"
        }
    }
    angular.module("tcoStore").directive("activeMenuItem", e),
    e.$inject = ["$location"]
}(),
function() {
    var e = ["$rootScope", "$location", function(e, t) {
        function n() {
            try {
                i.condition = t.path().match(/\/wholesale(\/.*)?$/)
            } catch (e) {
                i.condition = !1
            }
        }
        var i = this;
        e.$on("$routeChangeSuccess", n),
        n()
    }
    ];
    tco.createIfDirective("ifInWholesale", e, !1),
    tco.createIfDirective("ifNotInWholesale", e, !0)
}(),
angular.module("tcoStore").controller("LocalOffCanvasController", LocalOffCanvasController),
LocalOffCanvasController.$inject = ["$scope", "website", "customer", "wholesale"],
angular.module("tcoStore").controller("LocalPageHeaderController", LocalPageHeaderController),
LocalPageHeaderController.$inject = ["$scope", "wholesale"],
function() {
    var e = ["tradeStore", function(e) {
        this.condition = e.isTradeStore()
    }
    ];
    tco.createIfDirective("ifTradeStore", e, !1),
    tco.createIfDirective("ifNotTradeStore", e, !0)
}(),
angular.module("mainApp").run(["$rootScope", "tradeStore", "customer", "$location", "$route", function(e, t, n, i, o) {
    function s(e) {
        if (n.data.logged)
            a && (i.url(a),
            a = void 0);
        else {
            var t = -1 !== c.indexOf(i.path());
            e && !t && (e.preventDefault(),
            a = i.path()),
            t || (i.url(r),
            o.reload())
        }
    }
    if (t.isTradeStore()) {
        e.$on("customerDataUpdate", s),
        e.$on("$locationChangeStart", s);
        var a, r = "/account/login", c = [r, "/account/resetpassword"]
    }
}
]),
window.angular.module("tcoStore").filter("isValidTradeStoreProduct", ["tradeStore", function(e) {
    return function(t, n, i) {
        return !e.isTradeStore() || _.isUndefined(t.min_trade_qty) ? !0 : i ? !1 : !_.isUndefined(n) && t.min_trade_qty <= n
    }
}
]),
function() {
    function e(e, t, n, i, o, s, a, r, c, l, d) {
        function u() {
            t.loaded && m()
        }
        function p() {
            m(),
            y()
        }
        function m() {
            t.data.logged ? n.isTradeStore() && g() : e.url("/account/login"),
            C.products = []
        }
        function f(e) {
            return e && e.min_trade_qty && C.tradeOrderModel && C.tradeOrderModel[e.id] ? e.min_trade_qty && C.tradeOrderModel[e.id].qty && e.min_trade_qty > C.tradeOrderModel[e.id].qty : !1
        }
        function g() {
            var e = i.load(C.categoryId, {
                verbosity: 2
            });
            e.success(function() {
                var e = i.get(C.categoryId).data.products;
                C.loadingProductStatus.busy = !0,
                o.loadCollection(_.pluck(e, "id"), {
                    verbosity: 3
                }).success(function() {
                    C.loadingProductStatus.busy = !1;
                    var t = o.getModelsData(e)
                      , n = o.getModelsData(_.unique(_.flatten(_.map(t, function(e) {
                        try {
                            return e.options.configurable.children
                        } catch (t) {}
                    }))))
                      , i = _.groupBy(n, "parent");
                    n = r.filterOutOfStock(n),
                    M = _.union(t, n);
                    var s = _.groupBy(n, "parent")
                      , a = {};
                    _.each(t, function(e) {
                        (!i[e.id] || s[e.id]) && (a[e.id] = {
                            parent: e,
                            children: s[e.id]
                        })
                    }),
                    C.allProducts = M,
                    C.allProductsGrouped = a,
                    C.allProductsArray = _.values(a)
                }).error(function() {
                    C.loadingProductStatus = !1,
                    C.loadingProductStatus.result = "ERROR"
                })
            })
        }
        function v() {
            C.limit = D;
            var e = M;
            if (C.filter) {
                var t = s("filter")(e, {
                    name: C.filter
                })
                  , n = s("filter")(e, {
                    sku: C.filter
                });
                C.allProducts = _.union(t, n)
            } else
                C.allProducts = M
        }
        function h(e) {
            C.tradeOrderModel[e.id] || (C.tradeOrderModel[e.id] = {
                min: e.min_trade_qty
            }),
            C.tradeOrderModel[e.id].qty = C.tradeOrderModel[e.id].qty ? C.tradeOrderModel[e.id].qty + 1 : 1,
            w(e)
        }
        function b(e) {
            C.tradeOrderModel[e.id] && (C.tradeOrderModel[e.id].qty = C.tradeOrderModel[e.id].qty > 1 ? C.tradeOrderModel[e.id].qty - 1 : 0,
            w(e))
        }
        function w(e) {
            C.probeActionStatus.busy = !0,
            C.tradeOrderModel[e.id].total = c.getProductPrice(e) * C.tradeOrderModel[e.id].qty;
            var t = e.parent;
            if (t && C.allProductsGrouped[t] && C.isConfigurable(C.allProductsGrouped[t].parent)) {
                var n = 0
                  , i = 0;
                _.each(C.allProductsGrouped[t].children, function(e) {
                    var t = C.tradeOrderModel[e.id];
                    t && (n += t.qty,
                    i += t.total)
                });
                var o = C.allProductsGrouped[t];
                n ? (o.childrenQty = n,
                o.childrenTotal = i) : (o.childrenQty = null,
                o.childrenTotal = null)
            }
            C.selectedQty = 0,
            C.currentPrice = 0,
            C.errors = 0,
            _.mapObject(C.tradeOrderModel, function(e, t) {
                0 === C.tradeOrderModel[t].qty || null == C.tradeOrderModel[t].qty ? delete C.tradeOrderModel[t] : (C.selectedQty += C.tradeOrderModel[t].qty,
                C.currentPrice += C.tradeOrderModel[t].total,
                C.tradeOrderModel[t].qty < C.tradeOrderModel[t].min && C.errors++)
            }),
            I(!0)
        }
        function y() {
            if (!_.isEmpty(C.tradeOrderModel)) {
                var e = _.indexBy(C.allProducts, "id")
                  , t = {}
                  , n = {};
                _.each(C.tradeOrderModel, function(i, o) {
                    var s = e[o];
                    if (s) {
                        var a = s.parent;
                        n[o] = {
                            qty: i.qty,
                            total: c.getProductPrice(s) * i.qty
                        },
                        a && e[a] && C.isConfigurable(e[a]) && (t[a] || (t[a] = 0),
                        t[a] += c.getProductPrice(s) * i.qty)
                    }
                }),
                _.each(t, function(e, t) {
                    C.allProductsGrouped[t].childrenTotal = e
                }),
                C.tradeOrderModel = n
            }
        }
        function k(n) {
            if (!C.buyActionStatus.busy && (C.selectedQty || n)) {
                var i = [];
                _.each(C.tradeOrderModel, function(e, t) {
                    i.push({
                        id: t,
                        qty: e.qty
                    })
                }),
                n ? l.probe(C.probeActionStatus, i, function(e) {
                    e && e.totals && (C.totals = {
                        subtotal: e.totals.subtotal,
                        incTax: e.totals.subtotal + e.totals.tax
                    })
                }) : l.add(C.buyActionStatus, i, function(n) {
                    t.processSuccess(n),
                    e.url(d.getStandardRoutePath("/basket"))
                })
            }
        }
        function S() {
            !C.filter && C.limit < C.allProductsArray.length ? C.limit += D : C.limit < C.allProducts.length && (C.limit += D)
        }
        function $(e) {
            C.openChildren === e ? C.openChildren = !1 : C.openChildren = e
        }
        function x(e) {
            return C.openChildren === e
        }
        var C = this
          , D = 20
          , M = [];
        C.filter = "",
        C.limit = 20,
        C.tradeOrderModel = {},
        C.buyActionStatus = {
            busy: !1,
            result: null
        },
        C.probeActionStatus = {
            busy: !1,
            result: null
        },
        C.loadingProductStatus = {
            busy: !1,
            result: null
        },
        C.$onInit = u,
        C.isInvalid = f,
        C.searchProducts = v,
        C.updateTotal = w,
        C.addToBasket = k,
        C.remove = b,
        C.updateList = S,
        C.add = h,
        C.switchToTradeStore = n.switchToTradeStore,
        C.isConfigurable = o.isConfigurable,
        C.openChildren = !1,
        C.open = $,
        C.ifOpen = x;
        var I = _.debounce(k, 1e3);
        a.$on("customerDataUpdate", p)
    }
    angular.module("tcoStore").component("tradeStoreCatalogue", {
        controller: e,
        templateUrl: "/views/content/components/trade-store-catalogue.html",
        controllerAs: "vm",
        bindings: {
            component: "<",
            page: "<",
            categoryId: "<"
        }
    }),
    e.$inject = ["$location", "customer", "tradeStore", "category", "product", "$filter", "$rootScope", "stock", "price", "basket", "tcoStoreRoutes"]
}(),
function() {
    function e(e, t) {
        function n() {
            try {
                return e.store === r
            } catch (t) {
                return !1
            }
        }
        function i(n, i) {
            var o = _.findWhere(e.stores, {
                id: n
            });
            o && (void 0 === i && (i = t.path()),
            window.location.href = o.url + i)
        }
        function o(e) {
            i(r, e)
        }
        function s(e) {
            i(a, e)
        }
        var a = 1
          , r = 2
          , c = {
            isTradeStore: n,
            switchToTradeStore: o,
            switchToRetailStore: s
        };
        return c
    }
    angular.module("mainApp").service("tradeStore", e),
    e.$inject = ["website", "$location"]
}(),
function() {
    function e(e, t, n, i) {
        function o() {
            s.product && n.html(t.toHtmlString(t.getProductPrice(s.product), s.precission))
        }
        var s = this;
        s.$onChanges = o,
        e.$on("customerCurrencyChange", o),
        e.$on("customerDataUpdate", o)
    }
    angular.module("tcoStore").component("productPrice", {
        controller: e,
        controllerAs: "vm",
        bindings: {
            product: "<",
            precission: "<"
        }
    }),
    e.$inject = ["$scope", "price", "$element", "customer"]
}(),
function() {
    function e(e, t) {
        function n() {
            return e.removeAddress(i.status, {
                id: i.model.id
            })
        }
        var i = this;
        i.remove = n,
        i.status = {}
    }
    angular.module("tcoStore").component("addressWrap", {
        templateUrl: "/ui/address-wrap.html",
        controller: e,
        controllerAs: "vm",
        bindings: {
            custom: "<",
            model: "<"
        }
    }),
    e.$inject = ["customer", "request"]
}();
var groupId = 4
  , storeId = 1;
window.angular.module("tcoStore").filter("customerDiscount", ["customer", "website", function(e, t) {
    return function(n, i) {
        return n ? i || e.data.group_id != groupId || t.store != storeId ? n : .7 * n : n
    }
}
]),
function() {
    function e() {
        function e(e) {
            return _.isNumber(e) ? 0 > e ? "Weekdays" : t[e] : e
        }
        var t = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        return e
    }
    angular.module("tcoStore").filter("daysOfWeek", e),
    e.$inject = []
}(),
angular.module("tcoStore").component("heading", {
    template: ['<div ng-switch="$ctrl.size">', '<h1 ng-switch-when="h1"><ng-transclude></ng-transclude></h1>', '<h2 ng-switch-when="h2"><ng-transclude></ng-transclude></h2>', '<h3 ng-switch-when="h3"><ng-transclude></ng-transclude></h3>', '<h4 ng-switch-when="h4"><ng-transclude></ng-transclude></h4>', '<h5 ng-switch-when="h5"><ng-transclude></ng-transclude></h5>', '<h6 ng-switch-when="h6"><ng-transclude></ng-transclude></h6>', "</div>"].join(""),
    transclude: !0,
    bindings: {
        size: "<"
    }
}),
function() {
    tcoStore.component("inputWrap", {
        templateUrl: "/ui/input-wrap.html",
        transclude: !0,
        bindings: {
            label: "@",
            forceLabel: "=?",
            name: "@",
            required: "=?",
            form: "=?"
        }
    })
}(),
function() {
    function e(e) {
        function t(t) {
            return e.data.logged && t && _.isObject(t) && t.customer_address_id > 0 ? _.findWhere(e.address.list, {
                id: t.customer_address_id
            }) || t : t
        }
        return t
    }
    tcoStore.filter("normalizeAddress", e),
    e.$inject = ["customer"]
}(),
angular.module("tcoStore").directive("optHref", ["config", function(e) {
    var t = e.base.replace(/\/$/, "");
    return {
        link: function(e, n, i) {
            var o;
            i.$observe("optHref", function(e) {
                var s = n[0];
                e ? (o || (o = document.createElement("a"),
                i.optHrefClass && angular.element(o).addClass(i.optHrefClass),
                s.parentNode.replaceChild(o, s),
                o.appendChild(s)),
                o.setAttribute("href", !e || e.match(/^http/i) ? e : t + e),
                i.target && o.setAttribute("target", i.target)) : o && (o.parentNode.replaceChild(s, o),
                o = null)
            })
        }
    }
}
]),
window.mainApp.factory("postSocial", ["core", function(e) {
    var t = e.createFactory("postSocial", {
        apiPath: "custom/tco_shopsocial/"
    });
    return t
}
]),
function() {
    function e(e) {
        function t(e) {
            var t = {
                info: ['<div style="overflow: auto; padding: 0.4em; text-align: center; line-height: 1.2em;">', '<p style="font-size: 1.5em;">' + e.name + "</p>", '<p style="margin-top: 0.5em;">' + e.address + "</p>", "</div>"].join(""),
                title: e.name,
                lat: e.lat,
                lon: e.lon,
                animation: null
            };
            o.mapOptions = {
                center: {
                    lat: parseFloat(t.lat, 10),
                    lon: parseFloat(t.lon, 10)
                },
                zoom: o.zoom || 10,
                styles: [{
                    featureType: "all",
                    elementType: "all",
                    stylers: [{
                        lightness: "12"
                    }, {
                        saturation: "0"
                    }, {
                        weight: "1.00"
                    }, {
                        gamma: "1.00"
                    }]
                }, {
                    featureType: "landscape",
                    elementType: "geometry",
                    stylers: [{
                        lightness: "30"
                    }, {
                        gamma: "0.9"
                    }, {
                        weight: "1.00"
                    }]
                }, {
                    featureType: "landscape",
                    elementType: "labels.text",
                    stylers: [{
                        visibility: "on"
                    }]
                }, {
                    featureType: "landscape.natural",
                    elementType: "geometry",
                    stylers: [{
                        saturation: "-41"
                    }, {
                        lightness: "25"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "labels",
                    stylers: [{
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "labels.text",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "labels.icon",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "poi.attraction",
                    elementType: "all",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "poi.attraction",
                    elementType: "labels",
                    stylers: [{
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "poi.business",
                    elementType: "all",
                    stylers: [{
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "poi.business",
                    elementType: "labels",
                    stylers: [{
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "poi.business",
                    elementType: "labels.text",
                    stylers: [{
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "poi.business",
                    elementType: "labels.icon",
                    stylers: [{
                        visibility: "off"
                    }, {
                        hue: "#ccff00"
                    }, {
                        saturation: "-77"
                    }, {
                        lightness: "56"
                    }]
                }, {
                    featureType: "poi.government",
                    elementType: "all",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "poi.park",
                    elementType: "geometry",
                    stylers: [{
                        visibility: "on"
                    }, {
                        saturation: "-48"
                    }, {
                        color: "#ceeacc"
                    }, {
                        lightness: "30"
                    }]
                }, {
                    featureType: "poi.place_of_worship",
                    elementType: "all",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "poi.school",
                    elementType: "labels",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "road.highway",
                    elementType: "geometry",
                    stylers: [{
                        lightness: "30"
                    }]
                }, {
                    featureType: "road.highway.controlled_access",
                    elementType: "labels",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "transit",
                    elementType: "all",
                    stylers: [{
                        visibility: "on"
                    }]
                }, {
                    featureType: "water",
                    elementType: "geometry",
                    stylers: [{
                        visibility: "on"
                    }, {
                        lightness: "31"
                    }]
                }]
            },
            o.markers = [t]
        }
        function n() {
            t(o.store)
        }
        function i(e) {
            e.store && t(e.store.currentValue)
        }
        var o = this;
        o.markers = [],
        o.$onInit = n,
        o.$onChanges = i
    }
    tcoStore.component("storeLocatorMap", {
        template: '<google-map options="$ctrl.mapOptions" markers="$ctrl.markers" fit-bounds="false" class="fill"></google-map>',
        bindings: {
            store: "<",
            zoom: "<"
        },
        controller: e
    }),
    e.$inject = ["$filter"]
}(),
window.angular.module("tcoStore").filter("toColorIcon", ["attribute", "$sce", function(e, t) {
    return function(n) {
        var i = e.getByCode("color");
        if (i) {
            var o = e.getOptionLabel(n, "color");
            if (o)
                return t.trustAsHtml('<span class="color-icon" style="background-color:' + o + '" ></span>')
        }
        return void 0
    }
}
]),
function() {
    function e(e) {
        return function(t, n, i) {
            if (i.offsetSectionId) {
                var o = document.getElementById(i.offsetSectionId);
                angular.element(e).bind("scroll", _.throttle(function() {
                    var e = o ? o.offsetTop : 0;
                    n.toggleClass(i.toggleClassOnScroll, this.pageYOffset > e),
                    angular.element(document.body).toggleClass(i.toggleClassOnScroll + "-wrapper", this.pageYOffset > e)
                }, 100)),
                t.$on("$destroy", function() {
                    angular.element(e).unbind("scroll")
                })
            }
        }
    }
    angular.module("tcoStore").directive("toggleClassOnScroll", e),
    e.$inject = ["$window"]
}(),
function() {
    function e(e) {
        function t(t) {
            return t ? e.get("weekdaysOpenCache", t, function() {
                var e = t[0];
                if (-1 == e.dow) {
                    t = _.without(t, e);
                    var n = [{
                        dow: 1,
                        hours: e.hours
                    }, {
                        dow: 2,
                        hours: e.hours
                    }, {
                        dow: 3,
                        hours: e.hours
                    }, {
                        dow: 4,
                        hours: e.hours
                    }, {
                        dow: 5,
                        hours: e.hours
                    }];
                    return _.union(n, t)
                }
                return t
            }) : void 0
        }
        return t
    }
    angular.module("tcoStore").filter("weekdaysOpen", e),
    e.$inject = ["cache"]
}(),
function() {
    function e(e, t) {
        function n(e) {
            i.wpSeoCopyId && t.find({
                id: i.wpSeoCopyId
            }, {
                verbosity: 3
            }).then(function(e) {
                e && e.data && e.data.length && (i.seocopy = _.first(e.data).data)
            })
        }
        var i = this;
        i.$onChanges = n
    }
    tcoStore.component("seocopy", {
        templateUrl: "/views/catalog/category/seocopy.html",
        transclude: !0,
        bindings: {
            wpSeoCopyId: "<"
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["$scope", "seocopy"]
}(),
angular.module("tcoStore").value("accountNavigation", [{
    urlkey: "dashboard",
    label: "Dashboard",
    title: "Hello {{ customer.data.firstname }}",
    order: 0
}, {
    urlkey: "edit",
    label: "Account information",
    title: "Account Information",
    order: 10
}, {
    urlkey: "address-book",
    label: "Address book",
    title: "Address Book",
    order: 20
}, {
    urlkey: "my-orders",
    label: "My orders",
    title: "My Orders",
    order: 30
}, {
    urlkey: "wishlist",
    label: "Wishlist",
    title: "Wishlist",
    order: 50
}, {
    urlkey: "address-edit",
    title: "Address Edit",
    order: 70
}, {
    urlkey: "order",
    title: "Order Details",
    order: 80
}]),
function() {
    function e(e) {
        function t(t, n, i) {
            var o = n[0]
              , s = e.getSize(o, "Width")
              , a = e.getSize(o, "Height");
            o.scrollTop = a / 2,
            o.scrollLeft = s / 2
        }
        return {
            link: t,
            restrict: "A"
        }
    }
    angular.module("tcoStore").directive("centerScroll", e),
    e.$inject = ["tools"]
}(),
function() {
    function e(e) {
        function t(t, n, i) {
            function o(n) {
                return s ? (n.preventDefault(),
                void t.$applyAsync(function() {
                    t.$evalAsync(i.doubleTap, {
                        event: n
                    })
                })) : (s = !0,
                e(function() {
                    s = !1
                }, 300),
                !1)
            }
            var s = !1;
            n.bind("touchstart", o)
        }
        return {
            link: t,
            restrict: "A"
        }
    }
    angular.module("tcoStore").directive("doubleTap", e),
    e.$inject = ["$timeout"]
}(),
function() {
    function e(e) {
        function t() {
            o && o.queue && o.queue.length && (i.notifications = o.queue)
        }
        function n() {
            o.queue = []
        }
        var i = this
          , o = e.getModel("_gift_registry_notifications", {
            queue: []
        }, {
            storage: "static"
        });
        i.notifications = [],
        i.$onInit = t,
        i.$onDestroy = n
    }
    var t = {
        templateUrl: "/views/basket/notifications.html",
        controller: e,
        controllerAs: "vm"
    };
    angular.module("tcoStore").component("basketNotifications", t),
    e.$inject = ["transport"]
}(),
window.angular.module("tcoStore").filter("hideOnSize", ["$rootScope", function(e) {
    return function(t, n) {
        return n ? _.compact(_.map(t, function(t) {
            return !t[n] || t[n] && -1 === t[n].indexOf(e.size) ? t : void 0
        })) : t
    }
}
]),
window.angular.module("tcoStore").filter("hideBanner", ["product", function(e) {
    var t = {};
    return function(n, i) {
        if (n) {
            var o = n.join(",");
            if (t[o] && !i)
                return n;
            if (!t[o]) {
                var s = _.map(n, function(t) {
                    var n = e.get(t);
                    if (n && n.data)
                        return n.data.isBanner ? void 0 : t
                });
                t[o] = _.compact(s)
            }
            return t[o]
        }
    }
}
]),
angular.module("tcoStore").controller("LocalCategoryController", LocalCategoryController),
LocalCategoryController.$inject = ["$scope", "$sessionStorage", "website"],
angular.module("tcoStore").controller("LocalListingController", LocalListingController),
LocalListingController.$inject = ["$scope", "transport", "tools"],
staticBlockComponentFactory("contactInfo", {
    templateUrl: "/views/content/components/contact-info.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("customForms", {
    templateUrl: "/views/content/components/custom-form.html",
    bindings: {
        component: "<",
        page: "<"
    }
}),
staticBlockComponentFactory("faqAccordion", {
    templateUrl: "/views/content/components/faq-accordion.html",
    bindings: {
        component: "<"
    }
}),
carouselComponentFactory("heroImage", {
    templateUrl: "/views/content/components/hero-image.html",
    bindings: {
        frames: "<",
        framesInSlide: "<",
        framesInStep: "<",
        interval: "<",
        pauseOnHover: "@",
        loop: "<",
        fade: "<",
        carouselId: "@",
        component: "<"
    }
}),
staticBlockComponentFactory("hotspots", {
    templateUrl: "/views/content/components/hotspots.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("imageBlock", {
    templateUrl: "/views/content/components/image-block.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("instagramFeed", {
    controller: InstagramFeedController,
    controllerAs: "vm",
    templateUrl: "/views/content/components/instagram-feed.html",
    bindings: {
        component: "<"
    }
}),
InstagramFeedController.$inject = ["postSocial"],
carouselComponentFactory("instagram", {
    templateUrl: "/views/content/components/instagram.html",
    bindings: {
        frames: "<",
        framesInSlide: "<",
        framesInStep: "<",
        interval: "<",
        pauseOnHover: "@",
        loop: "<",
        fade: "<",
        carouselId: "@",
        component: "<"
    }
}),
staticBlockComponentFactory("mosaicHomepage", {
    templateUrl: "/views/content/components/mosaic-homepage.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("mosaic", {
    templateUrl: "/views/content/components/mosaic.html",
    bindings: {
        component: "<"
    }
}),
function() {
    function e() {
        var e = this;
        e.status = {
            finder_visible: !1,
            store_visible: !1
        },
        e.finder = {
            busy: !1
        },
        e.markers = [],
        e.markers = _.map(e.stores, function(e) {
            return {
                lat: e.lat,
                lon: e.lon,
                info: "<b>" + e.name + "</b><br>" + e.address + '<br><a class="col-11" target="_blank" href="https://www.google.com/maps/dir/Current+Location/' + e.lat + "," + e.lon + '">Directions</a>'
            }
        }),
        e.map = {
            center: {
                lat: 51.5069119,
                lon: -.093252
            },
            markers: e.markers,
            zoom: 10,
            streetViewControl: !0
        }
    }
    angular.module("tcoStore").component("ourStores", {
        controller: e,
        templateUrl: "/views/content/components/our-stores.html",
        controllerAs: "vm",
        bindings: {
            component: "<",
            stores: "<"
        }
    }),
    e.$inject = []
}(),
staticBlockComponentFactory("pageContent", {
    templateUrl: "/views/content/components/page-content.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("pageNavigation", {
    templateUrl: "/views/content/components/page-navigation.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("pageTitle", {
    templateUrl: "/views/content/components/page-title.html",
    bindings: {
        component: "<",
        page: "<"
    }
}),
carouselComponentFactory("postsBlockCarousel", {
    templateUrl: "/views/content/components/posts-block-carousel.html",
    bindings: {
        frames: "<",
        framesInSlide: "<",
        framesInStep: "<",
        interval: "<",
        pauseOnHover: "@",
        loop: "<",
        fade: "<",
        carouselId: "@",
        component: "<"
    }
}),
staticBlockComponentFactory("postsBlockPost", {
    templateUrl: "/views/content/components/posts-block-post.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("postsBlock", {
    templateUrl: "/views/content/components/posts-block.html",
    bindings: {
        component: "<"
    },
    controller: PostsBlockController
}),
PostsBlockController.$inject = ["website", "customer", "post"],
angular.module("tcoStore").component("selectedProducts", {
    controller: selectedProductsController,
    templateUrl: "/views/content/components/selected-products.html",
    controllerAs: "vm",
    bindings: {
        component: "<"
    }
}),
selectedProductsController.$inject = ["website", "customer", "product", "post"],
staticBlockComponentFactory("seoContent", {
    templateUrl: "/views/content/components/seo-content.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("deliveryTable", {
    templateUrl: "/views/content/components/delivery_table.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("textBlock", {
    templateUrl: "/views/content/components/text-block.html",
    bindings: {
        component: "<"
    }
}),
staticBlockComponentFactory("textMedia", {
    templateUrl: "/views/content/components/text-media.html",
    bindings: {
        component: "<"
    }
}),
carouselComponentFactory("visitStores", {
    templateUrl: "/views/content/components/visit-stores.html",
    bindings: {
        frames: "<",
        framesInSlide: "<",
        framesInStep: "<",
        interval: "<",
        pauseOnHover: "@",
        loop: "<",
        fade: "<",
        carouselId: "@",
        component: "<"
    }
}),
function() {
    function e(e, t, n, i) {
        function o() {
            if (d.defaultPackage = _.find(d.config["package"].types, {}).value,
            d.defaultDeposit = d.config.deposit["default"],
            d.checkoutMode) {
                var e = i.$root.$on("checkoutSubmitBefore", c);
                i.$on("$destroy", function() {
                    e()
                })
            }
        }
        function s() {
            if (d.checkoutMode && (d.price = t.checkout.data.totals.grand_total),
            d.active = d.price && d.price >= d.config.financeAmount.minimum,
            d.active) {
                var e = d.config.isTest ? "https://test.dekopay.com" : "https://secure.dekopay.com"
                  , i = n.loadJs(e + "/js_api/FinanceDetails.js.php?api_key=" + d.config.apiKey);
                i ? i.onload = function() {
                    a(),
                    d.cheapestOption = r()
                }
                : (a(),
                d.cheapestOption = r())
            }
        }
        function a() {
            return window.FinanceDetails ? (d["package"] && d.deposit && (d.data = new window.FinanceDetails(d["package"],d.price,d.deposit),
            d.wrongAmount = !l()),
            d.paymentData && (d.paymentData.paylater_percentage = d.deposit,
            d.paymentData.paylater_package = d["package"]),
            void (d.defaultMonthlyInstalment = new window.FinanceDetails(d.defaultPackage,d.price,d.defaultDeposit).m_inst)) : void dev.log("Missing window.FinanceDetails pay4later, wrong API key?")
        }
        function r() {
            if (e.pay4later && e.pay4later["package"] && e.pay4later.deposit && e.pay4later["package"].types && e.pay4later.deposit.types) {
                var t = e.pay4later.deposit.types
                  , n = _.max(t)
                  , i = _.max(e.pay4later["package"].types, function(e) {
                    return e && e.value ? parseInt(e.value.substring(_.findIndex(e.value.split(""), function(e) {
                        return parseInt(e)
                    }))) : void 0
                });
                if (i) {
                    var o = new window.FinanceDetails(i.value,d.price,n);
                    return o && o.m_inst
                }
            }
            return void 0
        }
        function c(e, t, n) {
            l() || (n["continue"] = !1)
        }
        function l() {
            return d.data && d.data.l_amount >= d.config.financeAmount.minimum && d.data.l_amount <= d.config.financeAmount.maximum
        }
        var d = this;
        d.website = e,
        d.customer = t,
        d.config = e.pay4later,
        d.calculate = a,
        d.$onInit = o,
        d.$onChanges = s
    }
    tcoStore.component("pay4later", {
        templateUrl: "/views/catalog/product/view/pay4later.html",
        bindings: {
            price: "<productPrice",
            checkoutMode: "<",
            paymentData: "="
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["website", "customer", "request", "$scope"]
}(),
carouselComponentFactory("productCarousel", {
    templateUrl: "/views/catalog/product/view/carousel.html"
}),
function() {
    function e(e, t) {
        function n() {
            e.$root.$on("resize", i),
            l.selectedItem = _.find(l.options, function(e) {
                return e.code === l.sortModel.code && e.reverse === !!l.sortModel.reverse
            }),
            i()
        }
        function i() {
            l.mobile = e.$root.isM || e.$root.isS || e.$root.isTouchy,
            l.selectedItem || (l.selectedItem = l.mobile ? l.options[0] : null)
        }
        function o() {
            l.isOpen = !l.isOpen
        }
        function s() {
            l.isOpen = !1
        }
        function a(e) {
            l.selectedItem = e,
            r()
        }
        function r() {
            l.sortModel.code = l.selectedItem.code,
            l.sortModel.reverse = l.selectedItem.reverse
        }
        function c() {
            delete l.selectedItem,
            l.sortModel.code = ["position"],
            l.sortModel.reverse = !1,
            e.$broadcast(l.modelsNamePrependix + "-listing-updated")
        }
        var l = this;
        l.modelsNamePrependix = _.isUndefined(l.modelsNamePrependix) ? "product-list" : l.modelsNamePrependix,
        l.options = [{
            code: "price",
            reverse: !0,
            label: "Price High"
        }, {
            code: "price",
            reverse: !1,
            label: "Price Low"
        }, {
            code: "created_at",
            reverse: !0,
            label: "Newest In"
        }, {
            code: "name",
            reverse: !1,
            label: "Name"
        }],
        l.sortModel = t.getModel(l.modelsNamePrependix + "-sort"),
        l.isOpen = !1,
        l.toggle = o,
        l.close = s,
        l.selectItem = a,
        l.update = r,
        l.reset = c,
        n()
    }
    window.tcoStore.component("productListSort", {
        templateUrl: "/views/catalog/product/list/sort.html",
        transclude: !0,
        bindings: {
            modelsNamePrependix: "@"
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["$scope", "transport"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            r.isOpen = !r.isOpen
        }
        function o() {
            r.isOpen = !1
        }
        function s() {
            r.product && r.product.link ? t.loadCollection(r.product.link.related, {
                verbosity: 2
            }).then(function() {
                r.products = t.getModelsData(r.product.link.related)
            }) : r.products = []
        }
        function a(e) {
            r.selectedItem = e,
            n.$broadcast("upsell.selected", r.selectedItem.id),
            r.close()
        }
        var r = this;
        r.isOpen = !1,
        r.toggle = i,
        r.close = o,
        r.selectItem = a,
        r.$onChanges = s
    }
    window.tcoStore.component("productPageRelated", {
        templateUrl: "/views/catalog/product/view/product-page-related.html",
        transclude: !0,
        bindings: {
            product: "<"
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["$scope", "product", "$rootScope"]
}(),
function() {
    function e(e, t, n) {
        function i() {
            n.open({
                templateUrl: "/views/catalog/product/view/share-by-email-form.html",
                className: "share-by-email",
                showClose: !1,
                controller: ["$scope", "formHelper", "http", "customer", "ngDialog", function(e, t, n, i, s) {
                    function a() {
                        e.data = {
                            newsletter: 1,
                            product: o.product
                        },
                        i.data.logged && (e.data.sender_name = i.data.firstname,
                        e.data.sender_email = i.data.email,
                        e.alreadySubscribed = i.data.subscribed)
                    }
                    a(),
                    e.close = function() {
                        s.close()
                    }
                    ,
                    e.submit = function() {
                        t.init(e, "data", "result"),
                        t.submit(e, e.form, function(e) {
                            return n.post("customer/share/product", e)
                        }, {
                            success: a,
                            scrollToError: !1
                        })
                    }
                    ,
                    e.setForm = function(t) {
                        e.form = t
                    }
                }
                ]
            })
        }
        var o = this;
        o.website = e,
        o.customer = t,
        o.showDialog = i
    }
    tcoStore.component("shareByEmail", {
        templateUrl: "/views/catalog/product/view/share-by-email.html",
        bindings: {
            product: "<"
        },
        controller: e,
        controllerAs: "vm"
    }),
    e.$inject = ["website", "customer", "ngDialog"]
}();
//# sourceMappingURL=../srcmaps/app.min.js.map
